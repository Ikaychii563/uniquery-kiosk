/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/chat";
exports.ids = ["pages/chat"];
exports.modules = {

/***/ "(pages-dir-node)/./firebase/clientApp.js":
/*!*******************************!*\
  !*** ./firebase/clientApp.js ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auth: () => (/* binding */ auth),\n/* harmony export */   db: () => (/* binding */ db)\n/* harmony export */ });\n/* harmony import */ var firebase_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/app */ \"firebase/app\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/auth */ \"firebase/auth\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_app__WEBPACK_IMPORTED_MODULE_0__, firebase_auth__WEBPACK_IMPORTED_MODULE_1__, firebase_firestore__WEBPACK_IMPORTED_MODULE_2__]);\n([firebase_app__WEBPACK_IMPORTED_MODULE_0__, firebase_auth__WEBPACK_IMPORTED_MODULE_1__, firebase_firestore__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyArvT2SfDLJTTkZdeAYrR7nXkrFL-gqJhM\",\n    authDomain: \"tupaichatbot.firebaseapp.com\",\n    projectId: \"tupaichatbot\",\n    storageBucket: \"tupaichatbot.firebasestorage.app\",\n    messagingSenderId: \"414193187817\",\n    appId: \"1:414193187817:web:95988b9ae18a2081536978\",\n    measurementId: \"G-PYBPYG4D8R\"\n};\nconst app = (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.initializeApp)(firebaseConfig);\n// debug: log config check (remove later)\nif (false) {}\nconst auth = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_1__.getAuth)(app);\nconst db = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getFirestore)(app);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2ZpcmViYXNlL2NsaWVudEFwcC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUE2QztBQUNMO0FBQ1U7QUFFbEQsTUFBTUcsaUJBQWlCO0lBQ3JCQyxRQUFRO0lBQ1JDLFlBQVk7SUFDWkMsV0FBVztJQUNYQyxlQUFlO0lBQ2ZDLG1CQUFtQjtJQUNuQkMsT0FBTztJQUNQQyxlQUFlO0FBQ2pCO0FBRUEsTUFBTUMsTUFBTVgsMkRBQWFBLENBQUNHO0FBRTFCLHlDQUF5QztBQUN6QyxJQUFJLEtBQTZCLEVBQUUsRUFFbEM7QUFFTSxNQUFNWSxPQUFPZCxzREFBT0EsQ0FBQ1UsS0FBSztBQUMxQixNQUFNSyxLQUFLZCxnRUFBWUEsQ0FBQ1MsS0FBSyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxLYWlcXERvY3VtZW50c1xcVW5pcXVlcnlcXGZyb250ZW5kXFxmaXJlYmFzZVxcY2xpZW50QXBwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGluaXRpYWxpemVBcHAgfSBmcm9tIFwiZmlyZWJhc2UvYXBwXCI7XHJcbmltcG9ydCB7IGdldEF1dGggfSBmcm9tIFwiZmlyZWJhc2UvYXV0aFwiO1xyXG5pbXBvcnQgeyBnZXRGaXJlc3RvcmUgfSBmcm9tIFwiZmlyZWJhc2UvZmlyZXN0b3JlXCI7XHJcblxyXG5jb25zdCBmaXJlYmFzZUNvbmZpZyA9IHtcclxuICBhcGlLZXk6IFwiQUl6YVN5QXJ2VDJTZkRMSlRUa1pkZUFZclI3blhrckZMLWdxSmhNXCIsXHJcbiAgYXV0aERvbWFpbjogXCJ0dXBhaWNoYXRib3QuZmlyZWJhc2VhcHAuY29tXCIsXHJcbiAgcHJvamVjdElkOiBcInR1cGFpY2hhdGJvdFwiLFxyXG4gIHN0b3JhZ2VCdWNrZXQ6IFwidHVwYWljaGF0Ym90LmZpcmViYXNlc3RvcmFnZS5hcHBcIixcclxuICBtZXNzYWdpbmdTZW5kZXJJZDogXCI0MTQxOTMxODc4MTdcIixcclxuICBhcHBJZDogXCIxOjQxNDE5MzE4NzgxNzp3ZWI6OTU5ODhiOWFlMThhMjA4MTUzNjk3OFwiLFxyXG4gIG1lYXN1cmVtZW50SWQ6IFwiRy1QWUJQWUc0RDhSXCJcclxufTtcclxuXHJcbmNvbnN0IGFwcCA9IGluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpO1xyXG5cclxuLy8gZGVidWc6IGxvZyBjb25maWcgY2hlY2sgKHJlbW92ZSBsYXRlcilcclxuaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICBjb25zb2xlLmxvZyhcIkZpcmViYXNlIGNsaWVudEFwcCBpbml0aWFsaXplZCwgYXBpS2V5OlwiLCBmaXJlYmFzZUNvbmZpZy5hcGlLZXk/LnNsaWNlPy4oMCw4KSArIFwiLi4uXCIpO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgYXV0aCA9IGdldEF1dGgoYXBwKTtcclxuZXhwb3J0IGNvbnN0IGRiID0gZ2V0RmlyZXN0b3JlKGFwcCk7Il0sIm5hbWVzIjpbImluaXRpYWxpemVBcHAiLCJnZXRBdXRoIiwiZ2V0RmlyZXN0b3JlIiwiZmlyZWJhc2VDb25maWciLCJhcGlLZXkiLCJhdXRoRG9tYWluIiwicHJvamVjdElkIiwic3RvcmFnZUJ1Y2tldCIsIm1lc3NhZ2luZ1NlbmRlcklkIiwiYXBwSWQiLCJtZWFzdXJlbWVudElkIiwiYXBwIiwiY29uc29sZSIsImxvZyIsInNsaWNlIiwiYXV0aCIsImRiIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./firebase/clientApp.js\n");

/***/ }),

/***/ "(pages-dir-node)/./lib/firestoreHelpers.js":
/*!*********************************!*\
  !*** ./lib/firestoreHelpers.js ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   appendMessage: () => (/* binding */ appendMessage),\n/* harmony export */   appendMessageDoc: () => (/* binding */ appendMessageDoc),\n/* harmony export */   clearConversationMarker: () => (/* binding */ clearConversationMarker),\n/* harmony export */   createUserProfile: () => (/* binding */ createUserProfile),\n/* harmony export */   getConversation: () => (/* binding */ getConversation),\n/* harmony export */   getConversationMessages: () => (/* binding */ getConversationMessages),\n/* harmony export */   getUserProfile: () => (/* binding */ getUserProfile),\n/* harmony export */   setConversation: () => (/* binding */ setConversation)\n/* harmony export */ });\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\n/* harmony import */ var _firebase_clientApp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../firebase/clientApp */ \"(pages-dir-node)/./firebase/clientApp.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_firestore__WEBPACK_IMPORTED_MODULE_0__, _firebase_clientApp__WEBPACK_IMPORTED_MODULE_1__]);\n([firebase_firestore__WEBPACK_IMPORTED_MODULE_0__, _firebase_clientApp__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// frontend/lib/firestoreHelpers.js\n\n\n/**\r\n * Read conversation messages (returns array sorted by createdAt)\r\n */ async function getConversationMessages(uid, model) {\n    const col = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", uid, \"conversations\", model, \"messages\");\n    const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(col, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"asc\"));\n    const snaps = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n    return snaps.docs.map((d)=>({\n            id: d.id,\n            ...d.data()\n        }));\n}\n/**\r\n * Append a message as a document (uses serverTimestamp)\r\n * message: { role, content }\r\n */ async function appendMessageDoc(uid, model, message) {\n    const col = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", uid, \"conversations\", model, \"messages\");\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.addDoc)(col, {\n        ...message,\n        createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)()\n    });\n}\n/**\r\n * Clear conversation: top-level marker to indicate cleared\r\n */ async function clearConversationMarker(uid, model) {\n    const ref = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", uid, \"conversations\", model);\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(ref, {\n        clearedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)()\n    }, {\n        merge: true\n    });\n}\n/**\r\n * Get conversation object with messages and clearedAt timestamp\r\n * Returns: { messages: [...], clearedAt: Timestamp | null }\r\n */ async function getConversation(uid, model) {\n    const [messages, convSnap] = await Promise.all([\n        getConversationMessages(uid, model),\n        (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", uid, \"conversations\", model))\n    ]);\n    const clearedAt = convSnap.exists() ? convSnap.data().clearedAt || null : null;\n    // Filter messages if clearedAt exists\n    const filteredMessages = clearedAt ? messages.filter((msg)=>msg.createdAt?.toMillis() > clearedAt.toMillis()) : messages;\n    return {\n        messages: filteredMessages,\n        clearedAt\n    };\n}\n/**\r\n * Set conversation - reset to empty or specific messages\r\n */ async function setConversation(uid, model, messages = []) {\n    const convRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", uid, \"conversations\", model);\n    const messagesCol = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", uid, \"conversations\", model, \"messages\");\n    // Get all existing messages to delete them\n    const existingMessages = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(messagesCol);\n    const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_1__.db);\n    // Delete all existing messages\n    existingMessages.docs.forEach((doc)=>{\n        batch.delete(doc.ref);\n    });\n    // Set clearedAt timestamp\n    batch.set(convRef, {\n        clearedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)()\n    }, {\n        merge: true\n    });\n    // Add new messages if provided\n    messages.forEach((message)=>{\n        const newMessageRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(messagesCol);\n        batch.set(newMessageRef, {\n            ...message,\n            createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)()\n        });\n    });\n    await batch.commit();\n}\n/**\r\n * Create a user profile with name, nickname and email\r\n * uid: user uid\r\n * userData: { name, nickname, email }\r\n */ async function createUserProfile(uid, userData) {\n    try {\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", uid), {\n            name: userData.name || \"\",\n            nickname: userData.nickname || \"\",\n            email: userData.email || \"\",\n            createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)()\n        });\n    } catch (err) {\n        console.error(\"Error creating user profile:\", err);\n        throw err;\n    }\n}\n/**\r\n * Get user profile data\r\n */ async function getUserProfile(uid) {\n    try {\n        const userDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", uid);\n        const userDocSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(userDocRef);\n        if (userDocSnap.exists()) {\n            return userDocSnap.data();\n        }\n        return null;\n    } catch (err) {\n        console.error(\"Error getting user profile:\", err);\n        throw err;\n    }\n}\n/**\r\n * Aliases for frontend code consistency\r\n */ const appendMessage = appendMessageDoc;\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2xpYi9maXJlc3RvcmVIZWxwZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxtQ0FBbUM7QUFZUDtBQUNlO0FBRTNDOztDQUVDLEdBQ00sZUFBZVcsd0JBQXdCQyxHQUFHLEVBQUVDLEtBQUs7SUFDdEQsTUFBTUMsTUFBTVgsOERBQVVBLENBQUNPLG1EQUFFQSxFQUFFLFNBQVNFLEtBQUssaUJBQWlCQyxPQUFPO0lBQ2pFLE1BQU1FLElBQUlWLHlEQUFLQSxDQUFDUyxLQUFLUiwyREFBT0EsQ0FBQyxhQUFhO0lBQzFDLE1BQU1VLFFBQVEsTUFBTVQsMkRBQU9BLENBQUNRO0lBQzVCLE9BQU9DLE1BQU1DLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUNDLElBQU87WUFBRUMsSUFBSUQsRUFBRUMsRUFBRTtZQUFFLEdBQUdELEVBQUVFLElBQUksRUFBRTtRQUFDO0FBQ3hEO0FBRUE7OztDQUdDLEdBQ00sZUFBZUMsaUJBQWlCVixHQUFHLEVBQUVDLEtBQUssRUFBRVUsT0FBTztJQUN4RCxNQUFNVCxNQUFNWCw4REFBVUEsQ0FBQ08sbURBQUVBLEVBQUUsU0FBU0UsS0FBSyxpQkFBaUJDLE9BQU87SUFDakUsTUFBTVQsMERBQU1BLENBQUNVLEtBQUs7UUFBRSxHQUFHUyxPQUFPO1FBQUVDLFdBQVdoQixtRUFBZUE7SUFBRztBQUMvRDtBQUVBOztDQUVDLEdBQ00sZUFBZWlCLHdCQUF3QmIsR0FBRyxFQUFFQyxLQUFLO0lBQ3RELE1BQU1hLE1BQU0xQix1REFBR0EsQ0FBQ1UsbURBQUVBLEVBQUUsU0FBU0UsS0FBSyxpQkFBaUJDO0lBQ25ELE1BQU1YLDBEQUFNQSxDQUFDd0IsS0FBSztRQUFFQyxXQUFXbkIsbUVBQWVBO0lBQUcsR0FBRztRQUFFb0IsT0FBTztJQUFLO0FBQ3BFO0FBRUE7OztDQUdDLEdBQ00sZUFBZUMsZ0JBQWdCakIsR0FBRyxFQUFFQyxLQUFLO0lBQzlDLE1BQU0sQ0FBQ2lCLFVBQVVDLFNBQVMsR0FBRyxNQUFNQyxRQUFRQyxHQUFHLENBQUM7UUFDN0N0Qix3QkFBd0JDLEtBQUtDO1FBQzdCWiwwREFBTUEsQ0FBQ0QsdURBQUdBLENBQUNVLG1EQUFFQSxFQUFFLFNBQVNFLEtBQUssaUJBQWlCQztLQUMvQztJQUVELE1BQU1jLFlBQVlJLFNBQVNHLE1BQU0sS0FBS0gsU0FBU1YsSUFBSSxHQUFHTSxTQUFTLElBQUksT0FBTztJQUUxRSxzQ0FBc0M7SUFDdEMsTUFBTVEsbUJBQW1CUixZQUNyQkcsU0FBU00sTUFBTSxDQUFDLENBQUNDLE1BQVFBLElBQUliLFNBQVMsRUFBRWMsYUFBYVgsVUFBVVcsUUFBUSxNQUN2RVI7SUFFSixPQUFPO1FBQUVBLFVBQVVLO1FBQWtCUjtJQUFVO0FBQ2pEO0FBRUE7O0NBRUMsR0FDTSxlQUFlWSxnQkFBZ0IzQixHQUFHLEVBQUVDLEtBQUssRUFBRWlCLFdBQVcsRUFBRTtJQUM3RCxNQUFNVSxVQUFVeEMsdURBQUdBLENBQUNVLG1EQUFFQSxFQUFFLFNBQVNFLEtBQUssaUJBQWlCQztJQUN2RCxNQUFNNEIsY0FBY3RDLDhEQUFVQSxDQUFDTyxtREFBRUEsRUFBRSxTQUFTRSxLQUFLLGlCQUFpQkMsT0FBTztJQUV6RSwyQ0FBMkM7SUFDM0MsTUFBTTZCLG1CQUFtQixNQUFNbkMsMkRBQU9BLENBQUNrQztJQUN2QyxNQUFNRSxRQUFRbEMsOERBQVVBLENBQUNDLG1EQUFFQTtJQUUzQiwrQkFBK0I7SUFDL0JnQyxpQkFBaUJ6QixJQUFJLENBQUMyQixPQUFPLENBQUMsQ0FBQzVDO1FBQzdCMkMsTUFBTUUsTUFBTSxDQUFDN0MsSUFBSTBCLEdBQUc7SUFDdEI7SUFFQSwwQkFBMEI7SUFDMUJpQixNQUFNRyxHQUFHLENBQUNOLFNBQVM7UUFBRWIsV0FBV25CLG1FQUFlQTtJQUFHLEdBQUc7UUFBRW9CLE9BQU87SUFBSztJQUVuRSwrQkFBK0I7SUFDL0JFLFNBQVNjLE9BQU8sQ0FBQyxDQUFDckI7UUFDaEIsTUFBTXdCLGdCQUFnQi9DLHVEQUFHQSxDQUFDeUM7UUFDMUJFLE1BQU1HLEdBQUcsQ0FBQ0MsZUFBZTtZQUFFLEdBQUd4QixPQUFPO1lBQUVDLFdBQVdoQixtRUFBZUE7UUFBRztJQUN0RTtJQUVBLE1BQU1tQyxNQUFNSyxNQUFNO0FBQ3BCO0FBRUE7Ozs7Q0FJQyxHQUNNLGVBQWVDLGtCQUFrQnJDLEdBQUcsRUFBRXNDLFFBQVE7SUFDbkQsSUFBSTtRQUNGLE1BQU1oRCwwREFBTUEsQ0FBQ0YsdURBQUdBLENBQUNVLG1EQUFFQSxFQUFFLFNBQVNFLE1BQU07WUFDbEN1QyxNQUFNRCxTQUFTQyxJQUFJLElBQUk7WUFDdkJDLFVBQVVGLFNBQVNFLFFBQVEsSUFBSTtZQUMvQkMsT0FBT0gsU0FBU0csS0FBSyxJQUFJO1lBQ3pCN0IsV0FBV2hCLG1FQUFlQTtRQUM1QjtJQUNGLEVBQUUsT0FBTzhDLEtBQUs7UUFDWkMsUUFBUUMsS0FBSyxDQUFDLGdDQUFnQ0Y7UUFDOUMsTUFBTUE7SUFDUjtBQUNGO0FBRUE7O0NBRUMsR0FDTSxlQUFlRyxlQUFlN0MsR0FBRztJQUN0QyxJQUFJO1FBQ0YsTUFBTThDLGFBQWExRCx1REFBR0EsQ0FBQ1UsbURBQUVBLEVBQUUsU0FBU0U7UUFDcEMsTUFBTStDLGNBQWMsTUFBTTFELDBEQUFNQSxDQUFDeUQ7UUFFakMsSUFBSUMsWUFBWXpCLE1BQU0sSUFBSTtZQUN4QixPQUFPeUIsWUFBWXRDLElBQUk7UUFDekI7UUFDQSxPQUFPO0lBQ1QsRUFBRSxPQUFPaUMsS0FBSztRQUNaQyxRQUFRQyxLQUFLLENBQUMsK0JBQStCRjtRQUM3QyxNQUFNQTtJQUNSO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLE1BQU1NLGdCQUFnQnRDLGlCQUFpQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxLYWlcXERvY3VtZW50c1xcVW5pcXVlcnlcXGZyb250ZW5kXFxsaWJcXGZpcmVzdG9yZUhlbHBlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZnJvbnRlbmQvbGliL2ZpcmVzdG9yZUhlbHBlcnMuanNcclxuaW1wb3J0IHtcclxuICBkb2MsXHJcbiAgZ2V0RG9jLFxyXG4gIHNldERvYyxcclxuICBjb2xsZWN0aW9uLFxyXG4gIGFkZERvYyxcclxuICBxdWVyeSxcclxuICBvcmRlckJ5LFxyXG4gIGdldERvY3MsXHJcbiAgc2VydmVyVGltZXN0YW1wLFxyXG4gIHdyaXRlQmF0Y2gsXHJcbn0gZnJvbSBcImZpcmViYXNlL2ZpcmVzdG9yZVwiO1xyXG5pbXBvcnQgeyBkYiB9IGZyb20gXCIuLi9maXJlYmFzZS9jbGllbnRBcHBcIjtcclxuXHJcbi8qKlxyXG4gKiBSZWFkIGNvbnZlcnNhdGlvbiBtZXNzYWdlcyAocmV0dXJucyBhcnJheSBzb3J0ZWQgYnkgY3JlYXRlZEF0KVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENvbnZlcnNhdGlvbk1lc3NhZ2VzKHVpZCwgbW9kZWwpIHtcclxuICBjb25zdCBjb2wgPSBjb2xsZWN0aW9uKGRiLCBcInVzZXJzXCIsIHVpZCwgXCJjb252ZXJzYXRpb25zXCIsIG1vZGVsLCBcIm1lc3NhZ2VzXCIpO1xyXG4gIGNvbnN0IHEgPSBxdWVyeShjb2wsIG9yZGVyQnkoXCJjcmVhdGVkQXRcIiwgXCJhc2NcIikpO1xyXG4gIGNvbnN0IHNuYXBzID0gYXdhaXQgZ2V0RG9jcyhxKTtcclxuICByZXR1cm4gc25hcHMuZG9jcy5tYXAoKGQpID0+ICh7IGlkOiBkLmlkLCAuLi5kLmRhdGEoKSB9KSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBcHBlbmQgYSBtZXNzYWdlIGFzIGEgZG9jdW1lbnQgKHVzZXMgc2VydmVyVGltZXN0YW1wKVxyXG4gKiBtZXNzYWdlOiB7IHJvbGUsIGNvbnRlbnQgfVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFwcGVuZE1lc3NhZ2VEb2ModWlkLCBtb2RlbCwgbWVzc2FnZSkge1xyXG4gIGNvbnN0IGNvbCA9IGNvbGxlY3Rpb24oZGIsIFwidXNlcnNcIiwgdWlkLCBcImNvbnZlcnNhdGlvbnNcIiwgbW9kZWwsIFwibWVzc2FnZXNcIik7XHJcbiAgYXdhaXQgYWRkRG9jKGNvbCwgeyAuLi5tZXNzYWdlLCBjcmVhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogQ2xlYXIgY29udmVyc2F0aW9uOiB0b3AtbGV2ZWwgbWFya2VyIHRvIGluZGljYXRlIGNsZWFyZWRcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGVhckNvbnZlcnNhdGlvbk1hcmtlcih1aWQsIG1vZGVsKSB7XHJcbiAgY29uc3QgcmVmID0gZG9jKGRiLCBcInVzZXJzXCIsIHVpZCwgXCJjb252ZXJzYXRpb25zXCIsIG1vZGVsKTtcclxuICBhd2FpdCBzZXREb2MocmVmLCB7IGNsZWFyZWRBdDogc2VydmVyVGltZXN0YW1wKCkgfSwgeyBtZXJnZTogdHJ1ZSB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBjb252ZXJzYXRpb24gb2JqZWN0IHdpdGggbWVzc2FnZXMgYW5kIGNsZWFyZWRBdCB0aW1lc3RhbXBcclxuICogUmV0dXJuczogeyBtZXNzYWdlczogWy4uLl0sIGNsZWFyZWRBdDogVGltZXN0YW1wIHwgbnVsbCB9XHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q29udmVyc2F0aW9uKHVpZCwgbW9kZWwpIHtcclxuICBjb25zdCBbbWVzc2FnZXMsIGNvbnZTbmFwXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgIGdldENvbnZlcnNhdGlvbk1lc3NhZ2VzKHVpZCwgbW9kZWwpLFxyXG4gICAgZ2V0RG9jKGRvYyhkYiwgXCJ1c2Vyc1wiLCB1aWQsIFwiY29udmVyc2F0aW9uc1wiLCBtb2RlbCkpLFxyXG4gIF0pO1xyXG5cclxuICBjb25zdCBjbGVhcmVkQXQgPSBjb252U25hcC5leGlzdHMoKSA/IGNvbnZTbmFwLmRhdGEoKS5jbGVhcmVkQXQgfHwgbnVsbCA6IG51bGw7XHJcblxyXG4gIC8vIEZpbHRlciBtZXNzYWdlcyBpZiBjbGVhcmVkQXQgZXhpc3RzXHJcbiAgY29uc3QgZmlsdGVyZWRNZXNzYWdlcyA9IGNsZWFyZWRBdFxyXG4gICAgPyBtZXNzYWdlcy5maWx0ZXIoKG1zZykgPT4gbXNnLmNyZWF0ZWRBdD8udG9NaWxsaXMoKSA+IGNsZWFyZWRBdC50b01pbGxpcygpKVxyXG4gICAgOiBtZXNzYWdlcztcclxuXHJcbiAgcmV0dXJuIHsgbWVzc2FnZXM6IGZpbHRlcmVkTWVzc2FnZXMsIGNsZWFyZWRBdCB9O1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IGNvbnZlcnNhdGlvbiAtIHJlc2V0IHRvIGVtcHR5IG9yIHNwZWNpZmljIG1lc3NhZ2VzXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0Q29udmVyc2F0aW9uKHVpZCwgbW9kZWwsIG1lc3NhZ2VzID0gW10pIHtcclxuICBjb25zdCBjb252UmVmID0gZG9jKGRiLCBcInVzZXJzXCIsIHVpZCwgXCJjb252ZXJzYXRpb25zXCIsIG1vZGVsKTtcclxuICBjb25zdCBtZXNzYWdlc0NvbCA9IGNvbGxlY3Rpb24oZGIsIFwidXNlcnNcIiwgdWlkLCBcImNvbnZlcnNhdGlvbnNcIiwgbW9kZWwsIFwibWVzc2FnZXNcIik7XHJcbiAgXHJcbiAgLy8gR2V0IGFsbCBleGlzdGluZyBtZXNzYWdlcyB0byBkZWxldGUgdGhlbVxyXG4gIGNvbnN0IGV4aXN0aW5nTWVzc2FnZXMgPSBhd2FpdCBnZXREb2NzKG1lc3NhZ2VzQ29sKTtcclxuICBjb25zdCBiYXRjaCA9IHdyaXRlQmF0Y2goZGIpO1xyXG4gIFxyXG4gIC8vIERlbGV0ZSBhbGwgZXhpc3RpbmcgbWVzc2FnZXNcclxuICBleGlzdGluZ01lc3NhZ2VzLmRvY3MuZm9yRWFjaCgoZG9jKSA9PiB7XHJcbiAgICBiYXRjaC5kZWxldGUoZG9jLnJlZik7XHJcbiAgfSk7XHJcbiAgXHJcbiAgLy8gU2V0IGNsZWFyZWRBdCB0aW1lc3RhbXBcclxuICBiYXRjaC5zZXQoY29udlJlZiwgeyBjbGVhcmVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpIH0sIHsgbWVyZ2U6IHRydWUgfSk7XHJcbiAgXHJcbiAgLy8gQWRkIG5ldyBtZXNzYWdlcyBpZiBwcm92aWRlZFxyXG4gIG1lc3NhZ2VzLmZvckVhY2goKG1lc3NhZ2UpID0+IHtcclxuICAgIGNvbnN0IG5ld01lc3NhZ2VSZWYgPSBkb2MobWVzc2FnZXNDb2wpO1xyXG4gICAgYmF0Y2guc2V0KG5ld01lc3NhZ2VSZWYsIHsgLi4ubWVzc2FnZSwgY3JlYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSB9KTtcclxuICB9KTtcclxuICBcclxuICBhd2FpdCBiYXRjaC5jb21taXQoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSBhIHVzZXIgcHJvZmlsZSB3aXRoIG5hbWUsIG5pY2tuYW1lIGFuZCBlbWFpbFxyXG4gKiB1aWQ6IHVzZXIgdWlkXHJcbiAqIHVzZXJEYXRhOiB7IG5hbWUsIG5pY2tuYW1lLCBlbWFpbCB9XHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlVXNlclByb2ZpbGUodWlkLCB1c2VyRGF0YSkge1xyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBzZXREb2MoZG9jKGRiLCBcInVzZXJzXCIsIHVpZCksIHtcclxuICAgICAgbmFtZTogdXNlckRhdGEubmFtZSB8fCBcIlwiLFxyXG4gICAgICBuaWNrbmFtZTogdXNlckRhdGEubmlja25hbWUgfHwgXCJcIixcclxuICAgICAgZW1haWw6IHVzZXJEYXRhLmVtYWlsIHx8IFwiXCIsXHJcbiAgICAgIGNyZWF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjcmVhdGluZyB1c2VyIHByb2ZpbGU6XCIsIGVycik7XHJcbiAgICB0aHJvdyBlcnI7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IHVzZXIgcHJvZmlsZSBkYXRhXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlclByb2ZpbGUodWlkKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXJEb2NSZWYgPSBkb2MoZGIsIFwidXNlcnNcIiwgdWlkKTtcclxuICAgIGNvbnN0IHVzZXJEb2NTbmFwID0gYXdhaXQgZ2V0RG9jKHVzZXJEb2NSZWYpO1xyXG4gICAgXHJcbiAgICBpZiAodXNlckRvY1NuYXAuZXhpc3RzKCkpIHtcclxuICAgICAgcmV0dXJuIHVzZXJEb2NTbmFwLmRhdGEoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdldHRpbmcgdXNlciBwcm9maWxlOlwiLCBlcnIpO1xyXG4gICAgdGhyb3cgZXJyO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEFsaWFzZXMgZm9yIGZyb250ZW5kIGNvZGUgY29uc2lzdGVuY3lcclxuICovXHJcbmV4cG9ydCBjb25zdCBhcHBlbmRNZXNzYWdlID0gYXBwZW5kTWVzc2FnZURvYzsiXSwibmFtZXMiOlsiZG9jIiwiZ2V0RG9jIiwic2V0RG9jIiwiY29sbGVjdGlvbiIsImFkZERvYyIsInF1ZXJ5Iiwib3JkZXJCeSIsImdldERvY3MiLCJzZXJ2ZXJUaW1lc3RhbXAiLCJ3cml0ZUJhdGNoIiwiZGIiLCJnZXRDb252ZXJzYXRpb25NZXNzYWdlcyIsInVpZCIsIm1vZGVsIiwiY29sIiwicSIsInNuYXBzIiwiZG9jcyIsIm1hcCIsImQiLCJpZCIsImRhdGEiLCJhcHBlbmRNZXNzYWdlRG9jIiwibWVzc2FnZSIsImNyZWF0ZWRBdCIsImNsZWFyQ29udmVyc2F0aW9uTWFya2VyIiwicmVmIiwiY2xlYXJlZEF0IiwibWVyZ2UiLCJnZXRDb252ZXJzYXRpb24iLCJtZXNzYWdlcyIsImNvbnZTbmFwIiwiUHJvbWlzZSIsImFsbCIsImV4aXN0cyIsImZpbHRlcmVkTWVzc2FnZXMiLCJmaWx0ZXIiLCJtc2ciLCJ0b01pbGxpcyIsInNldENvbnZlcnNhdGlvbiIsImNvbnZSZWYiLCJtZXNzYWdlc0NvbCIsImV4aXN0aW5nTWVzc2FnZXMiLCJiYXRjaCIsImZvckVhY2giLCJkZWxldGUiLCJzZXQiLCJuZXdNZXNzYWdlUmVmIiwiY29tbWl0IiwiY3JlYXRlVXNlclByb2ZpbGUiLCJ1c2VyRGF0YSIsIm5hbWUiLCJuaWNrbmFtZSIsImVtYWlsIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiZ2V0VXNlclByb2ZpbGUiLCJ1c2VyRG9jUmVmIiwidXNlckRvY1NuYXAiLCJhcHBlbmRNZXNzYWdlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./lib/firestoreHelpers.js\n");

/***/ }),

/***/ "(pages-dir-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%5Cchat.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%5Cchat.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getServerSideProps: () => (/* binding */ getServerSideProps),\n/* harmony export */   getStaticPaths: () => (/* binding */ getStaticPaths),\n/* harmony export */   getStaticProps: () => (/* binding */ getStaticProps),\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   reportWebVitals: () => (/* binding */ reportWebVitals),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   unstable_getServerProps: () => (/* binding */ unstable_getServerProps),\n/* harmony export */   unstable_getServerSideProps: () => (/* binding */ unstable_getServerSideProps),\n/* harmony export */   unstable_getStaticParams: () => (/* binding */ unstable_getStaticParams),\n/* harmony export */   unstable_getStaticPaths: () => (/* binding */ unstable_getStaticPaths),\n/* harmony export */   unstable_getStaticProps: () => (/* binding */ unstable_getStaticProps)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages/module.compiled */ \"(pages-dir-node)/./node_modules/next/dist/server/route-modules/pages/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(pages-dir-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(pages-dir-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! private-next-pages/_document */ \"(pages-dir-node)/./node_modules/next/dist/pages/_document.js\");\n/* harmony import */ var private_next_pages_document__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! private-next-pages/_app */ \"(pages-dir-node)/./pages/_app.js\");\n/* harmony import */ var _pages_chat_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./pages\\chat.js */ \"(pages-dir-node)/./pages/chat.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_pages_handler__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/route-modules/pages/pages-handler */ \"(pages-dir-node)/./node_modules/next/dist/server/route-modules/pages/pages-handler.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_chat_js__WEBPACK_IMPORTED_MODULE_5__]);\n_pages_chat_js__WEBPACK_IMPORTED_MODULE_5__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the app and document modules.\n\n\n// Import the userland code.\n\n\n// Re-export the component (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_js__WEBPACK_IMPORTED_MODULE_5__, 'default'));\n// Re-export methods.\nconst getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_js__WEBPACK_IMPORTED_MODULE_5__, 'getStaticProps');\nconst getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_js__WEBPACK_IMPORTED_MODULE_5__, 'getStaticPaths');\nconst getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_js__WEBPACK_IMPORTED_MODULE_5__, 'getServerSideProps');\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_js__WEBPACK_IMPORTED_MODULE_5__, 'config');\nconst reportWebVitals = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_js__WEBPACK_IMPORTED_MODULE_5__, 'reportWebVitals');\n// Re-export legacy methods.\nconst unstable_getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_js__WEBPACK_IMPORTED_MODULE_5__, 'unstable_getStaticProps');\nconst unstable_getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_js__WEBPACK_IMPORTED_MODULE_5__, 'unstable_getStaticPaths');\nconst unstable_getStaticParams = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_js__WEBPACK_IMPORTED_MODULE_5__, 'unstable_getStaticParams');\nconst unstable_getServerProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_js__WEBPACK_IMPORTED_MODULE_5__, 'unstable_getServerProps');\nconst unstable_getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_js__WEBPACK_IMPORTED_MODULE_5__, 'unstable_getServerSideProps');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES,\n        page: \"/chat\",\n        pathname: \"/chat\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || '',\n    components: {\n        // default export might not exist when optimized for data only\n        App: private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\n        Document: (private_next_pages_document__WEBPACK_IMPORTED_MODULE_3___default())\n    },\n    userland: _pages_chat_js__WEBPACK_IMPORTED_MODULE_5__\n});\nconst handler = (0,next_dist_server_route_modules_pages_pages_handler__WEBPACK_IMPORTED_MODULE_6__.getHandler)({\n    srcPage: \"/chat\",\n    config,\n    userland: _pages_chat_js__WEBPACK_IMPORTED_MODULE_5__,\n    routeModule,\n    getStaticPaths,\n    getStaticProps,\n    getServerSideProps\n});\n\n//# sourceMappingURL=pages.js.map\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVMmcGFnZT0lMkZjaGF0JnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNjaGF0LmpzJmFic29sdXRlQXBwUGF0aD1wcml2YXRlLW5leHQtcGFnZXMlMkZfYXBwJmFic29sdXRlRG9jdW1lbnRQYXRoPXByaXZhdGUtbmV4dC1wYWdlcyUyRl9kb2N1bWVudCZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF3RjtBQUNoQztBQUNFO0FBQzFEO0FBQ3lEO0FBQ1Y7QUFDL0M7QUFDNkM7QUFDbUM7QUFDaEY7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDJDQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLHVCQUF1Qix3RUFBSyxDQUFDLDJDQUFRO0FBQ3JDLHVCQUF1Qix3RUFBSyxDQUFDLDJDQUFRO0FBQ3JDLDJCQUEyQix3RUFBSyxDQUFDLDJDQUFRO0FBQ3pDLGVBQWUsd0VBQUssQ0FBQywyQ0FBUTtBQUM3Qix3QkFBd0Isd0VBQUssQ0FBQywyQ0FBUTtBQUM3QztBQUNPLGdDQUFnQyx3RUFBSyxDQUFDLDJDQUFRO0FBQzlDLGdDQUFnQyx3RUFBSyxDQUFDLDJDQUFRO0FBQzlDLGlDQUFpQyx3RUFBSyxDQUFDLDJDQUFRO0FBQy9DLGdDQUFnQyx3RUFBSyxDQUFDLDJDQUFRO0FBQzlDLG9DQUFvQyx3RUFBSyxDQUFDLDJDQUFRO0FBQ3pEO0FBQ08sd0JBQXdCLGtHQUFnQjtBQUMvQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxhQUFhLE9BQW9DLElBQUksQ0FBRTtBQUN2RCx3QkFBd0IsTUFBdUM7QUFDL0Q7QUFDQTtBQUNBLGFBQWEsOERBQVc7QUFDeEIsa0JBQWtCLG9FQUFnQjtBQUNsQyxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7QUFDTSxnQkFBZ0IsOEZBQVU7QUFDakM7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc1JvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSBhcHAgYW5kIGRvY3VtZW50IG1vZHVsZXMuXG5pbXBvcnQgKiBhcyBkb2N1bWVudCBmcm9tIFwicHJpdmF0ZS1uZXh0LXBhZ2VzL19kb2N1bWVudFwiO1xuaW1wb3J0ICogYXMgYXBwIGZyb20gXCJwcml2YXRlLW5leHQtcGFnZXMvX2FwcFwiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcY2hhdC5qc1wiO1xuaW1wb3J0IHsgZ2V0SGFuZGxlciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvcGFnZXMvcGFnZXMtaGFuZGxlclwiO1xuLy8gUmUtZXhwb3J0IHRoZSBjb21wb25lbnQgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgbWV0aG9kcy5cbmV4cG9ydCBjb25zdCBnZXRTdGF0aWNQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCAnZ2V0U3RhdGljUHJvcHMnKTtcbmV4cG9ydCBjb25zdCBnZXRTdGF0aWNQYXRocyA9IGhvaXN0KHVzZXJsYW5kLCAnZ2V0U3RhdGljUGF0aHMnKTtcbmV4cG9ydCBjb25zdCBnZXRTZXJ2ZXJTaWRlUHJvcHMgPSBob2lzdCh1c2VybGFuZCwgJ2dldFNlcnZlclNpZGVQcm9wcycpO1xuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG5leHBvcnQgY29uc3QgcmVwb3J0V2ViVml0YWxzID0gaG9pc3QodXNlcmxhbmQsICdyZXBvcnRXZWJWaXRhbHMnKTtcbi8vIFJlLWV4cG9ydCBsZWdhY3kgbWV0aG9kcy5cbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9nZXRTdGF0aWNQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCAndW5zdGFibGVfZ2V0U3RhdGljUHJvcHMnKTtcbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9nZXRTdGF0aWNQYXRocyA9IGhvaXN0KHVzZXJsYW5kLCAndW5zdGFibGVfZ2V0U3RhdGljUGF0aHMnKTtcbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9nZXRTdGF0aWNQYXJhbXMgPSBob2lzdCh1c2VybGFuZCwgJ3Vuc3RhYmxlX2dldFN0YXRpY1BhcmFtcycpO1xuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFNlcnZlclByb3BzID0gaG9pc3QodXNlcmxhbmQsICd1bnN0YWJsZV9nZXRTZXJ2ZXJQcm9wcycpO1xuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFNlcnZlclNpZGVQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCAndW5zdGFibGVfZ2V0U2VydmVyU2lkZVByb3BzJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc1JvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFUyxcbiAgICAgICAgcGFnZTogXCIvY2hhdFwiLFxuICAgICAgICBwYXRobmFtZTogXCIvY2hhdFwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6ICcnLFxuICAgICAgICBmaWxlbmFtZTogJydcbiAgICB9LFxuICAgIGRpc3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9ESVNUX0RJUiB8fCAnJyxcbiAgICByZWxhdGl2ZVByb2plY3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9QUk9KRUNUX0RJUiB8fCAnJyxcbiAgICBjb21wb25lbnRzOiB7XG4gICAgICAgIC8vIGRlZmF1bHQgZXhwb3J0IG1pZ2h0IG5vdCBleGlzdCB3aGVuIG9wdGltaXplZCBmb3IgZGF0YSBvbmx5XG4gICAgICAgIEFwcDogYXBwLmRlZmF1bHQsXG4gICAgICAgIERvY3VtZW50OiBkb2N1bWVudC5kZWZhdWx0XG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5leHBvcnQgY29uc3QgaGFuZGxlciA9IGdldEhhbmRsZXIoe1xuICAgIHNyY1BhZ2U6IFwiL2NoYXRcIixcbiAgICBjb25maWcsXG4gICAgdXNlcmxhbmQsXG4gICAgcm91dGVNb2R1bGUsXG4gICAgZ2V0U3RhdGljUGF0aHMsXG4gICAgZ2V0U3RhdGljUHJvcHMsXG4gICAgZ2V0U2VydmVyU2lkZVByb3BzXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%5Cchat.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(pages-dir-node)/./pages/_app.js":
/*!***********************!*\
  !*** ./pages/_app.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ MyApp)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../styles/globals.css */ \"(pages-dir-node)/./styles/globals.css\");\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_styles_globals_css__WEBPACK_IMPORTED_MODULE_1__);\n\n\nfunction MyApp({ Component, pageProps }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Component, {\n        ...pageProps\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\_app.js\",\n        lineNumber: 3,\n        columnNumber: 10\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3BhZ2VzL19hcHAuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQStCO0FBQ2hCLFNBQVNBLE1BQU0sRUFBRUMsU0FBUyxFQUFFQyxTQUFTLEVBQUU7SUFDcEQscUJBQU8sOERBQUNEO1FBQVcsR0FBR0MsU0FBUzs7Ozs7O0FBQ2pDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXEthaVxcRG9jdW1lbnRzXFxVbmlxdWVyeVxcZnJvbnRlbmRcXHBhZ2VzXFxfYXBwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAnLi4vc3R5bGVzL2dsb2JhbHMuY3NzJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE15QXBwKHsgQ29tcG9uZW50LCBwYWdlUHJvcHMgfSkge1xuICByZXR1cm4gPENvbXBvbmVudCB7Li4ucGFnZVByb3BzfSAvPlxufVxuIl0sIm5hbWVzIjpbIk15QXBwIiwiQ29tcG9uZW50IiwicGFnZVByb3BzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./pages/_app.js\n");

/***/ }),

/***/ "(pages-dir-node)/./pages/chat.js":
/*!***********************!*\
  !*** ./pages/chat.js ***!
  \***********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ChatPage)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! styled-jsx/style */ \"styled-jsx/style\");\n/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(styled_jsx_style__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var qrcode_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! qrcode.react */ \"qrcode.react\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/router */ \"(pages-dir-node)/./node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _firebase_clientApp__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../firebase/clientApp */ \"(pages-dir-node)/./firebase/clientApp.js\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! firebase/auth */ \"firebase/auth\");\n/* harmony import */ var react_hot_toast__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-hot-toast */ \"react-hot-toast\");\n/* harmony import */ var _lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../lib/firestoreHelpers */ \"(pages-dir-node)/./lib/firestoreHelpers.js\");\n/* harmony import */ var react_simple_keyboard__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-simple-keyboard */ \"react-simple-keyboard\");\n/* harmony import */ var react_simple_keyboard__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_simple_keyboard__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var react_simple_keyboard_build_css_index_css__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-simple-keyboard/build/css/index.css */ \"(pages-dir-node)/./node_modules/react-simple-keyboard/build/css/index.css\");\n/* harmony import */ var react_simple_keyboard_build_css_index_css__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_simple_keyboard_build_css_index_css__WEBPACK_IMPORTED_MODULE_10__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([qrcode_react__WEBPACK_IMPORTED_MODULE_3__, _firebase_clientApp__WEBPACK_IMPORTED_MODULE_5__, firebase_auth__WEBPACK_IMPORTED_MODULE_6__, react_hot_toast__WEBPACK_IMPORTED_MODULE_7__, _lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__]);\n([qrcode_react__WEBPACK_IMPORTED_MODULE_3__, _firebase_clientApp__WEBPACK_IMPORTED_MODULE_5__, firebase_auth__WEBPACK_IMPORTED_MODULE_6__, react_hot_toast__WEBPACK_IMPORTED_MODULE_7__, _lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\n\n\n\n\n\n// IMPORT VIRTUAL KEYBOARD\n\n\n// ✅ FIX: Define QWERTY keyboard layout\nconst layout = {\n    qwerty: {\n        default: [\n            \"0 1 2 3 4 5 6 7 8 9\",\n            \"q w e r t y u i o p {backspace}\",\n            \"a s d f g h j k l {enter}\",\n            \"{shift} z x c v b n m\",\n            \"{@} {%} {?} {space} {,} {.}\"\n        ],\n        shift: [\n            \"0 1 2 3 4 5 6 7 8 9\",\n            \"Q W E R T Y U I O P {backspace}\",\n            \"A S D F G H J K L {enter}\",\n            \"{shift} Z X C V B N M\",\n            \"{@} {%} {?} {space} {,} {.}\"\n        ]\n    }\n};\n// Simple markdown renderer without external dependencies\nfunction SimpleMarkdownRenderer({ text }) {\n    if (!text) return null;\n    const lines = text.split(\"\\n\");\n    return lines.map((line, index)=>{\n        if (line.trim() === \"\") return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"br\", {}, index, false, {\n            fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n            lineNumber: 45,\n            columnNumber: 36\n        }, this);\n        let content = line;\n        const boldRegex = /\\*\\*(.*?)\\*\\*/g;\n        const parts = [];\n        let lastIndex = 0;\n        let match;\n        while((match = boldRegex.exec(content)) !== null){\n            if (match.index > lastIndex) {\n                parts.push(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    children: content.substring(lastIndex, match.index)\n                }, `${index}-${lastIndex}`, false, {\n                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                    lineNumber: 56,\n                    columnNumber: 11\n                }, this));\n            }\n            parts.push(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                children: match[1]\n            }, `${index}-bold-${match.index}`, false, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 62,\n                columnNumber: 9\n            }, this));\n            lastIndex = match.index + match[0].length;\n        }\n        if (lastIndex < content.length) {\n            parts.push(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                children: content.substring(lastIndex)\n            }, `${index}-remaining`, false, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 69,\n                columnNumber: 9\n            }, this));\n        }\n        if (parts.length === 0) {\n            parts.push(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                children: content\n            }, `${index}-plain`, false, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 74,\n                columnNumber: 18\n            }, this));\n        }\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"mb-1 last:mb-0\",\n            children: [\n                parts,\n                index < lines.length - 1 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"br\", {}, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                    lineNumber: 80,\n                    columnNumber: 38\n                }, this)\n            ]\n        }, index, true, {\n            fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n            lineNumber: 78,\n            columnNumber: 7\n        }, this);\n    });\n}\nfunction formatAIResponse(text) {\n    if (!text) return \"\";\n    let cleaned = text.trim();\n    if (cleaned.startsWith(\"{\") && cleaned.endsWith(\"}\")) {\n        try {\n            const json = JSON.parse(cleaned);\n            cleaned = json.generated_text || json.response || json.answer || json.output || json.text || json.message || JSON.stringify(json);\n        } catch  {}\n    }\n    cleaned = cleaned.replace(/^\"|\"$/g, \"\");\n    cleaned = cleaned.replace(/\\\\n/g, \"\\n\");\n    cleaned = cleaned.replace(/\\\\\"/g, '\"');\n    cleaned = cleaned.replace(/\\\\t/g, \"  \");\n    return cleaned;\n}\nfunction ChatPage() {\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_4__.useRouter)();\n    const { model, public: isPublic } = router.query;\n    const modelConfigs = {\n        ece: {\n            url: \"https://tiyupi-ece-ece-api.hf.space/generate\",\n            token: \"\"\n        },\n        nav: {\n            url: \"https://tiyupi-ece-somi-cali.hf.space/chat\",\n            token: \"\"\n        },\n        info: {\n            url: \"https://tiyupi-ece-hitupi.hf.space/chat\",\n            token: \"\"\n        }\n    };\n    const modelKey = model || \"ece\";\n    const selectedModel = modelConfigs[modelKey] || {};\n    const isPublicAccess = isPublic === \"true\";\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(true);\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const [nickname, setNickname] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    const [realName, setRealName] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([]);\n    const [input, setInput] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    const [sending, setSending] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [shiftActive, setShiftActive] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const endRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)();\n    const [sidebarOpen, setSidebarOpen] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(true);\n    // VIRTUAL KEYBOARD STATE\n    const [showKeyboard, setShowKeyboard] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const keyboardRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const lastScrollTopRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(0);\n    const keyboardScrollThreshold = 20;\n    const chatContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const inputBarRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const keyboardInputRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(\"\");\n    const inputRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const caretPositionRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(0);\n    // ✅ SHARE / QR STATE (added)\n    const [shareId, setShareId] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const [shareOpen, setShareOpen] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    /* AUTH */ (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"ChatPage.useEffect\": ()=>{\n            const unsub = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_6__.onAuthStateChanged)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_5__.auth, {\n                \"ChatPage.useEffect.unsub\": async (u)=>{\n                    if (isPublicAccess && !u) {\n                        setUser(null);\n                        setNickname(\"Guest\");\n                        setRealName(\"Guest\");\n                        setMessages([]);\n                        setLoading(false);\n                        return;\n                    }\n                    if (!isPublicAccess && !u) {\n                        router.replace(\"/login\");\n                        return;\n                    }\n                    setUser(u);\n                    try {\n                        if (u) {\n                            const profile = await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.getUserProfile)(u.uid);\n                            const name = profile?.name || u.displayName || profile?.nickname || u.email?.split(\"@\")[0] || \"User\";\n                            setRealName(name);\n                            const nick = profile?.nickname || profile?.name || u.displayName || u.email?.split(\"@\")[0] || \"User\";\n                            setNickname(nick);\n                            const conv = await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.getConversation)(u.uid, modelKey);\n                            setMessages(conv?.messages || []);\n                        }\n                    } catch  {}\n                    setLoading(false);\n                }\n            }[\"ChatPage.useEffect.unsub\"]);\n            return ({\n                \"ChatPage.useEffect\": ()=>unsub()\n            })[\"ChatPage.useEffect\"];\n        }\n    }[\"ChatPage.useEffect\"], [\n        router,\n        modelKey,\n        isPublicAccess\n    ]);\n    // Get references on mount\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"ChatPage.useEffect\": ()=>{\n            chatContainerRef.current = document.querySelector(\".absolute.inset-0.px-6.overflow-y-auto.flex.flex-col\");\n            inputBarRef.current = document.querySelector(\"form.fixed.left-0.z-50\");\n        }\n    }[\"ChatPage.useEffect\"], []);\n    // Handle scroll to auto-hide keyboard\n    const handleScroll = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)({\n        \"ChatPage.useCallback[handleScroll]\": ()=>{\n            if (!showKeyboard) return;\n            const chatContainer = chatContainerRef.current;\n            if (!chatContainer) return;\n            const currentScrollTop = chatContainer.scrollTop;\n            const scrollDiff = Math.abs(currentScrollTop - lastScrollTopRef.current);\n            if (scrollDiff > keyboardScrollThreshold) {\n                setShowKeyboard(false);\n                const inputElement = document.querySelector('input[placeholder*=\"Ask\"]');\n                if (inputElement) inputElement.blur();\n            }\n            lastScrollTopRef.current = currentScrollTop;\n        }\n    }[\"ChatPage.useCallback[handleScroll]\"], [\n        showKeyboard\n    ]);\n    // Attach scroll event listener\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"ChatPage.useEffect\": ()=>{\n            const chatContainer = chatContainerRef.current;\n            if (!chatContainer) return;\n            chatContainer.addEventListener(\"scroll\", handleScroll);\n            return ({\n                \"ChatPage.useEffect\": ()=>{\n                    chatContainer.removeEventListener(\"scroll\", handleScroll);\n                }\n            })[\"ChatPage.useEffect\"];\n        }\n    }[\"ChatPage.useEffect\"], [\n        handleScroll\n    ]);\n    // Reset scroll tracking when keyboard shows\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"ChatPage.useEffect\": ()=>{\n            if (showKeyboard && chatContainerRef.current) {\n                lastScrollTopRef.current = chatContainerRef.current.scrollTop;\n            }\n        }\n    }[\"ChatPage.useEffect\"], [\n        showKeyboard\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"ChatPage.useEffect\": ()=>{\n            endRef.current?.scrollIntoView({\n                behavior: \"smooth\"\n            });\n        }\n    }[\"ChatPage.useEffect\"], [\n        messages\n    ]);\n    /* SEND MESSAGE */ async function handleSend(e) {\n        e.preventDefault();\n        const trimmed = input.trim();\n        if (!trimmed) return;\n        const userMsg = {\n            role: \"user\",\n            content: trimmed\n        };\n        const updatedMessages = [\n            ...messages,\n            userMsg\n        ];\n        setMessages(updatedMessages);\n        setInput(\"\");\n        setSending(true);\n        setShowKeyboard(false);\n        keyboardInputRef.current = \"\";\n        react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].loading(\"Sending...\", {\n            id: \"send\"\n        });\n        try {\n            if (user && !isPublicAccess) await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.appendMessage)(user.uid, modelKey, userMsg);\n            if (!selectedModel.url) {\n                const errorMsg = {\n                    role: \"assistant\",\n                    content: \"Model unavailable.\"\n                };\n                setMessages([\n                    ...updatedMessages,\n                    errorMsg\n                ]);\n                if (user && !isPublicAccess) await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.appendMessage)(user.uid, modelKey, errorMsg);\n                react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].dismiss(\"send\");\n                setSending(false);\n                return;\n            }\n            const requestOptions = {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            };\n            const requestFormats = [\n                {\n                    inputs: trimmed,\n                    parameters: {\n                        max_new_tokens: 500,\n                        temperature: 0.7\n                    }\n                },\n                {\n                    query: trimmed,\n                    max_new_tokens: 500,\n                    temperature: 0.7\n                },\n                {\n                    input: trimmed,\n                    max_length: 500,\n                    temperature: 0.7\n                }\n            ];\n            let reply = \"\";\n            let lastError = null;\n            for(let i = 0; i < requestFormats.length; i++){\n                try {\n                    requestOptions.body = JSON.stringify(requestFormats[i]);\n                    const res = await fetch(selectedModel.url, requestOptions);\n                    if (!res.ok) throw new Error(`HTTP ${res.status}`);\n                    const raw = await res.text();\n                    reply = formatAIResponse(raw);\n                    if (reply && reply !== \"{}\") break;\n                } catch (err) {\n                    lastError = err;\n                }\n            }\n            if (!reply && lastError) throw lastError;\n            if (!reply) throw new Error(\"No response\");\n            reply = reply.trim();\n            const aiMsg = {\n                role: \"assistant\",\n                content: reply\n            };\n            setMessages([\n                ...updatedMessages,\n                aiMsg\n            ]);\n            if (user && !isPublicAccess) await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.appendMessage)(user.uid, modelKey, aiMsg);\n            react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].success(\"Reply received\", {\n                id: \"send\"\n            });\n        } catch (err) {\n            const errorMsg = {\n                role: \"assistant\",\n                content: `**Error:** ${err.message}`\n            };\n            setMessages([\n                ...messages,\n                userMsg,\n                errorMsg\n            ]);\n            react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].error(\"Send failed\", {\n                id: \"send\"\n            });\n        }\n        setSending(false);\n    }\n    async function handleNewChat() {\n        if (user && !isPublicAccess) await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.setConversation)(user.uid, modelKey, []);\n        setMessages([]);\n        // ✅ reset share state too (added)\n        setShareId(null);\n        setShareOpen(false);\n    }\n    function handleSignOut() {\n        (0,firebase_auth__WEBPACK_IMPORTED_MODULE_6__.signOut)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_5__.auth).then(()=>router.push(\"/login\"));\n    }\n    // NEW: Handle sign in redirect\n    function handleSignIn() {\n        router.push(\"/login\");\n    }\n    // ✅ Generate QR (added)\n    async function handleGenerateQR() {\n        try {\n            if (!messages || messages.length === 0) {\n                react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].error(\"No conversation to share yet.\");\n                return;\n            }\n            react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].loading(\"Generating QR...\", {\n                id: \"share\"\n            });\n            const res = await fetch(\"/api/share\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    modelKey,\n                    createdAt: Date.now(),\n                    messages: messages.map((m)=>({\n                            role: m.role,\n                            content: m.content\n                        }))\n                })\n            });\n            if (!res.ok) throw new Error(`HTTP ${res.status}`);\n            const data = await res.json();\n            if (!data?.id) throw new Error(\"No share id returned.\");\n            setShareId(data.id);\n            setShareOpen(true);\n            react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].success(\"QR ready!\", {\n                id: \"share\"\n            });\n        } catch (e) {\n            react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].error(`Failed: ${e.message}`, {\n                id: \"share\"\n            });\n        }\n    }\n    if (loading) return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"h-screen flex items-center justify-center text-xl\",\n        children: \"Loading…\"\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n        lineNumber: 389,\n        columnNumber: 7\n    }, this);\n    const headerHeight = 48;\n    const footerHeight = 32;\n    const sidebarWidth = 224;\n    const keyboardHeight = 280;\n    const inputBarHeight = 60;\n    const keyboardPadding = 4; // REDUCED FROM 8 TO 4\n    const shareUrl = shareId && \"undefined\" !== \"undefined\" ? 0 : \"\";\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"relative h-screen w-screen overflow-hidden bg-cover bg-center\",\n        style: {\n            backgroundImage: \"url('/bg.png')\"\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute inset-0 bg-[rgba(245,245,245,0.18)] backdrop-blur-sm\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 411,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"header\", {\n                className: \"fixed top-0 left-0 right-0 z-50 bg-black/30 text-white py-1.5 px-4 flex justify-between items-center shadow-sm\",\n                style: {\n                    height: `${headerHeight}px`\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                src: \"/tuplogo.png\",\n                                alt: \"TUP Logo\",\n                                className: \"h-7 w-7\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 419,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                className: \"text-xs md:text-sm font-bold\",\n                                children: \"TECHNOLOGICAL UNIVERSITY OF THE PHILIPPINES\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 420,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                        lineNumber: 418,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: user ? handleSignOut : handleSignIn,\n                        className: \"bg-[#faa029] text-black font-semibold px-5 py-2 rounded-full shadow\",\n                        children: user ? \"Sign Out\" : \"Sign In\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                        lineNumber: 426,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 414,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"footer\", {\n                className: \"fixed bottom-0 left-0 right-0 z-50 bg-black/30 text-center py-1 text-white text-xs\",\n                style: {\n                    height: `${footerHeight}px`\n                },\n                children: \"Designed by: Electronics Engineering Department\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 435,\n                columnNumber: 7\n            }, this),\n            showKeyboard && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    bottom: `${footerHeight + 4}px`,\n                    left: sidebarOpen ? `${sidebarWidth}px` : \"0px\",\n                    height: `${keyboardHeight}px`,\n                    zIndex: 55\n                },\n                className: \"jsx-944d9fe6c9c4852c\" + \" \" + \"fixed left-0 right-0 bg-white shadow-2xl border-t border-gray-300\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"jsx-944d9fe6c9c4852c\" + \" \" + \"flex justify-end p-1 bg-gray-100\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            type: \"button\",\n                            onMouseDown: (e)=>{\n                                // PREVENT input blur from firing\n                                e.preventDefault();\n                            },\n                            onClick: (e)=>{\n                                e.stopPropagation();\n                                // 1️⃣ Clear React state\n                                setInput(\"\");\n                                // 2️⃣ Clear refs\n                                keyboardInputRef.current = \"\";\n                                caretPositionRef.current = 0;\n                                // 3️⃣ Clear keyboard internal value\n                                if (keyboardRef.current) {\n                                    keyboardRef.current.setInput(\"\");\n                                    keyboardRef.current.setCaretPosition(0);\n                                }\n                                // 4️⃣ Restore focus safely\n                                requestAnimationFrame(()=>{\n                                    if (inputRef.current) {\n                                        inputRef.current.focus();\n                                        inputRef.current.setSelectionRange(0, 0);\n                                    }\n                                });\n                            },\n                            className: \"jsx-944d9fe6c9c4852c\" + \" \" + \"text-red-600 hover:text-red-800 font-semibold px-3 py-1 rounded text-xs\",\n                            children: \"Clear All\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                            lineNumber: 455,\n                            columnNumber: 3\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                        lineNumber: 454,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((react_simple_keyboard__WEBPACK_IMPORTED_MODULE_9___default()), {\n                        keyboardRef: (r)=>{\n                            keyboardRef.current = r;\n                        },\n                        layoutName: shiftActive ? \"shift\" : \"default\",\n                        layout: layout.qwerty,\n                        onKeyPress: (button)=>{\n                            let currentText = input;\n                            let caretPos = caretPositionRef.current;\n                            const updateText = (newText, newCaretPos)=>{\n                                setInput(newText);\n                                keyboardInputRef.current = newText;\n                                caretPositionRef.current = newCaretPos;\n                                requestAnimationFrame(()=>{\n                                    if (inputRef.current) {\n                                        inputRef.current.focus();\n                                        inputRef.current.setSelectionRange(newCaretPos, newCaretPos);\n                                    }\n                                });\n                            };\n                            // ===== SHIFT =====\n                            // \n                            if (button === \"{shift}\" || button === \"{lock}\") {\n                                const newShiftState = !shiftActive;\n                                setShiftActive(newShiftState);\n                                keyboardRef.current?.setOptions({\n                                    layoutName: newShiftState ? \"shift\" : \"default\"\n                                });\n                                return;\n                            }\n                            // ===== ENTER =====\n                            // \n                            if (button === \"{enter}\") {\n                                handleSend({\n                                    preventDefault: ()=>{}\n                                });\n                                return;\n                            }\n                            // ===== BACKSPACE =====\n                            // \n                            if (button === \"{backspace}\") {\n                                if (caretPos > 0) {\n                                    const newText = currentText.slice(0, caretPos - 1) + currentText.slice(caretPos);\n                                    updateText(newText, caretPos - 1);\n                                }\n                                return;\n                            }\n                            // ===== SPACE =====\n                            // \n                            if (button === \"{space}\") {\n                                const newText = currentText.slice(0, caretPos) + \" \" + currentText.slice(caretPos);\n                                updateText(newText, caretPos + 1);\n                                return;\n                            }\n                            // ===== SPECIAL TOKENS FROM YOUR LAYOUT =====\n                            // \n                            const specialTokens = {\n                                \"{@}\": \"@\",\n                                \"{%}\": \"%\",\n                                \"{?}\": \"?\",\n                                \"{,}\": \",\",\n                                \"{.}\": \".\"\n                            };\n                            if (specialTokens[button]) {\n                                const char = specialTokens[button];\n                                const newText = currentText.slice(0, caretPos) + char + currentText.slice(caretPos);\n                                updateText(newText, caretPos + 1);\n                                return;\n                            }\n                            // ===== Ignore unknown control buttons =====\n                            if (button.startsWith(\"{\") && button.endsWith(\"}\")) {\n                                return;\n                            }\n                            // ===== Normal characters (letters & numbers) =====\n                            const newText = currentText.slice(0, caretPos) + button + currentText.slice(caretPos);\n                            updateText(newText, caretPos + button.length);\n                        },\n                        theme: \"hg-theme-default hg-theme-custom\",\n                        display: {\n                            \"{backspace}\": \"⌫\",\n                            \"{enter}\": \"↵\",\n                            \"{shift}\": \"⇧\",\n                            \"{space}\": \"Space\",\n                            \"{@}\": \"@\",\n                            \"{%}\": \"%\",\n                            \"{?}\": \"?\",\n                            \"{,}\": \",\",\n                            \"{.}\": \".\",\n                            \"{#}\": \"#\"\n                        },\n                        preventMouseDownDefault: true,\n                        preventMouseUpDefault: true,\n                        newLineOnEnter: false,\n                        autoUseTouchEvents: true\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                        lineNumber: 491,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default()), {\n                        id: \"944d9fe6c9c4852c\",\n                        children: \".simple-keyboard{background:white!important;padding:10px!important;height:calc(100% - 30px)!important;width:100%!important;box-sizing:border-box!important}.hg-theme-custom{background-color:white!important;height:100%!important;display:flex!important;flex-direction:column!important}.hg-button{height:45px!important;border-radius:6px!important;font-weight:500!important;font-size:14px!important;box-shadow:0 2px 3px rgba(0,0,0,.15)!important;margin:3px!important;display:flex!important;align-items:center!important;justify-content:center!important;transition:all.1s ease!important;min-width:0!important;flex:1!important}.hg-row:nth-child(1) .hg-button{background:#f8f9fa!important;color:#333!important;border:1px solid#ddd!important}.hg-row:nth-child(2) .hg-button:not(.hg-button-backspace):not(.hg-button-enter),.hg-row:nth-child(3) .hg-button:not(.hg-button-enter),.hg-row:nth-child(4) .hg-button:not(.hg-button-shift){background:#aa3636!important;color:white!important;border:1px solid#8a2c2c!important}.hg-row:nth-child(5) .hg-button{background:#faa029!important;color:black!important;border:1px solid#d88c20!important;font-weight:bold!important}.hg-button-shift,.hg-button-backspace,.hg-button-enter{background:#faa029!important;color:black!important;border:1px solid#d88c20!important;font-weight:bold!important}.hg-button-space{flex-grow:3!important;max-width:none!important}.hg-button-backspace,.hg-button-enter,.hg-button-shift{min-width:70px!important;flex-grow:.5!important}.hg-button-\\\\\\\\{@\\\\\\\\;},\\n            .hg-button-\\\\\\\\{%\\\\\\\\},\\n            .hg-button-\\\\\\\\{\\\\\\\\?\\\\\\\\},\\n            .hg-button-\\\\\\\\{\\\\\\\\,\\\\\\\\},\\n            .hg-button-\\\\\\\\{\\\\\\\\.\\\\\\\\}{min-width:35px!important;flex-grow:.3!important}.hg-button:active,.hg-button.hg-activeBtn{transform:translatey(2px)!important;box-shadow:0 1px 2px rgba(0,0,0,.1)!important}.hg-row:nth-child(2) .hg-button:active:not(.hg-button-backspace):not(.hg-button-enter),.hg-row:nth-child(3) .hg-button:active:not(.hg-button-enter),.hg-row:nth-child(4) .hg-button:active:not(.hg-button-shift){background:#8a2c2c!important}.hg-button-shift:active,.hg-button-backspace:active,.hg-button-enter:active,.hg-row:nth-child(5) .hg-button:active,.hg-button-shift.hg-activeBtn{background:#d88c20!important}.hg-rows{height:100%!important;display:flex!important;flex-direction:column!important;justify-content:space-between!important;padding:0 8px!important}.hg-row{display:flex!important;justify-content:center!important;flex:1!important;min-height:48px!important;margin-bottom:5px!important}.hg-button-standard{min-width:35px!important;flex:1!important;max-width:50px!important}.hg-row:last-child{margin-bottom:0!important}.hg-button-backspace{font-size:16px!important}.hg-button-enter{font-size:16px!important}.simple-keyboard.hg-layout-default .hg-row{flex-wrap:nowrap!important}.hg-button span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}\"\n                    }, void 0, false, void 0, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 444,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex h-full relative z-10\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"fixed bg-[#aa3636] text-white shadow-xl flex flex-col px-4 py-3 transition-transform duration-300\",\n                        style: {\n                            top: headerHeight,\n                            bottom: footerHeight,\n                            width: sidebarWidth,\n                            transform: sidebarOpen ? \"translateX(0)\" : `translateX(-100%)`,\n                            zIndex: 60\n                        },\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>router.push(user ? \"/models\" : \"/\"),\n                                className: \"flex items-center gap-1 text-[#faa029] transition mb-3\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-xl\",\n                                        children: \"←\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 760,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-sm font-semibold\",\n                                        children: user ? \"Back to Menu\" : \"Back to Home\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 761,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 756,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleNewChat,\n                                className: \"w-full bg-white text-[#aa3636] font-bold py-1 rounded-full shadow mb-6 text-sm\",\n                                style: {\n                                    marginTop: \"-4px\"\n                                },\n                                children: \"+ New Chat\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 767,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-sm opacity-80 mb-3\",\n                                children: \"Recents\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 775,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"h-[1px] bg-white/40 mb-4\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 776,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mt-auto flex items-center gap-3 border-t border-white/30 pt-4\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"h-10 w-10 bg-white/20 rounded-full flex items-center justify-center\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                            src: \"/tupi-logo.png\",\n                                            className: \"h-8 w-8 rounded-full\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                            lineNumber: 781,\n                                            columnNumber: 15\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 780,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"text-sm font-bold\",\n                                                children: realName\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                lineNumber: 784,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"text-xs opacity-80\",\n                                                children: user ? \"Logged In\" : \"Guest Mode\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                lineNumber: 785,\n                                                columnNumber: 15\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 783,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 779,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                        lineNumber: 745,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>setSidebarOpen(!sidebarOpen),\n                        className: \"fixed bg-[#aa3636] text-white px-2 py-3 rounded-r-full shadow transition-all duration-300\",\n                        style: {\n                            top: `calc(${headerHeight}px + 30%)`,\n                            left: sidebarOpen ? `${sidebarWidth}px` : \"0px\",\n                            transform: \"translateY(-50%)\",\n                            zIndex: 70\n                        },\n                        children: sidebarOpen ? \"◀\" : \"▶\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                        lineNumber: 793,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: `flex-1 relative transition-all duration-300 ${sidebarOpen ? `ml-[224px]` : \"ml-0\"}`,\n                        style: {\n                            marginTop: `${headerHeight}px`,\n                            marginBottom: showKeyboard ? `${footerHeight + keyboardHeight + keyboardPadding + inputBarHeight + 4}px` : `${footerHeight}px`,\n                            transition: \"margin-bottom 0.3s ease-in-out\"\n                        },\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"absolute top-3 right-6 z-40\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: handleGenerateQR,\n                                    disabled: messages.length === 0,\n                                    className: `px-4 py-2 rounded-full shadow font-semibold text-xs ${messages.length === 0 ? \"bg-white/50 text-gray-700\" : \"bg-white/90 text-black\"}`,\n                                    title: messages.length === 0 ? \"Start a conversation first\" : \"Generate QR for this conversation\",\n                                    children: \"Generate QR\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                    lineNumber: 821,\n                                    columnNumber: 13\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 820,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"absolute inset-0 px-6 overflow-y-auto flex flex-col\",\n                                style: {\n                                    paddingTop: \"15px\",\n                                    paddingBottom: showKeyboard ? `${inputBarHeight + keyboardPadding + keyboardHeight}px` : `${inputBarHeight}px`\n                                },\n                                children: [\n                                    messages.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex-1 flex justify-center items-center text-center text-sm font-bold text-[#aa3636]\",\n                                        children: [\n                                            \"Hello, \",\n                                            nickname,\n                                            \"!\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 850,\n                                        columnNumber: 15\n                                    }, this) : messages.map((msg, i)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: `mb-4 w-full ${msg.role === \"user\" ? \"text-right\" : \"text-left\"}`,\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: `inline-block px-4 py-3 rounded-2xl shadow-lg text-sm max-w-[85%] ${msg.role === \"user\" ? \"bg-[#aa3636] text-white\" : \"bg-white text-black border border-gray-200\"}`,\n                                                style: {\n                                                    whiteSpace: \"pre-wrap\",\n                                                    wordBreak: \"break-word\",\n                                                    overflowWrap: \"break-word\"\n                                                },\n                                                children: msg.role === \"user\" ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"whitespace-pre-wrap break-words\",\n                                                    children: msg.content\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                    lineNumber: 874,\n                                                    columnNumber: 23\n                                                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(SimpleMarkdownRenderer, {\n                                                    text: msg.content\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                    lineNumber: 878,\n                                                    columnNumber: 23\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                lineNumber: 861,\n                                                columnNumber: 19\n                                            }, this)\n                                        }, i, false, {\n                                            fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                            lineNumber: 855,\n                                            columnNumber: 17\n                                        }, this)),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        ref: endRef\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 885,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 840,\n                                columnNumber: 11\n                            }, this),\n                            shareOpen && shareId && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"fixed inset-0 z-[90] flex items-center justify-center\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"absolute inset-0 bg-black/50\",\n                                        onClick: ()=>setShareOpen(false)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 891,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"relative bg-white rounded-2xl shadow-2xl border p-5 w-[320px] max-w-[90vw]\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"text-sm font-bold text-center mb-1\",\n                                                children: \"Scan to view on phone\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                lineNumber: 896,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"text-xs text-gray-600 text-center mb-3\",\n                                                children: \"This opens a document-style page that can be saved as PDF.\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                lineNumber: 899,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex justify-center\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(qrcode_react__WEBPACK_IMPORTED_MODULE_3__.QRCodeCanvas, {\n                                                    value: shareUrl,\n                                                    size: 220,\n                                                    includeMargin: true\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                    lineNumber: 904,\n                                                    columnNumber: 19\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                lineNumber: 903,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"mt-4 flex gap-2\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        className: \"flex-1 bg-[#aa3636] text-white text-xs font-semibold py-2 rounded-xl\",\n                                                        onClick: ()=>{\n                                                            if (!shareUrl) return;\n                                                            navigator.clipboard?.writeText(shareUrl);\n                                                            react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].success(\"Link copied!\");\n                                                        },\n                                                        children: \"Copy Link\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                        lineNumber: 908,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        className: \"flex-1 bg-gray-200 text-xs font-semibold py-2 rounded-xl\",\n                                                        onClick: ()=>setShareOpen(false),\n                                                        children: \"Close\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                        lineNumber: 919,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                lineNumber: 907,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 895,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 890,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                                ref: inputBarRef,\n                                onSubmit: handleSend,\n                                className: `fixed left-0 z-50 flex items-center justify-center gap-3 transition-all duration-300 ${sidebarOpen ? \"ml-[224px] w-[calc(100%-14rem)] px-6\" : \"ml-0 w-full px-6\"}`,\n                                style: {\n                                    bottom: showKeyboard ? `${footerHeight + keyboardHeight + keyboardPadding + 4}px` : `${footerHeight + 8}px`,\n                                    transition: \"bottom 0.3s ease-in-out\"\n                                },\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                        ref: inputRef,\n                                        value: input,\n                                        onChange: (e)=>{\n                                            const value = e.target.value;\n                                            const caret = e.target.selectionStart;\n                                            setInput(value);\n                                            keyboardInputRef.current = value;\n                                            caretPositionRef.current = caret;\n                                            if (keyboardRef.current) {\n                                                keyboardRef.current.setInput(value);\n                                                keyboardRef.current.setCaretPosition(caret);\n                                            }\n                                        },\n                                        onClick: (e)=>{\n                                            const caret = e.target.selectionStart;\n                                            caretPositionRef.current = caret;\n                                            keyboardRef.current?.setCaretPosition(caret);\n                                        },\n                                        onKeyUp: (e)=>{\n                                            const caret = e.target.selectionStart;\n                                            caretPositionRef.current = caret;\n                                            keyboardRef.current?.setCaretPosition(caret);\n                                        },\n                                        onFocus: ()=>{\n                                            setShowKeyboard(true);\n                                            if (chatContainerRef.current) {\n                                                lastScrollTopRef.current = chatContainerRef.current.scrollTop;\n                                            }\n                                        },\n                                        onBlur: (e)=>{\n                                            const isKeyboardClick = e.relatedTarget?.closest(\".simple-keyboard\");\n                                            const isInputClick = e.relatedTarget?.closest('input[placeholder*=\"Ask\"]');\n                                            const isSidebarClick = e.relatedTarget?.closest(\".fixed.bg-\\\\[\\\\#aa3636\\\\]\");\n                                            const isSidebarToggleClick = e.relatedTarget?.closest(\"button.fixed.bg-\\\\[\\\\#aa3636\\\\]\");\n                                            if (!isKeyboardClick && !isInputClick && !isSidebarClick && !isSidebarToggleClick) {\n                                                setTimeout(()=>{\n                                                    setShowKeyboard(false);\n                                                }, 100);\n                                            }\n                                        },\n                                        placeholder: `Ask ${modelKey.toUpperCase()}...`,\n                                        className: \"w-full py-3 px-5 rounded-full bg-white/95 outline-none border border-gray-300 shadow-sm text-sm focus:border-[#aa3636] focus:ring-1 focus:ring-[#aa3636] transition\",\n                                        disabled: sending\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 946,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        type: \"submit\",\n                                        disabled: sending || !input.trim(),\n                                        className: \"bg-[#aa3636] text-white px-5 py-3 rounded-full text-sm shadow\",\n                                        children: \"Send\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 1006,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 931,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                        lineNumber: 807,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 743,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n        lineNumber: 407,\n        columnNumber: 5\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU8sR0FBR2xCLGlCQUFpQmtCLE9BQU8sQ0FBQ00sU0FBUzs0Q0FDL0Q7d0NBQ0Y7d0NBQ0FxSSxRQUFRLENBQUMxSDs0Q0FDUCxNQUFNMkgsa0JBQWtCM0gsRUFBRTRILGFBQWEsRUFBRUMsUUFBUTs0Q0FDakQsTUFBTUMsZUFBZTlILEVBQUU0SCxhQUFhLEVBQUVDLFFBQ3BDOzRDQUVGLE1BQU1FLGlCQUFpQi9ILEVBQUU0SCxhQUFhLEVBQUVDLFFBQ3RDOzRDQUVGLE1BQU1HLHVCQUF1QmhJLEVBQUU0SCxhQUFhLEVBQUVDLFFBQzVDOzRDQUdGLElBQ0UsQ0FBQ0YsbUJBQ0QsQ0FBQ0csZ0JBQ0QsQ0FBQ0Msa0JBQ0QsQ0FBQ0Msc0JBQ0Q7Z0RBQ0FDLFdBQVc7b0RBQ1R4SyxnQkFBZ0I7Z0RBQ2xCLEdBQUc7NENBQ0w7d0NBQ0Y7d0NBQ0F5SyxhQUFhLENBQUMsSUFBSSxFQUFFaE0sU0FBU2lNLFdBQVcsR0FBRyxHQUFHLENBQUM7d0NBQy9DNU4sV0FBVTt3Q0FDVjRMLFVBQVVsSjs7Ozs7O2tEQUdaLDhEQUFDMkc7d0NBQ0NNLE1BQUs7d0NBQ0xpQyxVQUFVbEosV0FBVyxDQUFDRixNQUFNdEQsSUFBSTt3Q0FDaENjLFdBQVU7a0RBQ1g7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVFiIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXEthaVxcRG9jdW1lbnRzXFxVbmlxdWVyeVxcZnJvbnRlbmRcXHBhZ2VzXFxjaGF0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2sgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IFFSQ29kZUNhbnZhcyB9IGZyb20gXCJxcmNvZGUucmVhY3RcIjtcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiO1xuaW1wb3J0IHsgYXV0aCB9IGZyb20gXCIuLi9maXJlYmFzZS9jbGllbnRBcHBcIjtcbmltcG9ydCB7IG9uQXV0aFN0YXRlQ2hhbmdlZCwgc2lnbk91dCB9IGZyb20gXCJmaXJlYmFzZS9hdXRoXCI7XG5pbXBvcnQgdG9hc3QgZnJvbSBcInJlYWN0LWhvdC10b2FzdFwiO1xuaW1wb3J0IHtcbiAgZ2V0Q29udmVyc2F0aW9uLFxuICBhcHBlbmRNZXNzYWdlLFxuICBzZXRDb252ZXJzYXRpb24sXG4gIGdldFVzZXJQcm9maWxlLFxufSBmcm9tIFwiLi4vbGliL2ZpcmVzdG9yZUhlbHBlcnNcIjtcblxuLy8gSU1QT1JUIFZJUlRVQUwgS0VZQk9BUkRcbmltcG9ydCBLZXlib2FyZCBmcm9tIFwicmVhY3Qtc2ltcGxlLWtleWJvYXJkXCI7XG5pbXBvcnQgXCJyZWFjdC1zaW1wbGUta2V5Ym9hcmQvYnVpbGQvY3NzL2luZGV4LmNzc1wiO1xuXG4vLyDinIUgRklYOiBEZWZpbmUgUVdFUlRZIGtleWJvYXJkIGxheW91dFxuY29uc3QgbGF5b3V0ID0ge1xuICBxd2VydHk6IHtcbiAgICBkZWZhdWx0OiBbXG4gICAgICBcIjAgMSAyIDMgNCA1IDYgNyA4IDlcIixcbiAgICAgIFwicSB3IGUgciB0IHkgdSBpIG8gcCB7YmFja3NwYWNlfVwiLFxuICAgICAgXCJhIHMgZCBmIGcgaCBqIGsgbCB7ZW50ZXJ9XCIsXG4gICAgICBcIntzaGlmdH0geiB4IGMgdiBiIG4gbVwiLFxuICAgICAgXCJ7QH0geyV9IHs/fSB7c3BhY2V9IHssfSB7Ln1cIixcbiAgICBdLFxuICAgIHNoaWZ0OiBbXG4gICAgICBcIjAgMSAyIDMgNCA1IDYgNyA4IDlcIixcbiAgICAgIFwiUSBXIEUgUiBUIFkgVSBJIE8gUCB7YmFja3NwYWNlfVwiLFxuICAgICAgXCJBIFMgRCBGIEcgSCBKIEsgTCB7ZW50ZXJ9XCIsXG4gICAgICBcIntzaGlmdH0gWiBYIEMgViBCIE4gTVwiLFxuICAgICAgXCJ7QH0geyV9IHs/fSB7c3BhY2V9IHssfSB7Ln1cIixcbiAgICBdLFxuICB9LFxufTtcblxuLy8gU2ltcGxlIG1hcmtkb3duIHJlbmRlcmVyIHdpdGhvdXQgZXh0ZXJuYWwgZGVwZW5kZW5jaWVzXG5mdW5jdGlvbiBTaW1wbGVNYXJrZG93blJlbmRlcmVyKHsgdGV4dCB9KSB7XG4gIGlmICghdGV4dCkgcmV0dXJuIG51bGw7XG5cbiAgY29uc3QgbGluZXMgPSB0ZXh0LnNwbGl0KFwiXFxuXCIpO1xuICByZXR1cm4gbGluZXMubWFwKChsaW5lLCBpbmRleCkgPT4ge1xuICAgIGlmIChsaW5lLnRyaW0oKSA9PT0gXCJcIikgcmV0dXJuIDxiciBrZXk9e2luZGV4fSAvPjtcblxuICAgIGxldCBjb250ZW50ID0gbGluZTtcbiAgICBjb25zdCBib2xkUmVnZXggPSAvXFwqXFwqKC4qPylcXCpcXCovZztcbiAgICBjb25zdCBwYXJ0cyA9IFtdO1xuICAgIGxldCBsYXN0SW5kZXggPSAwO1xuICAgIGxldCBtYXRjaDtcblxuICAgIHdoaWxlICgobWF0Y2ggPSBib2xkUmVnZXguZXhlYyhjb250ZW50KSkgIT09IG51bGwpIHtcbiAgICAgIGlmIChtYXRjaC5pbmRleCA+IGxhc3RJbmRleCkge1xuICAgICAgICBwYXJ0cy5wdXNoKFxuICAgICAgICAgIDxzcGFuIGtleT17YCR7aW5kZXh9LSR7bGFzdEluZGV4fWB9PlxuICAgICAgICAgICAge2NvbnRlbnQuc3Vic3RyaW5nKGxhc3RJbmRleCwgbWF0Y2guaW5kZXgpfVxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHBhcnRzLnB1c2goXG4gICAgICAgIDxzdHJvbmcga2V5PXtgJHtpbmRleH0tYm9sZC0ke21hdGNoLmluZGV4fWB9PnttYXRjaFsxXX08L3N0cm9uZz5cbiAgICAgICk7XG4gICAgICBsYXN0SW5kZXggPSBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aDtcbiAgICB9XG5cbiAgICBpZiAobGFzdEluZGV4IDwgY29udGVudC5sZW5ndGgpIHtcbiAgICAgIHBhcnRzLnB1c2goXG4gICAgICAgIDxzcGFuIGtleT17YCR7aW5kZXh9LXJlbWFpbmluZ2B9Pntjb250ZW50LnN1YnN0cmluZyhsYXN0SW5kZXgpfTwvc3Bhbj5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcGFydHMucHVzaCg8c3BhbiBrZXk9e2Ake2luZGV4fS1wbGFpbmB9Pntjb250ZW50fTwvc3Bhbj4pO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGtleT17aW5kZXh9IGNsYXNzTmFtZT1cIm1iLTEgbGFzdDptYi0wXCI+XG4gICAgICAgIHtwYXJ0c31cbiAgICAgICAge2luZGV4IDwgbGluZXMubGVuZ3RoIC0gMSAmJiA8YnIgLz59XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0QUlSZXNwb25zZSh0ZXh0KSB7XG4gIGlmICghdGV4dCkgcmV0dXJuIFwiXCI7XG4gIGxldCBjbGVhbmVkID0gdGV4dC50cmltKCk7XG5cbiAgaWYgKGNsZWFuZWQuc3RhcnRzV2l0aChcIntcIikgJiYgY2xlYW5lZC5lbmRzV2l0aChcIn1cIikpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QganNvbiA9IEpTT04ucGFyc2UoY2xlYW5lZCk7XG4gICAgICBjbGVhbmVkID1cbiAgICAgICAganNvbi5nZW5lcmF0ZWRfdGV4dCB8fFxuICAgICAgICBqc29uLnJlc3BvbnNlIHx8XG4gICAgICAgIGpzb24uYW5zd2VyIHx8XG4gICAgICAgIGpzb24ub3V0cHV0IHx8XG4gICAgICAgIGpzb24udGV4dCB8fFxuICAgICAgICBqc29uLm1lc3NhZ2UgfHxcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoanNvbik7XG4gICAgfSBjYXRjaCB7fVxuICB9XG5cbiAgY2xlYW5lZCA9IGNsZWFuZWQucmVwbGFjZSgvXlwifFwiJC9nLCBcIlwiKTtcbiAgY2xlYW5lZCA9IGNsZWFuZWQucmVwbGFjZSgvXFxcXG4vZywgXCJcXG5cIik7XG4gIGNsZWFuZWQgPSBjbGVhbmVkLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKTtcbiAgY2xlYW5lZCA9IGNsZWFuZWQucmVwbGFjZSgvXFxcXHQvZywgXCIgIFwiKTtcblxuICByZXR1cm4gY2xlYW5lZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ2hhdFBhZ2UoKSB7XG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuICBjb25zdCB7IG1vZGVsLCBwdWJsaWM6IGlzUHVibGljIH0gPSByb3V0ZXIucXVlcnk7XG5cbiAgY29uc3QgbW9kZWxDb25maWdzID0ge1xuICAgIGVjZTogeyB1cmw6IFwiaHR0cHM6Ly90aXl1cGktZWNlLWVjZS1hcGkuaGYuc3BhY2UvZ2VuZXJhdGVcIiwgdG9rZW46IFwiXCIgfSxcbiAgICBuYXY6IHsgdXJsOiBcImh0dHBzOi8vdGl5dXBpLWVjZS1zb21pLWNhbGkuaGYuc3BhY2UvY2hhdFwiLCB0b2tlbjogXCJcIiB9LFxuICAgIGluZm86IHsgdXJsOiBcImh0dHBzOi8vdGl5dXBpLWVjZS1oaXR1cGkuaGYuc3BhY2UvY2hhdFwiLCB0b2tlbjogXCJcIiB9LFxuICB9O1xuXG4gIGNvbnN0IG1vZGVsS2V5ID0gbW9kZWwgfHwgXCJlY2VcIjtcbiAgY29uc3Qgc2VsZWN0ZWRNb2RlbCA9IG1vZGVsQ29uZmlnc1ttb2RlbEtleV0gfHwge307XG4gIGNvbnN0IGlzUHVibGljQWNjZXNzID0gaXNQdWJsaWMgPT09IFwidHJ1ZVwiO1xuXG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbdXNlciwgc2V0VXNlcl0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW25pY2tuYW1lLCBzZXROaWNrbmFtZV0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3JlYWxOYW1lLCBzZXRSZWFsTmFtZV0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW21lc3NhZ2VzLCBzZXRNZXNzYWdlc10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtpbnB1dCwgc2V0SW5wdXRdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtzZW5kaW5nLCBzZXRTZW5kaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3NoaWZ0QWN0aXZlLCBzZXRTaGlmdEFjdGl2ZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IGVuZFJlZiA9IHVzZVJlZigpO1xuXG4gIGNvbnN0IFtzaWRlYmFyT3Blbiwgc2V0U2lkZWJhck9wZW5dID0gdXNlU3RhdGUodHJ1ZSk7XG5cbiAgLy8gVklSVFVBTCBLRVlCT0FSRCBTVEFURVxuICBjb25zdCBbc2hvd0tleWJvYXJkLCBzZXRTaG93S2V5Ym9hcmRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBrZXlib2FyZFJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgbGFzdFNjcm9sbFRvcFJlZiA9IHVzZVJlZigwKTtcbiAgY29uc3Qga2V5Ym9hcmRTY3JvbGxUaHJlc2hvbGQgPSAyMDtcbiAgY29uc3QgY2hhdENvbnRhaW5lclJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgaW5wdXRCYXJSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGtleWJvYXJkSW5wdXRSZWYgPSB1c2VSZWYoXCJcIik7XG4gIGNvbnN0IGlucHV0UmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBjYXJldFBvc2l0aW9uUmVmID0gdXNlUmVmKDApO1xuXG4gIC8vIOKchSBTSEFSRSAvIFFSIFNUQVRFIChhZGRlZClcbiAgY29uc3QgW3NoYXJlSWQsIHNldFNoYXJlSWRdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IFtzaGFyZU9wZW4sIHNldFNoYXJlT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgLyogQVVUSCAqL1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHVuc3ViID0gb25BdXRoU3RhdGVDaGFuZ2VkKGF1dGgsIGFzeW5jICh1KSA9PiB7XG4gICAgICBpZiAoaXNQdWJsaWNBY2Nlc3MgJiYgIXUpIHtcbiAgICAgICAgc2V0VXNlcihudWxsKTtcbiAgICAgICAgc2V0Tmlja25hbWUoXCJHdWVzdFwiKTtcbiAgICAgICAgc2V0UmVhbE5hbWUoXCJHdWVzdFwiKTtcbiAgICAgICAgc2V0TWVzc2FnZXMoW10pO1xuICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzUHVibGljQWNjZXNzICYmICF1KSB7XG4gICAgICAgIHJvdXRlci5yZXBsYWNlKFwiL2xvZ2luXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNldFVzZXIodSk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICh1KSB7XG4gICAgICAgICAgY29uc3QgcHJvZmlsZSA9IGF3YWl0IGdldFVzZXJQcm9maWxlKHUudWlkKTtcbiAgICAgICAgICBjb25zdCBuYW1lID1cbiAgICAgICAgICAgIHByb2ZpbGU/Lm5hbWUgfHxcbiAgICAgICAgICAgIHUuZGlzcGxheU5hbWUgfHxcbiAgICAgICAgICAgIHByb2ZpbGU/Lm5pY2tuYW1lIHx8XG4gICAgICAgICAgICB1LmVtYWlsPy5zcGxpdChcIkBcIilbMF0gfHxcbiAgICAgICAgICAgIFwiVXNlclwiO1xuICAgICAgICAgIHNldFJlYWxOYW1lKG5hbWUpO1xuXG4gICAgICAgICAgY29uc3QgbmljayA9XG4gICAgICAgICAgICBwcm9maWxlPy5uaWNrbmFtZSB8fFxuICAgICAgICAgICAgcHJvZmlsZT8ubmFtZSB8fFxuICAgICAgICAgICAgdS5kaXNwbGF5TmFtZSB8fFxuICAgICAgICAgICAgdS5lbWFpbD8uc3BsaXQoXCJAXCIpWzBdIHx8XG4gICAgICAgICAgICBcIlVzZXJcIjtcbiAgICAgICAgICBzZXROaWNrbmFtZShuaWNrKTtcblxuICAgICAgICAgIGNvbnN0IGNvbnYgPSBhd2FpdCBnZXRDb252ZXJzYXRpb24odS51aWQsIG1vZGVsS2V5KTtcbiAgICAgICAgICBzZXRNZXNzYWdlcyhjb252Py5tZXNzYWdlcyB8fCBbXSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2gge31cblxuICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gKCkgPT4gdW5zdWIoKTtcbiAgfSwgW3JvdXRlciwgbW9kZWxLZXksIGlzUHVibGljQWNjZXNzXSk7XG5cbiAgLy8gR2V0IHJlZmVyZW5jZXMgb24gbW91bnRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjaGF0Q29udGFpbmVyUmVmLmN1cnJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIuYWJzb2x1dGUuaW5zZXQtMC5weC02Lm92ZXJmbG93LXktYXV0by5mbGV4LmZsZXgtY29sXCJcbiAgICApO1xuICAgIGlucHV0QmFyUmVmLmN1cnJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZm9ybS5maXhlZC5sZWZ0LTAuei01MFwiKTtcbiAgfSwgW10pO1xuXG4gIC8vIEhhbmRsZSBzY3JvbGwgdG8gYXV0by1oaWRlIGtleWJvYXJkXG4gIGNvbnN0IGhhbmRsZVNjcm9sbCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoIXNob3dLZXlib2FyZCkgcmV0dXJuO1xuXG4gICAgY29uc3QgY2hhdENvbnRhaW5lciA9IGNoYXRDb250YWluZXJSZWYuY3VycmVudDtcbiAgICBpZiAoIWNoYXRDb250YWluZXIpIHJldHVybjtcblxuICAgIGNvbnN0IGN1cnJlbnRTY3JvbGxUb3AgPSBjaGF0Q29udGFpbmVyLnNjcm9sbFRvcDtcbiAgICBjb25zdCBzY3JvbGxEaWZmID0gTWF0aC5hYnMoY3VycmVudFNjcm9sbFRvcCAtIGxhc3RTY3JvbGxUb3BSZWYuY3VycmVudCk7XG5cbiAgICBpZiAoc2Nyb2xsRGlmZiA+IGtleWJvYXJkU2Nyb2xsVGhyZXNob2xkKSB7XG4gICAgICBzZXRTaG93S2V5Ym9hcmQoZmFsc2UpO1xuICAgICAgY29uc3QgaW5wdXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbcGxhY2Vob2xkZXIqPVwiQXNrXCJdJyk7XG4gICAgICBpZiAoaW5wdXRFbGVtZW50KSBpbnB1dEVsZW1lbnQuYmx1cigpO1xuICAgIH1cblxuICAgIGxhc3RTY3JvbGxUb3BSZWYuY3VycmVudCA9IGN1cnJlbnRTY3JvbGxUb3A7XG4gIH0sIFtzaG93S2V5Ym9hcmRdKTtcblxuICAvLyBBdHRhY2ggc2Nyb2xsIGV2ZW50IGxpc3RlbmVyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgY2hhdENvbnRhaW5lciA9IGNoYXRDb250YWluZXJSZWYuY3VycmVudDtcbiAgICBpZiAoIWNoYXRDb250YWluZXIpIHJldHVybjtcblxuICAgIGNoYXRDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBoYW5kbGVTY3JvbGwpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjaGF0Q29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgaGFuZGxlU2Nyb2xsKTtcbiAgICB9O1xuICB9LCBbaGFuZGxlU2Nyb2xsXSk7XG5cbiAgLy8gUmVzZXQgc2Nyb2xsIHRyYWNraW5nIHdoZW4ga2V5Ym9hcmQgc2hvd3NcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoc2hvd0tleWJvYXJkICYmIGNoYXRDb250YWluZXJSZWYuY3VycmVudCkge1xuICAgICAgbGFzdFNjcm9sbFRvcFJlZi5jdXJyZW50ID0gY2hhdENvbnRhaW5lclJlZi5jdXJyZW50LnNjcm9sbFRvcDtcbiAgICB9XG4gIH0sIFtzaG93S2V5Ym9hcmRdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGVuZFJlZi5jdXJyZW50Py5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiBcInNtb290aFwiIH0pO1xuICB9LCBbbWVzc2FnZXNdKTtcblxuICAvKiBTRU5EIE1FU1NBR0UgKi9cbiAgYXN5bmMgZnVuY3Rpb24gaGFuZGxlU2VuZChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IHRyaW1tZWQgPSBpbnB1dC50cmltKCk7XG4gICAgaWYgKCF0cmltbWVkKSByZXR1cm47XG5cbiAgICBjb25zdCB1c2VyTXNnID0geyByb2xlOiBcInVzZXJcIiwgY29udGVudDogdHJpbW1lZCB9O1xuICAgIGNvbnN0IHVwZGF0ZWRNZXNzYWdlcyA9IFsuLi5tZXNzYWdlcywgdXNlck1zZ107XG4gICAgc2V0TWVzc2FnZXModXBkYXRlZE1lc3NhZ2VzKTtcbiAgICBzZXRJbnB1dChcIlwiKTtcbiAgICBzZXRTZW5kaW5nKHRydWUpO1xuICAgIHNldFNob3dLZXlib2FyZChmYWxzZSk7XG4gICAga2V5Ym9hcmRJbnB1dFJlZi5jdXJyZW50ID0gXCJcIjtcblxuICAgIHRvYXN0LmxvYWRpbmcoXCJTZW5kaW5nLi4uXCIsIHsgaWQ6IFwic2VuZFwiIH0pO1xuXG4gICAgdHJ5IHtcbiAgICAgIGlmICh1c2VyICYmICFpc1B1YmxpY0FjY2VzcylcbiAgICAgICAgYXdhaXQgYXBwZW5kTWVzc2FnZSh1c2VyLnVpZCwgbW9kZWxLZXksIHVzZXJNc2cpO1xuXG4gICAgICBpZiAoIXNlbGVjdGVkTW9kZWwudXJsKSB7XG4gICAgICAgIGNvbnN0IGVycm9yTXNnID0geyByb2xlOiBcImFzc2lzdGFudFwiLCBjb250ZW50OiBcIk1vZGVsIHVuYXZhaWxhYmxlLlwiIH07XG4gICAgICAgIHNldE1lc3NhZ2VzKFsuLi51cGRhdGVkTWVzc2FnZXMsIGVycm9yTXNnXSk7XG4gICAgICAgIGlmICh1c2VyICYmICFpc1B1YmxpY0FjY2VzcylcbiAgICAgICAgICBhd2FpdCBhcHBlbmRNZXNzYWdlKHVzZXIudWlkLCBtb2RlbEtleSwgZXJyb3JNc2cpO1xuICAgICAgICB0b2FzdC5kaXNtaXNzKFwic2VuZFwiKTtcbiAgICAgICAgc2V0U2VuZGluZyhmYWxzZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlcXVlc3RGb3JtYXRzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgaW5wdXRzOiB0cmltbWVkLFxuICAgICAgICAgIHBhcmFtZXRlcnM6IHsgbWF4X25ld190b2tlbnM6IDUwMCwgdGVtcGVyYXR1cmU6IDAuNyB9LFxuICAgICAgICB9LFxuICAgICAgICB7IHF1ZXJ5OiB0cmltbWVkLCBtYXhfbmV3X3Rva2VuczogNTAwLCB0ZW1wZXJhdHVyZTogMC43IH0sXG4gICAgICAgIHsgaW5wdXQ6IHRyaW1tZWQsIG1heF9sZW5ndGg6IDUwMCwgdGVtcGVyYXR1cmU6IDAuNyB9LFxuICAgICAgXTtcblxuICAgICAgbGV0IHJlcGx5ID0gXCJcIjtcbiAgICAgIGxldCBsYXN0RXJyb3IgPSBudWxsO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcXVlc3RGb3JtYXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmVxdWVzdE9wdGlvbnMuYm9keSA9IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RGb3JtYXRzW2ldKTtcbiAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChzZWxlY3RlZE1vZGVsLnVybCwgcmVxdWVzdE9wdGlvbnMpO1xuXG4gICAgICAgICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihgSFRUUCAke3Jlcy5zdGF0dXN9YCk7XG5cbiAgICAgICAgICBjb25zdCByYXcgPSBhd2FpdCByZXMudGV4dCgpO1xuICAgICAgICAgIHJlcGx5ID0gZm9ybWF0QUlSZXNwb25zZShyYXcpO1xuXG4gICAgICAgICAgaWYgKHJlcGx5ICYmIHJlcGx5ICE9PSBcInt9XCIpIGJyZWFrO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBsYXN0RXJyb3IgPSBlcnI7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFyZXBseSAmJiBsYXN0RXJyb3IpIHRocm93IGxhc3RFcnJvcjtcbiAgICAgIGlmICghcmVwbHkpIHRocm93IG5ldyBFcnJvcihcIk5vIHJlc3BvbnNlXCIpO1xuXG4gICAgICByZXBseSA9IHJlcGx5LnRyaW0oKTtcbiAgICAgIGNvbnN0IGFpTXNnID0geyByb2xlOiBcImFzc2lzdGFudFwiLCBjb250ZW50OiByZXBseSB9O1xuICAgICAgc2V0TWVzc2FnZXMoWy4uLnVwZGF0ZWRNZXNzYWdlcywgYWlNc2ddKTtcblxuICAgICAgaWYgKHVzZXIgJiYgIWlzUHVibGljQWNjZXNzKVxuICAgICAgICBhd2FpdCBhcHBlbmRNZXNzYWdlKHVzZXIudWlkLCBtb2RlbEtleSwgYWlNc2cpO1xuXG4gICAgICB0b2FzdC5zdWNjZXNzKFwiUmVwbHkgcmVjZWl2ZWRcIiwgeyBpZDogXCJzZW5kXCIgfSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zdCBlcnJvck1zZyA9IHtcbiAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgY29udGVudDogYCoqRXJyb3I6KiogJHtlcnIubWVzc2FnZX1gLFxuICAgICAgfTtcbiAgICAgIHNldE1lc3NhZ2VzKFsuLi5tZXNzYWdlcywgdXNlck1zZywgZXJyb3JNc2ddKTtcbiAgICAgIHRvYXN0LmVycm9yKFwiU2VuZCBmYWlsZWRcIiwgeyBpZDogXCJzZW5kXCIgfSk7XG4gICAgfVxuXG4gICAgc2V0U2VuZGluZyhmYWxzZSk7XG4gIH1cblxuICBhc3luYyBmdW5jdGlvbiBoYW5kbGVOZXdDaGF0KCkge1xuICAgIGlmICh1c2VyICYmICFpc1B1YmxpY0FjY2VzcykgYXdhaXQgc2V0Q29udmVyc2F0aW9uKHVzZXIudWlkLCBtb2RlbEtleSwgW10pO1xuICAgIHNldE1lc3NhZ2VzKFtdKTtcbiAgICAvLyDinIUgcmVzZXQgc2hhcmUgc3RhdGUgdG9vIChhZGRlZClcbiAgICBzZXRTaGFyZUlkKG51bGwpO1xuICAgIHNldFNoYXJlT3BlbihmYWxzZSk7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVTaWduT3V0KCkge1xuICAgIHNpZ25PdXQoYXV0aCkudGhlbigoKSA9PiByb3V0ZXIucHVzaChcIi9sb2dpblwiKSk7XG4gIH1cblxuICAvLyBORVc6IEhhbmRsZSBzaWduIGluIHJlZGlyZWN0XG4gIGZ1bmN0aW9uIGhhbmRsZVNpZ25JbigpIHtcbiAgICByb3V0ZXIucHVzaChcIi9sb2dpblwiKTtcbiAgfVxuXG4gIC8vIOKchSBHZW5lcmF0ZSBRUiAoYWRkZWQpXG4gIGFzeW5jIGZ1bmN0aW9uIGhhbmRsZUdlbmVyYXRlUVIoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghbWVzc2FnZXMgfHwgbWVzc2FnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRvYXN0LmVycm9yKFwiTm8gY29udmVyc2F0aW9uIHRvIHNoYXJlIHlldC5cIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdG9hc3QubG9hZGluZyhcIkdlbmVyYXRpbmcgUVIuLi5cIiwgeyBpZDogXCJzaGFyZVwiIH0pO1xuXG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcIi9hcGkvc2hhcmVcIiwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBtb2RlbEtleSxcbiAgICAgICAgICBjcmVhdGVkQXQ6IERhdGUubm93KCksXG4gICAgICAgICAgbWVzc2FnZXM6IG1lc3NhZ2VzLm1hcCgobSkgPT4gKHsgcm9sZTogbS5yb2xlLCBjb250ZW50OiBtLmNvbnRlbnQgfSkpLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKGBIVFRQICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgaWYgKCFkYXRhPy5pZCkgdGhyb3cgbmV3IEVycm9yKFwiTm8gc2hhcmUgaWQgcmV0dXJuZWQuXCIpO1xuXG4gICAgICBzZXRTaGFyZUlkKGRhdGEuaWQpO1xuICAgICAgc2V0U2hhcmVPcGVuKHRydWUpO1xuXG4gICAgICB0b2FzdC5zdWNjZXNzKFwiUVIgcmVhZHkhXCIsIHsgaWQ6IFwic2hhcmVcIiB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0b2FzdC5lcnJvcihgRmFpbGVkOiAke2UubWVzc2FnZX1gLCB7IGlkOiBcInNoYXJlXCIgfSk7XG4gICAgfVxuICB9XG5cbiAgaWYgKGxvYWRpbmcpXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1zY3JlZW4gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC14bFwiPlxuICAgICAgICBMb2FkaW5n4oCmXG4gICAgICA8L2Rpdj5cbiAgICApO1xuXG4gIGNvbnN0IGhlYWRlckhlaWdodCA9IDQ4O1xuICBjb25zdCBmb290ZXJIZWlnaHQgPSAzMjtcbiAgY29uc3Qgc2lkZWJhcldpZHRoID0gMjI0O1xuICBjb25zdCBrZXlib2FyZEhlaWdodCA9IDI4MDtcbiAgY29uc3QgaW5wdXRCYXJIZWlnaHQgPSA2MDtcbiAgY29uc3Qga2V5Ym9hcmRQYWRkaW5nID0gNDsgLy8gUkVEVUNFRCBGUk9NIDggVE8gNFxuXG4gIGNvbnN0IHNoYXJlVXJsID1cbiAgICBzaGFyZUlkICYmIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCJcbiAgICAgID8gYCR7d2luZG93LmxvY2F0aW9uLm9yaWdpbn0vc2hhcmUvJHtzaGFyZUlkfWBcbiAgICAgIDogXCJcIjtcblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT1cInJlbGF0aXZlIGgtc2NyZWVuIHctc2NyZWVuIG92ZXJmbG93LWhpZGRlbiBiZy1jb3ZlciBiZy1jZW50ZXJcIlxuICAgICAgc3R5bGU9e3sgYmFja2dyb3VuZEltYWdlOiBcInVybCgnL2JnLnBuZycpXCIgfX1cbiAgICA+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIGluc2V0LTAgYmctW3JnYmEoMjQ1LDI0NSwyNDUsMC4xOCldIGJhY2tkcm9wLWJsdXItc21cIiAvPlxuXG4gICAgICB7LyogSEVBREVSICovfVxuICAgICAgPGhlYWRlclxuICAgICAgICBjbGFzc05hbWU9XCJmaXhlZCB0b3AtMCBsZWZ0LTAgcmlnaHQtMCB6LTUwIGJnLWJsYWNrLzMwIHRleHQtd2hpdGUgcHktMS41IHB4LTQgZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIHNoYWRvdy1zbVwiXG4gICAgICAgIHN0eWxlPXt7IGhlaWdodDogYCR7aGVhZGVySGVpZ2h0fXB4YCB9fVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgPGltZyBzcmM9XCIvdHVwbG9nby5wbmdcIiBhbHQ9XCJUVVAgTG9nb1wiIGNsYXNzTmFtZT1cImgtNyB3LTdcIiAvPlxuICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJ0ZXh0LXhzIG1kOnRleHQtc20gZm9udC1ib2xkXCI+XG4gICAgICAgICAgICBURUNITk9MT0dJQ0FMIFVOSVZFUlNJVFkgT0YgVEhFIFBISUxJUFBJTkVTXG4gICAgICAgICAgPC9oMT5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIFNpZ24gSW4vT3V0IHN0YXlzIGluIGhlYWRlciAodW5jaGFuZ2VkKSAqL31cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIG9uQ2xpY2s9e3VzZXIgPyBoYW5kbGVTaWduT3V0IDogaGFuZGxlU2lnbklufVxuICAgICAgICAgIGNsYXNzTmFtZT1cImJnLVsjZmFhMDI5XSB0ZXh0LWJsYWNrIGZvbnQtc2VtaWJvbGQgcHgtNSBweS0yIHJvdW5kZWQtZnVsbCBzaGFkb3dcIlxuICAgICAgICA+XG4gICAgICAgICAge3VzZXIgPyBcIlNpZ24gT3V0XCIgOiBcIlNpZ24gSW5cIn1cbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L2hlYWRlcj5cblxuICAgICAgey8qIEZPT1RFUiAqL31cbiAgICAgIDxmb290ZXJcbiAgICAgICAgY2xhc3NOYW1lPVwiZml4ZWQgYm90dG9tLTAgbGVmdC0wIHJpZ2h0LTAgei01MCBiZy1ibGFjay8zMCB0ZXh0LWNlbnRlciBweS0xIHRleHQtd2hpdGUgdGV4dC14c1wiXG4gICAgICAgIHN0eWxlPXt7IGhlaWdodDogYCR7Zm9vdGVySGVpZ2h0fXB4YCB9fVxuICAgICAgPlxuICAgICAgICBEZXNpZ25lZCBieTogRWxlY3Ryb25pY3MgRW5naW5lZXJpbmcgRGVwYXJ0bWVudFxuICAgICAgPC9mb290ZXI+XG5cbiAgICAgIHsvKiBTRVBBUkFURSBLRVlCT0FSRCBDT05UQUlORVIgLSBBREpVU1RFRCBQT1NJVElPTiAqL31cbiAgICAgIHtzaG93S2V5Ym9hcmQgJiYgKFxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3NOYW1lPVwiZml4ZWQgbGVmdC0wIHJpZ2h0LTAgYmctd2hpdGUgc2hhZG93LTJ4bCBib3JkZXItdCBib3JkZXItZ3JheS0zMDBcIlxuICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICBib3R0b206IGAke2Zvb3RlckhlaWdodCArIDR9cHhgLFxuICAgICAgICAgICAgbGVmdDogc2lkZWJhck9wZW4gPyBgJHtzaWRlYmFyV2lkdGh9cHhgIDogXCIwcHhcIixcbiAgICAgICAgICAgIGhlaWdodDogYCR7a2V5Ym9hcmRIZWlnaHR9cHhgLFxuICAgICAgICAgICAgekluZGV4OiA1NSxcbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAgXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktZW5kIHAtMSBiZy1ncmF5LTEwMFwiPlxuICA8YnV0dG9uXG4gICAgdHlwZT1cImJ1dHRvblwiXG4gICAgb25Nb3VzZURvd249eyhlKSA9PiB7XG4gICAgICAvLyBQUkVWRU5UIGlucHV0IGJsdXIgZnJvbSBmaXJpbmdcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9fVxuICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAvLyAx77iP4oOjIENsZWFyIFJlYWN0IHN0YXRlXG4gICAgICBzZXRJbnB1dChcIlwiKTtcblxuICAgICAgLy8gMu+4j+KDoyBDbGVhciByZWZzXG4gICAgICBrZXlib2FyZElucHV0UmVmLmN1cnJlbnQgPSBcIlwiO1xuICAgICAgY2FyZXRQb3NpdGlvblJlZi5jdXJyZW50ID0gMDtcblxuICAgICAgLy8gM++4j+KDoyBDbGVhciBrZXlib2FyZCBpbnRlcm5hbCB2YWx1ZVxuICAgICAgaWYgKGtleWJvYXJkUmVmLmN1cnJlbnQpIHtcbiAgICAgICAga2V5Ym9hcmRSZWYuY3VycmVudC5zZXRJbnB1dChcIlwiKTtcbiAgICAgICAga2V5Ym9hcmRSZWYuY3VycmVudC5zZXRDYXJldFBvc2l0aW9uKDApO1xuICAgICAgfVxuXG4gICAgICAvLyA077iP4oOjIFJlc3RvcmUgZm9jdXMgc2FmZWx5XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBpZiAoaW5wdXRSZWYuY3VycmVudCkge1xuICAgICAgICAgIGlucHV0UmVmLmN1cnJlbnQuZm9jdXMoKTtcbiAgICAgICAgICBpbnB1dFJlZi5jdXJyZW50LnNldFNlbGVjdGlvblJhbmdlKDAsIDApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9fVxuICAgIGNsYXNzTmFtZT1cInRleHQtcmVkLTYwMCBob3Zlcjp0ZXh0LXJlZC04MDAgZm9udC1zZW1pYm9sZCBweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXhzXCJcbiAgPlxuICAgIENsZWFyIEFsbFxuICA8L2J1dHRvbj5cbjwvZGl2PlxuXG4gICAgICAgICAgPEtleWJvYXJkXG4gICAgICAgICAga2V5Ym9hcmRSZWY9eyhyKSA9PiB7XG4gICAgICAgICAgICBrZXlib2FyZFJlZi5jdXJyZW50ID0gcjtcbiAgICAgICAgICB9fVxuICAgICAgICAgIGxheW91dE5hbWU9e3NoaWZ0QWN0aXZlID8gXCJzaGlmdFwiIDogXCJkZWZhdWx0XCJ9XG4gICAgICAgICAgbGF5b3V0PXtsYXlvdXQucXdlcnR5fVxuICAgICAgICAgIG9uS2V5UHJlc3M9eyhidXR0b24pID0+IHtcbiAgICAgICAgICAgIGxldCBjdXJyZW50VGV4dCA9IGlucHV0O1xuICAgICAgICAgICAgbGV0IGNhcmV0UG9zID0gY2FyZXRQb3NpdGlvblJlZi5jdXJyZW50O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVUZXh0ID0gKG5ld1RleHQsIG5ld0NhcmV0UG9zKSA9PiB7XG4gICAgICAgICAgICBzZXRJbnB1dChuZXdUZXh0KTtcbiAgICAgICAgICAgIGtleWJvYXJkSW5wdXRSZWYuY3VycmVudCA9IG5ld1RleHQ7XG4gICAgICAgICAgICBjYXJldFBvc2l0aW9uUmVmLmN1cnJlbnQgPSBuZXdDYXJldFBvcztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKGlucHV0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICBpbnB1dFJlZi5jdXJyZW50LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgaW5wdXRSZWYuY3VycmVudC5zZXRTZWxlY3Rpb25SYW5nZShuZXdDYXJldFBvcywgbmV3Q2FyZXRQb3MpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH07XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gPT09PT0gU0hJRlQgPT09PT1cbiAgICAgICAgICAvLyBcbiAgICAgICAgICBpZiAoYnV0dG9uID09PSBcIntzaGlmdH1cIiB8fCBidXR0b24gPT09IFwie2xvY2t9XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1NoaWZ0U3RhdGUgPSAhc2hpZnRBY3RpdmU7XG4gICAgICAgICAgICBzZXRTaGlmdEFjdGl2ZShuZXdTaGlmdFN0YXRlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAga2V5Ym9hcmRSZWYuY3VycmVudD8uc2V0T3B0aW9ucyh7XG4gICAgICAgICAgICAgIGxheW91dE5hbWU6IG5ld1NoaWZ0U3RhdGUgPyBcInNoaWZ0XCIgOiBcImRlZmF1bHRcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyA9PT09PSBFTlRFUiA9PT09PVxuICAgICAgICAgIC8vIFxuICAgICAgICAgIGlmIChidXR0b24gPT09IFwie2VudGVyfVwiKSB7XG4gICAgICAgICAgICBoYW5kbGVTZW5kKHsgcHJldmVudERlZmF1bHQ6ICgpID0+IHt9IH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyA9PT09PSBCQUNLU1BBQ0UgPT09PT1cbiAgICAgICAgICAvLyBcbiAgICAgICAgICBpZiAoYnV0dG9uID09PSBcIntiYWNrc3BhY2V9XCIpIHtcbiAgICAgICAgICAgIGlmIChjYXJldFBvcyA+IDApIHtcbiAgICAgICAgICAgICAgY29uc3QgbmV3VGV4dCA9XG4gICAgICAgICAgICAgIGN1cnJlbnRUZXh0LnNsaWNlKDAsIGNhcmV0UG9zIC0gMSkgK1xuICAgICAgICAgICAgICBjdXJyZW50VGV4dC5zbGljZShjYXJldFBvcyk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICB1cGRhdGVUZXh0KG5ld1RleHQsIGNhcmV0UG9zIC0gMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vID09PT09IFNQQUNFID09PT09XG4gICAgICAgICAgLy8gXG4gICAgICAgICAgaWYgKGJ1dHRvbiA9PT0gXCJ7c3BhY2V9XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1RleHQgPVxuICAgICAgICAgICAgY3VycmVudFRleHQuc2xpY2UoMCwgY2FyZXRQb3MpICtcbiAgICAgICAgICAgIFwiIFwiICtcbiAgICAgICAgICAgIGN1cnJlbnRUZXh0LnNsaWNlKGNhcmV0UG9zKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdXBkYXRlVGV4dChuZXdUZXh0LCBjYXJldFBvcyArIDEpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyA9PT09PSBTUEVDSUFMIFRPS0VOUyBGUk9NIFlPVVIgTEFZT1VUID09PT09XG4gICAgICAgICAgLy8gXG4gICAgICAgICAgY29uc3Qgc3BlY2lhbFRva2VucyA9IHtcbiAgICAgICAgICAgIFwie0B9XCI6IFwiQFwiLFxuICAgICAgICAgICAgXCJ7JX1cIjogXCIlXCIsXG4gICAgICAgICAgICBcIns/fVwiOiBcIj9cIixcbiAgICAgICAgICAgIFwieyx9XCI6IFwiLFwiLFxuICAgICAgICAgICAgXCJ7Ln1cIjogXCIuXCIsXG4gICAgICAgICAgfTtcbiAgICAgICAgICBpZiAoc3BlY2lhbFRva2Vuc1tidXR0b25dKSB7XG4gICAgICAgICAgICBjb25zdCBjaGFyID0gc3BlY2lhbFRva2Vuc1tidXR0b25dO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBuZXdUZXh0ID1cbiAgICAgICAgICAgIGN1cnJlbnRUZXh0LnNsaWNlKDAsIGNhcmV0UG9zKSArXG4gICAgICAgICAgICBjaGFyICtcbiAgICAgICAgICAgIGN1cnJlbnRUZXh0LnNsaWNlKGNhcmV0UG9zKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdXBkYXRlVGV4dChuZXdUZXh0LCBjYXJldFBvcyArIDEpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgIC8vID09PT09IElnbm9yZSB1bmtub3duIGNvbnRyb2wgYnV0dG9ucyA9PT09PVxuICAgIGlmIChidXR0b24uc3RhcnRzV2l0aChcIntcIikgJiYgYnV0dG9uLmVuZHNXaXRoKFwifVwiKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vID09PT09IE5vcm1hbCBjaGFyYWN0ZXJzIChsZXR0ZXJzICYgbnVtYmVycykgPT09PT1cbiAgICBjb25zdCBuZXdUZXh0ID1cbiAgICAgIGN1cnJlbnRUZXh0LnNsaWNlKDAsIGNhcmV0UG9zKSArXG4gICAgICBidXR0b24gK1xuICAgICAgY3VycmVudFRleHQuc2xpY2UoY2FyZXRQb3MpO1xuXG4gICAgdXBkYXRlVGV4dChuZXdUZXh0LCBjYXJldFBvcyArIGJ1dHRvbi5sZW5ndGgpO1xuICB9fVxuICB0aGVtZT1cImhnLXRoZW1lLWRlZmF1bHQgaGctdGhlbWUtY3VzdG9tXCJcbiAgZGlzcGxheT17e1xuICAgIFwie2JhY2tzcGFjZX1cIjogXCLijKtcIixcbiAgICBcIntlbnRlcn1cIjogXCLihrVcIixcbiAgICBcIntzaGlmdH1cIjogXCLih6dcIixcbiAgICBcIntzcGFjZX1cIjogXCJTcGFjZVwiLFxuICAgIFwie0B9XCI6IFwiQFwiLFxuICAgIFwieyV9XCI6IFwiJVwiLFxuICAgIFwiez99XCI6IFwiP1wiLFxuICAgIFwieyx9XCI6IFwiLFwiLFxuICAgIFwiey59XCI6IFwiLlwiLFxuICAgIFwieyN9XCI6IFwiI1wiXG4gIH19XG4gIHByZXZlbnRNb3VzZURvd25EZWZhdWx0PXt0cnVlfVxuICBwcmV2ZW50TW91c2VVcERlZmF1bHQ9e3RydWV9XG4gIG5ld0xpbmVPbkVudGVyPXtmYWxzZX1cbiAgYXV0b1VzZVRvdWNoRXZlbnRzPXt0cnVlfVxuLz5cblxuICAgICAgICAgIHsvKiB5b3VyIGV4aXN0aW5nIGtleWJvYXJkIHN0eWxlcyByZW1haW4gdW5jaGFuZ2VkICovfVxuICAgICAgICAgIDxzdHlsZSBqc3ggZ2xvYmFsPntgXG4gICAgICAgICAgICAuc2ltcGxlLWtleWJvYXJkIHtcbiAgICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGUgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgcGFkZGluZzogMTBweCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDMwcHgpICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3ggIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5oZy10aGVtZS1jdXN0b20ge1xuICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCUgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaGctYnV0dG9uIHtcbiAgICAgICAgICAgICAgaGVpZ2h0OiA0NXB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBmb250LXdlaWdodDogNTAwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCAzcHggcmdiYSgwLCAwLCAwLCAwLjE1KSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBtYXJnaW46IDNweCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXIgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXIgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMXMgZWFzZSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBtaW4td2lkdGg6IDAgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgZmxleDogMSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmhnLXJvdzpudGgtY2hpbGQoMSkgLmhnLWJ1dHRvbiB7XG4gICAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmOGY5ZmEgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgY29sb3I6ICMzMzMgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmhnLXJvdzpudGgtY2hpbGQoMilcbiAgICAgICAgICAgICAgLmhnLWJ1dHRvbjpub3QoLmhnLWJ1dHRvbi1iYWNrc3BhY2UpOm5vdCguaGctYnV0dG9uLWVudGVyKSxcbiAgICAgICAgICAgIC5oZy1yb3c6bnRoLWNoaWxkKDMpIC5oZy1idXR0b246bm90KC5oZy1idXR0b24tZW50ZXIpLFxuICAgICAgICAgICAgLmhnLXJvdzpudGgtY2hpbGQoNCkgLmhnLWJ1dHRvbjpub3QoLmhnLWJ1dHRvbi1zaGlmdCkge1xuICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjYWEzNjM2ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjOGEyYzJjICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaGctcm93Om50aC1jaGlsZCg1KSAuaGctYnV0dG9uIHtcbiAgICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZhYTAyOSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBjb2xvcjogYmxhY2sgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2Q4OGMyMCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBmb250LXdlaWdodDogYm9sZCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmhnLWJ1dHRvbi1zaGlmdCxcbiAgICAgICAgICAgIC5oZy1idXR0b24tYmFja3NwYWNlLFxuICAgICAgICAgICAgLmhnLWJ1dHRvbi1lbnRlciB7XG4gICAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmYWEwMjkgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgY29sb3I6IGJsYWNrICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkODhjMjAgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQgIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5oZy1idXR0b24tc3BhY2Uge1xuICAgICAgICAgICAgICBmbGV4LWdyb3c6IDMgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgbWF4LXdpZHRoOiBub25lICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaGctYnV0dG9uLWJhY2tzcGFjZSxcbiAgICAgICAgICAgIC5oZy1idXR0b24tZW50ZXIsXG4gICAgICAgICAgICAuaGctYnV0dG9uLXNoaWZ0IHtcbiAgICAgICAgICAgICAgbWluLXdpZHRoOiA3MHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGZsZXgtZ3JvdzogMC41ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaGctYnV0dG9uLVxcXFx7QFxcXFx9LFxuICAgICAgICAgICAgLmhnLWJ1dHRvbi1cXFxceyVcXFxcfSxcbiAgICAgICAgICAgIC5oZy1idXR0b24tXFxcXHtcXFxcP1xcXFx9LFxuICAgICAgICAgICAgLmhnLWJ1dHRvbi1cXFxce1xcXFwsXFxcXH0sXG4gICAgICAgICAgICAuaGctYnV0dG9uLVxcXFx7XFxcXC5cXFxcfSB7XG4gICAgICAgICAgICAgIG1pbi13aWR0aDogMzVweCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBmbGV4LWdyb3c6IDAuMyAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmhnLWJ1dHRvbjphY3RpdmUsXG4gICAgICAgICAgICAuaGctYnV0dG9uLmhnLWFjdGl2ZUJ0biB7XG4gICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgycHgpICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMXB4IDJweCByZ2JhKDAsIDAsIDAsIDAuMSkgIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5oZy1yb3c6bnRoLWNoaWxkKDIpXG4gICAgICAgICAgICAgIC5oZy1idXR0b246YWN0aXZlOm5vdCguaGctYnV0dG9uLWJhY2tzcGFjZSk6bm90KC5oZy1idXR0b24tZW50ZXIpLFxuICAgICAgICAgICAgLmhnLXJvdzpudGgtY2hpbGQoMykgLmhnLWJ1dHRvbjphY3RpdmU6bm90KC5oZy1idXR0b24tZW50ZXIpLFxuICAgICAgICAgICAgLmhnLXJvdzpudGgtY2hpbGQoNCkgLmhnLWJ1dHRvbjphY3RpdmU6bm90KC5oZy1idXR0b24tc2hpZnQpIHtcbiAgICAgICAgICAgICAgYmFja2dyb3VuZDogIzhhMmMyYyAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmhnLWJ1dHRvbi1zaGlmdDphY3RpdmUsXG4gICAgICAgICAgICAuaGctYnV0dG9uLWJhY2tzcGFjZTphY3RpdmUsXG4gICAgICAgICAgICAuaGctYnV0dG9uLWVudGVyOmFjdGl2ZSxcbiAgICAgICAgICAgIC5oZy1yb3c6bnRoLWNoaWxkKDUpIC5oZy1idXR0b246YWN0aXZlLFxuICAgICAgICAgICAgLmhnLWJ1dHRvbi1zaGlmdC5oZy1hY3RpdmVCdG4ge1xuICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZDg4YzIwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaGctcm93cyB7XG4gICAgICAgICAgICAgIGhlaWdodDogMTAwJSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW4gIWltcG9ydGFudDtcbiAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIHBhZGRpbmc6IDAgOHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaGctcm93IHtcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlciAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBmbGV4OiAxICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDQ4cHggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaGctYnV0dG9uLXN0YW5kYXJkIHtcbiAgICAgICAgICAgICAgbWluLXdpZHRoOiAzNXB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGZsZXg6IDEgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgbWF4LXdpZHRoOiA1MHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaGctcm93Omxhc3QtY2hpbGQge1xuICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaGctYnV0dG9uLWJhY2tzcGFjZSB7XG4gICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmhnLWJ1dHRvbi1lbnRlciB7XG4gICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLnNpbXBsZS1rZXlib2FyZC5oZy1sYXlvdXQtZGVmYXVsdCAuaGctcm93IHtcbiAgICAgICAgICAgICAgZmxleC13cmFwOiBub3dyYXAgIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5oZy1idXR0b24gc3BhbiB7XG4gICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIGB9PC9zdHlsZT5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuXG4gICAgICB7LyogTUFJTiAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLWZ1bGwgcmVsYXRpdmUgei0xMFwiPlxuICAgICAgICB7LyogU0lERUJBUiAqL31cbiAgICAgICAgPGRpdlxuICAgICAgICAgIGNsYXNzTmFtZT1cImZpeGVkIGJnLVsjYWEzNjM2XSB0ZXh0LXdoaXRlIHNoYWRvdy14bCBmbGV4IGZsZXgtY29sIHB4LTQgcHktMyB0cmFuc2l0aW9uLXRyYW5zZm9ybSBkdXJhdGlvbi0zMDBcIlxuICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICB0b3A6IGhlYWRlckhlaWdodCxcbiAgICAgICAgICAgIGJvdHRvbTogZm9vdGVySGVpZ2h0LFxuICAgICAgICAgICAgd2lkdGg6IHNpZGViYXJXaWR0aCxcbiAgICAgICAgICAgIHRyYW5zZm9ybTogc2lkZWJhck9wZW4gPyBcInRyYW5zbGF0ZVgoMClcIiA6IGB0cmFuc2xhdGVYKC0xMDAlKWAsXG4gICAgICAgICAgICB6SW5kZXg6IDYwLFxuICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICB7LyogQkFDSyBCVVRUT04gKi99XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gcm91dGVyLnB1c2godXNlciA/IFwiL21vZGVsc1wiIDogXCIvXCIpfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEgdGV4dC1bI2ZhYTAyOV0gdHJhbnNpdGlvbiBtYi0zXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhsXCI+4oaQPC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LXNlbWlib2xkXCI+XG4gICAgICAgICAgICAgIHt1c2VyID8gXCJCYWNrIHRvIE1lbnVcIiA6IFwiQmFjayB0byBIb21lXCJ9XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPC9idXR0b24+XG5cbiAgICAgICAgICB7LyogXCIrIE5FVyBDSEFUXCIgKi99XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgb25DbGljaz17aGFuZGxlTmV3Q2hhdH1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBiZy13aGl0ZSB0ZXh0LVsjYWEzNjM2XSBmb250LWJvbGQgcHktMSByb3VuZGVkLWZ1bGwgc2hhZG93IG1iLTYgdGV4dC1zbVwiXG4gICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5Ub3A6IFwiLTRweFwiIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgKyBOZXcgQ2hhdFxuICAgICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSBvcGFjaXR5LTgwIG1iLTNcIj5SZWNlbnRzPC9wPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1bMXB4XSBiZy13aGl0ZS80MCBtYi00XCI+PC9kaXY+XG5cbiAgICAgICAgICB7LyogVVNFUiBJTkZPICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtYXV0byBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyBib3JkZXItdCBib3JkZXItd2hpdGUvMzAgcHQtNFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLTEwIHctMTAgYmctd2hpdGUvMjAgcm91bmRlZC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgICAgIDxpbWcgc3JjPVwiL3R1cGktbG9nby5wbmdcIiBjbGFzc05hbWU9XCJoLTggdy04IHJvdW5kZWQtZnVsbFwiIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1ib2xkXCI+e3JlYWxOYW1lfTwvcD5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyBvcGFjaXR5LTgwXCI+XG4gICAgICAgICAgICAgICAge3VzZXIgPyBcIkxvZ2dlZCBJblwiIDogXCJHdWVzdCBNb2RlXCJ9XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogU0lERUJBUiBUT0dHTEUgKi99XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaWRlYmFyT3Blbighc2lkZWJhck9wZW4pfVxuICAgICAgICAgIGNsYXNzTmFtZT1cImZpeGVkIGJnLVsjYWEzNjM2XSB0ZXh0LXdoaXRlIHB4LTIgcHktMyByb3VuZGVkLXItZnVsbCBzaGFkb3cgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMzAwXCJcbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgdG9wOiBgY2FsYygke2hlYWRlckhlaWdodH1weCArIDMwJSlgLFxuICAgICAgICAgICAgbGVmdDogc2lkZWJhck9wZW4gPyBgJHtzaWRlYmFyV2lkdGh9cHhgIDogXCIwcHhcIixcbiAgICAgICAgICAgIHRyYW5zZm9ybTogXCJ0cmFuc2xhdGVZKC01MCUpXCIsXG4gICAgICAgICAgICB6SW5kZXg6IDcwLFxuICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICB7c2lkZWJhck9wZW4gPyBcIuKXgFwiIDogXCLilrZcIn1cbiAgICAgICAgPC9idXR0b24+XG5cbiAgICAgICAgey8qIENIQVQgQVJFQSAqL31cbiAgICAgICAgPGRpdlxuICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXgtMSByZWxhdGl2ZSB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0zMDAgJHtcbiAgICAgICAgICAgIHNpZGViYXJPcGVuID8gYG1sLVsyMjRweF1gIDogXCJtbC0wXCJcbiAgICAgICAgICB9YH1cbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgbWFyZ2luVG9wOiBgJHtoZWFkZXJIZWlnaHR9cHhgLFxuICAgICAgICAgICAgbWFyZ2luQm90dG9tOiBzaG93S2V5Ym9hcmRcbiAgICAgICAgICAgICAgPyBgJHtmb290ZXJIZWlnaHQgKyBrZXlib2FyZEhlaWdodCArIGtleWJvYXJkUGFkZGluZyArIGlucHV0QmFySGVpZ2h0ICsgNH1weGBcbiAgICAgICAgICAgICAgOiBgJHtmb290ZXJIZWlnaHR9cHhgLFxuICAgICAgICAgICAgdHJhbnNpdGlvbjogXCJtYXJnaW4tYm90dG9tIDAuM3MgZWFzZS1pbi1vdXRcIixcbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAgey8qIOKchSBHZW5lcmF0ZSBRUiBidXR0b24gaW5zaWRlIGNoYXQgYXJlYSAoYWRkZWQpICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTMgcmlnaHQtNiB6LTQwXCI+XG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUdlbmVyYXRlUVJ9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXttZXNzYWdlcy5sZW5ndGggPT09IDB9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YHB4LTQgcHktMiByb3VuZGVkLWZ1bGwgc2hhZG93IGZvbnQtc2VtaWJvbGQgdGV4dC14cyAke1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VzLmxlbmd0aCA9PT0gMFxuICAgICAgICAgICAgICAgICAgPyBcImJnLXdoaXRlLzUwIHRleHQtZ3JheS03MDBcIlxuICAgICAgICAgICAgICAgICAgOiBcImJnLXdoaXRlLzkwIHRleHQtYmxhY2tcIlxuICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgdGl0bGU9e1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VzLmxlbmd0aCA9PT0gMFxuICAgICAgICAgICAgICAgICAgPyBcIlN0YXJ0IGEgY29udmVyc2F0aW9uIGZpcnN0XCJcbiAgICAgICAgICAgICAgICAgIDogXCJHZW5lcmF0ZSBRUiBmb3IgdGhpcyBjb252ZXJzYXRpb25cIlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIEdlbmVyYXRlIFFSXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIHsvKiBNRVNTQUdFUyAqL31cbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC0wIHB4LTYgb3ZlcmZsb3cteS1hdXRvIGZsZXggZmxleC1jb2xcIlxuICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgcGFkZGluZ1RvcDogXCIxNXB4XCIsXG4gICAgICAgICAgICAgIHBhZGRpbmdCb3R0b206IHNob3dLZXlib2FyZFxuICAgICAgICAgICAgICAgID8gYCR7aW5wdXRCYXJIZWlnaHQgKyBrZXlib2FyZFBhZGRpbmcgKyBrZXlib2FyZEhlaWdodH1weGBcbiAgICAgICAgICAgICAgICA6IGAke2lucHV0QmFySGVpZ2h0fXB4YCxcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAge21lc3NhZ2VzLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgZmxleCBqdXN0aWZ5LWNlbnRlciBpdGVtcy1jZW50ZXIgdGV4dC1jZW50ZXIgdGV4dC1zbSBmb250LWJvbGQgdGV4dC1bI2FhMzYzNl1cIj5cbiAgICAgICAgICAgICAgICBIZWxsbywge25pY2tuYW1lfSFcbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICBtZXNzYWdlcy5tYXAoKG1zZywgaSkgPT4gKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGtleT17aX1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YG1iLTQgdy1mdWxsICR7XG4gICAgICAgICAgICAgICAgICAgIG1zZy5yb2xlID09PSBcInVzZXJcIiA/IFwidGV4dC1yaWdodFwiIDogXCJ0ZXh0LWxlZnRcIlxuICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BpbmxpbmUtYmxvY2sgcHgtNCBweS0zIHJvdW5kZWQtMnhsIHNoYWRvdy1sZyB0ZXh0LXNtIG1heC13LVs4NSVdICR7XG4gICAgICAgICAgICAgICAgICAgICAgbXNnLnJvbGUgPT09IFwidXNlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICA/IFwiYmctWyNhYTM2MzZdIHRleHQtd2hpdGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgOiBcImJnLXdoaXRlIHRleHQtYmxhY2sgYm9yZGVyIGJvcmRlci1ncmF5LTIwMFwiXG4gICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgIHdoaXRlU3BhY2U6IFwicHJlLXdyYXBcIixcbiAgICAgICAgICAgICAgICAgICAgICB3b3JkQnJlYWs6IFwiYnJlYWstd29yZFwiLFxuICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93V3JhcDogXCJicmVhay13b3JkXCIsXG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHttc2cucm9sZSA9PT0gXCJ1c2VyXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3aGl0ZXNwYWNlLXByZS13cmFwIGJyZWFrLXdvcmRzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7bXNnLmNvbnRlbnR9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgPFNpbXBsZU1hcmtkb3duUmVuZGVyZXIgdGV4dD17bXNnLmNvbnRlbnR9IC8+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgIDxkaXYgcmVmPXtlbmRSZWZ9IC8+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7Lyog4pyFIFFSIE1PREFMIChhZGRlZCkgKi99XG4gICAgICAgICAge3NoYXJlT3BlbiAmJiBzaGFyZUlkICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgaW5zZXQtMCB6LVs5MF0gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIGluc2V0LTAgYmctYmxhY2svNTBcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNoYXJlT3BlbihmYWxzZSl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmUgYmctd2hpdGUgcm91bmRlZC0yeGwgc2hhZG93LTJ4bCBib3JkZXIgcC01IHctWzMyMHB4XSBtYXgtdy1bOTB2d11cIj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LWNlbnRlciBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICBTY2FuIHRvIHZpZXcgb24gcGhvbmVcbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNjAwIHRleHQtY2VudGVyIG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgIFRoaXMgb3BlbnMgYSBkb2N1bWVudC1zdHlsZSBwYWdlIHRoYXQgY2FuIGJlIHNhdmVkIGFzIFBERi5cbiAgICAgICAgICAgICAgICA8L3A+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgIDxRUkNvZGVDYW52YXMgdmFsdWU9e3NoYXJlVXJsfSBzaXplPXsyMjB9IGluY2x1ZGVNYXJnaW49e3RydWV9IC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTQgZmxleCBnYXAtMlwiPlxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4LTEgYmctWyNhYTM2MzZdIHRleHQtd2hpdGUgdGV4dC14cyBmb250LXNlbWlib2xkIHB5LTIgcm91bmRlZC14bFwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNoYXJlVXJsKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZD8ud3JpdGVUZXh0KHNoYXJlVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICB0b2FzdC5zdWNjZXNzKFwiTGluayBjb3BpZWQhXCIpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICBDb3B5IExpbmtcbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXgtMSBiZy1ncmF5LTIwMCB0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgcHktMiByb3VuZGVkLXhsXCJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2hhcmVPcGVuKGZhbHNlKX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgQ2xvc2VcbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG5cbiAgICAgICAgICB7LyogSU5QVVQgQkFSICovfVxuICAgICAgICAgIDxmb3JtXG4gICAgICAgICAgICByZWY9e2lucHV0QmFyUmVmfVxuICAgICAgICAgICAgb25TdWJtaXQ9e2hhbmRsZVNlbmR9XG4gICAgICAgICAgICBjbGFzc05hbWU9e2BmaXhlZCBsZWZ0LTAgei01MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBnYXAtMyB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0zMDAgJHtcbiAgICAgICAgICAgICAgc2lkZWJhck9wZW5cbiAgICAgICAgICAgICAgICA/IFwibWwtWzIyNHB4XSB3LVtjYWxjKDEwMCUtMTRyZW0pXSBweC02XCJcbiAgICAgICAgICAgICAgICA6IFwibWwtMCB3LWZ1bGwgcHgtNlwiXG4gICAgICAgICAgICB9YH1cbiAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgIGJvdHRvbTogc2hvd0tleWJvYXJkXG4gICAgICAgICAgICAgICAgPyBgJHtmb290ZXJIZWlnaHQgKyBrZXlib2FyZEhlaWdodCArIGtleWJvYXJkUGFkZGluZyArIDR9cHhgXG4gICAgICAgICAgICAgICAgOiBgJHtmb290ZXJIZWlnaHQgKyA4fXB4YCxcbiAgICAgICAgICAgICAgdHJhbnNpdGlvbjogXCJib3R0b20gMC4zcyBlYXNlLWluLW91dFwiLFxuICAgICAgICAgICAgfX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgcmVmPXtpbnB1dFJlZn1cbiAgICAgICAgICAgICAgdmFsdWU9e2lucHV0fVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICBjb25zdCBjYXJldCA9IGUudGFyZ2V0LnNlbGVjdGlvblN0YXJ0O1xuICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgc2V0SW5wdXQodmFsdWUpO1xuICAgICAgICAgICAgICAgICBrZXlib2FyZElucHV0UmVmLmN1cnJlbnQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgY2FyZXRQb3NpdGlvblJlZi5jdXJyZW50ID0gY2FyZXQ7XG4gICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICBpZiAoa2V5Ym9hcmRSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICAgICAga2V5Ym9hcmRSZWYuY3VycmVudC5zZXRJbnB1dCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICBrZXlib2FyZFJlZi5jdXJyZW50LnNldENhcmV0UG9zaXRpb24oY2FyZXQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgb25DbGljaz17KGUpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgY2FyZXQgPSBlLnRhcmdldC5zZWxlY3Rpb25TdGFydDtcbiAgICAgICAgICAgICAgY2FyZXRQb3NpdGlvblJlZi5jdXJyZW50ID0gY2FyZXQ7XG4gICAgICAgICAgICAgIGtleWJvYXJkUmVmLmN1cnJlbnQ/LnNldENhcmV0UG9zaXRpb24oY2FyZXQpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIG9uS2V5VXA9eyhlKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGNhcmV0ID0gZS50YXJnZXQuc2VsZWN0aW9uU3RhcnQ7XG4gICAgICAgICAgICAgIGNhcmV0UG9zaXRpb25SZWYuY3VycmVudCA9IGNhcmV0O1xuICAgICAgICAgICAgICBrZXlib2FyZFJlZi5jdXJyZW50Py5zZXRDYXJldFBvc2l0aW9uKGNhcmV0KTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIG9uRm9jdXM9eygpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRTaG93S2V5Ym9hcmQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGNoYXRDb250YWluZXJSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICAgICAgbGFzdFNjcm9sbFRvcFJlZi5jdXJyZW50ID0gY2hhdENvbnRhaW5lclJlZi5jdXJyZW50LnNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIG9uQmx1cj17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpc0tleWJvYXJkQ2xpY2sgPSBlLnJlbGF0ZWRUYXJnZXQ/LmNsb3Nlc3QoXCIuc2ltcGxlLWtleWJvYXJkXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzSW5wdXRDbGljayA9IGUucmVsYXRlZFRhcmdldD8uY2xvc2VzdChcbiAgICAgICAgICAgICAgICAgICdpbnB1dFtwbGFjZWhvbGRlcio9XCJBc2tcIl0nXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpc1NpZGViYXJDbGljayA9IGUucmVsYXRlZFRhcmdldD8uY2xvc2VzdChcbiAgICAgICAgICAgICAgICAgIFwiLmZpeGVkLmJnLVxcXFxbXFxcXCNhYTM2MzZcXFxcXVwiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpc1NpZGViYXJUb2dnbGVDbGljayA9IGUucmVsYXRlZFRhcmdldD8uY2xvc2VzdChcbiAgICAgICAgICAgICAgICAgIFwiYnV0dG9uLmZpeGVkLmJnLVxcXFxbXFxcXCNhYTM2MzZcXFxcXVwiXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICFpc0tleWJvYXJkQ2xpY2sgJiZcbiAgICAgICAgICAgICAgICAgICFpc0lucHV0Q2xpY2sgJiZcbiAgICAgICAgICAgICAgICAgICFpc1NpZGViYXJDbGljayAmJlxuICAgICAgICAgICAgICAgICAgIWlzU2lkZWJhclRvZ2dsZUNsaWNrXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0U2hvd0tleWJvYXJkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YEFzayAke21vZGVsS2V5LnRvVXBwZXJDYXNlKCl9Li4uYH1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHB5LTMgcHgtNSByb3VuZGVkLWZ1bGwgYmctd2hpdGUvOTUgb3V0bGluZS1ub25lIGJvcmRlciBib3JkZXItZ3JheS0zMDAgc2hhZG93LXNtIHRleHQtc20gZm9jdXM6Ym9yZGVyLVsjYWEzNjM2XSBmb2N1czpyaW5nLTEgZm9jdXM6cmluZy1bI2FhMzYzNl0gdHJhbnNpdGlvblwiXG4gICAgICAgICAgICAgIGRpc2FibGVkPXtzZW5kaW5nfVxuICAgICAgICAgICAgLz5cblxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICB0eXBlPVwic3VibWl0XCJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e3NlbmRpbmcgfHwgIWlucHV0LnRyaW0oKX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctWyNhYTM2MzZdIHRleHQtd2hpdGUgcHgtNSBweS0zIHJvdW5kZWQtZnVsbCB0ZXh0LXNtIHNoYWRvd1wiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIFNlbmRcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJSZWFjdCIsInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZVN0YXRlIiwidXNlQ2FsbGJhY2siLCJRUkNvZGVDYW52YXMiLCJ1c2VSb3V0ZXIiLCJhdXRoIiwib25BdXRoU3RhdGVDaGFuZ2VkIiwic2lnbk91dCIsInRvYXN0IiwiZ2V0Q29udmVyc2F0aW9uIiwiYXBwZW5kTWVzc2FnZSIsInNldENvbnZlcnNhdGlvbiIsImdldFVzZXJQcm9maWxlIiwiS2V5Ym9hcmQiLCJsYXlvdXQiLCJxd2VydHkiLCJkZWZhdWx0Iiwic2hpZnQiLCJTaW1wbGVNYXJrZG93blJlbmRlcmVyIiwidGV4dCIsImxpbmVzIiwic3BsaXQiLCJtYXAiLCJsaW5lIiwiaW5kZXgiLCJ0cmltIiwiYnIiLCJjb250ZW50IiwiYm9sZFJlZ2V4IiwicGFydHMiLCJsYXN0SW5kZXgiLCJtYXRjaCIsImV4ZWMiLCJwdXNoIiwic3BhbiIsInN1YnN0cmluZyIsInN0cm9uZyIsImxlbmd0aCIsImRpdiIsImNsYXNzTmFtZSIsImZvcm1hdEFJUmVzcG9uc2UiLCJjbGVhbmVkIiwic3RhcnRzV2l0aCIsImVuZHNXaXRoIiwianNvbiIsIkpTT04iLCJwYXJzZSIsImdlbmVyYXRlZF90ZXh0IiwicmVzcG9uc2UiLCJhbnN3ZXIiLCJvdXRwdXQiLCJtZXNzYWdlIiwic3RyaW5naWZ5IiwicmVwbGFjZSIsIkNoYXRQYWdlIiwicm91dGVyIiwibW9kZWwiLCJwdWJsaWMiLCJpc1B1YmxpYyIsInF1ZXJ5IiwibW9kZWxDb25maWdzIiwiZWNlIiwidXJsIiwidG9rZW4iLCJuYXYiLCJpbmZvIiwibW9kZWxLZXkiLCJzZWxlY3RlZE1vZGVsIiwiaXNQdWJsaWNBY2Nlc3MiLCJsb2FkaW5nIiwic2V0TG9hZGluZyIsInVzZXIiLCJzZXRVc2VyIiwibmlja25hbWUiLCJzZXROaWNrbmFtZSIsInJlYWxOYW1lIiwic2V0UmVhbE5hbWUiLCJtZXNzYWdlcyIsInNldE1lc3NhZ2VzIiwiaW5wdXQiLCJzZXRJbnB1dCIsInNlbmRpbmciLCJzZXRTZW5kaW5nIiwic2hpZnRBY3RpdmUiLCJzZXRTaGlmdEFjdGl2ZSIsImVuZFJlZiIsInNpZGViYXJPcGVuIiwic2V0U2lkZWJhck9wZW4iLCJzaG93S2V5Ym9hcmQiLCJzZXRTaG93S2V5Ym9hcmQiLCJrZXlib2FyZFJlZiIsImxhc3RTY3JvbGxUb3BSZWYiLCJrZXlib2FyZFNjcm9sbFRocmVzaG9sZCIsImNoYXRDb250YWluZXJSZWYiLCJpbnB1dEJhclJlZiIsImtleWJvYXJkSW5wdXRSZWYiLCJpbnB1dFJlZiIsImNhcmV0UG9zaXRpb25SZWYiLCJzaGFyZUlkIiwic2V0U2hhcmVJZCIsInNoYXJlT3BlbiIsInNldFNoYXJlT3BlbiIsInVuc3ViIiwidSIsInByb2ZpbGUiLCJ1aWQiLCJuYW1lIiwiZGlzcGxheU5hbWUiLCJlbWFpbCIsIm5pY2siLCJjb252IiwiY3VycmVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImhhbmRsZVNjcm9sbCIsImNoYXRDb250YWluZXIiLCJjdXJyZW50U2Nyb2xsVG9wIiwic2Nyb2xsVG9wIiwic2Nyb2xsRGlmZiIsIk1hdGgiLCJhYnMiLCJpbnB1dEVsZW1lbnQiLCJibHVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzY3JvbGxJbnRvVmlldyIsImJlaGF2aW9yIiwiaGFuZGxlU2VuZCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInRyaW1tZWQiLCJ1c2VyTXNnIiwicm9sZSIsInVwZGF0ZWRNZXNzYWdlcyIsImlkIiwiZXJyb3JNc2ciLCJkaXNtaXNzIiwicmVxdWVzdE9wdGlvbnMiLCJtZXRob2QiLCJoZWFkZXJzIiwicmVxdWVzdEZvcm1hdHMiLCJpbnB1dHMiLCJwYXJhbWV0ZXJzIiwibWF4X25ld190b2tlbnMiLCJ0ZW1wZXJhdHVyZSIsIm1heF9sZW5ndGgiLCJyZXBseSIsImxhc3RFcnJvciIsImkiLCJib2R5IiwicmVzIiwiZmV0Y2giLCJvayIsIkVycm9yIiwic3RhdHVzIiwicmF3IiwiZXJyIiwiYWlNc2ciLCJzdWNjZXNzIiwiZXJyb3IiLCJoYW5kbGVOZXdDaGF0IiwiaGFuZGxlU2lnbk91dCIsInRoZW4iLCJoYW5kbGVTaWduSW4iLCJoYW5kbGVHZW5lcmF0ZVFSIiwiY3JlYXRlZEF0IiwiRGF0ZSIsIm5vdyIsIm0iLCJkYXRhIiwiaGVhZGVySGVpZ2h0IiwiZm9vdGVySGVpZ2h0Iiwic2lkZWJhcldpZHRoIiwia2V5Ym9hcmRIZWlnaHQiLCJpbnB1dEJhckhlaWdodCIsImtleWJvYXJkUGFkZGluZyIsInNoYXJlVXJsIiwid2luZG93IiwibG9jYXRpb24iLCJvcmlnaW4iLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsImhlYWRlciIsImhlaWdodCIsImltZyIsInNyYyIsImFsdCIsImgxIiwiYnV0dG9uIiwib25DbGljayIsImZvb3RlciIsImJvdHRvbSIsImxlZnQiLCJ6SW5kZXgiLCJ0eXBlIiwib25Nb3VzZURvd24iLCJzdG9wUHJvcGFnYXRpb24iLCJzZXRDYXJldFBvc2l0aW9uIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiZm9jdXMiLCJzZXRTZWxlY3Rpb25SYW5nZSIsInIiLCJsYXlvdXROYW1lIiwib25LZXlQcmVzcyIsImN1cnJlbnRUZXh0IiwiY2FyZXRQb3MiLCJ1cGRhdGVUZXh0IiwibmV3VGV4dCIsIm5ld0NhcmV0UG9zIiwibmV3U2hpZnRTdGF0ZSIsInNldE9wdGlvbnMiLCJzbGljZSIsInNwZWNpYWxUb2tlbnMiLCJjaGFyIiwidGhlbWUiLCJkaXNwbGF5IiwicHJldmVudE1vdXNlRG93bkRlZmF1bHQiLCJwcmV2ZW50TW91c2VVcERlZmF1bHQiLCJuZXdMaW5lT25FbnRlciIsImF1dG9Vc2VUb3VjaEV2ZW50cyIsInRvcCIsIndpZHRoIiwidHJhbnNmb3JtIiwibWFyZ2luVG9wIiwicCIsIm1hcmdpbkJvdHRvbSIsInRyYW5zaXRpb24iLCJkaXNhYmxlZCIsInRpdGxlIiwicGFkZGluZ1RvcCIsInBhZGRpbmdCb3R0b20iLCJtc2ciLCJ3aGl0ZVNwYWNlIiwid29yZEJyZWFrIiwib3ZlcmZsb3dXcmFwIiwicmVmIiwidmFsdWUiLCJzaXplIiwiaW5jbHVkZU1hcmdpbiIsIm5hdmlnYXRvciIsImNsaXBib2FyZCIsIndyaXRlVGV4dCIsImZvcm0iLCJvblN1Ym1pdCIsIm9uQ2hhbmdlIiwidGFyZ2V0IiwiY2FyZXQiLCJzZWxlY3Rpb25TdGFydCIsIm9uS2V5VXAiLCJvbkZvY3VzIiwib25CbHVyIiwiaXNLZXlib2FyZENsaWNrIiwicmVsYXRlZFRhcmdldCIsImNsb3Nlc3QiLCJpc0lucHV0Q2xpY2siLCJpc1NpZGViYXJDbGljayIsImlzU2lkZWJhclRvZ2dsZUNsaWNrIiwic2V0VGltZW91dCIsInBsYWNlaG9sZGVyIiwidG9VcHBlckNhc2UiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./pages/chat.js\n");

/***/ }),

/***/ "(pages-dir-node)/./styles/globals.css":
/*!****************************!*\
  !*** ./styles/globals.css ***!
  \****************************/
/***/ (() => {



/***/ }),

/***/ "../../../shared/lib/no-fallback-error.external":
/*!*********************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external.js" ***!
  \*********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external.js");

/***/ }),

/***/ "firebase/app":
/*!*******************************!*\
  !*** external "firebase/app" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = import("firebase/app");;

/***/ }),

/***/ "firebase/auth":
/*!********************************!*\
  !*** external "firebase/auth" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = import("firebase/auth");;

/***/ }),

/***/ "firebase/firestore":
/*!*************************************!*\
  !*** external "firebase/firestore" ***!
  \*************************************/
/***/ ((module) => {

"use strict";
module.exports = import("firebase/firestore");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "next/dist/compiled/next-server/pages.runtime.dev.js":
/*!**********************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages.runtime.dev.js" ***!
  \**********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/pages.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "qrcode.react":
/*!*******************************!*\
  !*** external "qrcode.react" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = import("qrcode.react");;

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("react");

/***/ }),

/***/ "react-dom":
/*!****************************!*\
  !*** external "react-dom" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("react-dom");

/***/ }),

/***/ "react-hot-toast":
/*!**********************************!*\
  !*** external "react-hot-toast" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = import("react-hot-toast");;

/***/ }),

/***/ "react-simple-keyboard":
/*!****************************************!*\
  !*** external "react-simple-keyboard" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react-simple-keyboard");

/***/ }),

/***/ "react/jsx-dev-runtime":
/*!****************************************!*\
  !*** external "react/jsx-dev-runtime" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-dev-runtime");

/***/ }),

/***/ "react/jsx-runtime":
/*!************************************!*\
  !*** external "react/jsx-runtime" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-runtime");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "styled-jsx/style":
/*!***********************************!*\
  !*** external "styled-jsx/style" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = require("styled-jsx/style");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@swc","vendor-chunks/react-simple-keyboard"], () => (__webpack_exec__("(pages-dir-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%5Cchat.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();