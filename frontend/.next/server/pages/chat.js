/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/chat";
exports.ids = ["pages/chat"];
exports.modules = {

/***/ "(pages-dir-node)/./firebase/clientApp.js":
/*!*******************************!*\
  !*** ./firebase/clientApp.js ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auth: () => (/* binding */ auth),\n/* harmony export */   db: () => (/* binding */ db)\n/* harmony export */ });\n/* harmony import */ var firebase_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/app */ \"firebase/app\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/auth */ \"firebase/auth\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_app__WEBPACK_IMPORTED_MODULE_0__, firebase_auth__WEBPACK_IMPORTED_MODULE_1__, firebase_firestore__WEBPACK_IMPORTED_MODULE_2__]);\n([firebase_app__WEBPACK_IMPORTED_MODULE_0__, firebase_auth__WEBPACK_IMPORTED_MODULE_1__, firebase_firestore__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyArvT2SfDLJTTkZdeAYrR7nXkrFL-gqJhM\",\n    authDomain: \"tupaichatbot.firebaseapp.com\",\n    projectId: \"tupaichatbot\",\n    storageBucket: \"tupaichatbot.firebasestorage.app\",\n    messagingSenderId: \"414193187817\",\n    appId: \"1:414193187817:web:95988b9ae18a2081536978\",\n    measurementId: \"G-PYBPYG4D8R\"\n};\nconst app = (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.initializeApp)(firebaseConfig);\n// debug: log config check (remove later)\nif (false) {}\nconst auth = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_1__.getAuth)(app);\nconst db = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getFirestore)(app);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2ZpcmViYXNlL2NsaWVudEFwcC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUE2QztBQUNMO0FBQ1U7QUFFbEQsTUFBTUcsaUJBQWlCO0lBQ3JCQyxRQUFRO0lBQ1JDLFlBQVk7SUFDWkMsV0FBVztJQUNYQyxlQUFlO0lBQ2ZDLG1CQUFtQjtJQUNuQkMsT0FBTztJQUNQQyxlQUFlO0FBQ2pCO0FBRUEsTUFBTUMsTUFBTVgsMkRBQWFBLENBQUNHO0FBRTFCLHlDQUF5QztBQUN6QyxJQUFJLEtBQTZCLEVBQUUsRUFFbEM7QUFFTSxNQUFNWSxPQUFPZCxzREFBT0EsQ0FBQ1UsS0FBSztBQUMxQixNQUFNSyxLQUFLZCxnRUFBWUEsQ0FBQ1MsS0FBSyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxLYWlcXERvY3VtZW50c1xcVW5pcXVlcnlcXGZyb250ZW5kXFxmaXJlYmFzZVxcY2xpZW50QXBwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGluaXRpYWxpemVBcHAgfSBmcm9tIFwiZmlyZWJhc2UvYXBwXCI7XHJcbmltcG9ydCB7IGdldEF1dGggfSBmcm9tIFwiZmlyZWJhc2UvYXV0aFwiO1xyXG5pbXBvcnQgeyBnZXRGaXJlc3RvcmUgfSBmcm9tIFwiZmlyZWJhc2UvZmlyZXN0b3JlXCI7XHJcblxyXG5jb25zdCBmaXJlYmFzZUNvbmZpZyA9IHtcclxuICBhcGlLZXk6IFwiQUl6YVN5QXJ2VDJTZkRMSlRUa1pkZUFZclI3blhrckZMLWdxSmhNXCIsXHJcbiAgYXV0aERvbWFpbjogXCJ0dXBhaWNoYXRib3QuZmlyZWJhc2VhcHAuY29tXCIsXHJcbiAgcHJvamVjdElkOiBcInR1cGFpY2hhdGJvdFwiLFxyXG4gIHN0b3JhZ2VCdWNrZXQ6IFwidHVwYWljaGF0Ym90LmZpcmViYXNlc3RvcmFnZS5hcHBcIixcclxuICBtZXNzYWdpbmdTZW5kZXJJZDogXCI0MTQxOTMxODc4MTdcIixcclxuICBhcHBJZDogXCIxOjQxNDE5MzE4NzgxNzp3ZWI6OTU5ODhiOWFlMThhMjA4MTUzNjk3OFwiLFxyXG4gIG1lYXN1cmVtZW50SWQ6IFwiRy1QWUJQWUc0RDhSXCJcclxufTtcclxuXHJcbmNvbnN0IGFwcCA9IGluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpO1xyXG5cclxuLy8gZGVidWc6IGxvZyBjb25maWcgY2hlY2sgKHJlbW92ZSBsYXRlcilcclxuaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICBjb25zb2xlLmxvZyhcIkZpcmViYXNlIGNsaWVudEFwcCBpbml0aWFsaXplZCwgYXBpS2V5OlwiLCBmaXJlYmFzZUNvbmZpZy5hcGlLZXk/LnNsaWNlPy4oMCw4KSArIFwiLi4uXCIpO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgYXV0aCA9IGdldEF1dGgoYXBwKTtcclxuZXhwb3J0IGNvbnN0IGRiID0gZ2V0RmlyZXN0b3JlKGFwcCk7Il0sIm5hbWVzIjpbImluaXRpYWxpemVBcHAiLCJnZXRBdXRoIiwiZ2V0RmlyZXN0b3JlIiwiZmlyZWJhc2VDb25maWciLCJhcGlLZXkiLCJhdXRoRG9tYWluIiwicHJvamVjdElkIiwic3RvcmFnZUJ1Y2tldCIsIm1lc3NhZ2luZ1NlbmRlcklkIiwiYXBwSWQiLCJtZWFzdXJlbWVudElkIiwiYXBwIiwiY29uc29sZSIsImxvZyIsInNsaWNlIiwiYXV0aCIsImRiIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./firebase/clientApp.js\n");

/***/ }),

/***/ "(pages-dir-node)/./lib/firestoreHelpers.js":
/*!*********************************!*\
  !*** ./lib/firestoreHelpers.js ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   appendMessage: () => (/* binding */ appendMessage),\n/* harmony export */   appendMessageDoc: () => (/* binding */ appendMessageDoc),\n/* harmony export */   appendThreadMessage: () => (/* binding */ appendThreadMessage),\n/* harmony export */   clearConversationMarker: () => (/* binding */ clearConversationMarker),\n/* harmony export */   createThread: () => (/* binding */ createThread),\n/* harmony export */   createUserProfile: () => (/* binding */ createUserProfile),\n/* harmony export */   getConversation: () => (/* binding */ getConversation),\n/* harmony export */   getConversationMessages: () => (/* binding */ getConversationMessages),\n/* harmony export */   getRecentThreads: () => (/* binding */ getRecentThreads),\n/* harmony export */   getThreadMessages: () => (/* binding */ getThreadMessages),\n/* harmony export */   getUserProfile: () => (/* binding */ getUserProfile),\n/* harmony export */   keepOnlyLastNThreads: () => (/* binding */ keepOnlyLastNThreads),\n/* harmony export */   setConversation: () => (/* binding */ setConversation),\n/* harmony export */   touchThread: () => (/* binding */ touchThread)\n/* harmony export */ });\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\n/* harmony import */ var _firebase_clientApp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../firebase/clientApp */ \"(pages-dir-node)/./firebase/clientApp.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_firestore__WEBPACK_IMPORTED_MODULE_0__, _firebase_clientApp__WEBPACK_IMPORTED_MODULE_1__]);\n([firebase_firestore__WEBPACK_IMPORTED_MODULE_0__, _firebase_clientApp__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// frontend/lib/firestoreHelpers.js\n\n\n/**\r\n * =========================\r\n * ✅ EXISTING (single-thread per model)\r\n * (kept so nothing breaks)\r\n * =========================\r\n */ /**\r\n * Read conversation messages (returns array sorted by createdAt)\r\n */ async function getConversationMessages(uid, model) {\n    const col = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", uid, \"conversations\", model, \"messages\");\n    const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(col, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"asc\"));\n    const snaps = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n    return snaps.docs.map((d)=>({\n            id: d.id,\n            ...d.data()\n        }));\n}\n/**\r\n * Append a message as a document (uses serverTimestamp)\r\n * message: { role, content }\r\n */ async function appendMessageDoc(uid, model, message) {\n    const col = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", uid, \"conversations\", model, \"messages\");\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.addDoc)(col, {\n        ...message,\n        createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)()\n    });\n}\n/**\r\n * Clear conversation: top-level marker to indicate cleared\r\n */ async function clearConversationMarker(uid, model) {\n    const ref = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", uid, \"conversations\", model);\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(ref, {\n        clearedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)()\n    }, {\n        merge: true\n    });\n}\n/**\r\n * Get conversation object with messages and clearedAt timestamp\r\n * Returns: { messages: [...], clearedAt: Timestamp | null }\r\n */ async function getConversation(uid, model) {\n    const [messages, convSnap] = await Promise.all([\n        getConversationMessages(uid, model),\n        (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", uid, \"conversations\", model))\n    ]);\n    const clearedAt = convSnap.exists() ? convSnap.data().clearedAt || null : null;\n    // Filter messages if clearedAt exists\n    const filteredMessages = clearedAt ? messages.filter((msg)=>msg.createdAt?.toMillis() > clearedAt.toMillis()) : messages;\n    return {\n        messages: filteredMessages,\n        clearedAt\n    };\n}\n/**\r\n * Set conversation - reset to empty or specific messages\r\n */ async function setConversation(uid, model, messages = []) {\n    const convRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", uid, \"conversations\", model);\n    const messagesCol = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", uid, \"conversations\", model, \"messages\");\n    // Get all existing messages to delete them\n    const existingMessages = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(messagesCol);\n    const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_1__.db);\n    // Delete all existing messages\n    existingMessages.docs.forEach((d)=>{\n        batch.delete(d.ref);\n    });\n    // Set clearedAt timestamp\n    batch.set(convRef, {\n        clearedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)()\n    }, {\n        merge: true\n    });\n    // Add new messages if provided\n    messages.forEach((message)=>{\n        const newMessageRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(messagesCol);\n        batch.set(newMessageRef, {\n            ...message,\n            createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)()\n        });\n    });\n    await batch.commit();\n}\n/**\r\n * Create a user profile with name, nickname and email\r\n * uid: user uid\r\n * userData: { name, nickname, email }\r\n */ async function createUserProfile(uid, userData) {\n    try {\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", uid), {\n            name: userData.name || \"\",\n            nickname: userData.nickname || \"\",\n            email: userData.email || \"\",\n            createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)()\n        });\n    } catch (err) {\n        console.error(\"Error creating user profile:\", err);\n        throw err;\n    }\n}\n/**\r\n * Get user profile data\r\n */ async function getUserProfile(uid) {\n    try {\n        const userDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", uid);\n        const userDocSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(userDocRef);\n        if (userDocSnap.exists()) {\n            return userDocSnap.data();\n        }\n        return null;\n    } catch (err) {\n        console.error(\"Error getting user profile:\", err);\n        throw err;\n    }\n}\n/**\r\n * Aliases for frontend code consistency\r\n */ const appendMessage = appendMessageDoc;\n/**\r\n * =========================\r\n * ✅ NEW (Option B: multi-thread conversations with Recents)\r\n * Path:\r\n * users/{uid}/conversations/{model}/threads/{threadId}\r\n * users/{uid}/conversations/{model}/threads/{threadId}/messages/{messageId}\r\n * =========================\r\n */ function threadsCol(uid, model) {\n    return (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", uid, \"conversations\", model, \"threads\");\n}\nfunction threadDoc(uid, model, threadId) {\n    return (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", uid, \"conversations\", model, \"threads\", threadId);\n}\nfunction threadMessagesCol(uid, model, threadId) {\n    return (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", uid, \"conversations\", model, \"threads\", threadId, \"messages\");\n}\n/**\r\n * Create a new empty thread and return its id\r\n * ✅ IMPORTANT: updatedAt is NULL so it won't appear in Recents until finalized\r\n */ async function createThread(uid, model) {\n    const threadId = Date.now().toString();\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(threadDoc(uid, model, threadId), {\n        title: \"New Chat\",\n        createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)(),\n        updatedAt: null\n    });\n    return threadId;\n}\n/**\r\n * Finalize / touch a thread so it becomes a Recent\r\n * ✅ Call this ONLY on \"+ New Chat\"\r\n */ async function touchThread(uid, model, threadId) {\n    const tRef = threadDoc(uid, model, threadId);\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(tRef, {\n        updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)()\n    }, {\n        merge: true\n    });\n}\n/**\r\n * Get last N threads (Recents)\r\n * ✅ Only threads with updatedAt != null are included\r\n */ async function getRecentThreads(uid, model, limitCount = 3) {\n    const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(threadsCol(uid, model), where(\"updatedAt\", \"!=\", null), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"updatedAt\", \"desc\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(limitCount));\n    const snap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n    return snap.docs.map((d)=>({\n            id: d.id,\n            ...d.data()\n        }));\n}\n/**\r\n * Get messages for a specific thread (sorted oldest->newest)\r\n */ async function getThreadMessages(uid, model, threadId) {\n    const col = threadMessagesCol(uid, model, threadId);\n    const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(col, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"asc\"));\n    const snaps = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n    return snaps.docs.map((d)=>({\n            id: d.id,\n            ...d.data()\n        }));\n}\n/**\r\n * Append message into a thread\r\n * ✅ DOES NOT update updatedAt anymore (so Recents doesn't reorder while chatting)\r\n * ✅ Still sets title from first user msg\r\n */ async function appendThreadMessage(uid, model, threadId, message) {\n    const col = threadMessagesCol(uid, model, threadId);\n    // Add message\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.addDoc)(col, {\n        ...message,\n        createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)()\n    });\n    // Update thread title if still default\n    const tRef = threadDoc(uid, model, threadId);\n    const tSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(tRef);\n    const prevTitle = tSnap.exists() ? tSnap.data().title : \"New Chat\";\n    const nextTitle = prevTitle === \"New Chat\" && message.role === \"user\" ? (message.content || \"New Chat\").slice(0, 30) : prevTitle;\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(tRef, {\n        title: nextTitle,\n        createdAt: tSnap.exists() ? tSnap.data().createdAt : (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)()\n    }, {\n        merge: true\n    });\n}\n/**\r\n * Keep only last N threads (deletes older threads and their messages)\r\n * ✅ Only considers finalized threads (updatedAt != null)\r\n */ async function keepOnlyLastNThreads(uid, model, n = 3) {\n    const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(threadsCol(uid, model), where(\"updatedAt\", \"!=\", null), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"updatedAt\", \"desc\"));\n    const snap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n    const docs = snap.docs;\n    if (docs.length <= n) return;\n    const toDelete = docs.slice(n);\n    const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_1__.db);\n    for (const t of toDelete){\n        // delete thread messages\n        const msgSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(threadMessagesCol(uid, model, t.id));\n        msgSnap.docs.forEach((m)=>batch.delete(m.ref));\n        // delete thread doc\n        batch.delete(t.ref);\n    }\n    await batch.commit();\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2xpYi9maXJlc3RvcmVIZWxwZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxtQ0FBbUM7QUFhUDtBQUNlO0FBSTNDOzs7OztDQUtDLEdBRUQ7O0NBRUMsR0FDTSxlQUFlWSx3QkFBd0JDLEdBQUcsRUFBRUMsS0FBSztJQUN0RCxNQUFNQyxNQUFNWiw4REFBVUEsQ0FBQ1EsbURBQUVBLEVBQUUsU0FBU0UsS0FBSyxpQkFBaUJDLE9BQU87SUFDakUsTUFBTUUsSUFBSVgseURBQUtBLENBQUNVLEtBQUtULDJEQUFPQSxDQUFDLGFBQWE7SUFDMUMsTUFBTVcsUUFBUSxNQUFNViwyREFBT0EsQ0FBQ1M7SUFDNUIsT0FBT0MsTUFBTUMsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQ0MsSUFBTztZQUFFQyxJQUFJRCxFQUFFQyxFQUFFO1lBQUUsR0FBR0QsRUFBRUUsSUFBSSxFQUFFO1FBQUM7QUFDeEQ7QUFFQTs7O0NBR0MsR0FDTSxlQUFlQyxpQkFBaUJWLEdBQUcsRUFBRUMsS0FBSyxFQUFFVSxPQUFPO0lBQ3hELE1BQU1ULE1BQU1aLDhEQUFVQSxDQUFDUSxtREFBRUEsRUFBRSxTQUFTRSxLQUFLLGlCQUFpQkMsT0FBTztJQUNqRSxNQUFNViwwREFBTUEsQ0FBQ1csS0FBSztRQUFFLEdBQUdTLE9BQU87UUFBRUMsV0FBV2pCLG1FQUFlQTtJQUFHO0FBQy9EO0FBRUE7O0NBRUMsR0FDTSxlQUFla0Isd0JBQXdCYixHQUFHLEVBQUVDLEtBQUs7SUFDdEQsTUFBTWEsTUFBTTNCLHVEQUFHQSxDQUFDVyxtREFBRUEsRUFBRSxTQUFTRSxLQUFLLGlCQUFpQkM7SUFDbkQsTUFBTVosMERBQU1BLENBQUN5QixLQUFLO1FBQUVDLFdBQVdwQixtRUFBZUE7SUFBRyxHQUFHO1FBQUVxQixPQUFPO0lBQUs7QUFDcEU7QUFFQTs7O0NBR0MsR0FDTSxlQUFlQyxnQkFBZ0JqQixHQUFHLEVBQUVDLEtBQUs7SUFDOUMs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R0FBR2pCLG1FQUFlQTtJQUV0RSxHQUNBO1FBQUVxQixPQUFPO0lBQUs7QUFFbEI7QUFFQTs7O0NBR0MsR0FDTSxlQUFleUQscUJBQXFCekUsR0FBRyxFQUFFQyxLQUFLLEVBQUV5RSxJQUFJLENBQUM7SUFDMUQsTUFBTXZFLElBQUlYLHlEQUFLQSxDQUNieUQsV0FBV2pELEtBQUtDLFFBQ2hCOEQsTUFBTSxhQUFhLE1BQU0sT0FDekJ0RSwyREFBT0EsQ0FBQyxhQUFhO0lBR3ZCLE1BQU11RSxPQUFPLE1BQU10RSwyREFBT0EsQ0FBQ1M7SUFDM0IsTUFBTUUsT0FBTzJELEtBQUszRCxJQUFJO0lBRXRCLElBQUlBLEtBQUtzRSxNQUFNLElBQUlELEdBQUc7SUFFdEIsTUFBTUUsV0FBV3ZFLEtBQUttRSxLQUFLLENBQUNFO0lBQzVCLE1BQU0zQyxRQUFRbkMsOERBQVVBLENBQUNFLG1EQUFFQTtJQUUzQixLQUFLLE1BQU0rRSxLQUFLRCxTQUFVO1FBQ3hCLHlCQUF5QjtRQUN6QixNQUFNRSxVQUFVLE1BQU1wRiwyREFBT0EsQ0FBQzBELGtCQUFrQnBELEtBQUtDLE9BQU80RSxFQUFFckUsRUFBRTtRQUNoRXNFLFFBQVF6RSxJQUFJLENBQUMyQixPQUFPLENBQUMsQ0FBQytDLElBQU1oRCxNQUFNRSxNQUFNLENBQUM4QyxFQUFFakUsR0FBRztRQUU5QyxvQkFBb0I7UUFDcEJpQixNQUFNRSxNQUFNLENBQUM0QyxFQUFFL0QsR0FBRztJQUNwQjtJQUVBLE1BQU1pQixNQUFNSyxNQUFNO0FBQ3BCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXEthaVxcRG9jdW1lbnRzXFxVbmlxdWVyeVxcZnJvbnRlbmRcXGxpYlxcZmlyZXN0b3JlSGVscGVycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBmcm9udGVuZC9saWIvZmlyZXN0b3JlSGVscGVycy5qc1xyXG5pbXBvcnQge1xyXG4gIGRvYyxcclxuICBnZXREb2MsXHJcbiAgc2V0RG9jLFxyXG4gIGNvbGxlY3Rpb24sXHJcbiAgYWRkRG9jLFxyXG4gIHF1ZXJ5LFxyXG4gIG9yZGVyQnksXHJcbiAgZ2V0RG9jcyxcclxuICBzZXJ2ZXJUaW1lc3RhbXAsXHJcbiAgd3JpdGVCYXRjaCxcclxuICBsaW1pdCwgLy8g4pyFIGFkZGVkXHJcbn0gZnJvbSBcImZpcmViYXNlL2ZpcmVzdG9yZVwiO1xyXG5pbXBvcnQgeyBkYiB9IGZyb20gXCIuLi9maXJlYmFzZS9jbGllbnRBcHBcIjtcclxuXHJcblxyXG5cclxuLyoqXHJcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICog4pyFIEVYSVNUSU5HIChzaW5nbGUtdGhyZWFkIHBlciBtb2RlbClcclxuICogKGtlcHQgc28gbm90aGluZyBicmVha3MpXHJcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICovXHJcblxyXG4vKipcclxuICogUmVhZCBjb252ZXJzYXRpb24gbWVzc2FnZXMgKHJldHVybnMgYXJyYXkgc29ydGVkIGJ5IGNyZWF0ZWRBdClcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDb252ZXJzYXRpb25NZXNzYWdlcyh1aWQsIG1vZGVsKSB7XHJcbiAgY29uc3QgY29sID0gY29sbGVjdGlvbihkYiwgXCJ1c2Vyc1wiLCB1aWQsIFwiY29udmVyc2F0aW9uc1wiLCBtb2RlbCwgXCJtZXNzYWdlc1wiKTtcclxuICBjb25zdCBxID0gcXVlcnkoY29sLCBvcmRlckJ5KFwiY3JlYXRlZEF0XCIsIFwiYXNjXCIpKTtcclxuICBjb25zdCBzbmFwcyA9IGF3YWl0IGdldERvY3MocSk7XHJcbiAgcmV0dXJuIHNuYXBzLmRvY3MubWFwKChkKSA9PiAoeyBpZDogZC5pZCwgLi4uZC5kYXRhKCkgfSkpO1xyXG59XHJcblxyXG4vKipcclxuICogQXBwZW5kIGEgbWVzc2FnZSBhcyBhIGRvY3VtZW50ICh1c2VzIHNlcnZlclRpbWVzdGFtcClcclxuICogbWVzc2FnZTogeyByb2xlLCBjb250ZW50IH1cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhcHBlbmRNZXNzYWdlRG9jKHVpZCwgbW9kZWwsIG1lc3NhZ2UpIHtcclxuICBjb25zdCBjb2wgPSBjb2xsZWN0aW9uKGRiLCBcInVzZXJzXCIsIHVpZCwgXCJjb252ZXJzYXRpb25zXCIsIG1vZGVsLCBcIm1lc3NhZ2VzXCIpO1xyXG4gIGF3YWl0IGFkZERvYyhjb2wsIHsgLi4ubWVzc2FnZSwgY3JlYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENsZWFyIGNvbnZlcnNhdGlvbjogdG9wLWxldmVsIG1hcmtlciB0byBpbmRpY2F0ZSBjbGVhcmVkXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xlYXJDb252ZXJzYXRpb25NYXJrZXIodWlkLCBtb2RlbCkge1xyXG4gIGNvbnN0IHJlZiA9IGRvYyhkYiwgXCJ1c2Vyc1wiLCB1aWQsIFwiY29udmVyc2F0aW9uc1wiLCBtb2RlbCk7XHJcbiAgYXdhaXQgc2V0RG9jKHJlZiwgeyBjbGVhcmVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpIH0sIHsgbWVyZ2U6IHRydWUgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgY29udmVyc2F0aW9uIG9iamVjdCB3aXRoIG1lc3NhZ2VzIGFuZCBjbGVhcmVkQXQgdGltZXN0YW1wXHJcbiAqIFJldHVybnM6IHsgbWVzc2FnZXM6IFsuLi5dLCBjbGVhcmVkQXQ6IFRpbWVzdGFtcCB8IG51bGwgfVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENvbnZlcnNhdGlvbih1aWQsIG1vZGVsKSB7XHJcbiAgY29uc3QgW21lc3NhZ2VzLCBjb252U25hcF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICBnZXRDb252ZXJzYXRpb25NZXNzYWdlcyh1aWQsIG1vZGVsKSxcclxuICAgIGdldERvYyhkb2MoZGIsIFwidXNlcnNcIiwgdWlkLCBcImNvbnZlcnNhdGlvbnNcIiwgbW9kZWwpKSxcclxuICBdKTtcclxuXHJcbiAgY29uc3QgY2xlYXJlZEF0ID0gY29udlNuYXAuZXhpc3RzKCkgPyBjb252U25hcC5kYXRhKCkuY2xlYXJlZEF0IHx8IG51bGwgOiBudWxsO1xyXG5cclxuICAvLyBGaWx0ZXIgbWVzc2FnZXMgaWYgY2xlYXJlZEF0IGV4aXN0c1xyXG4gIGNvbnN0IGZpbHRlcmVkTWVzc2FnZXMgPSBjbGVhcmVkQXRcclxuICAgID8gbWVzc2FnZXMuZmlsdGVyKChtc2cpID0+IG1zZy5jcmVhdGVkQXQ/LnRvTWlsbGlzKCkgPiBjbGVhcmVkQXQudG9NaWxsaXMoKSlcclxuICAgIDogbWVzc2FnZXM7XHJcblxyXG4gIHJldHVybiB7IG1lc3NhZ2VzOiBmaWx0ZXJlZE1lc3NhZ2VzLCBjbGVhcmVkQXQgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCBjb252ZXJzYXRpb24gLSByZXNldCB0byBlbXB0eSBvciBzcGVjaWZpYyBtZXNzYWdlc1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNldENvbnZlcnNhdGlvbih1aWQsIG1vZGVsLCBtZXNzYWdlcyA9IFtdKSB7XHJcbiAgY29uc3QgY29udlJlZiA9IGRvYyhkYiwgXCJ1c2Vyc1wiLCB1aWQsIFwiY29udmVyc2F0aW9uc1wiLCBtb2RlbCk7XHJcbiAgY29uc3QgbWVzc2FnZXNDb2wgPSBjb2xsZWN0aW9uKFxyXG4gICAgZGIsXHJcbiAgICBcInVzZXJzXCIsXHJcbiAgICB1aWQsXHJcbiAgICBcImNvbnZlcnNhdGlvbnNcIixcclxuICAgIG1vZGVsLFxyXG4gICAgXCJtZXNzYWdlc1wiXHJcbiAgKTtcclxuXHJcbiAgLy8gR2V0IGFsbCBleGlzdGluZyBtZXNzYWdlcyB0byBkZWxldGUgdGhlbVxyXG4gIGNvbnN0IGV4aXN0aW5nTWVzc2FnZXMgPSBhd2FpdCBnZXREb2NzKG1lc3NhZ2VzQ29sKTtcclxuICBjb25zdCBiYXRjaCA9IHdyaXRlQmF0Y2goZGIpO1xyXG5cclxuICAvLyBEZWxldGUgYWxsIGV4aXN0aW5nIG1lc3NhZ2VzXHJcbiAgZXhpc3RpbmdNZXNzYWdlcy5kb2NzLmZvckVhY2goKGQpID0+IHtcclxuICAgIGJhdGNoLmRlbGV0ZShkLnJlZik7XHJcbiAgfSk7XHJcblxyXG4gIC8vIFNldCBjbGVhcmVkQXQgdGltZXN0YW1wXHJcbiAgYmF0Y2guc2V0KGNvbnZSZWYsIHsgY2xlYXJlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSB9LCB7IG1lcmdlOiB0cnVlIH0pO1xyXG5cclxuICAvLyBBZGQgbmV3IG1lc3NhZ2VzIGlmIHByb3ZpZGVkXHJcbiAgbWVzc2FnZXMuZm9yRWFjaCgobWVzc2FnZSkgPT4ge1xyXG4gICAgY29uc3QgbmV3TWVzc2FnZVJlZiA9IGRvYyhtZXNzYWdlc0NvbCk7XHJcbiAgICBiYXRjaC5zZXQobmV3TWVzc2FnZVJlZiwgeyAuLi5tZXNzYWdlLCBjcmVhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpIH0pO1xyXG4gIH0pO1xyXG5cclxuICBhd2FpdCBiYXRjaC5jb21taXQoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSBhIHVzZXIgcHJvZmlsZSB3aXRoIG5hbWUsIG5pY2tuYW1lIGFuZCBlbWFpbFxyXG4gKiB1aWQ6IHVzZXIgdWlkXHJcbiAqIHVzZXJEYXRhOiB7IG5hbWUsIG5pY2tuYW1lLCBlbWFpbCB9XHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlVXNlclByb2ZpbGUodWlkLCB1c2VyRGF0YSkge1xyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBzZXREb2MoZG9jKGRiLCBcInVzZXJzXCIsIHVpZCksIHtcclxuICAgICAgbmFtZTogdXNlckRhdGEubmFtZSB8fCBcIlwiLFxyXG4gICAgICBuaWNrbmFtZTogdXNlckRhdGEubmlja25hbWUgfHwgXCJcIixcclxuICAgICAgZW1haWw6IHVzZXJEYXRhLmVtYWlsIHx8IFwiXCIsXHJcbiAgICAgIGNyZWF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjcmVhdGluZyB1c2VyIHByb2ZpbGU6XCIsIGVycik7XHJcbiAgICB0aHJvdyBlcnI7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IHVzZXIgcHJvZmlsZSBkYXRhXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlclByb2ZpbGUodWlkKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXJEb2NSZWYgPSBkb2MoZGIsIFwidXNlcnNcIiwgdWlkKTtcclxuICAgIGNvbnN0IHVzZXJEb2NTbmFwID0gYXdhaXQgZ2V0RG9jKHVzZXJEb2NSZWYpO1xyXG5cclxuICAgIGlmICh1c2VyRG9jU25hcC5leGlzdHMoKSkge1xyXG4gICAgICByZXR1cm4gdXNlckRvY1NuYXAuZGF0YSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyB1c2VyIHByb2ZpbGU6XCIsIGVycik7XHJcbiAgICB0aHJvdyBlcnI7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQWxpYXNlcyBmb3IgZnJvbnRlbmQgY29kZSBjb25zaXN0ZW5jeVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGFwcGVuZE1lc3NhZ2UgPSBhcHBlbmRNZXNzYWdlRG9jO1xyXG5cclxuLyoqXHJcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICog4pyFIE5FVyAoT3B0aW9uIEI6IG11bHRpLXRocmVhZCBjb252ZXJzYXRpb25zIHdpdGggUmVjZW50cylcclxuICogUGF0aDpcclxuICogdXNlcnMve3VpZH0vY29udmVyc2F0aW9ucy97bW9kZWx9L3RocmVhZHMve3RocmVhZElkfVxyXG4gKiB1c2Vycy97dWlkfS9jb252ZXJzYXRpb25zL3ttb2RlbH0vdGhyZWFkcy97dGhyZWFkSWR9L21lc3NhZ2VzL3ttZXNzYWdlSWR9XHJcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICovXHJcblxyXG5cclxuZnVuY3Rpb24gdGhyZWFkc0NvbCh1aWQsIG1vZGVsKSB7XHJcbiAgcmV0dXJuIGNvbGxlY3Rpb24oZGIsIFwidXNlcnNcIiwgdWlkLCBcImNvbnZlcnNhdGlvbnNcIiwgbW9kZWwsIFwidGhyZWFkc1wiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gdGhyZWFkRG9jKHVpZCwgbW9kZWwsIHRocmVhZElkKSB7XHJcbiAgcmV0dXJuIGRvYyhkYiwgXCJ1c2Vyc1wiLCB1aWQsIFwiY29udmVyc2F0aW9uc1wiLCBtb2RlbCwgXCJ0aHJlYWRzXCIsIHRocmVhZElkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gdGhyZWFkTWVzc2FnZXNDb2wodWlkLCBtb2RlbCwgdGhyZWFkSWQpIHtcclxuICByZXR1cm4gY29sbGVjdGlvbihcclxuICAgIGRiLFxyXG4gICAgXCJ1c2Vyc1wiLFxyXG4gICAgdWlkLFxyXG4gICAgXCJjb252ZXJzYXRpb25zXCIsXHJcbiAgICBtb2RlbCxcclxuICAgIFwidGhyZWFkc1wiLFxyXG4gICAgdGhyZWFkSWQsXHJcbiAgICBcIm1lc3NhZ2VzXCJcclxuICApO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGEgbmV3IGVtcHR5IHRocmVhZCBhbmQgcmV0dXJuIGl0cyBpZFxyXG4gKiDinIUgSU1QT1JUQU5UOiB1cGRhdGVkQXQgaXMgTlVMTCBzbyBpdCB3b24ndCBhcHBlYXIgaW4gUmVjZW50cyB1bnRpbCBmaW5hbGl6ZWRcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVUaHJlYWQodWlkLCBtb2RlbCkge1xyXG4gIGNvbnN0IHRocmVhZElkID0gRGF0ZS5ub3coKS50b1N0cmluZygpO1xyXG5cclxuICBhd2FpdCBzZXREb2ModGhyZWFkRG9jKHVpZCwgbW9kZWwsIHRocmVhZElkKSwge1xyXG4gICAgdGl0bGU6IFwiTmV3IENoYXRcIixcclxuICAgIGNyZWF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXHJcbiAgICB1cGRhdGVkQXQ6IG51bGwsIC8vIOKchSBkb24ndCBtYWtlIGl0IFwicmVjZW50XCIgeWV0XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiB0aHJlYWRJZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEZpbmFsaXplIC8gdG91Y2ggYSB0aHJlYWQgc28gaXQgYmVjb21lcyBhIFJlY2VudFxyXG4gKiDinIUgQ2FsbCB0aGlzIE9OTFkgb24gXCIrIE5ldyBDaGF0XCJcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0b3VjaFRocmVhZCh1aWQsIG1vZGVsLCB0aHJlYWRJZCkge1xyXG4gIGNvbnN0IHRSZWYgPSB0aHJlYWREb2ModWlkLCBtb2RlbCwgdGhyZWFkSWQpO1xyXG4gIGF3YWl0IHNldERvYyh0UmVmLCB7IHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCkgfSwgeyBtZXJnZTogdHJ1ZSB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBsYXN0IE4gdGhyZWFkcyAoUmVjZW50cylcclxuICog4pyFIE9ubHkgdGhyZWFkcyB3aXRoIHVwZGF0ZWRBdCAhPSBudWxsIGFyZSBpbmNsdWRlZFxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFJlY2VudFRocmVhZHModWlkLCBtb2RlbCwgbGltaXRDb3VudCA9IDMpIHtcclxuICBjb25zdCBxID0gcXVlcnkoXHJcbiAgICB0aHJlYWRzQ29sKHVpZCwgbW9kZWwpLFxyXG4gICAgd2hlcmUoXCJ1cGRhdGVkQXRcIiwgXCIhPVwiLCBudWxsKSxcclxuICAgIG9yZGVyQnkoXCJ1cGRhdGVkQXRcIiwgXCJkZXNjXCIpLFxyXG4gICAgbGltaXQobGltaXRDb3VudClcclxuICApO1xyXG5cclxuICBjb25zdCBzbmFwID0gYXdhaXQgZ2V0RG9jcyhxKTtcclxuICByZXR1cm4gc25hcC5kb2NzLm1hcCgoZCkgPT4gKHsgaWQ6IGQuaWQsIC4uLmQuZGF0YSgpIH0pKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBtZXNzYWdlcyBmb3IgYSBzcGVjaWZpYyB0aHJlYWQgKHNvcnRlZCBvbGRlc3QtPm5ld2VzdClcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUaHJlYWRNZXNzYWdlcyh1aWQsIG1vZGVsLCB0aHJlYWRJZCkge1xyXG4gIGNvbnN0IGNvbCA9IHRocmVhZE1lc3NhZ2VzQ29sKHVpZCwgbW9kZWwsIHRocmVhZElkKTtcclxuICBjb25zdCBxID0gcXVlcnkoY29sLCBvcmRlckJ5KFwiY3JlYXRlZEF0XCIsIFwiYXNjXCIpKTtcclxuICBjb25zdCBzbmFwcyA9IGF3YWl0IGdldERvY3MocSk7XHJcbiAgcmV0dXJuIHNuYXBzLmRvY3MubWFwKChkKSA9PiAoeyBpZDogZC5pZCwgLi4uZC5kYXRhKCkgfSkpO1xyXG59XHJcblxyXG4vKipcclxuICogQXBwZW5kIG1lc3NhZ2UgaW50byBhIHRocmVhZFxyXG4gKiDinIUgRE9FUyBOT1QgdXBkYXRlIHVwZGF0ZWRBdCBhbnltb3JlIChzbyBSZWNlbnRzIGRvZXNuJ3QgcmVvcmRlciB3aGlsZSBjaGF0dGluZylcclxuICog4pyFIFN0aWxsIHNldHMgdGl0bGUgZnJvbSBmaXJzdCB1c2VyIG1zZ1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFwcGVuZFRocmVhZE1lc3NhZ2UodWlkLCBtb2RlbCwgdGhyZWFkSWQsIG1lc3NhZ2UpIHtcclxuICBjb25zdCBjb2wgPSB0aHJlYWRNZXNzYWdlc0NvbCh1aWQsIG1vZGVsLCB0aHJlYWRJZCk7XHJcblxyXG4gIC8vIEFkZCBtZXNzYWdlXHJcbiAgYXdhaXQgYWRkRG9jKGNvbCwgeyAuLi5tZXNzYWdlLCBjcmVhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpIH0pO1xyXG5cclxuICAvLyBVcGRhdGUgdGhyZWFkIHRpdGxlIGlmIHN0aWxsIGRlZmF1bHRcclxuICBjb25zdCB0UmVmID0gdGhyZWFkRG9jKHVpZCwgbW9kZWwsIHRocmVhZElkKTtcclxuICBjb25zdCB0U25hcCA9IGF3YWl0IGdldERvYyh0UmVmKTtcclxuXHJcbiAgY29uc3QgcHJldlRpdGxlID0gdFNuYXAuZXhpc3RzKCkgPyB0U25hcC5kYXRhKCkudGl0bGUgOiBcIk5ldyBDaGF0XCI7XHJcbiAgY29uc3QgbmV4dFRpdGxlID1cclxuICAgIHByZXZUaXRsZSA9PT0gXCJOZXcgQ2hhdFwiICYmIG1lc3NhZ2Uucm9sZSA9PT0gXCJ1c2VyXCJcclxuICAgICAgPyAobWVzc2FnZS5jb250ZW50IHx8IFwiTmV3IENoYXRcIikuc2xpY2UoMCwgMzApXHJcbiAgICAgIDogcHJldlRpdGxlO1xyXG5cclxuICBhd2FpdCBzZXREb2MoXHJcbiAgICB0UmVmLFxyXG4gICAge1xyXG4gICAgICB0aXRsZTogbmV4dFRpdGxlLFxyXG4gICAgICBjcmVhdGVkQXQ6IHRTbmFwLmV4aXN0cygpID8gdFNuYXAuZGF0YSgpLmNyZWF0ZWRBdCA6IHNlcnZlclRpbWVzdGFtcCgpLFxyXG4gICAgICAvLyDinYwgRE8gTk9UIHVwZGF0ZSB1cGRhdGVkQXQgaGVyZVxyXG4gICAgfSxcclxuICAgIHsgbWVyZ2U6IHRydWUgfVxyXG4gICk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBLZWVwIG9ubHkgbGFzdCBOIHRocmVhZHMgKGRlbGV0ZXMgb2xkZXIgdGhyZWFkcyBhbmQgdGhlaXIgbWVzc2FnZXMpXHJcbiAqIOKchSBPbmx5IGNvbnNpZGVycyBmaW5hbGl6ZWQgdGhyZWFkcyAodXBkYXRlZEF0ICE9IG51bGwpXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24ga2VlcE9ubHlMYXN0TlRocmVhZHModWlkLCBtb2RlbCwgbiA9IDMpIHtcclxuICBjb25zdCBxID0gcXVlcnkoXHJcbiAgICB0aHJlYWRzQ29sKHVpZCwgbW9kZWwpLFxyXG4gICAgd2hlcmUoXCJ1cGRhdGVkQXRcIiwgXCIhPVwiLCBudWxsKSxcclxuICAgIG9yZGVyQnkoXCJ1cGRhdGVkQXRcIiwgXCJkZXNjXCIpXHJcbiAgKTtcclxuXHJcbiAgY29uc3Qgc25hcCA9IGF3YWl0IGdldERvY3MocSk7XHJcbiAgY29uc3QgZG9jcyA9IHNuYXAuZG9jcztcclxuXHJcbiAgaWYgKGRvY3MubGVuZ3RoIDw9IG4pIHJldHVybjtcclxuXHJcbiAgY29uc3QgdG9EZWxldGUgPSBkb2NzLnNsaWNlKG4pO1xyXG4gIGNvbnN0IGJhdGNoID0gd3JpdGVCYXRjaChkYik7XHJcblxyXG4gIGZvciAoY29uc3QgdCBvZiB0b0RlbGV0ZSkge1xyXG4gICAgLy8gZGVsZXRlIHRocmVhZCBtZXNzYWdlc1xyXG4gICAgY29uc3QgbXNnU25hcCA9IGF3YWl0IGdldERvY3ModGhyZWFkTWVzc2FnZXNDb2wodWlkLCBtb2RlbCwgdC5pZCkpO1xyXG4gICAgbXNnU25hcC5kb2NzLmZvckVhY2goKG0pID0+IGJhdGNoLmRlbGV0ZShtLnJlZikpO1xyXG5cclxuICAgIC8vIGRlbGV0ZSB0aHJlYWQgZG9jXHJcbiAgICBiYXRjaC5kZWxldGUodC5yZWYpO1xyXG4gIH1cclxuXHJcbiAgYXdhaXQgYmF0Y2guY29tbWl0KCk7XHJcbn0iXSwibmFtZXMiOlsiZG9jIiwiZ2V0RG9jIiwic2V0RG9jIiwiY29sbGVjdGlvbiIsImFkZERvYyIsInF1ZXJ5Iiwib3JkZXJCeSIsImdldERvY3MiLCJzZXJ2ZXJUaW1lc3RhbXAiLCJ3cml0ZUJhdGNoIiwibGltaXQiLCJkYiIsImdldENvbnZlcnNhdGlvbk1lc3NhZ2VzIiwidWlkIiwibW9kZWwiLCJjb2wiLCJxIiwic25hcHMiLCJkb2NzIiwibWFwIiwiZCIsImlkIiwiZGF0YSIsImFwcGVuZE1lc3NhZ2VEb2MiLCJtZXNzYWdlIiwiY3JlYXRlZEF0IiwiY2xlYXJDb252ZXJzYXRpb25NYXJrZXIiLCJyZWYiLCJjbGVhcmVkQXQiLCJtZXJnZSIsImdldENvbnZlcnNhdGlvbiIsIm1lc3NhZ2VzIiwiY29udlNuYXAiLCJQcm9taXNlIiwiYWxsIiwiZXhpc3RzIiwiZmlsdGVyZWRNZXNzYWdlcyIsImZpbHRlciIsIm1zZyIsInRvTWlsbGlzIiwic2V0Q29udmVyc2F0aW9uIiwiY29udlJlZiIsIm1lc3NhZ2VzQ29sIiwiZXhpc3RpbmdNZXNzYWdlcyIsImJhdGNoIiwiZm9yRWFjaCIsImRlbGV0ZSIsInNldCIsIm5ld01lc3NhZ2VSZWYiLCJjb21taXQiLCJjcmVhdGVVc2VyUHJvZmlsZSIsInVzZXJEYXRhIiwibmFtZSIsIm5pY2tuYW1lIiwiZW1haWwiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJnZXRVc2VyUHJvZmlsZSIsInVzZXJEb2NSZWYiLCJ1c2VyRG9jU25hcCIsImFwcGVuZE1lc3NhZ2UiLCJ0aHJlYWRzQ29sIiwidGhyZWFkRG9jIiwidGhyZWFkSWQiLCJ0aHJlYWRNZXNzYWdlc0NvbCIsImNyZWF0ZVRocmVhZCIsIkRhdGUiLCJub3ciLCJ0b1N0cmluZyIsInRpdGxlIiwidXBkYXRlZEF0IiwidG91Y2hUaHJlYWQiLCJ0UmVmIiwiZ2V0UmVjZW50VGhyZWFkcyIsImxpbWl0Q291bnQiLCJ3aGVyZSIsInNuYXAiLCJnZXRUaHJlYWRNZXNzYWdlcyIsImFwcGVuZFRocmVhZE1lc3NhZ2UiLCJ0U25hcCIsInByZXZUaXRsZSIsIm5leHRUaXRsZSIsInJvbGUiLCJjb250ZW50Iiwic2xpY2UiLCJrZWVwT25seUxhc3ROVGhyZWFkcyIsIm4iLCJsZW5ndGgiLCJ0b0RlbGV0ZSIsInQiLCJtc2dTbmFwIiwibSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./lib/firestoreHelpers.js\n");

/***/ }),

/***/ "(pages-dir-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%5Cchat.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%5Cchat.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getServerSideProps: () => (/* binding */ getServerSideProps),\n/* harmony export */   getStaticPaths: () => (/* binding */ getStaticPaths),\n/* harmony export */   getStaticProps: () => (/* binding */ getStaticProps),\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   reportWebVitals: () => (/* binding */ reportWebVitals),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   unstable_getServerProps: () => (/* binding */ unstable_getServerProps),\n/* harmony export */   unstable_getServerSideProps: () => (/* binding */ unstable_getServerSideProps),\n/* harmony export */   unstable_getStaticParams: () => (/* binding */ unstable_getStaticParams),\n/* harmony export */   unstable_getStaticPaths: () => (/* binding */ unstable_getStaticPaths),\n/* harmony export */   unstable_getStaticProps: () => (/* binding */ unstable_getStaticProps)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages/module.compiled */ \"(pages-dir-node)/./node_modules/next/dist/server/route-modules/pages/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(pages-dir-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(pages-dir-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! private-next-pages/_document */ \"(pages-dir-node)/./node_modules/next/dist/pages/_document.js\");\n/* harmony import */ var private_next_pages_document__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! private-next-pages/_app */ \"(pages-dir-node)/./pages/_app.js\");\n/* harmony import */ var _pages_chat_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./pages\\chat.js */ \"(pages-dir-node)/./pages/chat.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_pages_handler__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/route-modules/pages/pages-handler */ \"(pages-dir-node)/./node_modules/next/dist/server/route-modules/pages/pages-handler.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_chat_js__WEBPACK_IMPORTED_MODULE_5__]);\n_pages_chat_js__WEBPACK_IMPORTED_MODULE_5__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the app and document modules.\n\n\n// Import the userland code.\n\n\n// Re-export the component (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_js__WEBPACK_IMPORTED_MODULE_5__, 'default'));\n// Re-export methods.\nconst getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_js__WEBPACK_IMPORTED_MODULE_5__, 'getStaticProps');\nconst getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_js__WEBPACK_IMPORTED_MODULE_5__, 'getStaticPaths');\nconst getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_js__WEBPACK_IMPORTED_MODULE_5__, 'getServerSideProps');\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_js__WEBPACK_IMPORTED_MODULE_5__, 'config');\nconst reportWebVitals = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_js__WEBPACK_IMPORTED_MODULE_5__, 'reportWebVitals');\n// Re-export legacy methods.\nconst unstable_getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_js__WEBPACK_IMPORTED_MODULE_5__, 'unstable_getStaticProps');\nconst unstable_getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_js__WEBPACK_IMPORTED_MODULE_5__, 'unstable_getStaticPaths');\nconst unstable_getStaticParams = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_js__WEBPACK_IMPORTED_MODULE_5__, 'unstable_getStaticParams');\nconst unstable_getServerProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_js__WEBPACK_IMPORTED_MODULE_5__, 'unstable_getServerProps');\nconst unstable_getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_js__WEBPACK_IMPORTED_MODULE_5__, 'unstable_getServerSideProps');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES,\n        page: \"/chat\",\n        pathname: \"/chat\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || '',\n    components: {\n        // default export might not exist when optimized for data only\n        App: private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\n        Document: (private_next_pages_document__WEBPACK_IMPORTED_MODULE_3___default())\n    },\n    userland: _pages_chat_js__WEBPACK_IMPORTED_MODULE_5__\n});\nconst handler = (0,next_dist_server_route_modules_pages_pages_handler__WEBPACK_IMPORTED_MODULE_6__.getHandler)({\n    srcPage: \"/chat\",\n    config,\n    userland: _pages_chat_js__WEBPACK_IMPORTED_MODULE_5__,\n    routeModule,\n    getStaticPaths,\n    getStaticProps,\n    getServerSideProps\n});\n\n//# sourceMappingURL=pages.js.map\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVMmcGFnZT0lMkZjaGF0JnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNjaGF0LmpzJmFic29sdXRlQXBwUGF0aD1wcml2YXRlLW5leHQtcGFnZXMlMkZfYXBwJmFic29sdXRlRG9jdW1lbnRQYXRoPXByaXZhdGUtbmV4dC1wYWdlcyUyRl9kb2N1bWVudCZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF3RjtBQUNoQztBQUNFO0FBQzFEO0FBQ3lEO0FBQ1Y7QUFDL0M7QUFDNkM7QUFDbUM7QUFDaEY7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDJDQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLHVCQUF1Qix3RUFBSyxDQUFDLDJDQUFRO0FBQ3JDLHVCQUF1Qix3RUFBSyxDQUFDLDJDQUFRO0FBQ3JDLDJCQUEyQix3RUFBSyxDQUFDLDJDQUFRO0FBQ3pDLGVBQWUsd0VBQUssQ0FBQywyQ0FBUTtBQUM3Qix3QkFBd0Isd0VBQUssQ0FBQywyQ0FBUTtBQUM3QztBQUNPLGdDQUFnQyx3RUFBSyxDQUFDLDJDQUFRO0FBQzlDLGdDQUFnQyx3RUFBSyxDQUFDLDJDQUFRO0FBQzlDLGlDQUFpQyx3RUFBSyxDQUFDLDJDQUFRO0FBQy9DLGdDQUFnQyx3RUFBSyxDQUFDLDJDQUFRO0FBQzlDLG9DQUFvQyx3RUFBSyxDQUFDLDJDQUFRO0FBQ3pEO0FBQ08sd0JBQXdCLGtHQUFnQjtBQUMvQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxhQUFhLE9BQW9DLElBQUksQ0FBRTtBQUN2RCx3QkFBd0IsTUFBdUM7QUFDL0Q7QUFDQTtBQUNBLGFBQWEsOERBQVc7QUFDeEIsa0JBQWtCLG9FQUFnQjtBQUNsQyxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7QUFDTSxnQkFBZ0IsOEZBQVU7QUFDakM7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc1JvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSBhcHAgYW5kIGRvY3VtZW50IG1vZHVsZXMuXG5pbXBvcnQgKiBhcyBkb2N1bWVudCBmcm9tIFwicHJpdmF0ZS1uZXh0LXBhZ2VzL19kb2N1bWVudFwiO1xuaW1wb3J0ICogYXMgYXBwIGZyb20gXCJwcml2YXRlLW5leHQtcGFnZXMvX2FwcFwiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcY2hhdC5qc1wiO1xuaW1wb3J0IHsgZ2V0SGFuZGxlciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvcGFnZXMvcGFnZXMtaGFuZGxlclwiO1xuLy8gUmUtZXhwb3J0IHRoZSBjb21wb25lbnQgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgbWV0aG9kcy5cbmV4cG9ydCBjb25zdCBnZXRTdGF0aWNQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCAnZ2V0U3RhdGljUHJvcHMnKTtcbmV4cG9ydCBjb25zdCBnZXRTdGF0aWNQYXRocyA9IGhvaXN0KHVzZXJsYW5kLCAnZ2V0U3RhdGljUGF0aHMnKTtcbmV4cG9ydCBjb25zdCBnZXRTZXJ2ZXJTaWRlUHJvcHMgPSBob2lzdCh1c2VybGFuZCwgJ2dldFNlcnZlclNpZGVQcm9wcycpO1xuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG5leHBvcnQgY29uc3QgcmVwb3J0V2ViVml0YWxzID0gaG9pc3QodXNlcmxhbmQsICdyZXBvcnRXZWJWaXRhbHMnKTtcbi8vIFJlLWV4cG9ydCBsZWdhY3kgbWV0aG9kcy5cbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9nZXRTdGF0aWNQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCAndW5zdGFibGVfZ2V0U3RhdGljUHJvcHMnKTtcbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9nZXRTdGF0aWNQYXRocyA9IGhvaXN0KHVzZXJsYW5kLCAndW5zdGFibGVfZ2V0U3RhdGljUGF0aHMnKTtcbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9nZXRTdGF0aWNQYXJhbXMgPSBob2lzdCh1c2VybGFuZCwgJ3Vuc3RhYmxlX2dldFN0YXRpY1BhcmFtcycpO1xuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFNlcnZlclByb3BzID0gaG9pc3QodXNlcmxhbmQsICd1bnN0YWJsZV9nZXRTZXJ2ZXJQcm9wcycpO1xuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFNlcnZlclNpZGVQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCAndW5zdGFibGVfZ2V0U2VydmVyU2lkZVByb3BzJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc1JvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFUyxcbiAgICAgICAgcGFnZTogXCIvY2hhdFwiLFxuICAgICAgICBwYXRobmFtZTogXCIvY2hhdFwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6ICcnLFxuICAgICAgICBmaWxlbmFtZTogJydcbiAgICB9LFxuICAgIGRpc3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9ESVNUX0RJUiB8fCAnJyxcbiAgICByZWxhdGl2ZVByb2plY3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9QUk9KRUNUX0RJUiB8fCAnJyxcbiAgICBjb21wb25lbnRzOiB7XG4gICAgICAgIC8vIGRlZmF1bHQgZXhwb3J0IG1pZ2h0IG5vdCBleGlzdCB3aGVuIG9wdGltaXplZCBmb3IgZGF0YSBvbmx5XG4gICAgICAgIEFwcDogYXBwLmRlZmF1bHQsXG4gICAgICAgIERvY3VtZW50OiBkb2N1bWVudC5kZWZhdWx0XG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5leHBvcnQgY29uc3QgaGFuZGxlciA9IGdldEhhbmRsZXIoe1xuICAgIHNyY1BhZ2U6IFwiL2NoYXRcIixcbiAgICBjb25maWcsXG4gICAgdXNlcmxhbmQsXG4gICAgcm91dGVNb2R1bGUsXG4gICAgZ2V0U3RhdGljUGF0aHMsXG4gICAgZ2V0U3RhdGljUHJvcHMsXG4gICAgZ2V0U2VydmVyU2lkZVByb3BzXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%5Cchat.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(pages-dir-node)/./pages/_app.js":
/*!***********************!*\
  !*** ./pages/_app.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ MyApp)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../styles/globals.css */ \"(pages-dir-node)/./styles/globals.css\");\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_styles_globals_css__WEBPACK_IMPORTED_MODULE_1__);\n\n\nfunction MyApp({ Component, pageProps }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Component, {\n        ...pageProps\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\_app.js\",\n        lineNumber: 3,\n        columnNumber: 10\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3BhZ2VzL19hcHAuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQStCO0FBQ2hCLFNBQVNBLE1BQU0sRUFBRUMsU0FBUyxFQUFFQyxTQUFTLEVBQUU7SUFDcEQscUJBQU8sOERBQUNEO1FBQVcsR0FBR0MsU0FBUzs7Ozs7O0FBQ2pDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXEthaVxcRG9jdW1lbnRzXFxVbmlxdWVyeVxcZnJvbnRlbmRcXHBhZ2VzXFxfYXBwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAnLi4vc3R5bGVzL2dsb2JhbHMuY3NzJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE15QXBwKHsgQ29tcG9uZW50LCBwYWdlUHJvcHMgfSkge1xuICByZXR1cm4gPENvbXBvbmVudCB7Li4ucGFnZVByb3BzfSAvPlxufVxuIl0sIm5hbWVzIjpbIk15QXBwIiwiQ29tcG9uZW50IiwicGFnZVByb3BzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./pages/_app.js\n");

/***/ }),

/***/ "(pages-dir-node)/./pages/chat.js":
/*!***********************!*\
  !*** ./pages/chat.js ***!
  \***********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ChatPage)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! styled-jsx/style */ \"styled-jsx/style\");\n/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(styled_jsx_style__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var qrcode_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! qrcode.react */ \"qrcode.react\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/router */ \"(pages-dir-node)/./node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _firebase_clientApp__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../firebase/clientApp */ \"(pages-dir-node)/./firebase/clientApp.js\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! firebase/auth */ \"firebase/auth\");\n/* harmony import */ var react_hot_toast__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-hot-toast */ \"react-hot-toast\");\n/* harmony import */ var _lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../lib/firestoreHelpers */ \"(pages-dir-node)/./lib/firestoreHelpers.js\");\n/* harmony import */ var react_simple_keyboard__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-simple-keyboard */ \"react-simple-keyboard\");\n/* harmony import */ var react_simple_keyboard__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_simple_keyboard__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var react_simple_keyboard_build_css_index_css__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-simple-keyboard/build/css/index.css */ \"(pages-dir-node)/./node_modules/react-simple-keyboard/build/css/index.css\");\n/* harmony import */ var react_simple_keyboard_build_css_index_css__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_simple_keyboard_build_css_index_css__WEBPACK_IMPORTED_MODULE_10__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([qrcode_react__WEBPACK_IMPORTED_MODULE_3__, _firebase_clientApp__WEBPACK_IMPORTED_MODULE_5__, firebase_auth__WEBPACK_IMPORTED_MODULE_6__, react_hot_toast__WEBPACK_IMPORTED_MODULE_7__, _lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__]);\n([qrcode_react__WEBPACK_IMPORTED_MODULE_3__, _firebase_clientApp__WEBPACK_IMPORTED_MODULE_5__, firebase_auth__WEBPACK_IMPORTED_MODULE_6__, react_hot_toast__WEBPACK_IMPORTED_MODULE_7__, _lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\n\n\n\n\n\n// IMPORT VIRTUAL KEYBOARD\n\n\n// ✅ FIX: Define QWERTY keyboard layout\nconst layout = {\n    qwerty: {\n        default: [\n            \"0 1 2 3 4 5 6 7 8 9\",\n            \"q w e r t y u i o p {backspace}\",\n            \"a s d f g h j k l {enter}\",\n            \"{shift} z x c v b n m\",\n            \"{@} {%} {?} {space} {,} {.}\"\n        ],\n        shift: [\n            \"0 1 2 3 4 5 6 7 8 9\",\n            \"Q W E R T Y U I O P {backspace}\",\n            \"A S D F G H J K L {enter}\",\n            \"{shift} Z X C V B N M\",\n            \"{@} {%} {?} {space} {,} {.}\"\n        ]\n    }\n};\n// Simple markdown renderer without external dependencies\nfunction SimpleMarkdownRenderer({ text }) {\n    if (!text) return null;\n    const lines = text.split(\"\\n\");\n    return lines.map((line, index)=>{\n        if (line.trim() === \"\") return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"br\", {}, index, false, {\n            fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n            lineNumber: 47,\n            columnNumber: 36\n        }, this);\n        let content = line;\n        const boldRegex = /\\*\\*(.*?)\\*\\*/g;\n        const parts = [];\n        let lastIndex = 0;\n        let match;\n        while((match = boldRegex.exec(content)) !== null){\n            if (match.index > lastIndex) {\n                parts.push(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    children: content.substring(lastIndex, match.index)\n                }, `${index}-${lastIndex}`, false, {\n                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                    lineNumber: 58,\n                    columnNumber: 11\n                }, this));\n            }\n            parts.push(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                children: match[1]\n            }, `${index}-bold-${match.index}`, false, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 64,\n                columnNumber: 9\n            }, this));\n            lastIndex = match.index + match[0].length;\n        }\n        if (lastIndex < content.length) {\n            parts.push(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                children: content.substring(lastIndex)\n            }, `${index}-remaining`, false, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 71,\n                columnNumber: 9\n            }, this));\n        }\n        if (parts.length === 0) {\n            parts.push(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                children: content\n            }, `${index}-plain`, false, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 76,\n                columnNumber: 18\n            }, this));\n        }\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"mb-1 last:mb-0\",\n            children: [\n                parts,\n                index < lines.length - 1 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"br\", {}, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                    lineNumber: 82,\n                    columnNumber: 38\n                }, this)\n            ]\n        }, index, true, {\n            fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n            lineNumber: 80,\n            columnNumber: 7\n        }, this);\n    });\n}\nfunction formatAIResponse(text) {\n    if (!text) return \"\";\n    let cleaned = text.trim();\n    if (cleaned.startsWith(\"{\") && cleaned.endsWith(\"}\")) {\n        try {\n            const json = JSON.parse(cleaned);\n            cleaned = json.generated_text || json.response || json.answer || json.output || json.text || json.message || JSON.stringify(json);\n        } catch  {}\n    }\n    cleaned = cleaned.replace(/^\"|\"$/g, \"\");\n    cleaned = cleaned.replace(/\\\\n/g, \"\\n\");\n    cleaned = cleaned.replace(/\\\\\"/g, '\"');\n    cleaned = cleaned.replace(/\\\\t/g, \"  \");\n    return cleaned;\n}\nfunction ChatPage() {\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_4__.useRouter)();\n    const { model, public: isPublic } = router.query;\n    const modelConfigs = {\n        ece: {\n            url: \"https://tiyupi-ece-ece-api.hf.space/generate\",\n            token: \"\"\n        },\n        nav: {\n            url: \"https://tiyupi-ece-somi-cali.hf.space/chat\",\n            token: \"\"\n        },\n        info: {\n            url: \"https://tiyupi-ece-hitupi.hf.space/chat\",\n            token: \"\"\n        }\n    };\n    const modelKey = model || \"ece\";\n    const selectedModel = modelConfigs[modelKey] || {};\n    const isPublicAccess = isPublic === \"true\";\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(true);\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const [nickname, setNickname] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    const [realName, setRealName] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([]);\n    const [input, setInput] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    const [sending, setSending] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [shiftActive, setShiftActive] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const endRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)();\n    const [sidebarOpen, setSidebarOpen] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(true);\n    const [recentThreads, setRecentThreads] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([]);\n    const [threadId, setThreadId] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const [thinking, setThinking] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [guestThreads, setGuestThreads] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([]);\n    const [guestThreadId, setGuestThreadId] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    // VIRTUAL KEYBOARD STATE\n    const [showKeyboard, setShowKeyboard] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const keyboardRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const lastScrollTopRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(0);\n    const keyboardScrollThreshold = 20;\n    const chatContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const inputBarRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const keyboardInputRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(\"\");\n    const inputRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const caretPositionRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(0);\n    // ✅ SHARE / QR STATE (added)\n    const [shareId, setShareId] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const [shareOpen, setShareOpen] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const GUEST_KEY = `guest_threads_${modelKey}`;\n    function loadGuestThreads() {\n        try {\n            const raw = localStorage.getItem(GUEST_KEY);\n            return raw ? JSON.parse(raw) : [];\n        } catch  {\n            return [];\n        }\n    }\n    function saveGuestThreads(threads) {\n        try {\n            localStorage.setItem(GUEST_KEY, JSON.stringify(threads.slice(0, 3)));\n        } catch  {}\n    }\n    /* AUTH */ (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"ChatPage.useEffect\": ()=>{\n            const unsub = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_6__.onAuthStateChanged)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_5__.auth, {\n                \"ChatPage.useEffect.unsub\": async (u)=>{\n                    if (isPublicAccess && !u) {\n                        setUser(null);\n                        setNickname(\"Guest\");\n                        setRealName(\"Guest\");\n                        const threads = loadGuestThreads();\n                        setGuestThreads(threads);\n                        if (threads.length > 0) {\n                            setGuestThreadId(threads[0].id);\n                            setMessages(threads[0].messages || []);\n                        } else {\n                            setGuestThreadId(null);\n                            setMessages([]);\n                        }\n                        setLoading(false);\n                        return;\n                    }\n                    if (!isPublicAccess && !u) {\n                        router.replace(\"/login\");\n                        return;\n                    }\n                    setUser(u);\n                    try {\n                        if (u) {\n                            const profile = await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.getUserProfile)(u.uid);\n                            const name = profile?.name || u.displayName || profile?.nickname || u.email?.split(\"@\")[0] || \"User\";\n                            setRealName(name);\n                            const nick = profile?.nickname || profile?.name || u.displayName || u.email?.split(\"@\")[0] || \"User\";\n                            setNickname(nick);\n                            const recents = await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.getRecentThreads)(u.uid, modelKey, 3);\n                            setRecentThreads(recents);\n                            if (recents.length > 0) {\n                                // show recents in sidebar, but start blank (unsaved)\n                                setThreadId(null);\n                                setMessages([]);\n                            } else {\n                                // No saved recents yet; start with a blank unsaved chat\n                                setThreadId(null);\n                                setMessages([]);\n                                setRecentThreads([]);\n                            }\n                        }\n                    } catch  {}\n                    setLoading(false);\n                }\n            }[\"ChatPage.useEffect.unsub\"]);\n            return ({\n                \"ChatPage.useEffect\": ()=>unsub()\n            })[\"ChatPage.useEffect\"];\n        }\n    }[\"ChatPage.useEffect\"], [\n        router,\n        modelKey,\n        isPublicAccess\n    ]);\n    // Get references on mount\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"ChatPage.useEffect\": ()=>{\n            chatContainerRef.current = document.querySelector(\".absolute.inset-0.px-6.overflow-y-auto.flex.flex-col\");\n            inputBarRef.current = document.querySelector(\"form.fixed.left-0.z-50\");\n        }\n    }[\"ChatPage.useEffect\"], []);\n    // Handle scroll to auto-hide keyboard\n    const handleScroll = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)({\n        \"ChatPage.useCallback[handleScroll]\": ()=>{\n            if (!showKeyboard) return;\n            const chatContainer = chatContainerRef.current;\n            if (!chatContainer) return;\n            const currentScrollTop = chatContainer.scrollTop;\n            const scrollDiff = Math.abs(currentScrollTop - lastScrollTopRef.current);\n            if (scrollDiff > keyboardScrollThreshold) {\n                setShowKeyboard(false);\n                const inputElement = document.querySelector('input[placeholder*=\"Ask\"]');\n                if (inputElement) inputElement.blur();\n            }\n            lastScrollTopRef.current = currentScrollTop;\n        }\n    }[\"ChatPage.useCallback[handleScroll]\"], [\n        showKeyboard\n    ]);\n    // Attach scroll event listener\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"ChatPage.useEffect\": ()=>{\n            const chatContainer = chatContainerRef.current;\n            if (!chatContainer) return;\n            chatContainer.addEventListener(\"scroll\", handleScroll);\n            return ({\n                \"ChatPage.useEffect\": ()=>{\n                    chatContainer.removeEventListener(\"scroll\", handleScroll);\n                }\n            })[\"ChatPage.useEffect\"];\n        }\n    }[\"ChatPage.useEffect\"], [\n        handleScroll\n    ]);\n    // Reset scroll tracking when keyboard shows\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"ChatPage.useEffect\": ()=>{\n            if (showKeyboard && chatContainerRef.current) {\n                lastScrollTopRef.current = chatContainerRef.current.scrollTop;\n            }\n        }\n    }[\"ChatPage.useEffect\"], [\n        showKeyboard\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"ChatPage.useEffect\": ()=>{\n            endRef.current?.scrollIntoView({\n                behavior: \"smooth\"\n            });\n        }\n    }[\"ChatPage.useEffect\"], [\n        messages\n    ]);\n    /* SEND MESSAGE */ async function handleSend(e) {\n        e.preventDefault();\n        const trimmed = input.trim();\n        if (!trimmed) return;\n        const userMsg = {\n            role: \"user\",\n            content: trimmed\n        };\n        const updatedMessages = [\n            ...messages,\n            userMsg\n        ];\n        setMessages(updatedMessages);\n        setInput(\"\");\n        setSending(true);\n        setThinking(true);\n        setShowKeyboard(false);\n        keyboardInputRef.current = \"\";\n        react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].loading(\"Sending...\", {\n            id: \"send\"\n        });\n        let activeThreadId = threadId;\n        if (user && !isPublicAccess && !activeThreadId) {\n            activeThreadId = await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.createThread)(user.uid, modelKey);\n            setThreadId(activeThreadId);\n        }\n        try {\n            // Save user message (logged-in thread)\n            if (user && !isPublicAccess && activeThreadId) {\n                await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.appendThreadMessage)(user.uid, modelKey, activeThreadId, userMsg);\n            }\n            // Model unavailable\n            if (!selectedModel.url) {\n                const errorMsg = {\n                    role: \"assistant\",\n                    content: \"Model unavailable.\"\n                };\n                setMessages([\n                    ...updatedMessages,\n                    errorMsg\n                ]);\n                if (user && !isPublicAccess && activeThreadId) {\n                    await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.appendThreadMessage)(user.uid, modelKey, activeThreadId, errorMsg);\n                }\n                react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].dismiss(\"send\");\n                setThinking(false);\n                setSending(false);\n                return;\n            }\n            const requestOptions = {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            };\n            const requestFormats = [\n                {\n                    inputs: trimmed,\n                    parameters: {\n                        max_new_tokens: 500,\n                        temperature: 0.7\n                    }\n                },\n                {\n                    query: trimmed,\n                    max_new_tokens: 500,\n                    temperature: 0.7\n                },\n                {\n                    input: trimmed,\n                    max_length: 500,\n                    temperature: 0.7\n                }\n            ];\n            let reply = \"\";\n            let lastError = null;\n            // ✅ GLOBAL 60-second timeout across ALL attempts\n            const controller = new AbortController();\n            const timeoutId = setTimeout(()=>controller.abort(), 60000);\n            for(let i = 0; i < requestFormats.length; i++){\n                try {\n                    requestOptions.body = JSON.stringify(requestFormats[i]);\n                    const res = await fetch(selectedModel.url, {\n                        ...requestOptions,\n                        signal: controller.signal\n                    });\n                    if (!res.ok) throw new Error(`HTTP ${res.status}`);\n                    const raw = await res.text();\n                    reply = formatAIResponse(raw);\n                    if (reply && reply !== \"{}\") break;\n                } catch (err) {\n                    lastError = err;\n                    if (err.name === \"AbortError\") break; // stop immediately on timeout\n                }\n            }\n            clearTimeout(timeoutId);\n            if (!reply && lastError) throw lastError;\n            if (!reply) throw new Error(\"No response\");\n            reply = reply.trim();\n            const aiMsg = {\n                role: \"assistant\",\n                content: reply\n            };\n            const finalMessages = [\n                ...updatedMessages,\n                aiMsg\n            ];\n            setMessages(finalMessages);\n            // Logged-in: save assistant reply (DO NOT refresh recents here)\n            if (user && !isPublicAccess && activeThreadId) {\n                await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.appendThreadMessage)(user.uid, modelKey, activeThreadId, aiMsg);\n            }\n            react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].success(\"Reply received\", {\n                id: \"send\"\n            });\n        } catch (err) {\n            const errorMsg = {\n                role: \"assistant\",\n                content: err.name === \"AbortError\" ? \"⚠️ No response after 1 minute. Please try again.\" : `**Error:** ${err.message}`\n            };\n            setMessages([\n                ...messages,\n                userMsg,\n                errorMsg\n            ]);\n            react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].error(\"Send failed\", {\n                id: \"send\"\n            });\n        }\n        setThinking(false);\n        setSending(false);\n    }\n    async function handleNewChat() {\n        if (user && !isPublicAccess) {\n            // ================================\n            // LOGGED-IN MODE\n            // ================================\n            // 1️⃣ If there is an active conversation, finalize it FIRST\n            if (messages.length > 0) {\n                let currentId = threadId;\n                // If conversation has no thread yet, create one now\n                if (!currentId) {\n                    currentId = await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.createThread)(user.uid, modelKey);\n                    // Save all current messages to Firestore\n                    for (const msg of messages){\n                        await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.appendThreadMessage)(user.uid, modelKey, currentId, msg);\n                    }\n                }\n            }\n            // 2️⃣ Keep only latest 3 threads\n            await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.keepOnlyLastNThreads)(user.uid, modelKey, 3);\n            // 3️⃣ Refresh recents (ONLY here)\n            const recents = await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.getRecentThreads)(user.uid, modelKey, 3);\n            setRecentThreads(recents);\n            // 4️⃣ Start a NEW blank unsaved chat\n            setThreadId(null);\n            setMessages([]);\n        } else {\n            // ================================\n            // GUEST MODE\n            // ================================\n            if (messages.length > 0) {\n                const firstUserMsg = messages.find((m)=>m.role === \"user\");\n                const newThread = {\n                    id: Date.now().toString(),\n                    title: (firstUserMsg?.content || \"New Chat\").slice(0, 30),\n                    messages: messages,\n                    updatedAt: Date.now()\n                };\n                const updated = [\n                    newThread,\n                    ...guestThreads\n                ].sort((a, b)=>b.updatedAt - a.updatedAt).slice(0, 3);\n                setGuestThreads(updated);\n                saveGuestThreads(updated);\n            }\n            // Start fresh blank guest chat\n            setGuestThreadId(Date.now().toString());\n            setMessages([]);\n        }\n        setShareId(null);\n        setShareOpen(false);\n    }\n    function handleSignOut() {\n        (0,firebase_auth__WEBPACK_IMPORTED_MODULE_6__.signOut)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_5__.auth).then(()=>router.push(\"/login\"));\n    }\n    // NEW: Handle sign in redirect\n    function handleSignIn() {\n        router.push(\"/login\");\n    }\n    // ✅ Generate QR (added)\n    async function handleGenerateQR() {\n        try {\n            if (!messages || messages.length === 0) {\n                react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].error(\"No conversation to share yet.\");\n                return;\n            }\n            react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].loading(\"Generating QR...\", {\n                id: \"share\"\n            });\n            const res = await fetch(\"/api/share\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    modelKey,\n                    createdAt: Date.now(),\n                    messages: messages.map((m)=>({\n                            role: m.role,\n                            content: m.content\n                        }))\n                })\n            });\n            if (!res.ok) throw new Error(`HTTP ${res.status}`);\n            const data = await res.json();\n            if (!data?.id) throw new Error(\"No share id returned.\");\n            setShareId(data.id);\n            setShareOpen(true);\n            react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].success(\"QR ready!\", {\n                id: \"share\"\n            });\n        } catch (e) {\n            react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].error(`Failed: ${e.message}`, {\n                id: \"share\"\n            });\n        }\n    }\n    if (loading) return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"h-screen flex items-center justify-center text-xl\",\n        children: \"Loading…\"\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n        lineNumber: 530,\n        columnNumber: 7\n    }, this);\n    const headerHeight = 48;\n    const footerHeight = 32;\n    const sidebarWidth = 224;\n    const keyboardHeight = 280;\n    const inputBarHeight = 60;\n    const keyboardPadding = 4; // REDUCED FROM 8 TO 4\n    const shareUrl = shareId && \"undefined\" !== \"undefined\" ? 0 : \"\";\n    const recentsToShow = user && !isPublicAccess ? recentThreads : guestThreads;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"relative h-screen w-screen overflow-hidden bg-cover bg-center\",\n        style: {\n            backgroundImage: \"url('/bg.png')\"\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute inset-0 bg-[rgba(245,245,245,0.18)] backdrop-blur-sm\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 554,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"header\", {\n                className: \"fixed top-0 left-0 right-0 z-50 bg-black/30 text-white py-1.5 px-4 flex justify-between items-center shadow-sm\",\n                style: {\n                    height: `${headerHeight}px`\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                src: \"/tuplogo.png\",\n                                alt: \"TUP Logo\",\n                                className: \"h-7 w-7\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 562,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                className: \"text-xs md:text-sm font-bold\",\n                                children: \"TECHNOLOGICAL UNIVERSITY OF THE PHILIPPINES\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 563,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                        lineNumber: 561,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: user ? handleSignOut : handleSignIn,\n                        className: \"bg-[#faa029] text-black font-semibold px-5 py-2 rounded-full shadow\",\n                        children: user ? \"Sign Out\" : \"Sign In\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                        lineNumber: 569,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 557,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"footer\", {\n                className: \"fixed bottom-0 left-0 right-0 z-50 bg-black/30 text-center py-1 text-white text-xs\",\n                style: {\n                    height: `${footerHeight}px`\n                },\n                children: \"Designed by: Electronics Engineering Department\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 578,\n                columnNumber: 7\n            }, this),\n            showKeyboard && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    bottom: `${footerHeight + 4}px`,\n                    left: sidebarOpen ? `${sidebarWidth}px` : \"0px\",\n                    height: `${keyboardHeight}px`,\n                    zIndex: 55\n                },\n                className: \"jsx-5e380479dfea8d67\" + \" \" + \"fixed left-0 right-0 bg-white shadow-2xl border-t border-gray-300\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"jsx-5e380479dfea8d67\" + \" \" + \"flex justify-end p-1 bg-gray-100\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            type: \"button\",\n                            onMouseDown: (e)=>{\n                                // PREVENT input blur from firing\n                                e.preventDefault();\n                            },\n                            onClick: (e)=>{\n                                e.stopPropagation();\n                                // 1️⃣ Clear React state\n                                setInput(\"\");\n                                // 2️⃣ Clear refs\n                                keyboardInputRef.current = \"\";\n                                caretPositionRef.current = 0;\n                                // 3️⃣ Clear keyboard internal value\n                                if (keyboardRef.current) {\n                                    keyboardRef.current.setInput(\"\");\n                                    keyboardRef.current.setCaretPosition(0);\n                                }\n                                // 4️⃣ Restore focus safely\n                                requestAnimationFrame(()=>{\n                                    if (inputRef.current) {\n                                        inputRef.current.focus();\n                                        inputRef.current.setSelectionRange(0, 0);\n                                    }\n                                });\n                            },\n                            className: \"jsx-5e380479dfea8d67\" + \" \" + \"text-red-600 hover:text-red-800 font-semibold px-3 py-1 rounded text-xs\",\n                            children: \"Clear All\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                            lineNumber: 598,\n                            columnNumber: 3\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                        lineNumber: 597,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((react_simple_keyboard__WEBPACK_IMPORTED_MODULE_9___default()), {\n                        keyboardRef: (r)=>{\n                            keyboardRef.current = r;\n                        },\n                        layoutName: shiftActive ? \"shift\" : \"default\",\n                        layout: layout.qwerty,\n                        onKeyPress: (button)=>{\n                            let currentText = input;\n                            let caretPos = caretPositionRef.current;\n                            const updateText = (newText, newCaretPos)=>{\n                                setInput(newText);\n                                keyboardInputRef.current = newText;\n                                caretPositionRef.current = newCaretPos;\n                                requestAnimationFrame(()=>{\n                                    if (inputRef.current) {\n                                        inputRef.current.focus();\n                                        inputRef.current.setSelectionRange(newCaretPos, newCaretPos);\n                                    }\n                                });\n                            };\n                            // ===== SHIFT =====\n                            // \n                            if (button === \"{shift}\" || button === \"{lock}\") {\n                                const newShiftState = !shiftActive;\n                                setShiftActive(newShiftState);\n                                keyboardRef.current?.setOptions({\n                                    layoutName: newShiftState ? \"shift\" : \"default\"\n                                });\n                                return;\n                            }\n                            // ===== ENTER =====\n                            // \n                            if (button === \"{enter}\") {\n                                handleSend({\n                                    preventDefault: ()=>{}\n                                });\n                                return;\n                            }\n                            // ===== BACKSPACE =====\n                            // \n                            if (button === \"{backspace}\") {\n                                if (caretPos > 0) {\n                                    const newText = currentText.slice(0, caretPos - 1) + currentText.slice(caretPos);\n                                    updateText(newText, caretPos - 1);\n                                }\n                                return;\n                            }\n                            // ===== SPACE =====\n                            // \n                            if (button === \"{space}\") {\n                                const newText = currentText.slice(0, caretPos) + \" \" + currentText.slice(caretPos);\n                                updateText(newText, caretPos + 1);\n                                return;\n                            }\n                            // ===== SPECIAL TOKENS FROM YOUR LAYOUT =====\n                            // \n                            const specialTokens = {\n                                \"{@}\": \"@\",\n                                \"{%}\": \"%\",\n                                \"{?}\": \"?\",\n                                \"{,}\": \",\",\n                                \"{.}\": \".\"\n                            };\n                            if (specialTokens[button]) {\n                                const char = specialTokens[button];\n                                const newText = currentText.slice(0, caretPos) + char + currentText.slice(caretPos);\n                                updateText(newText, caretPos + 1);\n                                return;\n                            }\n                            // ===== Ignore unknown control buttons =====\n                            if (button.startsWith(\"{\") && button.endsWith(\"}\")) {\n                                return;\n                            }\n                            // ===== Normal characters (letters & numbers) =====\n                            const newText = currentText.slice(0, caretPos) + button + currentText.slice(caretPos);\n                            updateText(newText, caretPos + button.length);\n                        },\n                        theme: \"hg-theme-default hg-theme-custom\",\n                        display: {\n                            \"{backspace}\": \"⌫\",\n                            \"{enter}\": \"↵\",\n                            \"{shift}\": \"⇧\",\n                            \"{space}\": \"Space\",\n                            \"{@}\": \"@\",\n                            \"{%}\": \"%\",\n                            \"{?}\": \"?\",\n                            \"{,}\": \",\",\n                            \"{.}\": \".\",\n                            \"{#}\": \"#\"\n                        },\n                        preventMouseDownDefault: true,\n                        preventMouseUpDefault: true,\n                        newLineOnEnter: false,\n                        autoUseTouchEvents: true\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                        lineNumber: 634,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default()), {\n                        id: \"5e380479dfea8d67\",\n                        children: \".simple-keyboard{background:white!important;padding:10px!important;height:calc(100% - 30px)!important;width:100%!important;box-sizing:border-box!important}.hg-theme-custom{background-color:white!important;height:100%!important;display:flex!important;flex-direction:column!important}.hg-button{height:45px!important;border-radius:6px!important;font-weight:500!important;font-size:14px!important;box-shadow:0 2px 3px rgba(0,0,0,.15)!important;margin:3px!important;display:flex!important;align-items:center!important;justify-content:center!important;transition:all.1s ease!important;min-width:0!important;flex:1!important}.hg-row:nth-child(1) .hg-button{background:#f8f9fa!important;color:#333!important;border:1px solid#ddd!important}.hg-row:nth-child(2) .hg-button:not(.hg-button-backspace):not(.hg-button-enter),.hg-row:nth-child(3) .hg-button:not(.hg-button-enter),.hg-row:nth-child(4) .hg-button:not(.hg-button-shift){background:#aa3636!important;color:white!important;border:1px solid#8a2c2c!important}.hg-row:nth-child(5) .hg-button{background:#faa029!important;color:black!important;border:1px solid#d88c20!important;font-weight:bold!important}.hg-button-shift,.hg-button-backspace,.hg-button-enter{background:#faa029!important;color:black!important;border:1px solid#d88c20!important;font-weight:bold!important}.hg-button-space{flex-grow:3!important;max-width:none!important}.hg-button-backspace,.hg-button-enter,.hg-button-shift{min-width:70px!important;flex-grow:.5!important}.hg-button-\\\\\\\\{@\\\\\\\\;},\\n            .hg-button-\\\\\\\\{%\\\\\\\\},\\n            .hg-button-\\\\\\\\{\\\\\\\\?\\\\\\\\},\\n            .hg-button-\\\\\\\\{\\\\\\\\,\\\\\\\\},\\n            .hg-button-\\\\\\\\{\\\\\\\\.\\\\\\\\}{min-width:35px!important;flex-grow:.3!important}.hg-button:active,.hg-button.hg-activeBtn{transform:translatey(2px)!important;box-shadow:0 1px 2px rgba(0,0,0,.1)!important}.hg-row:nth-child(2) .hg-button:active:not(.hg-button-backspace):not(.hg-button-enter),.hg-row:nth-child(3) .hg-button:active:not(.hg-button-enter),.hg-row:nth-child(4) .hg-button:active:not(.hg-button-shift){background:#8a2c2c!important}.hg-button-shift:active,.hg-button-backspace:active,.hg-button-enter:active,.hg-row:nth-child(5) .hg-button:active,.hg-button-shift.hg-activeBtn{background:#d88c20!important}.hg-rows{height:100%!important;display:flex!important;flex-direction:column!important;justify-content:space-between!important;padding:0 8px!important}.hg-row{display:flex!important;justify-content:center!important;flex:1!important;min-height:48px!important;margin-bottom:5px!important}.hg-button-standard{min-width:35px!important;flex:1!important;max-width:50px!important}.hg-row:last-child{margin-bottom:0!important}.hg-button-backspace{font-size:16px!important}.hg-button-enter{font-size:16px!important}.simple-keyboard.hg-layout-default .hg-row{flex-wrap:nowrap!important}.hg-button span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dot{display:inline-block;width:6px;text-align:center;animation:dotBounce 1.1s infinite ease-in-out;opacity:.35}.dot:nth-child(2){animation-delay:.12s}.dot:nth-child(3){animation-delay:.24s}@keyframes dotBounce{0%,80%,100%{transform:translatey(0);opacity:.35}40%{transform:translatey(-4px);opacity:1}}\"\n                    }, void 0, false, void 0, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 587,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex h-full relative z-10\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"fixed bg-[#aa3636] text-white shadow-xl flex flex-col px-4 py-3 transition-transform duration-300\",\n                        style: {\n                            top: headerHeight,\n                            bottom: footerHeight,\n                            width: sidebarWidth,\n                            transform: sidebarOpen ? \"translateX(0)\" : `translateX(-100%)`,\n                            zIndex: 60\n                        },\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>router.push(user ? \"/models\" : \"/\"),\n                                className: \"flex items-center gap-1 text-[#faa029] transition mb-3\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-xl\",\n                                        children: \"←\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 926,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-sm font-semibold\",\n                                        children: user ? \"Back to Menu\" : \"Back to Home\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 927,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 922,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleNewChat,\n                                className: \"w-full bg-white text-[#aa3636] font-bold py-1 rounded-full shadow mb-6 text-sm\",\n                                style: {\n                                    marginTop: \"-4px\"\n                                },\n                                children: \"+ New Chat\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 933,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-sm opacity-80 mb-3\",\n                                children: \"Recents\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 941,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"h-[1px] bg-white/40 mb-4\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 942,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex flex-col gap-2 overflow-y-auto\",\n                                children: recentsToShow.map((t)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: \"text-left text-xs bg-white/10 hover:bg-white/20 px-3 py-2 rounded\",\n                                        onClick: async ()=>{\n                                            if (user && !isPublicAccess) {\n                                                // Logged-in: load from Firestore\n                                                setThreadId(t.id);\n                                                const msgs = await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.getThreadMessages)(user.uid, modelKey, t.id);\n                                                setMessages(msgs.map((m)=>({\n                                                        role: m.role,\n                                                        content: m.content\n                                                    })));\n                                            } else {\n                                                // Guest: load from localStorage memory\n                                                // \n                                                setGuestThreadId(t.id);\n                                                setMessages(t.messages || []);\n                                            }\n                                        },\n                                        children: t.title || \"Chat\"\n                                    }, t.id, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 946,\n                                        columnNumber: 15\n                                    }, this))\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 944,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mt-auto flex items-center gap-3 border-t border-white/30 pt-4\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"h-10 w-10 bg-white/20 rounded-full flex items-center justify-center\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                            src: \"/tupi-logo.png\",\n                                            className: \"h-8 w-8 rounded-full\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                            lineNumber: 973,\n                                            columnNumber: 15\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 972,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"text-sm font-bold\",\n                                                children: realName\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                lineNumber: 976,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"text-xs opacity-80\",\n                                                children: user ? \"Logged In\" : \"Guest Mode\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                lineNumber: 977,\n                                                columnNumber: 15\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 975,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 971,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                        lineNumber: 911,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>setSidebarOpen(!sidebarOpen),\n                        className: \"fixed bg-[#aa3636] text-white px-2 py-3 rounded-r-full shadow transition-all duration-300\",\n                        style: {\n                            top: `calc(${headerHeight}px + 30%)`,\n                            left: sidebarOpen ? `${sidebarWidth}px` : \"0px\",\n                            transform: \"translateY(-50%)\",\n                            zIndex: 70\n                        },\n                        children: sidebarOpen ? \"◀\" : \"▶\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                        lineNumber: 985,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: `flex-1 relative transition-all duration-300 ${sidebarOpen ? `ml-[224px]` : \"ml-0\"}`,\n                        style: {\n                            marginTop: `${headerHeight}px`,\n                            marginBottom: showKeyboard ? `${footerHeight + keyboardHeight + keyboardPadding + inputBarHeight + 4}px` : `${footerHeight}px`,\n                            transition: \"margin-bottom 0.3s ease-in-out\"\n                        },\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"px-6 pt-3 flex justify-end\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: handleGenerateQR,\n                                    disabled: messages.length === 0,\n                                    className: `px-4 py-2 rounded-full shadow font-semibold text-xs ${messages.length === 0 ? \"bg-white/50 text-gray-700\" : \"bg-white/90 text-black\"}`,\n                                    title: messages.length === 0 ? \"Start a conversation first\" : \"Generate QR for this conversation\",\n                                    children: \"Generate QR\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                    lineNumber: 1014,\n                                    columnNumber: 11\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 1013,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"absolute inset-0 px-6 overflow-y-auto flex flex-col\",\n                                style: {\n                                    top: \"52px\",\n                                    paddingTop: \"6px\",\n                                    paddingBottom: showKeyboard ? `${inputBarHeight + keyboardPadding + keyboardHeight}px` : `${inputBarHeight}px`\n                                },\n                                children: [\n                                    messages.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex-1 flex justify-center items-center text-center text-sm font-bold text-[#aa3636]\",\n                                        children: [\n                                            \"Hello, \",\n                                            nickname,\n                                            \"!\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 1044,\n                                        columnNumber: 15\n                                    }, this) : messages.map((msg, i)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: `mb-4 w-full ${msg.role === \"user\" ? \"text-right\" : \"text-left\"}`,\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: `inline-block px-4 py-3 rounded-2xl shadow-lg text-sm max-w-[85%] ${msg.role === \"user\" ? \"bg-[#aa3636] text-white\" : \"bg-white text-black border border-gray-200\"}`,\n                                                style: {\n                                                    whiteSpace: \"pre-wrap\",\n                                                    wordBreak: \"break-word\",\n                                                    overflowWrap: \"break-word\"\n                                                },\n                                                children: msg.role === \"user\" ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"whitespace-pre-wrap break-words\",\n                                                    children: msg.content\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                    lineNumber: 1068,\n                                                    columnNumber: 23\n                                                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(SimpleMarkdownRenderer, {\n                                                    text: msg.content\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                    lineNumber: 1072,\n                                                    columnNumber: 23\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                lineNumber: 1055,\n                                                columnNumber: 19\n                                            }, this)\n                                        }, i, false, {\n                                            fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                            lineNumber: 1049,\n                                            columnNumber: 17\n                                        }, this)),\n                                    thinking && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"mb-4 w-full text-left\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"inline-block px-4 py-3 rounded-2xl shadow-lg text-sm max-w-[85%] bg-white text-black border border-gray-200\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"dot\",\n                                                    children: \".\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                    lineNumber: 1082,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"dot\",\n                                                    children: \".\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                    lineNumber: 1083,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"dot\",\n                                                    children: \".\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                    lineNumber: 1084,\n                                                    columnNumber: 19\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                            lineNumber: 1081,\n                                            columnNumber: 17\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 1080,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        ref: endRef\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 1088,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 1033,\n                                columnNumber: 11\n                            }, this),\n                            shareOpen && shareId && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"fixed inset-0 z-[90] flex items-center justify-center\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"absolute inset-0 bg-black/50\",\n                                        onClick: ()=>setShareOpen(false)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 1094,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"relative bg-white rounded-2xl shadow-2xl border p-5 w-[320px] max-w-[90vw]\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"text-sm font-bold text-center mb-1\",\n                                                children: \"Scan to view on phone\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                lineNumber: 1099,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"text-xs text-gray-600 text-center mb-3\",\n                                                children: \"This opens a document-style page that can be saved as PDF.\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                lineNumber: 1102,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex justify-center\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(qrcode_react__WEBPACK_IMPORTED_MODULE_3__.QRCodeCanvas, {\n                                                    value: shareUrl,\n                                                    size: 220,\n                                                    includeMargin: true\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                    lineNumber: 1107,\n                                                    columnNumber: 19\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                lineNumber: 1106,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"mt-4 flex gap-2\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        className: \"flex-1 bg-[#aa3636] text-white text-xs font-semibold py-2 rounded-xl\",\n                                                        onClick: ()=>{\n                                                            if (!shareUrl) return;\n                                                            navigator.clipboard?.writeText(shareUrl);\n                                                            react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].success(\"Link copied!\");\n                                                        },\n                                                        children: \"Copy Link\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                        lineNumber: 1111,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        className: \"flex-1 bg-gray-200 text-xs font-semibold py-2 rounded-xl\",\n                                                        onClick: ()=>setShareOpen(false),\n                                                        children: \"Close\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                        lineNumber: 1122,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                lineNumber: 1110,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 1098,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 1093,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                                ref: inputBarRef,\n                                onSubmit: handleSend,\n                                className: `fixed left-0 z-50 flex items-center justify-center gap-3 transition-all duration-300 ${sidebarOpen ? \"ml-[224px] w-[calc(100%-14rem)] px-6\" : \"ml-0 w-full px-6\"}`,\n                                style: {\n                                    bottom: showKeyboard ? `${footerHeight + keyboardHeight + keyboardPadding + 4}px` : `${footerHeight + 8}px`,\n                                    transition: \"bottom 0.3s ease-in-out\"\n                                },\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                        ref: inputRef,\n                                        value: input,\n                                        onChange: (e)=>{\n                                            const value = e.target.value;\n                                            const caret = e.target.selectionStart;\n                                            setInput(value);\n                                            keyboardInputRef.current = value;\n                                            caretPositionRef.current = caret;\n                                            if (keyboardRef.current) {\n                                                keyboardRef.current.setInput(value);\n                                                keyboardRef.current.setCaretPosition(caret);\n                                            }\n                                        },\n                                        onClick: (e)=>{\n                                            const caret = e.target.selectionStart;\n                                            caretPositionRef.current = caret;\n                                            keyboardRef.current?.setCaretPosition(caret);\n                                        },\n                                        onKeyUp: (e)=>{\n                                            const caret = e.target.selectionStart;\n                                            caretPositionRef.current = caret;\n                                            keyboardRef.current?.setCaretPosition(caret);\n                                        },\n                                        onFocus: ()=>{\n                                            setShowKeyboard(true);\n                                            if (chatContainerRef.current) {\n                                                lastScrollTopRef.current = chatContainerRef.current.scrollTop;\n                                            }\n                                        },\n                                        onBlur: (e)=>{\n                                            const isKeyboardClick = e.relatedTarget?.closest(\".simple-keyboard\");\n                                            const isInputClick = e.relatedTarget?.closest('input[placeholder*=\"Ask\"]');\n                                            const isSidebarClick = e.relatedTarget?.closest(\".fixed.bg-\\\\[\\\\#aa3636\\\\]\");\n                                            const isSidebarToggleClick = e.relatedTarget?.closest(\"button.fixed.bg-\\\\[\\\\#aa3636\\\\]\");\n                                            if (!isKeyboardClick && !isInputClick && !isSidebarClick && !isSidebarToggleClick) {\n                                                setTimeout(()=>{\n                                                    setShowKeyboard(false);\n                                                }, 100);\n                                            }\n                                        },\n                                        placeholder: `Ask ${modelKey.toUpperCase()}...`,\n                                        className: \"w-full py-3 px-5 rounded-full bg-white/95 outline-none border border-gray-300 shadow-sm text-sm focus:border-[#aa3636] focus:ring-1 focus:ring-[#aa3636] transition\",\n                                        disabled: sending\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 1149,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        type: \"submit\",\n                                        disabled: sending || !input.trim(),\n                                        className: \"bg-[#aa3636] text-white px-5 py-3 rounded-full text-sm shadow\",\n                                        children: \"Send\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 1209,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 1134,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                        lineNumber: 999,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 909,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n        lineNumber: 550,\n        columnNumber: 5\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O29EQUNUeEUsZ0JBQWdCO2dEQUNsQixHQUFHOzRDQUNMO3dDQUNGO3dDQUNBcU0sYUFBYSxDQUFDLElBQUksRUFBRXRPLFNBQVN1TyxXQUFXLEdBQUcsR0FBRyxDQUFDO3dDQUMvQ2xRLFdBQVU7d0NBQ1ZxTyxVQUFVM0w7Ozs7OztrREFHWiw4REFBQ21KO3dDQUNDTSxNQUFLO3dDQUNMa0MsVUFBVTNMLFdBQVcsQ0FBQ0YsTUFBTXRELElBQUk7d0NBQ2hDYyxXQUFVO2tEQUNYOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFRYiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxLYWlcXERvY3VtZW50c1xcVW5pcXVlcnlcXGZyb250ZW5kXFxwYWdlc1xcY2hhdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcbmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBRUkNvZGVDYW52YXMgfSBmcm9tIFwicXJjb2RlLnJlYWN0XCI7XG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tIFwibmV4dC9yb3V0ZXJcIjtcbmltcG9ydCB7IGF1dGggfSBmcm9tIFwiLi4vZmlyZWJhc2UvY2xpZW50QXBwXCI7XG5pbXBvcnQgeyBvbkF1dGhTdGF0ZUNoYW5nZWQsIHNpZ25PdXQgfSBmcm9tIFwiZmlyZWJhc2UvYXV0aFwiO1xuaW1wb3J0IHRvYXN0IGZyb20gXCJyZWFjdC1ob3QtdG9hc3RcIjtcbmltcG9ydCB7XG4gIGdldFVzZXJQcm9maWxlLFxuICBjcmVhdGVUaHJlYWQsXG4gIGdldFJlY2VudFRocmVhZHMsXG4gIGdldFRocmVhZE1lc3NhZ2VzLFxuICBhcHBlbmRUaHJlYWRNZXNzYWdlLFxuICBrZWVwT25seUxhc3ROVGhyZWFkcyxcbn0gZnJvbSBcIi4uL2xpYi9maXJlc3RvcmVIZWxwZXJzXCI7XG5cbi8vIElNUE9SVCBWSVJUVUFMIEtFWUJPQVJEXG5pbXBvcnQgS2V5Ym9hcmQgZnJvbSBcInJlYWN0LXNpbXBsZS1rZXlib2FyZFwiO1xuaW1wb3J0IFwicmVhY3Qtc2ltcGxlLWtleWJvYXJkL2J1aWxkL2Nzcy9pbmRleC5jc3NcIjtcblxuLy8g4pyFIEZJWDogRGVmaW5lIFFXRVJUWSBrZXlib2FyZCBsYXlvdXRcbmNvbnN0IGxheW91dCA9IHtcbiAgcXdlcnR5OiB7XG4gICAgZGVmYXVsdDogW1xuICAgICAgXCIwIDEgMiAzIDQgNSA2IDcgOCA5XCIsXG4gICAgICBcInEgdyBlIHIgdCB5IHUgaSBvIHAge2JhY2tzcGFjZX1cIixcbiAgICAgIFwiYSBzIGQgZiBnIGggaiBrIGwge2VudGVyfVwiLFxuICAgICAgXCJ7c2hpZnR9IHogeCBjIHYgYiBuIG1cIixcbiAgICAgIFwie0B9IHslfSB7P30ge3NwYWNlfSB7LH0gey59XCIsXG4gICAgXSxcbiAgICBzaGlmdDogW1xuICAgICAgXCIwIDEgMiAzIDQgNSA2IDcgOCA5XCIsXG4gICAgICBcIlEgVyBFIFIgVCBZIFUgSSBPIFAge2JhY2tzcGFjZX1cIixcbiAgICAgIFwiQSBTIEQgRiBHIEggSiBLIEwge2VudGVyfVwiLFxuICAgICAgXCJ7c2hpZnR9IFogWCBDIFYgQiBOIE1cIixcbiAgICAgIFwie0B9IHslfSB7P30ge3NwYWNlfSB7LH0gey59XCIsXG4gICAgXSxcbiAgfSxcbn07XG5cbi8vIFNpbXBsZSBtYXJrZG93biByZW5kZXJlciB3aXRob3V0IGV4dGVybmFsIGRlcGVuZGVuY2llc1xuZnVuY3Rpb24gU2ltcGxlTWFya2Rvd25SZW5kZXJlcih7IHRleHQgfSkge1xuICBpZiAoIXRleHQpIHJldHVybiBudWxsO1xuXG4gIGNvbnN0IGxpbmVzID0gdGV4dC5zcGxpdChcIlxcblwiKTtcbiAgcmV0dXJuIGxpbmVzLm1hcCgobGluZSwgaW5kZXgpID0+IHtcbiAgICBpZiAobGluZS50cmltKCkgPT09IFwiXCIpIHJldHVybiA8YnIga2V5PXtpbmRleH0gLz47XG5cbiAgICBsZXQgY29udGVudCA9IGxpbmU7XG4gICAgY29uc3QgYm9sZFJlZ2V4ID0gL1xcKlxcKiguKj8pXFwqXFwqL2c7XG4gICAgY29uc3QgcGFydHMgPSBbXTtcbiAgICBsZXQgbGFzdEluZGV4ID0gMDtcbiAgICBsZXQgbWF0Y2g7XG5cbiAgICB3aGlsZSAoKG1hdGNoID0gYm9sZFJlZ2V4LmV4ZWMoY29udGVudCkpICE9PSBudWxsKSB7XG4gICAgICBpZiAobWF0Y2guaW5kZXggPiBsYXN0SW5kZXgpIHtcbiAgICAgICAgcGFydHMucHVzaChcbiAgICAgICAgICA8c3BhbiBrZXk9e2Ake2luZGV4fS0ke2xhc3RJbmRleH1gfT5cbiAgICAgICAgICAgIHtjb250ZW50LnN1YnN0cmluZyhsYXN0SW5kZXgsIG1hdGNoLmluZGV4KX1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBwYXJ0cy5wdXNoKFxuICAgICAgICA8c3Ryb25nIGtleT17YCR7aW5kZXh9LWJvbGQtJHttYXRjaC5pbmRleH1gfT57bWF0Y2hbMV19PC9zdHJvbmc+XG4gICAgICApO1xuICAgICAgbGFzdEluZGV4ID0gbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGg7XG4gICAgfVxuXG4gICAgaWYgKGxhc3RJbmRleCA8IGNvbnRlbnQubGVuZ3RoKSB7XG4gICAgICBwYXJ0cy5wdXNoKFxuICAgICAgICA8c3BhbiBrZXk9e2Ake2luZGV4fS1yZW1haW5pbmdgfT57Y29udGVudC5zdWJzdHJpbmcobGFzdEluZGV4KX08L3NwYW4+XG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHBhcnRzLnB1c2goPHNwYW4ga2V5PXtgJHtpbmRleH0tcGxhaW5gfT57Y29udGVudH08L3NwYW4+KTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBrZXk9e2luZGV4fSBjbGFzc05hbWU9XCJtYi0xIGxhc3Q6bWItMFwiPlxuICAgICAgICB7cGFydHN9XG4gICAgICAgIHtpbmRleCA8IGxpbmVzLmxlbmd0aCAtIDEgJiYgPGJyIC8+fVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdEFJUmVzcG9uc2UodGV4dCkge1xuICBpZiAoIXRleHQpIHJldHVybiBcIlwiO1xuICBsZXQgY2xlYW5lZCA9IHRleHQudHJpbSgpO1xuXG4gIGlmIChjbGVhbmVkLnN0YXJ0c1dpdGgoXCJ7XCIpICYmIGNsZWFuZWQuZW5kc1dpdGgoXCJ9XCIpKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKGNsZWFuZWQpO1xuICAgICAgY2xlYW5lZCA9XG4gICAgICAgIGpzb24uZ2VuZXJhdGVkX3RleHQgfHxcbiAgICAgICAganNvbi5yZXNwb25zZSB8fFxuICAgICAgICBqc29uLmFuc3dlciB8fFxuICAgICAgICBqc29uLm91dHB1dCB8fFxuICAgICAgICBqc29uLnRleHQgfHxcbiAgICAgICAganNvbi5tZXNzYWdlIHx8XG4gICAgICAgIEpTT04uc3RyaW5naWZ5KGpzb24pO1xuICAgIH0gY2F0Y2gge31cbiAgfVxuXG4gIGNsZWFuZWQgPSBjbGVhbmVkLnJlcGxhY2UoL15cInxcIiQvZywgXCJcIik7XG4gIGNsZWFuZWQgPSBjbGVhbmVkLnJlcGxhY2UoL1xcXFxuL2csIFwiXFxuXCIpO1xuICBjbGVhbmVkID0gY2xlYW5lZC5yZXBsYWNlKC9cXFxcXCIvZywgJ1wiJyk7XG4gIGNsZWFuZWQgPSBjbGVhbmVkLnJlcGxhY2UoL1xcXFx0L2csIFwiICBcIik7XG5cbiAgcmV0dXJuIGNsZWFuZWQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENoYXRQYWdlKCkge1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgY29uc3QgeyBtb2RlbCwgcHVibGljOiBpc1B1YmxpYyB9ID0gcm91dGVyLnF1ZXJ5O1xuXG4gIGNvbnN0IG1vZGVsQ29uZmlncyA9IHtcbiAgICBlY2U6IHsgdXJsOiBcImh0dHBzOi8vdGl5dXBpLWVjZS1lY2UtYXBpLmhmLnNwYWNlL2dlbmVyYXRlXCIsIHRva2VuOiBcIlwiIH0sXG4gICAgbmF2OiB7IHVybDogXCJodHRwczovL3RpeXVwaS1lY2Utc29taS1jYWxpLmhmLnNwYWNlL2NoYXRcIiwgdG9rZW46IFwiXCIgfSxcbiAgICBpbmZvOiB7IHVybDogXCJodHRwczovL3RpeXVwaS1lY2UtaGl0dXBpLmhmLnNwYWNlL2NoYXRcIiwgdG9rZW46IFwiXCIgfSxcbiAgfTtcblxuICBjb25zdCBtb2RlbEtleSA9IG1vZGVsIHx8IFwiZWNlXCI7XG4gIGNvbnN0IHNlbGVjdGVkTW9kZWwgPSBtb2RlbENvbmZpZ3NbbW9kZWxLZXldIHx8IHt9O1xuICBjb25zdCBpc1B1YmxpY0FjY2VzcyA9IGlzUHVibGljID09PSBcInRydWVcIjtcblxuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW3VzZXIsIHNldFVzZXJdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IFtuaWNrbmFtZSwgc2V0Tmlja25hbWVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtyZWFsTmFtZSwgc2V0UmVhbE5hbWVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbaW5wdXQsIHNldElucHV0XSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbc2VuZGluZywgc2V0U2VuZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaGlmdEFjdGl2ZSwgc2V0U2hpZnRBY3RpdmVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBlbmRSZWYgPSB1c2VSZWYoKTtcblxuICBjb25zdCBbc2lkZWJhck9wZW4sIHNldFNpZGViYXJPcGVuXSA9IHVzZVN0YXRlKHRydWUpO1xuXG5jb25zdCBbcmVjZW50VGhyZWFkcywgc2V0UmVjZW50VGhyZWFkc10gPSB1c2VTdGF0ZShbXSk7XG5jb25zdCBbdGhyZWFkSWQsIHNldFRocmVhZElkXSA9IHVzZVN0YXRlKG51bGwpO1xuY29uc3QgW3RoaW5raW5nLCBzZXRUaGlua2luZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbmNvbnN0IFtndWVzdFRocmVhZHMsIHNldEd1ZXN0VGhyZWFkc10gPSB1c2VTdGF0ZShbXSk7XG5jb25zdCBbZ3Vlc3RUaHJlYWRJZCwgc2V0R3Vlc3RUaHJlYWRJZF0gPSB1c2VTdGF0ZShudWxsKTtcblxuICAvLyBWSVJUVUFMIEtFWUJPQVJEIFNUQVRFXG4gIGNvbnN0IFtzaG93S2V5Ym9hcmQsIHNldFNob3dLZXlib2FyZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IGtleWJvYXJkUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBsYXN0U2Nyb2xsVG9wUmVmID0gdXNlUmVmKDApO1xuICBjb25zdCBrZXlib2FyZFNjcm9sbFRocmVzaG9sZCA9IDIwO1xuICBjb25zdCBjaGF0Q29udGFpbmVyUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBpbnB1dEJhclJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3Qga2V5Ym9hcmRJbnB1dFJlZiA9IHVzZVJlZihcIlwiKTtcbiAgY29uc3QgaW5wdXRSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGNhcmV0UG9zaXRpb25SZWYgPSB1c2VSZWYoMCk7XG5cbiAgLy8g4pyFIFNIQVJFIC8gUVIgU1RBVEUgKGFkZGVkKVxuICBjb25zdCBbc2hhcmVJZCwgc2V0U2hhcmVJZF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW3NoYXJlT3Blbiwgc2V0U2hhcmVPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuXG4gIGNvbnN0IEdVRVNUX0tFWSA9IGBndWVzdF90aHJlYWRzXyR7bW9kZWxLZXl9YDtcbiAgZnVuY3Rpb24gbG9hZEd1ZXN0VGhyZWFkcygpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByYXcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShHVUVTVF9LRVkpO1xuICAgIHJldHVybiByYXcgPyBKU09OLnBhcnNlKHJhdykgOiBbXTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gfVxuIGZ1bmN0aW9uIHNhdmVHdWVzdFRocmVhZHModGhyZWFkcykge1xuICB0cnkge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKEdVRVNUX0tFWSwgSlNPTi5zdHJpbmdpZnkodGhyZWFkcy5zbGljZSgwLCAzKSkpO1xuICB9IGNhdGNoIHt9XG4gfVxuXG5cbiAgLyogQVVUSCAqL1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHVuc3ViID0gb25BdXRoU3RhdGVDaGFuZ2VkKGF1dGgsIGFzeW5jICh1KSA9PiB7XG4gICAgICBpZiAoaXNQdWJsaWNBY2Nlc3MgJiYgIXUpIHtcbiAgICAgICAgc2V0VXNlcihudWxsKTtcbiAgICAgICAgc2V0Tmlja25hbWUoXCJHdWVzdFwiKTtcbiAgICAgICAgc2V0UmVhbE5hbWUoXCJHdWVzdFwiKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRocmVhZHMgPSBsb2FkR3Vlc3RUaHJlYWRzKCk7XG4gICAgICAgIHNldEd1ZXN0VGhyZWFkcyh0aHJlYWRzKTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aHJlYWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBzZXRHdWVzdFRocmVhZElkKHRocmVhZHNbMF0uaWQpO1xuICAgICAgICAgIHNldE1lc3NhZ2VzKHRocmVhZHNbMF0ubWVzc2FnZXMgfHwgW10pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldEd1ZXN0VGhyZWFkSWQobnVsbCk7XG4gICAgICAgICAgc2V0TWVzc2FnZXMoW10pO1xuICAgICAgICB9XG4gICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNQdWJsaWNBY2Nlc3MgJiYgIXUpIHtcbiAgICAgICAgcm91dGVyLnJlcGxhY2UoXCIvbG9naW5cIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc2V0VXNlcih1KTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHUpIHtcbiAgICAgICAgICBjb25zdCBwcm9maWxlID0gYXdhaXQgZ2V0VXNlclByb2ZpbGUodS51aWQpO1xuICAgICAgICAgIGNvbnN0IG5hbWUgPVxuICAgICAgICAgICAgcHJvZmlsZT8ubmFtZSB8fFxuICAgICAgICAgICAgdS5kaXNwbGF5TmFtZSB8fFxuICAgICAgICAgICAgcHJvZmlsZT8ubmlja25hbWUgfHxcbiAgICAgICAgICAgIHUuZW1haWw/LnNwbGl0KFwiQFwiKVswXSB8fFxuICAgICAgICAgICAgXCJVc2VyXCI7XG4gICAgICAgICAgc2V0UmVhbE5hbWUobmFtZSk7XG5cbiAgICAgICAgICBjb25zdCBuaWNrID1cbiAgICAgICAgICAgIHByb2ZpbGU/Lm5pY2tuYW1lIHx8XG4gICAgICAgICAgICBwcm9maWxlPy5uYW1lIHx8XG4gICAgICAgICAgICB1LmRpc3BsYXlOYW1lIHx8XG4gICAgICAgICAgICB1LmVtYWlsPy5zcGxpdChcIkBcIilbMF0gfHxcbiAgICAgICAgICAgIFwiVXNlclwiO1xuICAgICAgICAgIHNldE5pY2tuYW1lKG5pY2spO1xuXG4gICAgICAgICAgY29uc3QgcmVjZW50cyA9IGF3YWl0IGdldFJlY2VudFRocmVhZHModS51aWQsIG1vZGVsS2V5LCAzKTtcbiAgICAgICAgICBzZXRSZWNlbnRUaHJlYWRzKHJlY2VudHMpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChyZWNlbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIHNob3cgcmVjZW50cyBpbiBzaWRlYmFyLCBidXQgc3RhcnQgYmxhbmsgKHVuc2F2ZWQpXG4gICAgICAgICAgICBzZXRUaHJlYWRJZChudWxsKTtcbiAgICAgICAgICAgIHNldE1lc3NhZ2VzKFtdKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gTm8gc2F2ZWQgcmVjZW50cyB5ZXQ7IHN0YXJ0IHdpdGggYSBibGFuayB1bnNhdmVkIGNoYXRcbiAgICAgICAgICAgIHNldFRocmVhZElkKG51bGwpO1xuICAgICAgICAgICAgc2V0TWVzc2FnZXMoW10pO1xuICAgICAgICAgICAgc2V0UmVjZW50VGhyZWFkcyhbXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIHt9XG5cbiAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuICgpID0+IHVuc3ViKCk7XG4gIH0sIFtyb3V0ZXIsIG1vZGVsS2V5LCBpc1B1YmxpY0FjY2Vzc10pO1xuXG4gIC8vIEdldCByZWZlcmVuY2VzIG9uIG1vdW50XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY2hhdENvbnRhaW5lclJlZi5jdXJyZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmFic29sdXRlLmluc2V0LTAucHgtNi5vdmVyZmxvdy15LWF1dG8uZmxleC5mbGV4LWNvbFwiXG4gICAgKTtcbiAgICBpbnB1dEJhclJlZi5jdXJyZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImZvcm0uZml4ZWQubGVmdC0wLnotNTBcIik7XG4gIH0sIFtdKTtcblxuICAvLyBIYW5kbGUgc2Nyb2xsIHRvIGF1dG8taGlkZSBrZXlib2FyZFxuICBjb25zdCBoYW5kbGVTY3JvbGwgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKCFzaG93S2V5Ym9hcmQpIHJldHVybjtcblxuICAgIGNvbnN0IGNoYXRDb250YWluZXIgPSBjaGF0Q29udGFpbmVyUmVmLmN1cnJlbnQ7XG4gICAgaWYgKCFjaGF0Q29udGFpbmVyKSByZXR1cm47XG5cbiAgICBjb25zdCBjdXJyZW50U2Nyb2xsVG9wID0gY2hhdENvbnRhaW5lci5zY3JvbGxUb3A7XG4gICAgY29uc3Qgc2Nyb2xsRGlmZiA9IE1hdGguYWJzKGN1cnJlbnRTY3JvbGxUb3AgLSBsYXN0U2Nyb2xsVG9wUmVmLmN1cnJlbnQpO1xuXG4gICAgaWYgKHNjcm9sbERpZmYgPiBrZXlib2FyZFNjcm9sbFRocmVzaG9sZCkge1xuICAgICAgc2V0U2hvd0tleWJvYXJkKGZhbHNlKTtcbiAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3BsYWNlaG9sZGVyKj1cIkFza1wiXScpO1xuICAgICAgaWYgKGlucHV0RWxlbWVudCkgaW5wdXRFbGVtZW50LmJsdXIoKTtcbiAgICB9XG5cbiAgICBsYXN0U2Nyb2xsVG9wUmVmLmN1cnJlbnQgPSBjdXJyZW50U2Nyb2xsVG9wO1xuICB9LCBbc2hvd0tleWJvYXJkXSk7XG5cbiAgLy8gQXR0YWNoIHNjcm9sbCBldmVudCBsaXN0ZW5lclxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGNoYXRDb250YWluZXIgPSBjaGF0Q29udGFpbmVyUmVmLmN1cnJlbnQ7XG4gICAgaWYgKCFjaGF0Q29udGFpbmVyKSByZXR1cm47XG5cbiAgICBjaGF0Q29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgaGFuZGxlU2Nyb2xsKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY2hhdENvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGhhbmRsZVNjcm9sbCk7XG4gICAgfTtcbiAgfSwgW2hhbmRsZVNjcm9sbF0pO1xuXG4gIC8vIFJlc2V0IHNjcm9sbCB0cmFja2luZyB3aGVuIGtleWJvYXJkIHNob3dzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHNob3dLZXlib2FyZCAmJiBjaGF0Q29udGFpbmVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIGxhc3RTY3JvbGxUb3BSZWYuY3VycmVudCA9IGNoYXRDb250YWluZXJSZWYuY3VycmVudC5zY3JvbGxUb3A7XG4gICAgfVxuICB9LCBbc2hvd0tleWJvYXJkXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBlbmRSZWYuY3VycmVudD8uc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogXCJzbW9vdGhcIiB9KTtcbiAgfSwgW21lc3NhZ2VzXSk7XG5cbiAgLyogU0VORCBNRVNTQUdFICovXG4gIGFzeW5jIGZ1bmN0aW9uIGhhbmRsZVNlbmQoZSkge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0IHRyaW1tZWQgPSBpbnB1dC50cmltKCk7XG4gIGlmICghdHJpbW1lZCkgcmV0dXJuO1xuXG4gIGNvbnN0IHVzZXJNc2cgPSB7IHJvbGU6IFwidXNlclwiLCBjb250ZW50OiB0cmltbWVkIH07XG4gIGNvbnN0IHVwZGF0ZWRNZXNzYWdlcyA9IFsuLi5tZXNzYWdlcywgdXNlck1zZ107XG4gIHNldE1lc3NhZ2VzKHVwZGF0ZWRNZXNzYWdlcyk7XG4gIHNldElucHV0KFwiXCIpO1xuICBzZXRTZW5kaW5nKHRydWUpO1xuICBzZXRUaGlua2luZyh0cnVlKTtcbiAgc2V0U2hvd0tleWJvYXJkKGZhbHNlKTtcbiAga2V5Ym9hcmRJbnB1dFJlZi5jdXJyZW50ID0gXCJcIjtcblxuICB0b2FzdC5sb2FkaW5nKFwiU2VuZGluZy4uLlwiLCB7IGlkOiBcInNlbmRcIiB9KTtcblxuICBsZXQgYWN0aXZlVGhyZWFkSWQgPSB0aHJlYWRJZDtcblxuaWYgKHVzZXIgJiYgIWlzUHVibGljQWNjZXNzICYmICFhY3RpdmVUaHJlYWRJZCkge1xuICBhY3RpdmVUaHJlYWRJZCA9IGF3YWl0IGNyZWF0ZVRocmVhZCh1c2VyLnVpZCwgbW9kZWxLZXkpO1xuICBzZXRUaHJlYWRJZChhY3RpdmVUaHJlYWRJZCk7XG59XG5cbiAgdHJ5IHtcbiAgICAvLyBTYXZlIHVzZXIgbWVzc2FnZSAobG9nZ2VkLWluIHRocmVhZClcbiAgICBpZiAodXNlciAmJiAhaXNQdWJsaWNBY2Nlc3MgJiYgYWN0aXZlVGhyZWFkSWQpIHtcbiAgICAgIGF3YWl0IGFwcGVuZFRocmVhZE1lc3NhZ2UodXNlci51aWQsIG1vZGVsS2V5LCBhY3RpdmVUaHJlYWRJZCwgdXNlck1zZyk7XG4gICAgfVxuXG4gICAgLy8gTW9kZWwgdW5hdmFpbGFibGVcbiAgICBpZiAoIXNlbGVjdGVkTW9kZWwudXJsKSB7XG4gICAgICBjb25zdCBlcnJvck1zZyA9IHsgcm9sZTogXCJhc3Npc3RhbnRcIiwgY29udGVudDogXCJNb2RlbCB1bmF2YWlsYWJsZS5cIiB9O1xuICAgICAgc2V0TWVzc2FnZXMoWy4uLnVwZGF0ZWRNZXNzYWdlcywgZXJyb3JNc2ddKTtcblxuICAgICAgaWYgKHVzZXIgJiYgIWlzUHVibGljQWNjZXNzICYmIGFjdGl2ZVRocmVhZElkKSB7XG4gICAgICAgIGF3YWl0IGFwcGVuZFRocmVhZE1lc3NhZ2UodXNlci51aWQsIG1vZGVsS2V5LCBhY3RpdmVUaHJlYWRJZCwgZXJyb3JNc2cpO1xuICAgICAgfVxuXG4gICAgICB0b2FzdC5kaXNtaXNzKFwic2VuZFwiKTtcbiAgICAgIHNldFRoaW5raW5nKGZhbHNlKTtcbiAgICAgIHNldFNlbmRpbmcoZmFsc2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHJlcXVlc3RPcHRpb25zID0ge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICB9O1xuXG4gICAgY29uc3QgcmVxdWVzdEZvcm1hdHMgPSBbXG4gICAgICB7XG4gICAgICAgIGlucHV0czogdHJpbW1lZCxcbiAgICAgICAgcGFyYW1ldGVyczogeyBtYXhfbmV3X3Rva2VuczogNTAwLCB0ZW1wZXJhdHVyZTogMC43IH0sXG4gICAgICB9LFxuICAgICAgeyBxdWVyeTogdHJpbW1lZCwgbWF4X25ld190b2tlbnM6IDUwMCwgdGVtcGVyYXR1cmU6IDAuNyB9LFxuICAgICAgeyBpbnB1dDogdHJpbW1lZCwgbWF4X2xlbmd0aDogNTAwLCB0ZW1wZXJhdHVyZTogMC43IH0sXG4gICAgXTtcblxuICAgIGxldCByZXBseSA9IFwiXCI7XG4gICAgbGV0IGxhc3RFcnJvciA9IG51bGw7XG5cbiAgICAvLyDinIUgR0xPQkFMIDYwLXNlY29uZCB0aW1lb3V0IGFjcm9zcyBBTEwgYXR0ZW1wdHNcbiAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCA2MDAwMCk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcXVlc3RGb3JtYXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXF1ZXN0T3B0aW9ucy5ib2R5ID0gSlNPTi5zdHJpbmdpZnkocmVxdWVzdEZvcm1hdHNbaV0pO1xuXG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHNlbGVjdGVkTW9kZWwudXJsLCB7XG4gICAgICAgICAgLi4ucmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgc2lnbmFsOiBjb250cm9sbGVyLnNpZ25hbCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihgSFRUUCAke3Jlcy5zdGF0dXN9YCk7XG5cbiAgICAgICAgY29uc3QgcmF3ID0gYXdhaXQgcmVzLnRleHQoKTtcbiAgICAgICAgcmVwbHkgPSBmb3JtYXRBSVJlc3BvbnNlKHJhdyk7XG5cbiAgICAgICAgaWYgKHJlcGx5ICYmIHJlcGx5ICE9PSBcInt9XCIpIGJyZWFrO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGxhc3RFcnJvciA9IGVycjtcbiAgICAgICAgaWYgKGVyci5uYW1lID09PSBcIkFib3J0RXJyb3JcIikgYnJlYWs7IC8vIHN0b3AgaW1tZWRpYXRlbHkgb24gdGltZW91dFxuICAgICAgfVxuICAgIH1cblxuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuXG4gICAgaWYgKCFyZXBseSAmJiBsYXN0RXJyb3IpIHRocm93IGxhc3RFcnJvcjtcbiAgICBpZiAoIXJlcGx5KSB0aHJvdyBuZXcgRXJyb3IoXCJObyByZXNwb25zZVwiKTtcblxuICAgIHJlcGx5ID0gcmVwbHkudHJpbSgpO1xuICAgIGNvbnN0IGFpTXNnID0geyByb2xlOiBcImFzc2lzdGFudFwiLCBjb250ZW50OiByZXBseSB9O1xuXG4gICAgY29uc3QgZmluYWxNZXNzYWdlcyA9IFsuLi51cGRhdGVkTWVzc2FnZXMsIGFpTXNnXTtcbiAgICBzZXRNZXNzYWdlcyhmaW5hbE1lc3NhZ2VzKTtcblxuICAgIFxuXG4gICAgLy8gTG9nZ2VkLWluOiBzYXZlIGFzc2lzdGFudCByZXBseSAoRE8gTk9UIHJlZnJlc2ggcmVjZW50cyBoZXJlKVxuaWYgKHVzZXIgJiYgIWlzUHVibGljQWNjZXNzICYmIGFjdGl2ZVRocmVhZElkKSB7XG4gIGF3YWl0IGFwcGVuZFRocmVhZE1lc3NhZ2UodXNlci51aWQsIG1vZGVsS2V5LCBhY3RpdmVUaHJlYWRJZCwgYWlNc2cpO1xufVxuXG5cbiAgICB0b2FzdC5zdWNjZXNzKFwiUmVwbHkgcmVjZWl2ZWRcIiwgeyBpZDogXCJzZW5kXCIgfSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnN0IGVycm9yTXNnID0ge1xuICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgIGNvbnRlbnQ6XG4gICAgICAgIGVyci5uYW1lID09PSBcIkFib3J0RXJyb3JcIlxuICAgICAgICAgID8gXCLimqDvuI8gTm8gcmVzcG9uc2UgYWZ0ZXIgMSBtaW51dGUuIFBsZWFzZSB0cnkgYWdhaW4uXCJcbiAgICAgICAgICA6IGAqKkVycm9yOioqICR7ZXJyLm1lc3NhZ2V9YCxcbiAgICB9O1xuXG4gICAgc2V0TWVzc2FnZXMoWy4uLm1lc3NhZ2VzLCB1c2VyTXNnLCBlcnJvck1zZ10pO1xuICAgIHRvYXN0LmVycm9yKFwiU2VuZCBmYWlsZWRcIiwgeyBpZDogXCJzZW5kXCIgfSk7XG4gIH1cblxuICBzZXRUaGlua2luZyhmYWxzZSk7XG4gIHNldFNlbmRpbmcoZmFsc2UpO1xufVxuXG4gIGFzeW5jIGZ1bmN0aW9uIGhhbmRsZU5ld0NoYXQoKSB7XG4gIGlmICh1c2VyICYmICFpc1B1YmxpY0FjY2Vzcykge1xuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gTE9HR0VELUlOIE1PREVcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gICAgLy8gMe+4j+KDoyBJZiB0aGVyZSBpcyBhbiBhY3RpdmUgY29udmVyc2F0aW9uLCBmaW5hbGl6ZSBpdCBGSVJTVFxuICAgIGlmIChtZXNzYWdlcy5sZW5ndGggPiAwKSB7XG4gICAgICBsZXQgY3VycmVudElkID0gdGhyZWFkSWQ7XG5cbiAgICAgIC8vIElmIGNvbnZlcnNhdGlvbiBoYXMgbm8gdGhyZWFkIHlldCwgY3JlYXRlIG9uZSBub3dcbiAgICAgIGlmICghY3VycmVudElkKSB7XG4gICAgICAgIGN1cnJlbnRJZCA9IGF3YWl0IGNyZWF0ZVRocmVhZCh1c2VyLnVpZCwgbW9kZWxLZXkpO1xuXG4gICAgICAgIC8vIFNhdmUgYWxsIGN1cnJlbnQgbWVzc2FnZXMgdG8gRmlyZXN0b3JlXG4gICAgICAgIGZvciAoY29uc3QgbXNnIG9mIG1lc3NhZ2VzKSB7XG4gICAgICAgICAgYXdhaXQgYXBwZW5kVGhyZWFkTWVzc2FnZSh1c2VyLnVpZCwgbW9kZWxLZXksIGN1cnJlbnRJZCwgbXNnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIDLvuI/ig6MgS2VlcCBvbmx5IGxhdGVzdCAzIHRocmVhZHNcbiAgICBhd2FpdCBrZWVwT25seUxhc3ROVGhyZWFkcyh1c2VyLnVpZCwgbW9kZWxLZXksIDMpO1xuXG4gICAgLy8gM++4j+KDoyBSZWZyZXNoIHJlY2VudHMgKE9OTFkgaGVyZSlcbiAgICBjb25zdCByZWNlbnRzID0gYXdhaXQgZ2V0UmVjZW50VGhyZWFkcyh1c2VyLnVpZCwgbW9kZWxLZXksIDMpO1xuICAgIHNldFJlY2VudFRocmVhZHMocmVjZW50cyk7XG5cbiAgICAvLyA077iP4oOjIFN0YXJ0IGEgTkVXIGJsYW5rIHVuc2F2ZWQgY2hhdFxuICAgIHNldFRocmVhZElkKG51bGwpO1xuICAgIHNldE1lc3NhZ2VzKFtdKTtcblxuICB9IGVsc2Uge1xuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gR1VFU1QgTU9ERVxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICBpZiAobWVzc2FnZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgZmlyc3RVc2VyTXNnID0gbWVzc2FnZXMuZmluZCgobSkgPT4gbS5yb2xlID09PSBcInVzZXJcIik7XG5cbiAgICAgIGNvbnN0IG5ld1RocmVhZCA9IHtcbiAgICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgICAgdGl0bGU6IChmaXJzdFVzZXJNc2c/LmNvbnRlbnQgfHwgXCJOZXcgQ2hhdFwiKS5zbGljZSgwLCAzMCksXG4gICAgICAgIG1lc3NhZ2VzOiBtZXNzYWdlcyxcbiAgICAgICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgdXBkYXRlZCA9IFtuZXdUaHJlYWQsIC4uLmd1ZXN0VGhyZWFkc11cbiAgICAgICAgLnNvcnQoKGEsIGIpID0+IGIudXBkYXRlZEF0IC0gYS51cGRhdGVkQXQpXG4gICAgICAgIC5zbGljZSgwLCAzKTtcblxuICAgICAgc2V0R3Vlc3RUaHJlYWRzKHVwZGF0ZWQpO1xuICAgICAgc2F2ZUd1ZXN0VGhyZWFkcyh1cGRhdGVkKTtcbiAgICB9XG5cbiAgICAvLyBTdGFydCBmcmVzaCBibGFuayBndWVzdCBjaGF0XG4gICAgc2V0R3Vlc3RUaHJlYWRJZChEYXRlLm5vdygpLnRvU3RyaW5nKCkpO1xuICAgIHNldE1lc3NhZ2VzKFtdKTtcbiAgfVxuXG4gIHNldFNoYXJlSWQobnVsbCk7XG4gIHNldFNoYXJlT3BlbihmYWxzZSk7XG59XG5cbiAgZnVuY3Rpb24gaGFuZGxlU2lnbk91dCgpIHtcbiAgICBzaWduT3V0KGF1dGgpLnRoZW4oKCkgPT4gcm91dGVyLnB1c2goXCIvbG9naW5cIikpO1xuICB9XG5cbiAgLy8gTkVXOiBIYW5kbGUgc2lnbiBpbiByZWRpcmVjdFxuICBmdW5jdGlvbiBoYW5kbGVTaWduSW4oKSB7XG4gICAgcm91dGVyLnB1c2goXCIvbG9naW5cIik7XG4gIH1cblxuICAvLyDinIUgR2VuZXJhdGUgUVIgKGFkZGVkKVxuICBhc3luYyBmdW5jdGlvbiBoYW5kbGVHZW5lcmF0ZVFSKCkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIW1lc3NhZ2VzIHx8IG1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0b2FzdC5lcnJvcihcIk5vIGNvbnZlcnNhdGlvbiB0byBzaGFyZSB5ZXQuXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRvYXN0LmxvYWRpbmcoXCJHZW5lcmF0aW5nIFFSLi4uXCIsIHsgaWQ6IFwic2hhcmVcIiB9KTtcblxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXCIvYXBpL3NoYXJlXCIsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgbW9kZWxLZXksXG4gICAgICAgICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICAgIG1lc3NhZ2VzOiBtZXNzYWdlcy5tYXAoKG0pID0+ICh7IHJvbGU6IG0ucm9sZSwgY29udGVudDogbS5jb250ZW50IH0pKSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihgSFRUUCAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIGlmICghZGF0YT8uaWQpIHRocm93IG5ldyBFcnJvcihcIk5vIHNoYXJlIGlkIHJldHVybmVkLlwiKTtcblxuICAgICAgc2V0U2hhcmVJZChkYXRhLmlkKTtcbiAgICAgIHNldFNoYXJlT3Blbih0cnVlKTtcblxuICAgICAgdG9hc3Quc3VjY2VzcyhcIlFSIHJlYWR5IVwiLCB7IGlkOiBcInNoYXJlXCIgfSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdG9hc3QuZXJyb3IoYEZhaWxlZDogJHtlLm1lc3NhZ2V9YCwgeyBpZDogXCJzaGFyZVwiIH0pO1xuICAgIH1cbiAgfVxuXG4gIGlmIChsb2FkaW5nKVxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtc2NyZWVuIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQteGxcIj5cbiAgICAgICAgTG9hZGluZ+KAplxuICAgICAgPC9kaXY+XG4gICAgKTtcblxuICBjb25zdCBoZWFkZXJIZWlnaHQgPSA0ODtcbiAgY29uc3QgZm9vdGVySGVpZ2h0ID0gMzI7XG4gIGNvbnN0IHNpZGViYXJXaWR0aCA9IDIyNDtcbiAgY29uc3Qga2V5Ym9hcmRIZWlnaHQgPSAyODA7XG4gIGNvbnN0IGlucHV0QmFySGVpZ2h0ID0gNjA7XG4gIGNvbnN0IGtleWJvYXJkUGFkZGluZyA9IDQ7IC8vIFJFRFVDRUQgRlJPTSA4IFRPIDRcblxuICBjb25zdCBzaGFyZVVybCA9XG4gICAgc2hhcmVJZCAmJiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiXG4gICAgICA/IGAke3dpbmRvdy5sb2NhdGlvbi5vcmlnaW59L3NoYXJlLyR7c2hhcmVJZH1gXG4gICAgICA6IFwiXCI7XG4gIFxuICBjb25zdCByZWNlbnRzVG9TaG93ID11c2VyICYmICFpc1B1YmxpY0FjY2VzcyA/IHJlY2VudFRocmVhZHMgOiBndWVzdFRocmVhZHM7XG4gICBcbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBjbGFzc05hbWU9XCJyZWxhdGl2ZSBoLXNjcmVlbiB3LXNjcmVlbiBvdmVyZmxvdy1oaWRkZW4gYmctY292ZXIgYmctY2VudGVyXCJcbiAgICAgIHN0eWxlPXt7IGJhY2tncm91bmRJbWFnZTogXCJ1cmwoJy9iZy5wbmcnKVwiIH19XG4gICAgPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC0wIGJnLVtyZ2JhKDI0NSwyNDUsMjQ1LDAuMTgpXSBiYWNrZHJvcC1ibHVyLXNtXCIgLz5cblxuICAgICAgey8qIEhFQURFUiAqL31cbiAgICAgIDxoZWFkZXJcbiAgICAgICAgY2xhc3NOYW1lPVwiZml4ZWQgdG9wLTAgbGVmdC0wIHJpZ2h0LTAgei01MCBiZy1ibGFjay8zMCB0ZXh0LXdoaXRlIHB5LTEuNSBweC00IGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBzaGFkb3ctc21cIlxuICAgICAgICBzdHlsZT17eyBoZWlnaHQ6IGAke2hlYWRlckhlaWdodH1weGAgfX1cbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgIDxpbWcgc3JjPVwiL3R1cGxvZ28ucG5nXCIgYWx0PVwiVFVQIExvZ29cIiBjbGFzc05hbWU9XCJoLTcgdy03XCIgLz5cbiAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwidGV4dC14cyBtZDp0ZXh0LXNtIGZvbnQtYm9sZFwiPlxuICAgICAgICAgICAgVEVDSE5PTE9HSUNBTCBVTklWRVJTSVRZIE9GIFRIRSBQSElMSVBQSU5FU1xuICAgICAgICAgIDwvaDE+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHsvKiBTaWduIEluL091dCBzdGF5cyBpbiBoZWFkZXIgKHVuY2hhbmdlZCkgKi99XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICBvbkNsaWNrPXt1c2VyID8gaGFuZGxlU2lnbk91dCA6IGhhbmRsZVNpZ25Jbn1cbiAgICAgICAgICBjbGFzc05hbWU9XCJiZy1bI2ZhYTAyOV0gdGV4dC1ibGFjayBmb250LXNlbWlib2xkIHB4LTUgcHktMiByb3VuZGVkLWZ1bGwgc2hhZG93XCJcbiAgICAgICAgPlxuICAgICAgICAgIHt1c2VyID8gXCJTaWduIE91dFwiIDogXCJTaWduIEluXCJ9XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9oZWFkZXI+XG5cbiAgICAgIHsvKiBGT09URVIgKi99XG4gICAgICA8Zm9vdGVyXG4gICAgICAgIGNsYXNzTmFtZT1cImZpeGVkIGJvdHRvbS0wIGxlZnQtMCByaWdodC0wIHotNTAgYmctYmxhY2svMzAgdGV4dC1jZW50ZXIgcHktMSB0ZXh0LXdoaXRlIHRleHQteHNcIlxuICAgICAgICBzdHlsZT17eyBoZWlnaHQ6IGAke2Zvb3RlckhlaWdodH1weGAgfX1cbiAgICAgID5cbiAgICAgICAgRGVzaWduZWQgYnk6IEVsZWN0cm9uaWNzIEVuZ2luZWVyaW5nIERlcGFydG1lbnRcbiAgICAgIDwvZm9vdGVyPlxuXG4gICAgICB7LyogU0VQQVJBVEUgS0VZQk9BUkQgQ09OVEFJTkVSIC0gQURKVVNURUQgUE9TSVRJT04gKi99XG4gICAgICB7c2hvd0tleWJvYXJkICYmIChcbiAgICAgICAgPGRpdlxuICAgICAgICAgIGNsYXNzTmFtZT1cImZpeGVkIGxlZnQtMCByaWdodC0wIGJnLXdoaXRlIHNoYWRvdy0yeGwgYm9yZGVyLXQgYm9yZGVyLWdyYXktMzAwXCJcbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgYm90dG9tOiBgJHtmb290ZXJIZWlnaHQgKyA0fXB4YCxcbiAgICAgICAgICAgIGxlZnQ6IHNpZGViYXJPcGVuID8gYCR7c2lkZWJhcldpZHRofXB4YCA6IFwiMHB4XCIsXG4gICAgICAgICAgICBoZWlnaHQ6IGAke2tleWJvYXJkSGVpZ2h0fXB4YCxcbiAgICAgICAgICAgIHpJbmRleDogNTUsXG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWVuZCBwLTEgYmctZ3JheS0xMDBcIj5cbiAgPGJ1dHRvblxuICAgIHR5cGU9XCJidXR0b25cIlxuICAgIG9uTW91c2VEb3duPXsoZSkgPT4ge1xuICAgICAgLy8gUFJFVkVOVCBpbnB1dCBibHVyIGZyb20gZmlyaW5nXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfX1cbiAgICBvbkNsaWNrPXsoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgLy8gMe+4j+KDoyBDbGVhciBSZWFjdCBzdGF0ZVxuICAgICAgc2V0SW5wdXQoXCJcIik7XG5cbiAgICAgIC8vIDLvuI/ig6MgQ2xlYXIgcmVmc1xuICAgICAga2V5Ym9hcmRJbnB1dFJlZi5jdXJyZW50ID0gXCJcIjtcbiAgICAgIGNhcmV0UG9zaXRpb25SZWYuY3VycmVudCA9IDA7XG5cbiAgICAgIC8vIDPvuI/ig6MgQ2xlYXIga2V5Ym9hcmQgaW50ZXJuYWwgdmFsdWVcbiAgICAgIGlmIChrZXlib2FyZFJlZi5jdXJyZW50KSB7XG4gICAgICAgIGtleWJvYXJkUmVmLmN1cnJlbnQuc2V0SW5wdXQoXCJcIik7XG4gICAgICAgIGtleWJvYXJkUmVmLmN1cnJlbnQuc2V0Q2FyZXRQb3NpdGlvbigwKTtcbiAgICAgIH1cblxuICAgICAgLy8gNO+4j+KDoyBSZXN0b3JlIGZvY3VzIHNhZmVseVxuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgaWYgKGlucHV0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICBpbnB1dFJlZi5jdXJyZW50LmZvY3VzKCk7XG4gICAgICAgICAgaW5wdXRSZWYuY3VycmVudC5zZXRTZWxlY3Rpb25SYW5nZSgwLCAwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfX1cbiAgICBjbGFzc05hbWU9XCJ0ZXh0LXJlZC02MDAgaG92ZXI6dGV4dC1yZWQtODAwIGZvbnQtc2VtaWJvbGQgcHgtMyBweS0xIHJvdW5kZWQgdGV4dC14c1wiXG4gID5cbiAgICBDbGVhciBBbGxcbiAgPC9idXR0b24+XG48L2Rpdj5cblxuICAgICAgICAgIDxLZXlib2FyZFxuICAgICAgICAgIGtleWJvYXJkUmVmPXsocikgPT4ge1xuICAgICAgICAgICAga2V5Ym9hcmRSZWYuY3VycmVudCA9IHI7XG4gICAgICAgICAgfX1cbiAgICAgICAgICBsYXlvdXROYW1lPXtzaGlmdEFjdGl2ZSA/IFwic2hpZnRcIiA6IFwiZGVmYXVsdFwifVxuICAgICAgICAgIGxheW91dD17bGF5b3V0LnF3ZXJ0eX1cbiAgICAgICAgICBvbktleVByZXNzPXsoYnV0dG9uKSA9PiB7XG4gICAgICAgICAgICBsZXQgY3VycmVudFRleHQgPSBpbnB1dDtcbiAgICAgICAgICAgIGxldCBjYXJldFBvcyA9IGNhcmV0UG9zaXRpb25SZWYuY3VycmVudDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgdXBkYXRlVGV4dCA9IChuZXdUZXh0LCBuZXdDYXJldFBvcykgPT4ge1xuICAgICAgICAgICAgc2V0SW5wdXQobmV3VGV4dCk7XG4gICAgICAgICAgICBrZXlib2FyZElucHV0UmVmLmN1cnJlbnQgPSBuZXdUZXh0O1xuICAgICAgICAgICAgY2FyZXRQb3NpdGlvblJlZi5jdXJyZW50ID0gbmV3Q2FyZXRQb3M7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICAgIGlmIChpbnB1dFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgaW5wdXRSZWYuY3VycmVudC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIGlucHV0UmVmLmN1cnJlbnQuc2V0U2VsZWN0aW9uUmFuZ2UobmV3Q2FyZXRQb3MsIG5ld0NhcmV0UG9zKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIFxuICAgICAgICAgIC8vID09PT09IFNISUZUID09PT09XG4gICAgICAgICAgLy8gXG4gICAgICAgICAgaWYgKGJ1dHRvbiA9PT0gXCJ7c2hpZnR9XCIgfHwgYnV0dG9uID09PSBcIntsb2NrfVwiKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdTaGlmdFN0YXRlID0gIXNoaWZ0QWN0aXZlO1xuICAgICAgICAgICAgc2V0U2hpZnRBY3RpdmUobmV3U2hpZnRTdGF0ZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGtleWJvYXJkUmVmLmN1cnJlbnQ/LnNldE9wdGlvbnMoe1xuICAgICAgICAgICAgICBsYXlvdXROYW1lOiBuZXdTaGlmdFN0YXRlID8gXCJzaGlmdFwiIDogXCJkZWZhdWx0XCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gPT09PT0gRU5URVIgPT09PT1cbiAgICAgICAgICAvLyBcbiAgICAgICAgICBpZiAoYnV0dG9uID09PSBcIntlbnRlcn1cIikge1xuICAgICAgICAgICAgaGFuZGxlU2VuZCh7IHByZXZlbnREZWZhdWx0OiAoKSA9PiB7fSB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gPT09PT0gQkFDS1NQQUNFID09PT09XG4gICAgICAgICAgLy8gXG4gICAgICAgICAgaWYgKGJ1dHRvbiA9PT0gXCJ7YmFja3NwYWNlfVwiKSB7XG4gICAgICAgICAgICBpZiAoY2FyZXRQb3MgPiAwKSB7XG4gICAgICAgICAgICAgIGNvbnN0IG5ld1RleHQgPVxuICAgICAgICAgICAgICBjdXJyZW50VGV4dC5zbGljZSgwLCBjYXJldFBvcyAtIDEpICtcbiAgICAgICAgICAgICAgY3VycmVudFRleHQuc2xpY2UoY2FyZXRQb3MpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgdXBkYXRlVGV4dChuZXdUZXh0LCBjYXJldFBvcyAtIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyA9PT09PSBTUEFDRSA9PT09PVxuICAgICAgICAgIC8vIFxuICAgICAgICAgIGlmIChidXR0b24gPT09IFwie3NwYWNlfVwiKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdUZXh0ID1cbiAgICAgICAgICAgIGN1cnJlbnRUZXh0LnNsaWNlKDAsIGNhcmV0UG9zKSArXG4gICAgICAgICAgICBcIiBcIiArXG4gICAgICAgICAgICBjdXJyZW50VGV4dC5zbGljZShjYXJldFBvcyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHVwZGF0ZVRleHQobmV3VGV4dCwgY2FyZXRQb3MgKyAxKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gPT09PT0gU1BFQ0lBTCBUT0tFTlMgRlJPTSBZT1VSIExBWU9VVCA9PT09PVxuICAgICAgICAgIC8vIFxuICAgICAgICAgIGNvbnN0IHNwZWNpYWxUb2tlbnMgPSB7XG4gICAgICAgICAgICBcIntAfVwiOiBcIkBcIixcbiAgICAgICAgICAgIFwieyV9XCI6IFwiJVwiLFxuICAgICAgICAgICAgXCJ7P31cIjogXCI/XCIsXG4gICAgICAgICAgICBcInssfVwiOiBcIixcIixcbiAgICAgICAgICAgIFwiey59XCI6IFwiLlwiLFxuICAgICAgICAgIH07XG4gICAgICAgICAgaWYgKHNwZWNpYWxUb2tlbnNbYnV0dG9uXSkge1xuICAgICAgICAgICAgY29uc3QgY2hhciA9IHNwZWNpYWxUb2tlbnNbYnV0dG9uXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgbmV3VGV4dCA9XG4gICAgICAgICAgICBjdXJyZW50VGV4dC5zbGljZSgwLCBjYXJldFBvcykgK1xuICAgICAgICAgICAgY2hhciArXG4gICAgICAgICAgICBjdXJyZW50VGV4dC5zbGljZShjYXJldFBvcyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHVwZGF0ZVRleHQobmV3VGV4dCwgY2FyZXRQb3MgKyAxKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAvLyA9PT09PSBJZ25vcmUgdW5rbm93biBjb250cm9sIGJ1dHRvbnMgPT09PT1cbiAgICBpZiAoYnV0dG9uLnN0YXJ0c1dpdGgoXCJ7XCIpICYmIGJ1dHRvbi5lbmRzV2l0aChcIn1cIikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyA9PT09PSBOb3JtYWwgY2hhcmFjdGVycyAobGV0dGVycyAmIG51bWJlcnMpID09PT09XG4gICAgY29uc3QgbmV3VGV4dCA9XG4gICAgICBjdXJyZW50VGV4dC5zbGljZSgwLCBjYXJldFBvcykgK1xuICAgICAgYnV0dG9uICtcbiAgICAgIGN1cnJlbnRUZXh0LnNsaWNlKGNhcmV0UG9zKTtcblxuICAgIHVwZGF0ZVRleHQobmV3VGV4dCwgY2FyZXRQb3MgKyBidXR0b24ubGVuZ3RoKTtcbiAgfX1cbiAgdGhlbWU9XCJoZy10aGVtZS1kZWZhdWx0IGhnLXRoZW1lLWN1c3RvbVwiXG4gIGRpc3BsYXk9e3tcbiAgICBcIntiYWNrc3BhY2V9XCI6IFwi4oyrXCIsXG4gICAgXCJ7ZW50ZXJ9XCI6IFwi4oa1XCIsXG4gICAgXCJ7c2hpZnR9XCI6IFwi4oenXCIsXG4gICAgXCJ7c3BhY2V9XCI6IFwiU3BhY2VcIixcbiAgICBcIntAfVwiOiBcIkBcIixcbiAgICBcInslfVwiOiBcIiVcIixcbiAgICBcIns/fVwiOiBcIj9cIixcbiAgICBcInssfVwiOiBcIixcIixcbiAgICBcInsufVwiOiBcIi5cIixcbiAgICBcInsjfVwiOiBcIiNcIlxuICB9fVxuICBwcmV2ZW50TW91c2VEb3duRGVmYXVsdD17dHJ1ZX1cbiAgcHJldmVudE1vdXNlVXBEZWZhdWx0PXt0cnVlfVxuICBuZXdMaW5lT25FbnRlcj17ZmFsc2V9XG4gIGF1dG9Vc2VUb3VjaEV2ZW50cz17dHJ1ZX1cbi8+XG5cbiAgICAgICAgICB7LyogeW91ciBleGlzdGluZyBrZXlib2FyZCBzdHlsZXMgcmVtYWluIHVuY2hhbmdlZCAqL31cbiAgICAgICAgICA8c3R5bGUganN4IGdsb2JhbD57YFxuICAgICAgICAgICAgLnNpbXBsZS1rZXlib2FyZCB7XG4gICAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIHBhZGRpbmc6IDEwcHggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSAzMHB4KSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICB3aWR0aDogMTAwJSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaGctdGhlbWUtY3VzdG9tIHtcbiAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGUgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbiAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmhnLWJ1dHRvbiB7XG4gICAgICAgICAgICAgIGhlaWdodDogNDVweCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBmb250LXNpemU6IDE0cHggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgYm94LXNoYWRvdzogMCAycHggM3B4IHJnYmEoMCwgMCwgMCwgMC4xNSkgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgbWFyZ2luOiAzcHggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjFzIGVhc2UgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgbWluLXdpZHRoOiAwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGZsZXg6IDEgIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5oZy1yb3c6bnRoLWNoaWxkKDEpIC5oZy1idXR0b24ge1xuICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjhmOWZhICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGNvbG9yOiAjMzMzICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQgIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5oZy1yb3c6bnRoLWNoaWxkKDIpXG4gICAgICAgICAgICAgIC5oZy1idXR0b246bm90KC5oZy1idXR0b24tYmFja3NwYWNlKTpub3QoLmhnLWJ1dHRvbi1lbnRlciksXG4gICAgICAgICAgICAuaGctcm93Om50aC1jaGlsZCgzKSAuaGctYnV0dG9uOm5vdCguaGctYnV0dG9uLWVudGVyKSxcbiAgICAgICAgICAgIC5oZy1yb3c6bnRoLWNoaWxkKDQpIC5oZy1idXR0b246bm90KC5oZy1idXR0b24tc2hpZnQpIHtcbiAgICAgICAgICAgICAgYmFja2dyb3VuZDogI2FhMzYzNiAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBjb2xvcjogd2hpdGUgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgIzhhMmMyYyAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmhnLXJvdzpudGgtY2hpbGQoNSkgLmhnLWJ1dHRvbiB7XG4gICAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmYWEwMjkgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgY29sb3I6IGJsYWNrICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkODhjMjAgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQgIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5oZy1idXR0b24tc2hpZnQsXG4gICAgICAgICAgICAuaGctYnV0dG9uLWJhY2tzcGFjZSxcbiAgICAgICAgICAgIC5oZy1idXR0b24tZW50ZXIge1xuICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmFhMDI5ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGNvbG9yOiBibGFjayAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZDg4YzIwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaGctYnV0dG9uLXNwYWNlIHtcbiAgICAgICAgICAgICAgZmxleC1ncm93OiAzICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIG1heC13aWR0aDogbm9uZSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmhnLWJ1dHRvbi1iYWNrc3BhY2UsXG4gICAgICAgICAgICAuaGctYnV0dG9uLWVudGVyLFxuICAgICAgICAgICAgLmhnLWJ1dHRvbi1zaGlmdCB7XG4gICAgICAgICAgICAgIG1pbi13aWR0aDogNzBweCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBmbGV4LWdyb3c6IDAuNSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmhnLWJ1dHRvbi1cXFxce0BcXFxcfSxcbiAgICAgICAgICAgIC5oZy1idXR0b24tXFxcXHslXFxcXH0sXG4gICAgICAgICAgICAuaGctYnV0dG9uLVxcXFx7XFxcXD9cXFxcfSxcbiAgICAgICAgICAgIC5oZy1idXR0b24tXFxcXHtcXFxcLFxcXFx9LFxuICAgICAgICAgICAgLmhnLWJ1dHRvbi1cXFxce1xcXFwuXFxcXH0ge1xuICAgICAgICAgICAgICBtaW4td2lkdGg6IDM1cHggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgZmxleC1ncm93OiAwLjMgIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5oZy1idXR0b246YWN0aXZlLFxuICAgICAgICAgICAgLmhnLWJ1dHRvbi5oZy1hY3RpdmVCdG4ge1xuICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMnB4KSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDFweCAycHggcmdiYSgwLCAwLCAwLCAwLjEpICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaGctcm93Om50aC1jaGlsZCgyKVxuICAgICAgICAgICAgICAuaGctYnV0dG9uOmFjdGl2ZTpub3QoLmhnLWJ1dHRvbi1iYWNrc3BhY2UpOm5vdCguaGctYnV0dG9uLWVudGVyKSxcbiAgICAgICAgICAgIC5oZy1yb3c6bnRoLWNoaWxkKDMpIC5oZy1idXR0b246YWN0aXZlOm5vdCguaGctYnV0dG9uLWVudGVyKSxcbiAgICAgICAgICAgIC5oZy1yb3c6bnRoLWNoaWxkKDQpIC5oZy1idXR0b246YWN0aXZlOm5vdCguaGctYnV0dG9uLXNoaWZ0KSB7XG4gICAgICAgICAgICAgIGJhY2tncm91bmQ6ICM4YTJjMmMgIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5oZy1idXR0b24tc2hpZnQ6YWN0aXZlLFxuICAgICAgICAgICAgLmhnLWJ1dHRvbi1iYWNrc3BhY2U6YWN0aXZlLFxuICAgICAgICAgICAgLmhnLWJ1dHRvbi1lbnRlcjphY3RpdmUsXG4gICAgICAgICAgICAuaGctcm93Om50aC1jaGlsZCg1KSAuaGctYnV0dG9uOmFjdGl2ZSxcbiAgICAgICAgICAgIC5oZy1idXR0b24tc2hpZnQuaGctYWN0aXZlQnRuIHtcbiAgICAgICAgICAgICAgYmFja2dyb3VuZDogI2Q4OGMyMCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmhnLXJvd3Mge1xuICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCUgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbiAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBwYWRkaW5nOiAwIDhweCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmhnLXJvdyB7XG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXIgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgZmxleDogMSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBtaW4taGVpZ2h0OiA0OHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDVweCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmhnLWJ1dHRvbi1zdGFuZGFyZCB7XG4gICAgICAgICAgICAgIG1pbi13aWR0aDogMzVweCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBmbGV4OiAxICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIG1heC13aWR0aDogNTBweCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmhnLXJvdzpsYXN0LWNoaWxkIHtcbiAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmhnLWJ1dHRvbi1iYWNrc3BhY2Uge1xuICAgICAgICAgICAgICBmb250LXNpemU6IDE2cHggIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5oZy1idXR0b24tZW50ZXIge1xuICAgICAgICAgICAgICBmb250LXNpemU6IDE2cHggIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5zaW1wbGUta2V5Ym9hcmQuaGctbGF5b3V0LWRlZmF1bHQgLmhnLXJvdyB7XG4gICAgICAgICAgICAgIGZsZXgtd3JhcDogbm93cmFwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaGctYnV0dG9uIHNwYW4ge1xuICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5kb3Qge1xuICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICAgICAgd2lkdGg6IDZweDtcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgIGFuaW1hdGlvbjogZG90Qm91bmNlIDEuMXMgaW5maW5pdGUgZWFzZS1pbi1vdXQ7XG4gICAgICAgICAgICBvcGFjaXR5OiAwLjM1O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmRvdDpudGgtY2hpbGQoMikge1xuICAgICAgICAgICAgYW5pbWF0aW9uLWRlbGF5OiAwLjEycztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5kb3Q6bnRoLWNoaWxkKDMpIHtcbiAgICAgICAgICAgIGFuaW1hdGlvbi1kZWxheTogMC4yNHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBAa2V5ZnJhbWVzIGRvdEJvdW5jZSB7XG4gICAgICAgICAgICAwJSwgODAlLCAxMDAlIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTtcbiAgICAgICAgICAgIG9wYWNpdHk6IDAuMzU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA0MCUge1xuICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC00cHgpO1xuICAgICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICBgfTwvc3R5bGU+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cblxuICAgICAgey8qIE1BSU4gKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC1mdWxsIHJlbGF0aXZlIHotMTBcIj5cbiAgICAgICAgey8qIFNJREVCQVIgKi99XG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzc05hbWU9XCJmaXhlZCBiZy1bI2FhMzYzNl0gdGV4dC13aGl0ZSBzaGFkb3cteGwgZmxleCBmbGV4LWNvbCBweC00IHB5LTMgdHJhbnNpdGlvbi10cmFuc2Zvcm0gZHVyYXRpb24tMzAwXCJcbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgdG9wOiBoZWFkZXJIZWlnaHQsXG4gICAgICAgICAgICBib3R0b206IGZvb3RlckhlaWdodCxcbiAgICAgICAgICAgIHdpZHRoOiBzaWRlYmFyV2lkdGgsXG4gICAgICAgICAgICB0cmFuc2Zvcm06IHNpZGViYXJPcGVuID8gXCJ0cmFuc2xhdGVYKDApXCIgOiBgdHJhbnNsYXRlWCgtMTAwJSlgLFxuICAgICAgICAgICAgekluZGV4OiA2MCxcbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAgey8qIEJBQ0sgQlVUVE9OICovfVxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHJvdXRlci5wdXNoKHVzZXIgPyBcIi9tb2RlbHNcIiA6IFwiL1wiKX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0xIHRleHQtWyNmYWEwMjldIHRyYW5zaXRpb24gbWItM1wiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14bFwiPuKGkDwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1zZW1pYm9sZFwiPlxuICAgICAgICAgICAgICB7dXNlciA/IFwiQmFjayB0byBNZW51XCIgOiBcIkJhY2sgdG8gSG9tZVwifVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgICAgey8qIFwiKyBORVcgQ0hBVFwiICovfVxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZU5ld0NoYXR9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctd2hpdGUgdGV4dC1bI2FhMzYzNl0gZm9udC1ib2xkIHB5LTEgcm91bmRlZC1mdWxsIHNoYWRvdyBtYi02IHRleHQtc21cIlxuICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luVG9wOiBcIi00cHhcIiB9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgICsgTmV3IENoYXRcbiAgICAgICAgICA8L2J1dHRvbj5cblxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gb3BhY2l0eS04MCBtYi0zXCI+UmVjZW50czwvcD5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtWzFweF0gYmctd2hpdGUvNDAgbWItNFwiPjwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBnYXAtMiBvdmVyZmxvdy15LWF1dG9cIj5cbiAgICAgICAgICAgIHtyZWNlbnRzVG9TaG93Lm1hcCgodCkgPT4gKFxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIGtleT17dC5pZH1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1sZWZ0IHRleHQteHMgYmctd2hpdGUvMTAgaG92ZXI6Ymctd2hpdGUvMjAgcHgtMyBweS0yIHJvdW5kZWRcIlxuICAgICAgICAgICAgICBvbkNsaWNrPXthc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHVzZXIgJiYgIWlzUHVibGljQWNjZXNzKSB7XG4gICAgICAgICAgLy8gTG9nZ2VkLWluOiBsb2FkIGZyb20gRmlyZXN0b3JlXG4gICAgICAgICAgc2V0VGhyZWFkSWQodC5pZCk7XG4gICAgICAgICAgY29uc3QgbXNncyA9IGF3YWl0IGdldFRocmVhZE1lc3NhZ2VzKHVzZXIudWlkLCBtb2RlbEtleSwgdC5pZCk7XG4gICAgICAgICAgc2V0TWVzc2FnZXMobXNncy5tYXAoKG0pID0+ICh7IHJvbGU6IG0ucm9sZSwgY29udGVudDogbS5jb250ZW50IH0pKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gR3Vlc3Q6IGxvYWQgZnJvbSBsb2NhbFN0b3JhZ2UgbWVtb3J5XG4gICAgICAgICAgLy8gXG4gICAgICAgICAgc2V0R3Vlc3RUaHJlYWRJZCh0LmlkKTtcbiAgICAgICAgICBzZXRNZXNzYWdlcyh0Lm1lc3NhZ2VzIHx8IFtdKTtcbiAgICAgICAgfVxuICAgICAgfX1cbiAgICAgID5cbiAgICAgICAge3QudGl0bGUgfHwgXCJDaGF0XCJ9XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgKSl9XG4gICAgICA8L2Rpdj5cblxuXG5cbiAgICAgICAgICB7LyogVVNFUiBJTkZPICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtYXV0byBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyBib3JkZXItdCBib3JkZXItd2hpdGUvMzAgcHQtNFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLTEwIHctMTAgYmctd2hpdGUvMjAgcm91bmRlZC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgICAgIDxpbWcgc3JjPVwiL3R1cGktbG9nby5wbmdcIiBjbGFzc05hbWU9XCJoLTggdy04IHJvdW5kZWQtZnVsbFwiIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1ib2xkXCI+e3JlYWxOYW1lfTwvcD5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyBvcGFjaXR5LTgwXCI+XG4gICAgICAgICAgICAgICAge3VzZXIgPyBcIkxvZ2dlZCBJblwiIDogXCJHdWVzdCBNb2RlXCJ9XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogU0lERUJBUiBUT0dHTEUgKi99XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaWRlYmFyT3Blbighc2lkZWJhck9wZW4pfVxuICAgICAgICAgIGNsYXNzTmFtZT1cImZpeGVkIGJnLVsjYWEzNjM2XSB0ZXh0LXdoaXRlIHB4LTIgcHktMyByb3VuZGVkLXItZnVsbCBzaGFkb3cgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMzAwXCJcbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgdG9wOiBgY2FsYygke2hlYWRlckhlaWdodH1weCArIDMwJSlgLFxuICAgICAgICAgICAgbGVmdDogc2lkZWJhck9wZW4gPyBgJHtzaWRlYmFyV2lkdGh9cHhgIDogXCIwcHhcIixcbiAgICAgICAgICAgIHRyYW5zZm9ybTogXCJ0cmFuc2xhdGVZKC01MCUpXCIsXG4gICAgICAgICAgICB6SW5kZXg6IDcwLFxuICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICB7c2lkZWJhck9wZW4gPyBcIuKXgFwiIDogXCLilrZcIn1cbiAgICAgICAgPC9idXR0b24+XG5cbiAgICAgICAgey8qIENIQVQgQVJFQSAqL31cbiAgICAgICAgPGRpdlxuICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXgtMSByZWxhdGl2ZSB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0zMDAgJHtcbiAgICAgICAgICAgIHNpZGViYXJPcGVuID8gYG1sLVsyMjRweF1gIDogXCJtbC0wXCJcbiAgICAgICAgICB9YH1cbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgbWFyZ2luVG9wOiBgJHtoZWFkZXJIZWlnaHR9cHhgLFxuICAgICAgICAgICAgbWFyZ2luQm90dG9tOiBzaG93S2V5Ym9hcmRcbiAgICAgICAgICAgICAgPyBgJHtmb290ZXJIZWlnaHQgKyBrZXlib2FyZEhlaWdodCArIGtleWJvYXJkUGFkZGluZyArIGlucHV0QmFySGVpZ2h0ICsgNH1weGBcbiAgICAgICAgICAgICAgOiBgJHtmb290ZXJIZWlnaHR9cHhgLFxuICAgICAgICAgICAgdHJhbnNpdGlvbjogXCJtYXJnaW4tYm90dG9tIDAuM3MgZWFzZS1pbi1vdXRcIixcbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAgey8qIOKchSBHZW5lcmF0ZSBRUiBidXR0b24gaW5zaWRlIGNoYXQgYXJlYSAoYWRkZWQpICovfVxuICAgICAgICAgIHsvKiDinIUgQ2hhdCBUb3AgQmFyIChRUiBidXR0b24pIOKAlCBwcmV2ZW50cyBvdmVybGFwICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHgtNiBwdC0zIGZsZXgganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgb25DbGljaz17aGFuZGxlR2VuZXJhdGVRUn1cbiAgICAgICAgICBkaXNhYmxlZD17bWVzc2FnZXMubGVuZ3RoID09PSAwfVxuICAgICAgICAgIGNsYXNzTmFtZT17YHB4LTQgcHktMiByb3VuZGVkLWZ1bGwgc2hhZG93IGZvbnQtc2VtaWJvbGQgdGV4dC14cyAke1xuICAgICAgICAgICAgbWVzc2FnZXMubGVuZ3RoID09PSAwXG4gICAgICAgICAgICA/IFwiYmctd2hpdGUvNTAgdGV4dC1ncmF5LTcwMFwiXG4gICAgICAgICAgICA6IFwiYmctd2hpdGUvOTAgdGV4dC1ibGFja1wiXG4gICAgICAgICAgfWB9XG4gICAgICAgICAgdGl0bGU9e1xuICAgICAgICAgICAgbWVzc2FnZXMubGVuZ3RoID09PSAwXG4gICAgICAgICAgICA/IFwiU3RhcnQgYSBjb252ZXJzYXRpb24gZmlyc3RcIlxuICAgICAgICAgICAgOiBcIkdlbmVyYXRlIFFSIGZvciB0aGlzIGNvbnZlcnNhdGlvblwiXG4gICAgICAgICAgfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIEdlbmVyYXRlIFFSXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIHsvKiBNRVNTQUdFUyAqL31cbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC0wIHB4LTYgb3ZlcmZsb3cteS1hdXRvIGZsZXggZmxleC1jb2xcIlxuICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgdG9wOiBcIjUycHhcIixcbiAgICAgICAgICAgICAgcGFkZGluZ1RvcDogXCI2cHhcIixcbiAgICAgICAgICAgICAgcGFkZGluZ0JvdHRvbTogc2hvd0tleWJvYXJkXG4gICAgICAgICAgICAgICAgPyBgJHtpbnB1dEJhckhlaWdodCArIGtleWJvYXJkUGFkZGluZyArIGtleWJvYXJkSGVpZ2h0fXB4YFxuICAgICAgICAgICAgICAgIDogYCR7aW5wdXRCYXJIZWlnaHR9cHhgLFxuICAgICAgICAgICAgfX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7bWVzc2FnZXMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBmbGV4IGp1c3RpZnktY2VudGVyIGl0ZW1zLWNlbnRlciB0ZXh0LWNlbnRlciB0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LVsjYWEzNjM2XVwiPlxuICAgICAgICAgICAgICAgIEhlbGxvLCB7bmlja25hbWV9IVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIG1lc3NhZ2VzLm1hcCgobXNnLCBpKSA9PiAoXG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAga2V5PXtpfVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgbWItNCB3LWZ1bGwgJHtcbiAgICAgICAgICAgICAgICAgICAgbXNnLnJvbGUgPT09IFwidXNlclwiID8gXCJ0ZXh0LXJpZ2h0XCIgOiBcInRleHQtbGVmdFwiXG4gICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGlubGluZS1ibG9jayBweC00IHB5LTMgcm91bmRlZC0yeGwgc2hhZG93LWxnIHRleHQtc20gbWF4LXctWzg1JV0gJHtcbiAgICAgICAgICAgICAgICAgICAgICBtc2cucm9sZSA9PT0gXCJ1c2VyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gXCJiZy1bI2FhMzYzNl0gdGV4dC13aGl0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICA6IFwiYmctd2hpdGUgdGV4dC1ibGFjayBib3JkZXIgYm9yZGVyLWdyYXktMjAwXCJcbiAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgd2hpdGVTcGFjZTogXCJwcmUtd3JhcFwiLFxuICAgICAgICAgICAgICAgICAgICAgIHdvcmRCcmVhazogXCJicmVhay13b3JkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dXcmFwOiBcImJyZWFrLXdvcmRcIixcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge21zZy5yb2xlID09PSBcInVzZXJcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIndoaXRlc3BhY2UtcHJlLXdyYXAgYnJlYWstd29yZHNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHttc2cuY29udGVudH1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICA8U2ltcGxlTWFya2Rvd25SZW5kZXJlciB0ZXh0PXttc2cuY29udGVudH0gLz5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAge3RoaW5raW5nICYmIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi00IHctZnVsbCB0ZXh0LWxlZnRcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImlubGluZS1ibG9jayBweC00IHB5LTMgcm91bmRlZC0yeGwgc2hhZG93LWxnIHRleHQtc20gbWF4LXctWzg1JV0gYmctd2hpdGUgdGV4dC1ibGFjayBib3JkZXIgYm9yZGVyLWdyYXktMjAwXCI+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJkb3RcIj4uPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZG90XCI+Ljwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImRvdFwiPi48L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDxkaXYgcmVmPXtlbmRSZWZ9IC8+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7Lyog4pyFIFFSIE1PREFMIChhZGRlZCkgKi99XG4gICAgICAgICAge3NoYXJlT3BlbiAmJiBzaGFyZUlkICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgaW5zZXQtMCB6LVs5MF0gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIGluc2V0LTAgYmctYmxhY2svNTBcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNoYXJlT3BlbihmYWxzZSl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmUgYmctd2hpdGUgcm91bmRlZC0yeGwgc2hhZG93LTJ4bCBib3JkZXIgcC01IHctWzMyMHB4XSBtYXgtdy1bOTB2d11cIj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LWNlbnRlciBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICBTY2FuIHRvIHZpZXcgb24gcGhvbmVcbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNjAwIHRleHQtY2VudGVyIG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgIFRoaXMgb3BlbnMgYSBkb2N1bWVudC1zdHlsZSBwYWdlIHRoYXQgY2FuIGJlIHNhdmVkIGFzIFBERi5cbiAgICAgICAgICAgICAgICA8L3A+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgIDxRUkNvZGVDYW52YXMgdmFsdWU9e3NoYXJlVXJsfSBzaXplPXsyMjB9IGluY2x1ZGVNYXJnaW49e3RydWV9IC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTQgZmxleCBnYXAtMlwiPlxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4LTEgYmctWyNhYTM2MzZdIHRleHQtd2hpdGUgdGV4dC14cyBmb250LXNlbWlib2xkIHB5LTIgcm91bmRlZC14bFwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNoYXJlVXJsKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZD8ud3JpdGVUZXh0KHNoYXJlVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICB0b2FzdC5zdWNjZXNzKFwiTGluayBjb3BpZWQhXCIpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICBDb3B5IExpbmtcbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXgtMSBiZy1ncmF5LTIwMCB0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgcHktMiByb3VuZGVkLXhsXCJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2hhcmVPcGVuKGZhbHNlKX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgQ2xvc2VcbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG5cbiAgICAgICAgICB7LyogSU5QVVQgQkFSICovfVxuICAgICAgICAgIDxmb3JtXG4gICAgICAgICAgICByZWY9e2lucHV0QmFyUmVmfVxuICAgICAgICAgICAgb25TdWJtaXQ9e2hhbmRsZVNlbmR9XG4gICAgICAgICAgICBjbGFzc05hbWU9e2BmaXhlZCBsZWZ0LTAgei01MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBnYXAtMyB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0zMDAgJHtcbiAgICAgICAgICAgICAgc2lkZWJhck9wZW5cbiAgICAgICAgICAgICAgICA/IFwibWwtWzIyNHB4XSB3LVtjYWxjKDEwMCUtMTRyZW0pXSBweC02XCJcbiAgICAgICAgICAgICAgICA6IFwibWwtMCB3LWZ1bGwgcHgtNlwiXG4gICAgICAgICAgICB9YH1cbiAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgIGJvdHRvbTogc2hvd0tleWJvYXJkXG4gICAgICAgICAgICAgICAgPyBgJHtmb290ZXJIZWlnaHQgKyBrZXlib2FyZEhlaWdodCArIGtleWJvYXJkUGFkZGluZyArIDR9cHhgXG4gICAgICAgICAgICAgICAgOiBgJHtmb290ZXJIZWlnaHQgKyA4fXB4YCxcbiAgICAgICAgICAgICAgdHJhbnNpdGlvbjogXCJib3R0b20gMC4zcyBlYXNlLWluLW91dFwiLFxuICAgICAgICAgICAgfX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgcmVmPXtpbnB1dFJlZn1cbiAgICAgICAgICAgICAgdmFsdWU9e2lucHV0fVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICBjb25zdCBjYXJldCA9IGUudGFyZ2V0LnNlbGVjdGlvblN0YXJ0O1xuICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgc2V0SW5wdXQodmFsdWUpO1xuICAgICAgICAgICAgICAgICBrZXlib2FyZElucHV0UmVmLmN1cnJlbnQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgY2FyZXRQb3NpdGlvblJlZi5jdXJyZW50ID0gY2FyZXQ7XG4gICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICBpZiAoa2V5Ym9hcmRSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICAgICAga2V5Ym9hcmRSZWYuY3VycmVudC5zZXRJbnB1dCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICBrZXlib2FyZFJlZi5jdXJyZW50LnNldENhcmV0UG9zaXRpb24oY2FyZXQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgb25DbGljaz17KGUpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgY2FyZXQgPSBlLnRhcmdldC5zZWxlY3Rpb25TdGFydDtcbiAgICAgICAgICAgICAgY2FyZXRQb3NpdGlvblJlZi5jdXJyZW50ID0gY2FyZXQ7XG4gICAgICAgICAgICAgIGtleWJvYXJkUmVmLmN1cnJlbnQ/LnNldENhcmV0UG9zaXRpb24oY2FyZXQpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIG9uS2V5VXA9eyhlKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGNhcmV0ID0gZS50YXJnZXQuc2VsZWN0aW9uU3RhcnQ7XG4gICAgICAgICAgICAgIGNhcmV0UG9zaXRpb25SZWYuY3VycmVudCA9IGNhcmV0O1xuICAgICAgICAgICAgICBrZXlib2FyZFJlZi5jdXJyZW50Py5zZXRDYXJldFBvc2l0aW9uKGNhcmV0KTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIG9uRm9jdXM9eygpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRTaG93S2V5Ym9hcmQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGNoYXRDb250YWluZXJSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICAgICAgbGFzdFNjcm9sbFRvcFJlZi5jdXJyZW50ID0gY2hhdENvbnRhaW5lclJlZi5jdXJyZW50LnNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIG9uQmx1cj17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpc0tleWJvYXJkQ2xpY2sgPSBlLnJlbGF0ZWRUYXJnZXQ/LmNsb3Nlc3QoXCIuc2ltcGxlLWtleWJvYXJkXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzSW5wdXRDbGljayA9IGUucmVsYXRlZFRhcmdldD8uY2xvc2VzdChcbiAgICAgICAgICAgICAgICAgICdpbnB1dFtwbGFjZWhvbGRlcio9XCJBc2tcIl0nXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpc1NpZGViYXJDbGljayA9IGUucmVsYXRlZFRhcmdldD8uY2xvc2VzdChcbiAgICAgICAgICAgICAgICAgIFwiLmZpeGVkLmJnLVxcXFxbXFxcXCNhYTM2MzZcXFxcXVwiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpc1NpZGViYXJUb2dnbGVDbGljayA9IGUucmVsYXRlZFRhcmdldD8uY2xvc2VzdChcbiAgICAgICAgICAgICAgICAgIFwiYnV0dG9uLmZpeGVkLmJnLVxcXFxbXFxcXCNhYTM2MzZcXFxcXVwiXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICFpc0tleWJvYXJkQ2xpY2sgJiZcbiAgICAgICAgICAgICAgICAgICFpc0lucHV0Q2xpY2sgJiZcbiAgICAgICAgICAgICAgICAgICFpc1NpZGViYXJDbGljayAmJlxuICAgICAgICAgICAgICAgICAgIWlzU2lkZWJhclRvZ2dsZUNsaWNrXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0U2hvd0tleWJvYXJkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YEFzayAke21vZGVsS2V5LnRvVXBwZXJDYXNlKCl9Li4uYH1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHB5LTMgcHgtNSByb3VuZGVkLWZ1bGwgYmctd2hpdGUvOTUgb3V0bGluZS1ub25lIGJvcmRlciBib3JkZXItZ3JheS0zMDAgc2hhZG93LXNtIHRleHQtc20gZm9jdXM6Ym9yZGVyLVsjYWEzNjM2XSBmb2N1czpyaW5nLTEgZm9jdXM6cmluZy1bI2FhMzYzNl0gdHJhbnNpdGlvblwiXG4gICAgICAgICAgICAgIGRpc2FibGVkPXtzZW5kaW5nfVxuICAgICAgICAgICAgLz5cblxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICB0eXBlPVwic3VibWl0XCJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e3NlbmRpbmcgfHwgIWlucHV0LnRyaW0oKX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctWyNhYTM2MzZdIHRleHQtd2hpdGUgcHgtNSBweS0zIHJvdW5kZWQtZnVsbCB0ZXh0LXNtIHNoYWRvd1wiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIFNlbmRcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJSZWFjdCIsInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZVN0YXRlIiwidXNlQ2FsbGJhY2siLCJRUkNvZGVDYW52YXMiLCJ1c2VSb3V0ZXIiLCJhdXRoIiwib25BdXRoU3RhdGVDaGFuZ2VkIiwic2lnbk91dCIsInRvYXN0IiwiZ2V0VXNlclByb2ZpbGUiLCJjcmVhdGVUaHJlYWQiLCJnZXRSZWNlbnRUaHJlYWRzIiwiZ2V0VGhyZWFkTWVzc2FnZXMiLCJhcHBlbmRUaHJlYWRNZXNzYWdlIiwia2VlcE9ubHlMYXN0TlRocmVhZHMiLCJLZXlib2FyZCIsImxheW91dCIsInF3ZXJ0eSIsImRlZmF1bHQiLCJzaGlmdCIsIlNpbXBsZU1hcmtkb3duUmVuZGVyZXIiLCJ0ZXh0IiwibGluZXMiLCJzcGxpdCIsIm1hcCIsImxpbmUiLCJpbmRleCIsInRyaW0iLCJiciIsImNvbnRlbnQiLCJib2xkUmVnZXgiLCJwYXJ0cyIsImxhc3RJbmRleCIsIm1hdGNoIiwiZXhlYyIsInB1c2giLCJzcGFuIiwic3Vic3RyaW5nIiwic3Ryb25nIiwibGVuZ3RoIiwiZGl2IiwiY2xhc3NOYW1lIiwiZm9ybWF0QUlSZXNwb25zZSIsImNsZWFuZWQiLCJzdGFydHNXaXRoIiwiZW5kc1dpdGgiLCJqc29uIiwiSlNPTiIsInBhcnNlIiwiZ2VuZXJhdGVkX3RleHQiLCJyZXNwb25zZSIsImFuc3dlciIsIm91dHB1dCIsIm1lc3NhZ2UiLCJzdHJpbmdpZnkiLCJyZXBsYWNlIiwiQ2hhdFBhZ2UiLCJyb3V0ZXIiLCJtb2RlbCIsInB1YmxpYyIsImlzUHVibGljIiwicXVlcnkiLCJtb2RlbENvbmZpZ3MiLCJlY2UiLCJ1cmwiLCJ0b2tlbiIsIm5hdiIsImluZm8iLCJtb2RlbEtleSIsInNlbGVjdGVkTW9kZWwiLCJpc1B1YmxpY0FjY2VzcyIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwidXNlciIsInNldFVzZXIiLCJuaWNrbmFtZSIsInNldE5pY2tuYW1lIiwicmVhbE5hbWUiLCJzZXRSZWFsTmFtZSIsIm1lc3NhZ2VzIiwic2V0TWVzc2FnZXMiLCJpbnB1dCIsInNldElucHV0Iiwic2VuZGluZyIsInNldFNlbmRpbmciLCJzaGlmdEFjdGl2ZSIsInNldFNoaWZ0QWN0aXZlIiwiZW5kUmVmIiwic2lkZWJhck9wZW4iLCJzZXRTaWRlYmFyT3BlbiIsInJlY2VudFRocmVhZHMiLCJzZXRSZWNlbnRUaHJlYWRzIiwidGhyZWFkSWQiLCJzZXRUaHJlYWRJZCIsInRoaW5raW5nIiwic2V0VGhpbmtpbmciLCJndWVzdFRocmVhZHMiLCJzZXRHdWVzdFRocmVhZHMiLCJndWVzdFRocmVhZElkIiwic2V0R3Vlc3RUaHJlYWRJZCIsInNob3dLZXlib2FyZCIsInNldFNob3dLZXlib2FyZCIsImtleWJvYXJkUmVmIiwibGFzdFNjcm9sbFRvcFJlZiIsImtleWJvYXJkU2Nyb2xsVGhyZXNob2xkIiwiY2hhdENvbnRhaW5lclJlZiIsImlucHV0QmFyUmVmIiwia2V5Ym9hcmRJbnB1dFJlZiIsImlucHV0UmVmIiwiY2FyZXRQb3NpdGlvblJlZiIsInNoYXJlSWQiLCJzZXRTaGFyZUlkIiwic2hhcmVPcGVuIiwic2V0U2hhcmVPcGVuIiwiR1VFU1RfS0VZIiwibG9hZEd1ZXN0VGhyZWFkcyIsInJhdyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzYXZlR3Vlc3RUaHJlYWRzIiwidGhyZWFkcyIsInNldEl0ZW0iLCJzbGljZSIsInVuc3ViIiwidSIsImlkIiwicHJvZmlsZSIsInVpZCIsIm5hbWUiLCJkaXNwbGF5TmFtZSIsImVtYWlsIiwibmljayIsInJlY2VudHMiLCJjdXJyZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaGFuZGxlU2Nyb2xsIiwiY2hhdENvbnRhaW5lciIsImN1cnJlbnRTY3JvbGxUb3AiLCJzY3JvbGxUb3AiLCJzY3JvbGxEaWZmIiwiTWF0aCIsImFicyIsImlucHV0RWxlbWVudCIsImJsdXIiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNjcm9sbEludG9WaWV3IiwiYmVoYXZpb3IiLCJoYW5kbGVTZW5kIiwiZSIsInByZXZlbnREZWZhdWx0IiwidHJpbW1lZCIsInVzZXJNc2ciLCJyb2xlIiwidXBkYXRlZE1lc3NhZ2VzIiwiYWN0aXZlVGhyZWFkSWQiLCJlcnJvck1zZyIsImRpc21pc3MiLCJyZXF1ZXN0T3B0aW9ucyIsIm1ldGhvZCIsImhlYWRlcnMiLCJyZXF1ZXN0Rm9ybWF0cyIsImlucHV0cyIsInBhcmFtZXRlcnMiLCJtYXhfbmV3X3Rva2VucyIsInRlbXBlcmF0dXJlIiwibWF4X2xlbmd0aCIsInJlcGx5IiwibGFzdEVycm9yIiwiY29udHJvbGxlciIsIkFib3J0Q29udHJvbGxlciIsInRpbWVvdXRJZCIsInNldFRpbWVvdXQiLCJhYm9ydCIsImkiLCJib2R5IiwicmVzIiwiZmV0Y2giLCJzaWduYWwiLCJvayIsIkVycm9yIiwic3RhdHVzIiwiZXJyIiwiY2xlYXJUaW1lb3V0IiwiYWlNc2ciLCJmaW5hbE1lc3NhZ2VzIiwic3VjY2VzcyIsImVycm9yIiwiaGFuZGxlTmV3Q2hhdCIsImN1cnJlbnRJZCIsIm1zZyIsImZpcnN0VXNlck1zZyIsImZpbmQiLCJtIiwibmV3VGhyZWFkIiwiRGF0ZSIsIm5vdyIsInRvU3RyaW5nIiwidGl0bGUiLCJ1cGRhdGVkQXQiLCJ1cGRhdGVkIiwic29ydCIsImEiLCJiIiwiaGFuZGxlU2lnbk91dCIsInRoZW4iLCJoYW5kbGVTaWduSW4iLCJoYW5kbGVHZW5lcmF0ZVFSIiwiY3JlYXRlZEF0IiwiZGF0YSIsImhlYWRlckhlaWdodCIsImZvb3RlckhlaWdodCIsInNpZGViYXJXaWR0aCIsImtleWJvYXJkSGVpZ2h0IiwiaW5wdXRCYXJIZWlnaHQiLCJrZXlib2FyZFBhZGRpbmciLCJzaGFyZVVybCIsIndpbmRvdyIsImxvY2F0aW9uIiwib3JpZ2luIiwicmVjZW50c1RvU2hvdyIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiaGVhZGVyIiwiaGVpZ2h0IiwiaW1nIiwic3JjIiwiYWx0IiwiaDEiLCJidXR0b24iLCJvbkNsaWNrIiwiZm9vdGVyIiwiYm90dG9tIiwibGVmdCIsInpJbmRleCIsInR5cGUiLCJvbk1vdXNlRG93biIsInN0b3BQcm9wYWdhdGlvbiIsInNldENhcmV0UG9zaXRpb24iLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJmb2N1cyIsInNldFNlbGVjdGlvblJhbmdlIiwiciIsImxheW91dE5hbWUiLCJvbktleVByZXNzIiwiY3VycmVudFRleHQiLCJjYXJldFBvcyIsInVwZGF0ZVRleHQiLCJuZXdUZXh0IiwibmV3Q2FyZXRQb3MiLCJuZXdTaGlmdFN0YXRlIiwic2V0T3B0aW9ucyIsInNwZWNpYWxUb2tlbnMiLCJjaGFyIiwidGhlbWUiLCJkaXNwbGF5IiwicHJldmVudE1vdXNlRG93bkRlZmF1bHQiLCJwcmV2ZW50TW91c2VVcERlZmF1bHQiLCJuZXdMaW5lT25FbnRlciIsImF1dG9Vc2VUb3VjaEV2ZW50cyIsInRvcCIsIndpZHRoIiwidHJhbnNmb3JtIiwibWFyZ2luVG9wIiwicCIsInQiLCJtc2dzIiwibWFyZ2luQm90dG9tIiwidHJhbnNpdGlvbiIsImRpc2FibGVkIiwicGFkZGluZ1RvcCIsInBhZGRpbmdCb3R0b20iLCJ3aGl0ZVNwYWNlIiwid29yZEJyZWFrIiwib3ZlcmZsb3dXcmFwIiwicmVmIiwidmFsdWUiLCJzaXplIiwiaW5jbHVkZU1hcmdpbiIsIm5hdmlnYXRvciIsImNsaXBib2FyZCIsIndyaXRlVGV4dCIsImZvcm0iLCJvblN1Ym1pdCIsIm9uQ2hhbmdlIiwidGFyZ2V0IiwiY2FyZXQiLCJzZWxlY3Rpb25TdGFydCIsIm9uS2V5VXAiLCJvbkZvY3VzIiwib25CbHVyIiwiaXNLZXlib2FyZENsaWNrIiwicmVsYXRlZFRhcmdldCIsImNsb3Nlc3QiLCJpc0lucHV0Q2xpY2siLCJpc1NpZGViYXJDbGljayIsImlzU2lkZWJhclRvZ2dsZUNsaWNrIiwicGxhY2Vob2xkZXIiLCJ0b1VwcGVyQ2FzZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./pages/chat.js\n");

/***/ }),

/***/ "(pages-dir-node)/./styles/globals.css":
/*!****************************!*\
  !*** ./styles/globals.css ***!
  \****************************/
/***/ (() => {



/***/ }),

/***/ "../../../shared/lib/no-fallback-error.external":
/*!*********************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external.js" ***!
  \*********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external.js");

/***/ }),

/***/ "firebase/app":
/*!*******************************!*\
  !*** external "firebase/app" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = import("firebase/app");;

/***/ }),

/***/ "firebase/auth":
/*!********************************!*\
  !*** external "firebase/auth" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = import("firebase/auth");;

/***/ }),

/***/ "firebase/firestore":
/*!*************************************!*\
  !*** external "firebase/firestore" ***!
  \*************************************/
/***/ ((module) => {

"use strict";
module.exports = import("firebase/firestore");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "next/dist/compiled/next-server/pages.runtime.dev.js":
/*!**********************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages.runtime.dev.js" ***!
  \**********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/pages.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "qrcode.react":
/*!*******************************!*\
  !*** external "qrcode.react" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = import("qrcode.react");;

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("react");

/***/ }),

/***/ "react-dom":
/*!****************************!*\
  !*** external "react-dom" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("react-dom");

/***/ }),

/***/ "react-hot-toast":
/*!**********************************!*\
  !*** external "react-hot-toast" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = import("react-hot-toast");;

/***/ }),

/***/ "react-simple-keyboard":
/*!****************************************!*\
  !*** external "react-simple-keyboard" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react-simple-keyboard");

/***/ }),

/***/ "react/jsx-dev-runtime":
/*!****************************************!*\
  !*** external "react/jsx-dev-runtime" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-dev-runtime");

/***/ }),

/***/ "react/jsx-runtime":
/*!************************************!*\
  !*** external "react/jsx-runtime" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-runtime");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "styled-jsx/style":
/*!***********************************!*\
  !*** external "styled-jsx/style" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = require("styled-jsx/style");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@swc","vendor-chunks/react-simple-keyboard"], () => (__webpack_exec__("(pages-dir-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%5Cchat.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();