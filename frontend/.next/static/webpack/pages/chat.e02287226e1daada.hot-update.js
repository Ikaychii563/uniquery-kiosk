"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/chat",{

/***/ "(pages-dir-browser)/./pages/chat.js":
/*!***********************!*\
  !*** ./pages/chat.js ***!
  \***********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ChatPage)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(pages-dir-browser)/./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! styled-jsx/style */ \"(pages-dir-browser)/./node_modules/styled-jsx/style.js\");\n/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(styled_jsx_style__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(pages-dir-browser)/./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var qrcode_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! qrcode.react */ \"(pages-dir-browser)/./node_modules/qrcode.react/lib/esm/index.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/router */ \"(pages-dir-browser)/./node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _firebase_clientApp__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../firebase/clientApp */ \"(pages-dir-browser)/./firebase/clientApp.js\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! firebase/auth */ \"(pages-dir-browser)/./node_modules/firebase/auth/dist/esm/index.esm.js\");\n/* harmony import */ var react_hot_toast__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-hot-toast */ \"(pages-dir-browser)/./node_modules/react-hot-toast/dist/index.mjs\");\n/* harmony import */ var _lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../lib/firestoreHelpers */ \"(pages-dir-browser)/./lib/firestoreHelpers.js\");\n/* harmony import */ var react_simple_keyboard__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-simple-keyboard */ \"(pages-dir-browser)/./node_modules/react-simple-keyboard/build/index.js\");\n/* harmony import */ var react_simple_keyboard__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_simple_keyboard__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var react_simple_keyboard_build_css_index_css__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-simple-keyboard/build/css/index.css */ \"(pages-dir-browser)/./node_modules/react-simple-keyboard/build/css/index.css\");\n/* harmony import */ var react_simple_keyboard_build_css_index_css__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_simple_keyboard_build_css_index_css__WEBPACK_IMPORTED_MODULE_10__);\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\n// IMPORT VIRTUAL KEYBOARD\n\n\n// ✅ FIX: Define QWERTY keyboard layout\nconst layout = {\n    qwerty: {\n        default: [\n            \"0 1 2 3 4 5 6 7 8 9\",\n            \"q w e r t y u i o p {backspace}\",\n            \"a s d f g h j k l {enter}\",\n            \"{shift} z x c v b n m\",\n            \"{@} {%} {?} {space} {,} {.}\"\n        ],\n        shift: [\n            \"0 1 2 3 4 5 6 7 8 9\",\n            \"Q W E R T Y U I O P {backspace}\",\n            \"A S D F G H J K L {enter}\",\n            \"{shift} Z X C V B N M\",\n            \"{@} {%} {?} {space} {,} {.}\"\n        ]\n    }\n};\n// Simple markdown renderer without external dependencies\nfunction SimpleMarkdownRenderer(param) {\n    let { text } = param;\n    if (!text) return null;\n    const lines = text.split(\"\\n\");\n    return lines.map((line, index)=>{\n        if (line.trim() === \"\") return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"br\", {}, index, false, {\n            fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n            lineNumber: 45,\n            columnNumber: 36\n        }, this);\n        let content = line;\n        const boldRegex = /\\*\\*(.*?)\\*\\*/g;\n        const parts = [];\n        let lastIndex = 0;\n        let match;\n        while((match = boldRegex.exec(content)) !== null){\n            if (match.index > lastIndex) {\n                parts.push(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    children: content.substring(lastIndex, match.index)\n                }, \"\".concat(index, \"-\").concat(lastIndex), false, {\n                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                    lineNumber: 56,\n                    columnNumber: 11\n                }, this));\n            }\n            parts.push(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                children: match[1]\n            }, \"\".concat(index, \"-bold-\").concat(match.index), false, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 62,\n                columnNumber: 9\n            }, this));\n            lastIndex = match.index + match[0].length;\n        }\n        if (lastIndex < content.length) {\n            parts.push(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                children: content.substring(lastIndex)\n            }, \"\".concat(index, \"-remaining\"), false, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 69,\n                columnNumber: 9\n            }, this));\n        }\n        if (parts.length === 0) {\n            parts.push(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                children: content\n            }, \"\".concat(index, \"-plain\"), false, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 74,\n                columnNumber: 18\n            }, this));\n        }\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"mb-1 last:mb-0\",\n            children: [\n                parts,\n                index < lines.length - 1 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"br\", {}, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                    lineNumber: 80,\n                    columnNumber: 38\n                }, this)\n            ]\n        }, index, true, {\n            fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n            lineNumber: 78,\n            columnNumber: 7\n        }, this);\n    });\n}\n_c = SimpleMarkdownRenderer;\nfunction formatAIResponse(text) {\n    if (!text) return \"\";\n    let cleaned = text.trim();\n    if (cleaned.startsWith(\"{\") && cleaned.endsWith(\"}\")) {\n        try {\n            const json = JSON.parse(cleaned);\n            cleaned = json.generated_text || json.response || json.answer || json.output || json.text || json.message || JSON.stringify(json);\n        } catch (e) {}\n    }\n    cleaned = cleaned.replace(/^\"|\"$/g, \"\");\n    cleaned = cleaned.replace(/\\\\n/g, \"\\n\");\n    cleaned = cleaned.replace(/\\\\\"/g, '\"');\n    cleaned = cleaned.replace(/\\\\t/g, \"  \");\n    return cleaned;\n}\nfunction ChatPage() {\n    _s();\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_4__.useRouter)();\n    const { model, public: isPublic } = router.query;\n    const modelConfigs = {\n        ece: {\n            url: \"https://tiyupi-ece-ece-api.hf.space/generate\",\n            token: \"\"\n        },\n        nav: {\n            url: \"https://tiyupi-ece-somi-cali.hf.space/chat\",\n            token: \"\"\n        },\n        info: {\n            url: \"https://tiyupi-ece-hitupi.hf.space/chat\",\n            token: \"\"\n        }\n    };\n    const modelKey = model || \"ece\";\n    const selectedModel = modelConfigs[modelKey] || {};\n    const isPublicAccess = isPublic === \"true\";\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(true);\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const [nickname, setNickname] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    const [realName, setRealName] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([]);\n    const [input, setInput] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    const [sending, setSending] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [shiftActive, setShiftActive] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const endRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)();\n    const [sidebarOpen, setSidebarOpen] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(true);\n    // VIRTUAL KEYBOARD STATE\n    const [showKeyboard, setShowKeyboard] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const keyboardRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const lastScrollTopRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(0);\n    const keyboardScrollThreshold = 20;\n    const chatContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const inputBarRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const keyboardInputRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(\"\");\n    const inputRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const caretPositionRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(0);\n    // ✅ SHARE / QR STATE (added)\n    const [shareId, setShareId] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const [shareOpen, setShareOpen] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    /* AUTH */ (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"ChatPage.useEffect\": ()=>{\n            const unsub = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_6__.onAuthStateChanged)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_5__.auth, {\n                \"ChatPage.useEffect.unsub\": async (u)=>{\n                    if (isPublicAccess && !u) {\n                        setUser(null);\n                        setNickname(\"Guest\");\n                        setRealName(\"Guest\");\n                        setMessages([]);\n                        setLoading(false);\n                        return;\n                    }\n                    if (!isPublicAccess && !u) {\n                        router.replace(\"/login\");\n                        return;\n                    }\n                    setUser(u);\n                    try {\n                        if (u) {\n                            var _u_email, _u_email1;\n                            const profile = await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.getUserProfile)(u.uid);\n                            const name = (profile === null || profile === void 0 ? void 0 : profile.name) || u.displayName || (profile === null || profile === void 0 ? void 0 : profile.nickname) || ((_u_email = u.email) === null || _u_email === void 0 ? void 0 : _u_email.split(\"@\")[0]) || \"User\";\n                            setRealName(name);\n                            const nick = (profile === null || profile === void 0 ? void 0 : profile.nickname) || (profile === null || profile === void 0 ? void 0 : profile.name) || u.displayName || ((_u_email1 = u.email) === null || _u_email1 === void 0 ? void 0 : _u_email1.split(\"@\")[0]) || \"User\";\n                            setNickname(nick);\n                            const conv = await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.getConversation)(u.uid, modelKey);\n                            setMessages((conv === null || conv === void 0 ? void 0 : conv.messages) || []);\n                        }\n                    } catch (e) {}\n                    setLoading(false);\n                }\n            }[\"ChatPage.useEffect.unsub\"]);\n            return ({\n                \"ChatPage.useEffect\": ()=>unsub()\n            })[\"ChatPage.useEffect\"];\n        }\n    }[\"ChatPage.useEffect\"], [\n        router,\n        modelKey,\n        isPublicAccess\n    ]);\n    // Get references on mount\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"ChatPage.useEffect\": ()=>{\n            chatContainerRef.current = document.querySelector(\".absolute.inset-0.px-6.overflow-y-auto.flex.flex-col\");\n            inputBarRef.current = document.querySelector(\"form.fixed.left-0.z-50\");\n        }\n    }[\"ChatPage.useEffect\"], []);\n    // Handle scroll to auto-hide keyboard\n    const handleScroll = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)({\n        \"ChatPage.useCallback[handleScroll]\": ()=>{\n            if (!showKeyboard) return;\n            const chatContainer = chatContainerRef.current;\n            if (!chatContainer) return;\n            const currentScrollTop = chatContainer.scrollTop;\n            const scrollDiff = Math.abs(currentScrollTop - lastScrollTopRef.current);\n            if (scrollDiff > keyboardScrollThreshold) {\n                setShowKeyboard(false);\n                const inputElement = document.querySelector('input[placeholder*=\"Ask\"]');\n                if (inputElement) inputElement.blur();\n            }\n            lastScrollTopRef.current = currentScrollTop;\n        }\n    }[\"ChatPage.useCallback[handleScroll]\"], [\n        showKeyboard\n    ]);\n    // Attach scroll event listener\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"ChatPage.useEffect\": ()=>{\n            const chatContainer = chatContainerRef.current;\n            if (!chatContainer) return;\n            chatContainer.addEventListener(\"scroll\", handleScroll);\n            return ({\n                \"ChatPage.useEffect\": ()=>{\n                    chatContainer.removeEventListener(\"scroll\", handleScroll);\n                }\n            })[\"ChatPage.useEffect\"];\n        }\n    }[\"ChatPage.useEffect\"], [\n        handleScroll\n    ]);\n    // Reset scroll tracking when keyboard shows\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"ChatPage.useEffect\": ()=>{\n            if (showKeyboard && chatContainerRef.current) {\n                lastScrollTopRef.current = chatContainerRef.current.scrollTop;\n            }\n        }\n    }[\"ChatPage.useEffect\"], [\n        showKeyboard\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"ChatPage.useEffect\": ()=>{\n            var _endRef_current;\n            (_endRef_current = endRef.current) === null || _endRef_current === void 0 ? void 0 : _endRef_current.scrollIntoView({\n                behavior: \"smooth\"\n            });\n        }\n    }[\"ChatPage.useEffect\"], [\n        messages\n    ]);\n    /* SEND MESSAGE */ async function handleSend(e) {\n        e.preventDefault();\n        const trimmed = input.trim();\n        if (!trimmed) return;\n        const userMsg = {\n            role: \"user\",\n            content: trimmed\n        };\n        const updatedMessages = [\n            ...messages,\n            userMsg\n        ];\n        setMessages(updatedMessages);\n        setInput(\"\");\n        setSending(true);\n        setShowKeyboard(false);\n        keyboardInputRef.current = \"\";\n        react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].loading(\"Sending...\", {\n            id: \"send\"\n        });\n        try {\n            if (user && !isPublicAccess) await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.appendMessage)(user.uid, modelKey, userMsg);\n            if (!selectedModel.url) {\n                const errorMsg = {\n                    role: \"assistant\",\n                    content: \"Model unavailable.\"\n                };\n                setMessages([\n                    ...updatedMessages,\n                    errorMsg\n                ]);\n                if (user && !isPublicAccess) await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.appendMessage)(user.uid, modelKey, errorMsg);\n                react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].dismiss(\"send\");\n                setSending(false);\n                return;\n            }\n            const requestOptions = {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            };\n            const requestFormats = [\n                {\n                    inputs: trimmed,\n                    parameters: {\n                        max_new_tokens: 500,\n                        temperature: 0.7\n                    }\n                },\n                {\n                    query: trimmed,\n                    max_new_tokens: 500,\n                    temperature: 0.7\n                },\n                {\n                    input: trimmed,\n                    max_length: 500,\n                    temperature: 0.7\n                }\n            ];\n            let reply = \"\";\n            let lastError = null;\n            for(let i = 0; i < requestFormats.length; i++){\n                try {\n                    requestOptions.body = JSON.stringify(requestFormats[i]);\n                    const res = await fetch(selectedModel.url, requestOptions);\n                    if (!res.ok) throw new Error(\"HTTP \".concat(res.status));\n                    const raw = await res.text();\n                    reply = formatAIResponse(raw);\n                    if (reply && reply !== \"{}\") break;\n                } catch (err) {\n                    lastError = err;\n                }\n            }\n            if (!reply && lastError) throw lastError;\n            if (!reply) throw new Error(\"No response\");\n            reply = reply.trim();\n            const aiMsg = {\n                role: \"assistant\",\n                content: reply\n            };\n            setMessages([\n                ...updatedMessages,\n                aiMsg\n            ]);\n            if (user && !isPublicAccess) await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.appendMessage)(user.uid, modelKey, aiMsg);\n            react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].success(\"Reply received\", {\n                id: \"send\"\n            });\n        } catch (err) {\n            const errorMsg = {\n                role: \"assistant\",\n                content: \"**Error:** \".concat(err.message)\n            };\n            setMessages([\n                ...messages,\n                userMsg,\n                errorMsg\n            ]);\n            react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].error(\"Send failed\", {\n                id: \"send\"\n            });\n        }\n        setSending(false);\n    }\n    async function handleNewChat() {\n        if (user && !isPublicAccess) await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.setConversation)(user.uid, modelKey, []);\n        setMessages([]);\n        // ✅ reset share state too (added)\n        setShareId(null);\n        setShareOpen(false);\n    }\n    function handleSignOut() {\n        (0,firebase_auth__WEBPACK_IMPORTED_MODULE_6__.signOut)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_5__.auth).then(()=>router.push(\"/login\"));\n    }\n    // NEW: Handle sign in redirect\n    function handleSignIn() {\n        router.push(\"/login\");\n    }\n    // ✅ Generate QR (added)\n    async function handleGenerateQR() {\n        try {\n            if (!messages || messages.length === 0) {\n                react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].error(\"No conversation to share yet.\");\n                return;\n            }\n            react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].loading(\"Generating QR...\", {\n                id: \"share\"\n            });\n            const res = await fetch(\"/api/share\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    modelKey,\n                    createdAt: Date.now(),\n                    messages: messages.map((m)=>({\n                            role: m.role,\n                            content: m.content\n                        }))\n                })\n            });\n            if (!res.ok) throw new Error(\"HTTP \".concat(res.status));\n            const data = await res.json();\n            if (!(data === null || data === void 0 ? void 0 : data.id)) throw new Error(\"No share id returned.\");\n            setShareId(data.id);\n            setShareOpen(true);\n            react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].success(\"QR ready!\", {\n                id: \"share\"\n            });\n        } catch (e) {\n            react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].error(\"Failed: \".concat(e.message), {\n                id: \"share\"\n            });\n        }\n    }\n    if (loading) return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"h-screen flex items-center justify-center text-xl\",\n        children: \"Loading…\"\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n        lineNumber: 389,\n        columnNumber: 7\n    }, this);\n    const headerHeight = 48;\n    const footerHeight = 32;\n    const sidebarWidth = 224;\n    const keyboardHeight = 280;\n    const inputBarHeight = 60;\n    const keyboardPadding = 4; // REDUCED FROM 8 TO 4\n    const shareUrl = shareId && \"object\" !== \"undefined\" ? \"\".concat(window.location.origin, \"/share/\").concat(shareId) : \"\";\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"relative h-screen w-screen overflow-hidden bg-cover bg-center\",\n        style: {\n            backgroundImage: \"url('/bg.png')\"\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute inset-0 bg-[rgba(245,245,245,0.18)] backdrop-blur-sm\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 411,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"header\", {\n                className: \"fixed top-0 left-0 right-0 z-50 bg-black/30 text-white py-1.5 px-4 flex justify-between items-center shadow-sm\",\n                style: {\n                    height: \"\".concat(headerHeight, \"px\")\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                src: \"/tuplogo.png\",\n                                alt: \"TUP Logo\",\n                                className: \"h-7 w-7\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 419,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                className: \"text-xs md:text-sm font-bold\",\n                                children: \"TECHNOLOGICAL UNIVERSITY OF THE PHILIPPINES\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 420,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                        lineNumber: 418,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: user ? handleSignOut : handleSignIn,\n                        className: \"bg-[#faa029] text-black font-semibold px-5 py-2 rounded-full shadow\",\n                        children: user ? \"Sign Out\" : \"Sign In\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                        lineNumber: 426,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 414,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"footer\", {\n                className: \"fixed bottom-0 left-0 right-0 z-50 bg-black/30 text-center py-1 text-white text-xs\",\n                style: {\n                    height: \"\".concat(footerHeight, \"px\")\n                },\n                children: \"Designed by: Electronics Engineering Department\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 435,\n                columnNumber: 7\n            }, this),\n            showKeyboard && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    bottom: \"\".concat(footerHeight + 4, \"px\"),\n                    left: sidebarOpen ? \"\".concat(sidebarWidth, \"px\") : \"0px\",\n                    height: \"\".concat(keyboardHeight, \"px\"),\n                    zIndex: 55\n                },\n                className: \"jsx-944d9fe6c9c4852c\" + \" \" + \"fixed left-0 right-0 bg-white shadow-2xl border-t border-gray-300\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"jsx-944d9fe6c9c4852c\" + \" \" + \"flex justify-end p-1 bg-gray-100\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: ()=>{\n                                setShowKeyboard(false);\n                                const inputElement = document.querySelector('input[placeholder*=\"Ask\"]');\n                                if (inputElement) inputElement.focus();\n                            },\n                            className: \"jsx-944d9fe6c9c4852c\" + \" \" + \"text-gray-600 hover:text-gray-800 px-2 py-1 rounded text-xs\",\n                            children: \"Close Keyboard\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                            lineNumber: 454,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                        lineNumber: 453,\n                        columnNumber: 11\n                    }, this),\n                    \"onKeyPress=\",\n                    (button)=>{\n                        let currentText = input;\n                        let caretPos = caretPositionRef.current;\n                        const updateText = (newText, newCaretPos)=>{\n                            setInput(newText);\n                            keyboardInputRef.current = newText;\n                            caretPositionRef.current = newCaretPos;\n                            requestAnimationFrame(()=>{\n                                var _keyboardRef_current, _keyboardRef_current1;\n                                if (inputRef.current) {\n                                    inputRef.current.focus();\n                                    inputRef.current.setSelectionRange(newCaretPos, newCaretPos);\n                                }\n                                (_keyboardRef_current = keyboardRef.current) === null || _keyboardRef_current === void 0 ? void 0 : _keyboardRef_current.setInput(newText);\n                                (_keyboardRef_current1 = keyboardRef.current) === null || _keyboardRef_current1 === void 0 ? void 0 : _keyboardRef_current1.setCaretPosition(newCaretPos);\n                            });\n                        };\n                        // ===== CONTROL KEYS =====\n                        if (button === \"{shift}\" || button === \"{lock}\") {\n                            var _keyboardRef_current;\n                            const newShiftState = !shiftActive;\n                            setShiftActive(newShiftState);\n                            (_keyboardRef_current = keyboardRef.current) === null || _keyboardRef_current === void 0 ? void 0 : _keyboardRef_current.setOptions({\n                                layoutName: newShiftState ? \"shift\" : \"default\"\n                            });\n                            return;\n                        }\n                        if (button === \"{enter}\") {\n                            handleSend({\n                                preventDefault: ()=>{}\n                            });\n                            return;\n                        }\n                        if (button === \"{backspace}\") {\n                            if (caretPos > 0) {\n                                const newText = currentText.slice(0, caretPos - 1) + currentText.slice(caretPos);\n                                updateText(newText, caretPos - 1);\n                            }\n                            return;\n                        }\n                        if (button === \"{space}\") {\n                            const newText = currentText.slice(0, caretPos) + \" \" + currentText.slice(caretPos);\n                            updateText(newText, caretPos + 1);\n                            return;\n                        }\n                        // ===== IGNORE UNKNOWN CONTROL BUTTONS =====\n                        if (button.startsWith(\"{\") && button.endsWith(\"}\")) {\n                            return;\n                        }\n                        // ===== INSERT ANY CHARACTER (letters, numbers, symbols) =====\n                        const newText = currentText.slice(0, caretPos) + button + currentText.slice(caretPos);\n                        updateText(newText, caretPos + button.length);\n                    },\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default()), {\n                        id: \"944d9fe6c9c4852c\",\n                        children: \".simple-keyboard{background:white!important;padding:10px!important;height:calc(100% - 30px)!important;width:100%!important;box-sizing:border-box!important}.hg-theme-custom{background-color:white!important;height:100%!important;display:flex!important;flex-direction:column!important}.hg-button{height:45px!important;border-radius:6px!important;font-weight:500!important;font-size:14px!important;box-shadow:0 2px 3px rgba(0,0,0,.15)!important;margin:3px!important;display:flex!important;align-items:center!important;justify-content:center!important;transition:all.1s ease!important;min-width:0!important;flex:1!important}.hg-row:nth-child(1) .hg-button{background:#f8f9fa!important;color:#333!important;border:1px solid#ddd!important}.hg-row:nth-child(2) .hg-button:not(.hg-button-backspace):not(.hg-button-enter),.hg-row:nth-child(3) .hg-button:not(.hg-button-enter),.hg-row:nth-child(4) .hg-button:not(.hg-button-shift){background:#aa3636!important;color:white!important;border:1px solid#8a2c2c!important}.hg-row:nth-child(5) .hg-button{background:#faa029!important;color:black!important;border:1px solid#d88c20!important;font-weight:bold!important}.hg-button-shift,.hg-button-backspace,.hg-button-enter{background:#faa029!important;color:black!important;border:1px solid#d88c20!important;font-weight:bold!important}.hg-button-space{flex-grow:3!important;max-width:none!important}.hg-button-backspace,.hg-button-enter,.hg-button-shift{min-width:70px!important;flex-grow:.5!important}.hg-button-\\\\\\\\{@\\\\\\\\;},\\n            .hg-button-\\\\\\\\{%\\\\\\\\},\\n            .hg-button-\\\\\\\\{\\\\\\\\?\\\\\\\\},\\n            .hg-button-\\\\\\\\{\\\\\\\\,\\\\\\\\},\\n            .hg-button-\\\\\\\\{\\\\\\\\.\\\\\\\\}{min-width:35px!important;flex-grow:.3!important}.hg-button:active,.hg-button.hg-activeBtn{transform:translatey(2px)!important;box-shadow:0 1px 2px rgba(0,0,0,.1)!important}.hg-row:nth-child(2) .hg-button:active:not(.hg-button-backspace):not(.hg-button-enter),.hg-row:nth-child(3) .hg-button:active:not(.hg-button-enter),.hg-row:nth-child(4) .hg-button:active:not(.hg-button-shift){background:#8a2c2c!important}.hg-button-shift:active,.hg-button-backspace:active,.hg-button-enter:active,.hg-row:nth-child(5) .hg-button:active,.hg-button-shift.hg-activeBtn{background:#d88c20!important}.hg-rows{height:100%!important;display:flex!important;flex-direction:column!important;justify-content:space-between!important;padding:0 8px!important}.hg-row{display:flex!important;justify-content:center!important;flex:1!important;min-height:48px!important;margin-bottom:5px!important}.hg-button-standard{min-width:35px!important;flex:1!important;max-width:50px!important}.hg-row:last-child{margin-bottom:0!important}.hg-button-backspace{font-size:16px!important}.hg-button-enter{font-size:16px!important}.simple-keyboard.hg-layout-default .hg-row{flex-wrap:nowrap!important}.hg-button span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}\"\n                    }, void 0, false, void 0, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 444,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex h-full relative z-10\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"fixed bg-[#aa3636] text-white shadow-xl flex flex-col px-4 py-3 transition-transform duration-300\",\n                        style: {\n                            top: headerHeight,\n                            bottom: footerHeight,\n                            width: sidebarWidth,\n                            transform: sidebarOpen ? \"translateX(0)\" : \"translateX(-100%)\",\n                            zIndex: 60\n                        },\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>router.push(user ? \"/models\" : \"/\"),\n                                className: \"flex items-center gap-1 text-[#faa029] transition mb-3\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-xl\",\n                                        children: \"←\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 688,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-sm font-semibold\",\n                                        children: user ? \"Back to Menu\" : \"Back to Home\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 689,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 684,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleNewChat,\n                                className: \"w-full bg-white text-[#aa3636] font-bold py-1 rounded-full shadow mb-6 text-sm\",\n                                style: {\n                                    marginTop: \"-4px\"\n                                },\n                                children: \"+ New Chat\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 695,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-sm opacity-80 mb-3\",\n                                children: \"Recents\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 703,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"h-[1px] bg-white/40 mb-4\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 704,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mt-auto flex items-center gap-3 border-t border-white/30 pt-4\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"h-10 w-10 bg-white/20 rounded-full flex items-center justify-center\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                            src: \"/tupi-logo.png\",\n                                            className: \"h-8 w-8 rounded-full\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                            lineNumber: 709,\n                                            columnNumber: 15\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 708,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"text-sm font-bold\",\n                                                children: realName\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                lineNumber: 712,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"text-xs opacity-80\",\n                                                children: user ? \"Logged In\" : \"Guest Mode\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                lineNumber: 713,\n                                                columnNumber: 15\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 711,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 707,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                        lineNumber: 673,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>setSidebarOpen(!sidebarOpen),\n                        className: \"fixed bg-[#aa3636] text-white px-2 py-3 rounded-r-full shadow transition-all duration-300\",\n                        style: {\n                            top: \"calc(\".concat(headerHeight, \"px + 30%)\"),\n                            left: sidebarOpen ? \"\".concat(sidebarWidth, \"px\") : \"0px\",\n                            transform: \"translateY(-50%)\",\n                            zIndex: 70\n                        },\n                        children: sidebarOpen ? \"◀\" : \"▶\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                        lineNumber: 721,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex-1 relative transition-all duration-300 \".concat(sidebarOpen ? \"ml-[224px]\" : \"ml-0\"),\n                        style: {\n                            marginTop: \"\".concat(headerHeight, \"px\"),\n                            marginBottom: showKeyboard ? \"\".concat(footerHeight + keyboardHeight + keyboardPadding + inputBarHeight + 4, \"px\") : \"\".concat(footerHeight, \"px\"),\n                            transition: \"margin-bottom 0.3s ease-in-out\"\n                        },\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"absolute top-3 right-6 z-40\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: handleGenerateQR,\n                                    disabled: messages.length === 0,\n                                    className: \"px-4 py-2 rounded-full shadow font-semibold text-xs \".concat(messages.length === 0 ? \"bg-white/50 text-gray-700\" : \"bg-white/90 text-black\"),\n                                    title: messages.length === 0 ? \"Start a conversation first\" : \"Generate QR for this conversation\",\n                                    children: \"Generate QR\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                    lineNumber: 749,\n                                    columnNumber: 13\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 748,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"absolute inset-0 px-6 overflow-y-auto flex flex-col\",\n                                style: {\n                                    paddingTop: \"15px\",\n                                    paddingBottom: showKeyboard ? \"\".concat(inputBarHeight + keyboardPadding + keyboardHeight, \"px\") : \"\".concat(inputBarHeight, \"px\")\n                                },\n                                children: [\n                                    messages.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex-1 flex justify-center items-center text-center text-sm font-bold text-[#aa3636]\",\n                                        children: [\n                                            \"Hello, \",\n                                            nickname,\n                                            \"!\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 778,\n                                        columnNumber: 15\n                                    }, this) : messages.map((msg, i)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"mb-4 w-full \".concat(msg.role === \"user\" ? \"text-right\" : \"text-left\"),\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"inline-block px-4 py-3 rounded-2xl shadow-lg text-sm max-w-[85%] \".concat(msg.role === \"user\" ? \"bg-[#aa3636] text-white\" : \"bg-white text-black border border-gray-200\"),\n                                                style: {\n                                                    whiteSpace: \"pre-wrap\",\n                                                    wordBreak: \"break-word\",\n                                                    overflowWrap: \"break-word\"\n                                                },\n                                                children: msg.role === \"user\" ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"whitespace-pre-wrap break-words\",\n                                                    children: msg.content\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                    lineNumber: 802,\n                                                    columnNumber: 23\n                                                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(SimpleMarkdownRenderer, {\n                                                    text: msg.content\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                    lineNumber: 806,\n                                                    columnNumber: 23\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                lineNumber: 789,\n                                                columnNumber: 19\n                                            }, this)\n                                        }, i, false, {\n                                            fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                            lineNumber: 783,\n                                            columnNumber: 17\n                                        }, this)),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        ref: endRef\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 813,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 768,\n                                columnNumber: 11\n                            }, this),\n                            shareOpen && shareId && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"fixed inset-0 z-[90] flex items-center justify-center\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"absolute inset-0 bg-black/50\",\n                                        onClick: ()=>setShareOpen(false)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 819,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"relative bg-white rounded-2xl shadow-2xl border p-5 w-[320px] max-w-[90vw]\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"text-sm font-bold text-center mb-1\",\n                                                children: \"Scan to view on phone\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                lineNumber: 824,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"text-xs text-gray-600 text-center mb-3\",\n                                                children: \"This opens a document-style page that can be saved as PDF.\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                lineNumber: 827,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex justify-center\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(qrcode_react__WEBPACK_IMPORTED_MODULE_3__.QRCodeCanvas, {\n                                                    value: shareUrl,\n                                                    size: 220,\n                                                    includeMargin: true\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                    lineNumber: 832,\n                                                    columnNumber: 19\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                lineNumber: 831,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"mt-4 flex gap-2\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        className: \"flex-1 bg-[#aa3636] text-white text-xs font-semibold py-2 rounded-xl\",\n                                                        onClick: ()=>{\n                                                            var _navigator_clipboard;\n                                                            if (!shareUrl) return;\n                                                            (_navigator_clipboard = navigator.clipboard) === null || _navigator_clipboard === void 0 ? void 0 : _navigator_clipboard.writeText(shareUrl);\n                                                            react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].success(\"Link copied!\");\n                                                        },\n                                                        children: \"Copy Link\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                        lineNumber: 836,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        className: \"flex-1 bg-gray-200 text-xs font-semibold py-2 rounded-xl\",\n                                                        onClick: ()=>setShareOpen(false),\n                                                        children: \"Close\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                        lineNumber: 847,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                lineNumber: 835,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 823,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 818,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                                ref: inputBarRef,\n                                onSubmit: handleSend,\n                                className: \"fixed left-0 z-50 flex items-center justify-center gap-3 transition-all duration-300 \".concat(sidebarOpen ? \"ml-[224px] w-[calc(100%-14rem)] px-6\" : \"ml-0 w-full px-6\"),\n                                style: {\n                                    bottom: showKeyboard ? \"\".concat(footerHeight + keyboardHeight + keyboardPadding + 4, \"px\") : \"\".concat(footerHeight + 8, \"px\"),\n                                    transition: \"bottom 0.3s ease-in-out\"\n                                },\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                        ref: inputRef,\n                                        value: input,\n                                        onChange: (e)=>{\n                                            const value = e.target.value;\n                                            const caret = e.target.selectionStart;\n                                            setInput(value);\n                                            keyboardInputRef.current = value;\n                                            caretPositionRef.current = caret;\n                                            if (keyboardRef.current) {\n                                                keyboardRef.current.setInput(value);\n                                                keyboardRef.current.setCaretPosition(caret);\n                                            }\n                                        },\n                                        onClick: (e)=>{\n                                            var _keyboardRef_current;\n                                            const caret = e.target.selectionStart;\n                                            caretPositionRef.current = caret;\n                                            (_keyboardRef_current = keyboardRef.current) === null || _keyboardRef_current === void 0 ? void 0 : _keyboardRef_current.setCaretPosition(caret);\n                                        },\n                                        onKeyUp: (e)=>{\n                                            var _keyboardRef_current;\n                                            const caret = e.target.selectionStart;\n                                            caretPositionRef.current = caret;\n                                            (_keyboardRef_current = keyboardRef.current) === null || _keyboardRef_current === void 0 ? void 0 : _keyboardRef_current.setCaretPosition(caret);\n                                        },\n                                        onFocus: ()=>{\n                                            setShowKeyboard(true);\n                                            if (chatContainerRef.current) {\n                                                lastScrollTopRef.current = chatContainerRef.current.scrollTop;\n                                            }\n                                        },\n                                        onBlur: (e)=>{\n                                            var _e_relatedTarget, _e_relatedTarget1, _e_relatedTarget2, _e_relatedTarget3;\n                                            const isKeyboardClick = (_e_relatedTarget = e.relatedTarget) === null || _e_relatedTarget === void 0 ? void 0 : _e_relatedTarget.closest(\".simple-keyboard\");\n                                            const isInputClick = (_e_relatedTarget1 = e.relatedTarget) === null || _e_relatedTarget1 === void 0 ? void 0 : _e_relatedTarget1.closest('input[placeholder*=\"Ask\"]');\n                                            const isSidebarClick = (_e_relatedTarget2 = e.relatedTarget) === null || _e_relatedTarget2 === void 0 ? void 0 : _e_relatedTarget2.closest(\".fixed.bg-\\\\[\\\\#aa3636\\\\]\");\n                                            const isSidebarToggleClick = (_e_relatedTarget3 = e.relatedTarget) === null || _e_relatedTarget3 === void 0 ? void 0 : _e_relatedTarget3.closest(\"button.fixed.bg-\\\\[\\\\#aa3636\\\\]\");\n                                            if (!isKeyboardClick && !isInputClick && !isSidebarClick && !isSidebarToggleClick) {\n                                                setTimeout(()=>{\n                                                    setShowKeyboard(false);\n                                                }, 100);\n                                            }\n                                        },\n                                        placeholder: \"Ask \".concat(modelKey.toUpperCase(), \"...\"),\n                                        className: \"w-full py-3 px-5 rounded-full bg-white/95 outline-none border border-gray-300 shadow-sm text-sm focus:border-[#aa3636] focus:ring-1 focus:ring-[#aa3636] transition\",\n                                        disabled: sending\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 874,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        type: \"submit\",\n                                        disabled: sending || !input.trim(),\n                                        className: \"bg-[#aa3636] text-white px-5 py-3 rounded-full text-sm shadow\",\n                                        children: \"Send\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 934,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 859,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                        lineNumber: 735,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 671,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n        lineNumber: 407,\n        columnNumber: 5\n    }, this);\n}\n_s(ChatPage, \"dGzzA4ZMXwzwLmdHEEiabdWe960=\", false, function() {\n    return [\n        next_router__WEBPACK_IMPORTED_MODULE_4__.useRouter\n    ];\n});\n_c1 = ChatPage;\nvar _c, _c1;\n$RefreshReg$(_c, \"SimpleMarkdownRenderer\");\n$RefreshReg$(_c1, \"ChatPage\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FsMEJ3QmU7O1FBQ1BsRCxrREFBU0E7OztNQURGa0QiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcS2FpXFxEb2N1bWVudHNcXFVuaXF1ZXJ5XFxmcm9udGVuZFxccGFnZXNcXGNoYXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlLCB1c2VDYWxsYmFjayB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgUVJDb2RlQ2FudmFzIH0gZnJvbSBcInFyY29kZS5yZWFjdFwiO1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSBcIm5leHQvcm91dGVyXCI7XG5pbXBvcnQgeyBhdXRoIH0gZnJvbSBcIi4uL2ZpcmViYXNlL2NsaWVudEFwcFwiO1xuaW1wb3J0IHsgb25BdXRoU3RhdGVDaGFuZ2VkLCBzaWduT3V0IH0gZnJvbSBcImZpcmViYXNlL2F1dGhcIjtcbmltcG9ydCB0b2FzdCBmcm9tIFwicmVhY3QtaG90LXRvYXN0XCI7XG5pbXBvcnQge1xuICBnZXRDb252ZXJzYXRpb24sXG4gIGFwcGVuZE1lc3NhZ2UsXG4gIHNldENvbnZlcnNhdGlvbixcbiAgZ2V0VXNlclByb2ZpbGUsXG59IGZyb20gXCIuLi9saWIvZmlyZXN0b3JlSGVscGVyc1wiO1xuXG4vLyBJTVBPUlQgVklSVFVBTCBLRVlCT0FSRFxuaW1wb3J0IEtleWJvYXJkIGZyb20gXCJyZWFjdC1zaW1wbGUta2V5Ym9hcmRcIjtcbmltcG9ydCBcInJlYWN0LXNpbXBsZS1rZXlib2FyZC9idWlsZC9jc3MvaW5kZXguY3NzXCI7XG5cbi8vIOKchSBGSVg6IERlZmluZSBRV0VSVFkga2V5Ym9hcmQgbGF5b3V0XG5jb25zdCBsYXlvdXQgPSB7XG4gIHF3ZXJ0eToge1xuICAgIGRlZmF1bHQ6IFtcbiAgICAgIFwiMCAxIDIgMyA0IDUgNiA3IDggOVwiLFxuICAgICAgXCJxIHcgZSByIHQgeSB1IGkgbyBwIHtiYWNrc3BhY2V9XCIsXG4gICAgICBcImEgcyBkIGYgZyBoIGogayBsIHtlbnRlcn1cIixcbiAgICAgIFwie3NoaWZ0fSB6IHggYyB2IGIgbiBtXCIsXG4gICAgICBcIntAfSB7JX0gez99IHtzcGFjZX0geyx9IHsufVwiLFxuICAgIF0sXG4gICAgc2hpZnQ6IFtcbiAgICAgIFwiMCAxIDIgMyA0IDUgNiA3IDggOVwiLFxuICAgICAgXCJRIFcgRSBSIFQgWSBVIEkgTyBQIHtiYWNrc3BhY2V9XCIsXG4gICAgICBcIkEgUyBEIEYgRyBIIEogSyBMIHtlbnRlcn1cIixcbiAgICAgIFwie3NoaWZ0fSBaIFggQyBWIEIgTiBNXCIsXG4gICAgICBcIntAfSB7JX0gez99IHtzcGFjZX0geyx9IHsufVwiLFxuICAgIF0sXG4gIH0sXG59O1xuXG4vLyBTaW1wbGUgbWFya2Rvd24gcmVuZGVyZXIgd2l0aG91dCBleHRlcm5hbCBkZXBlbmRlbmNpZXNcbmZ1bmN0aW9uIFNpbXBsZU1hcmtkb3duUmVuZGVyZXIoeyB0ZXh0IH0pIHtcbiAgaWYgKCF0ZXh0KSByZXR1cm4gbnVsbDtcblxuICBjb25zdCBsaW5lcyA9IHRleHQuc3BsaXQoXCJcXG5cIik7XG4gIHJldHVybiBsaW5lcy5tYXAoKGxpbmUsIGluZGV4KSA9PiB7XG4gICAgaWYgKGxpbmUudHJpbSgpID09PSBcIlwiKSByZXR1cm4gPGJyIGtleT17aW5kZXh9IC8+O1xuXG4gICAgbGV0IGNvbnRlbnQgPSBsaW5lO1xuICAgIGNvbnN0IGJvbGRSZWdleCA9IC9cXCpcXCooLio/KVxcKlxcKi9nO1xuICAgIGNvbnN0IHBhcnRzID0gW107XG4gICAgbGV0IGxhc3RJbmRleCA9IDA7XG4gICAgbGV0IG1hdGNoO1xuXG4gICAgd2hpbGUgKChtYXRjaCA9IGJvbGRSZWdleC5leGVjKGNvbnRlbnQpKSAhPT0gbnVsbCkge1xuICAgICAgaWYgKG1hdGNoLmluZGV4ID4gbGFzdEluZGV4KSB7XG4gICAgICAgIHBhcnRzLnB1c2goXG4gICAgICAgICAgPHNwYW4ga2V5PXtgJHtpbmRleH0tJHtsYXN0SW5kZXh9YH0+XG4gICAgICAgICAgICB7Y29udGVudC5zdWJzdHJpbmcobGFzdEluZGV4LCBtYXRjaC5pbmRleCl9XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcGFydHMucHVzaChcbiAgICAgICAgPHN0cm9uZyBrZXk9e2Ake2luZGV4fS1ib2xkLSR7bWF0Y2guaW5kZXh9YH0+e21hdGNoWzFdfTwvc3Ryb25nPlxuICAgICAgKTtcbiAgICAgIGxhc3RJbmRleCA9IG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoO1xuICAgIH1cblxuICAgIGlmIChsYXN0SW5kZXggPCBjb250ZW50Lmxlbmd0aCkge1xuICAgICAgcGFydHMucHVzaChcbiAgICAgICAgPHNwYW4ga2V5PXtgJHtpbmRleH0tcmVtYWluaW5nYH0+e2NvbnRlbnQuc3Vic3RyaW5nKGxhc3RJbmRleCl9PC9zcGFuPlxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAocGFydHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBwYXJ0cy5wdXNoKDxzcGFuIGtleT17YCR7aW5kZXh9LXBsYWluYH0+e2NvbnRlbnR9PC9zcGFuPik7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYga2V5PXtpbmRleH0gY2xhc3NOYW1lPVwibWItMSBsYXN0Om1iLTBcIj5cbiAgICAgICAge3BhcnRzfVxuICAgICAgICB7aW5kZXggPCBsaW5lcy5sZW5ndGggLSAxICYmIDxiciAvPn1cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRBSVJlc3BvbnNlKHRleHQpIHtcbiAgaWYgKCF0ZXh0KSByZXR1cm4gXCJcIjtcbiAgbGV0IGNsZWFuZWQgPSB0ZXh0LnRyaW0oKTtcblxuICBpZiAoY2xlYW5lZC5zdGFydHNXaXRoKFwie1wiKSAmJiBjbGVhbmVkLmVuZHNXaXRoKFwifVwiKSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBqc29uID0gSlNPTi5wYXJzZShjbGVhbmVkKTtcbiAgICAgIGNsZWFuZWQgPVxuICAgICAgICBqc29uLmdlbmVyYXRlZF90ZXh0IHx8XG4gICAgICAgIGpzb24ucmVzcG9uc2UgfHxcbiAgICAgICAganNvbi5hbnN3ZXIgfHxcbiAgICAgICAganNvbi5vdXRwdXQgfHxcbiAgICAgICAganNvbi50ZXh0IHx8XG4gICAgICAgIGpzb24ubWVzc2FnZSB8fFxuICAgICAgICBKU09OLnN0cmluZ2lmeShqc29uKTtcbiAgICB9IGNhdGNoIHt9XG4gIH1cblxuICBjbGVhbmVkID0gY2xlYW5lZC5yZXBsYWNlKC9eXCJ8XCIkL2csIFwiXCIpO1xuICBjbGVhbmVkID0gY2xlYW5lZC5yZXBsYWNlKC9cXFxcbi9nLCBcIlxcblwiKTtcbiAgY2xlYW5lZCA9IGNsZWFuZWQucmVwbGFjZSgvXFxcXFwiL2csICdcIicpO1xuICBjbGVhbmVkID0gY2xlYW5lZC5yZXBsYWNlKC9cXFxcdC9nLCBcIiAgXCIpO1xuXG4gIHJldHVybiBjbGVhbmVkO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDaGF0UGFnZSgpIHtcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG4gIGNvbnN0IHsgbW9kZWwsIHB1YmxpYzogaXNQdWJsaWMgfSA9IHJvdXRlci5xdWVyeTtcblxuICBjb25zdCBtb2RlbENvbmZpZ3MgPSB7XG4gICAgZWNlOiB7IHVybDogXCJodHRwczovL3RpeXVwaS1lY2UtZWNlLWFwaS5oZi5zcGFjZS9nZW5lcmF0ZVwiLCB0b2tlbjogXCJcIiB9LFxuICAgIG5hdjogeyB1cmw6IFwiaHR0cHM6Ly90aXl1cGktZWNlLXNvbWktY2FsaS5oZi5zcGFjZS9jaGF0XCIsIHRva2VuOiBcIlwiIH0sXG4gICAgaW5mbzogeyB1cmw6IFwiaHR0cHM6Ly90aXl1cGktZWNlLWhpdHVwaS5oZi5zcGFjZS9jaGF0XCIsIHRva2VuOiBcIlwiIH0sXG4gIH07XG5cbiAgY29uc3QgbW9kZWxLZXkgPSBtb2RlbCB8fCBcImVjZVwiO1xuICBjb25zdCBzZWxlY3RlZE1vZGVsID0gbW9kZWxDb25maWdzW21vZGVsS2V5XSB8fCB7fTtcbiAgY29uc3QgaXNQdWJsaWNBY2Nlc3MgPSBpc1B1YmxpYyA9PT0gXCJ0cnVlXCI7XG5cbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFt1c2VyLCBzZXRVc2VyXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbbmlja25hbWUsIHNldE5pY2tuYW1lXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbcmVhbE5hbWUsIHNldFJlYWxOYW1lXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbbWVzc2FnZXMsIHNldE1lc3NhZ2VzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2lucHV0LCBzZXRJbnB1dF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3NlbmRpbmcsIHNldFNlbmRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hpZnRBY3RpdmUsIHNldFNoaWZ0QWN0aXZlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgZW5kUmVmID0gdXNlUmVmKCk7XG5cbiAgY29uc3QgW3NpZGViYXJPcGVuLCBzZXRTaWRlYmFyT3Blbl0gPSB1c2VTdGF0ZSh0cnVlKTtcblxuICAvLyBWSVJUVUFMIEtFWUJPQVJEIFNUQVRFXG4gIGNvbnN0IFtzaG93S2V5Ym9hcmQsIHNldFNob3dLZXlib2FyZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IGtleWJvYXJkUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBsYXN0U2Nyb2xsVG9wUmVmID0gdXNlUmVmKDApO1xuICBjb25zdCBrZXlib2FyZFNjcm9sbFRocmVzaG9sZCA9IDIwO1xuICBjb25zdCBjaGF0Q29udGFpbmVyUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBpbnB1dEJhclJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3Qga2V5Ym9hcmRJbnB1dFJlZiA9IHVzZVJlZihcIlwiKTtcbiAgY29uc3QgaW5wdXRSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGNhcmV0UG9zaXRpb25SZWYgPSB1c2VSZWYoMCk7XG5cbiAgLy8g4pyFIFNIQVJFIC8gUVIgU1RBVEUgKGFkZGVkKVxuICBjb25zdCBbc2hhcmVJZCwgc2V0U2hhcmVJZF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW3NoYXJlT3Blbiwgc2V0U2hhcmVPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICAvKiBBVVRIICovXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgdW5zdWIgPSBvbkF1dGhTdGF0ZUNoYW5nZWQoYXV0aCwgYXN5bmMgKHUpID0+IHtcbiAgICAgIGlmIChpc1B1YmxpY0FjY2VzcyAmJiAhdSkge1xuICAgICAgICBzZXRVc2VyKG51bGwpO1xuICAgICAgICBzZXROaWNrbmFtZShcIkd1ZXN0XCIpO1xuICAgICAgICBzZXRSZWFsTmFtZShcIkd1ZXN0XCIpO1xuICAgICAgICBzZXRNZXNzYWdlcyhbXSk7XG4gICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNQdWJsaWNBY2Nlc3MgJiYgIXUpIHtcbiAgICAgICAgcm91dGVyLnJlcGxhY2UoXCIvbG9naW5cIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc2V0VXNlcih1KTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHUpIHtcbiAgICAgICAgICBjb25zdCBwcm9maWxlID0gYXdhaXQgZ2V0VXNlclByb2ZpbGUodS51aWQpO1xuICAgICAgICAgIGNvbnN0IG5hbWUgPVxuICAgICAgICAgICAgcHJvZmlsZT8ubmFtZSB8fFxuICAgICAgICAgICAgdS5kaXNwbGF5TmFtZSB8fFxuICAgICAgICAgICAgcHJvZmlsZT8ubmlja25hbWUgfHxcbiAgICAgICAgICAgIHUuZW1haWw/LnNwbGl0KFwiQFwiKVswXSB8fFxuICAgICAgICAgICAgXCJVc2VyXCI7XG4gICAgICAgICAgc2V0UmVhbE5hbWUobmFtZSk7XG5cbiAgICAgICAgICBjb25zdCBuaWNrID1cbiAgICAgICAgICAgIHByb2ZpbGU/Lm5pY2tuYW1lIHx8XG4gICAgICAgICAgICBwcm9maWxlPy5uYW1lIHx8XG4gICAgICAgICAgICB1LmRpc3BsYXlOYW1lIHx8XG4gICAgICAgICAgICB1LmVtYWlsPy5zcGxpdChcIkBcIilbMF0gfHxcbiAgICAgICAgICAgIFwiVXNlclwiO1xuICAgICAgICAgIHNldE5pY2tuYW1lKG5pY2spO1xuXG4gICAgICAgICAgY29uc3QgY29udiA9IGF3YWl0IGdldENvbnZlcnNhdGlvbih1LnVpZCwgbW9kZWxLZXkpO1xuICAgICAgICAgIHNldE1lc3NhZ2VzKGNvbnY/Lm1lc3NhZ2VzIHx8IFtdKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCB7fVxuXG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIHJldHVybiAoKSA9PiB1bnN1YigpO1xuICB9LCBbcm91dGVyLCBtb2RlbEtleSwgaXNQdWJsaWNBY2Nlc3NdKTtcblxuICAvLyBHZXQgcmVmZXJlbmNlcyBvbiBtb3VudFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNoYXRDb250YWluZXJSZWYuY3VycmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5hYnNvbHV0ZS5pbnNldC0wLnB4LTYub3ZlcmZsb3cteS1hdXRvLmZsZXguZmxleC1jb2xcIlxuICAgICk7XG4gICAgaW5wdXRCYXJSZWYuY3VycmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtLmZpeGVkLmxlZnQtMC56LTUwXCIpO1xuICB9LCBbXSk7XG5cbiAgLy8gSGFuZGxlIHNjcm9sbCB0byBhdXRvLWhpZGUga2V5Ym9hcmRcbiAgY29uc3QgaGFuZGxlU2Nyb2xsID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmICghc2hvd0tleWJvYXJkKSByZXR1cm47XG5cbiAgICBjb25zdCBjaGF0Q29udGFpbmVyID0gY2hhdENvbnRhaW5lclJlZi5jdXJyZW50O1xuICAgIGlmICghY2hhdENvbnRhaW5lcikgcmV0dXJuO1xuXG4gICAgY29uc3QgY3VycmVudFNjcm9sbFRvcCA9IGNoYXRDb250YWluZXIuc2Nyb2xsVG9wO1xuICAgIGNvbnN0IHNjcm9sbERpZmYgPSBNYXRoLmFicyhjdXJyZW50U2Nyb2xsVG9wIC0gbGFzdFNjcm9sbFRvcFJlZi5jdXJyZW50KTtcblxuICAgIGlmIChzY3JvbGxEaWZmID4ga2V5Ym9hcmRTY3JvbGxUaHJlc2hvbGQpIHtcbiAgICAgIHNldFNob3dLZXlib2FyZChmYWxzZSk7XG4gICAgICBjb25zdCBpbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtwbGFjZWhvbGRlcio9XCJBc2tcIl0nKTtcbiAgICAgIGlmIChpbnB1dEVsZW1lbnQpIGlucHV0RWxlbWVudC5ibHVyKCk7XG4gICAgfVxuXG4gICAgbGFzdFNjcm9sbFRvcFJlZi5jdXJyZW50ID0gY3VycmVudFNjcm9sbFRvcDtcbiAgfSwgW3Nob3dLZXlib2FyZF0pO1xuXG4gIC8vIEF0dGFjaCBzY3JvbGwgZXZlbnQgbGlzdGVuZXJcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBjaGF0Q29udGFpbmVyID0gY2hhdENvbnRhaW5lclJlZi5jdXJyZW50O1xuICAgIGlmICghY2hhdENvbnRhaW5lcikgcmV0dXJuO1xuXG4gICAgY2hhdENvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGhhbmRsZVNjcm9sbCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNoYXRDb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBoYW5kbGVTY3JvbGwpO1xuICAgIH07XG4gIH0sIFtoYW5kbGVTY3JvbGxdKTtcblxuICAvLyBSZXNldCBzY3JvbGwgdHJhY2tpbmcgd2hlbiBrZXlib2FyZCBzaG93c1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzaG93S2V5Ym9hcmQgJiYgY2hhdENvbnRhaW5lclJlZi5jdXJyZW50KSB7XG4gICAgICBsYXN0U2Nyb2xsVG9wUmVmLmN1cnJlbnQgPSBjaGF0Q29udGFpbmVyUmVmLmN1cnJlbnQuc2Nyb2xsVG9wO1xuICAgIH1cbiAgfSwgW3Nob3dLZXlib2FyZF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZW5kUmVmLmN1cnJlbnQ/LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6IFwic21vb3RoXCIgfSk7XG4gIH0sIFttZXNzYWdlc10pO1xuXG4gIC8qIFNFTkQgTUVTU0FHRSAqL1xuICBhc3luYyBmdW5jdGlvbiBoYW5kbGVTZW5kKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgdHJpbW1lZCA9IGlucHV0LnRyaW0oKTtcbiAgICBpZiAoIXRyaW1tZWQpIHJldHVybjtcblxuICAgIGNvbnN0IHVzZXJNc2cgPSB7IHJvbGU6IFwidXNlclwiLCBjb250ZW50OiB0cmltbWVkIH07XG4gICAgY29uc3QgdXBkYXRlZE1lc3NhZ2VzID0gWy4uLm1lc3NhZ2VzLCB1c2VyTXNnXTtcbiAgICBzZXRNZXNzYWdlcyh1cGRhdGVkTWVzc2FnZXMpO1xuICAgIHNldElucHV0KFwiXCIpO1xuICAgIHNldFNlbmRpbmcodHJ1ZSk7XG4gICAgc2V0U2hvd0tleWJvYXJkKGZhbHNlKTtcbiAgICBrZXlib2FyZElucHV0UmVmLmN1cnJlbnQgPSBcIlwiO1xuXG4gICAgdG9hc3QubG9hZGluZyhcIlNlbmRpbmcuLi5cIiwgeyBpZDogXCJzZW5kXCIgfSk7XG5cbiAgICB0cnkge1xuICAgICAgaWYgKHVzZXIgJiYgIWlzUHVibGljQWNjZXNzKVxuICAgICAgICBhd2FpdCBhcHBlbmRNZXNzYWdlKHVzZXIudWlkLCBtb2RlbEtleSwgdXNlck1zZyk7XG5cbiAgICAgIGlmICghc2VsZWN0ZWRNb2RlbC51cmwpIHtcbiAgICAgICAgY29uc3QgZXJyb3JNc2cgPSB7IHJvbGU6IFwiYXNzaXN0YW50XCIsIGNvbnRlbnQ6IFwiTW9kZWwgdW5hdmFpbGFibGUuXCIgfTtcbiAgICAgICAgc2V0TWVzc2FnZXMoWy4uLnVwZGF0ZWRNZXNzYWdlcywgZXJyb3JNc2ddKTtcbiAgICAgICAgaWYgKHVzZXIgJiYgIWlzUHVibGljQWNjZXNzKVxuICAgICAgICAgIGF3YWl0IGFwcGVuZE1lc3NhZ2UodXNlci51aWQsIG1vZGVsS2V5LCBlcnJvck1zZyk7XG4gICAgICAgIHRvYXN0LmRpc21pc3MoXCJzZW5kXCIpO1xuICAgICAgICBzZXRTZW5kaW5nKGZhbHNlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVxdWVzdEZvcm1hdHMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBpbnB1dHM6IHRyaW1tZWQsXG4gICAgICAgICAgcGFyYW1ldGVyczogeyBtYXhfbmV3X3Rva2VuczogNTAwLCB0ZW1wZXJhdHVyZTogMC43IH0sXG4gICAgICAgIH0sXG4gICAgICAgIHsgcXVlcnk6IHRyaW1tZWQsIG1heF9uZXdfdG9rZW5zOiA1MDAsIHRlbXBlcmF0dXJlOiAwLjcgfSxcbiAgICAgICAgeyBpbnB1dDogdHJpbW1lZCwgbWF4X2xlbmd0aDogNTAwLCB0ZW1wZXJhdHVyZTogMC43IH0sXG4gICAgICBdO1xuXG4gICAgICBsZXQgcmVwbHkgPSBcIlwiO1xuICAgICAgbGV0IGxhc3RFcnJvciA9IG51bGw7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVxdWVzdEZvcm1hdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXF1ZXN0T3B0aW9ucy5ib2R5ID0gSlNPTi5zdHJpbmdpZnkocmVxdWVzdEZvcm1hdHNbaV0pO1xuICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHNlbGVjdGVkTW9kZWwudXJsLCByZXF1ZXN0T3B0aW9ucyk7XG5cbiAgICAgICAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKGBIVFRQICR7cmVzLnN0YXR1c31gKTtcblxuICAgICAgICAgIGNvbnN0IHJhdyA9IGF3YWl0IHJlcy50ZXh0KCk7XG4gICAgICAgICAgcmVwbHkgPSBmb3JtYXRBSVJlc3BvbnNlKHJhdyk7XG5cbiAgICAgICAgICBpZiAocmVwbHkgJiYgcmVwbHkgIT09IFwie31cIikgYnJlYWs7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGxhc3RFcnJvciA9IGVycjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIXJlcGx5ICYmIGxhc3RFcnJvcikgdGhyb3cgbGFzdEVycm9yO1xuICAgICAgaWYgKCFyZXBseSkgdGhyb3cgbmV3IEVycm9yKFwiTm8gcmVzcG9uc2VcIik7XG5cbiAgICAgIHJlcGx5ID0gcmVwbHkudHJpbSgpO1xuICAgICAgY29uc3QgYWlNc2cgPSB7IHJvbGU6IFwiYXNzaXN0YW50XCIsIGNvbnRlbnQ6IHJlcGx5IH07XG4gICAgICBzZXRNZXNzYWdlcyhbLi4udXBkYXRlZE1lc3NhZ2VzLCBhaU1zZ10pO1xuXG4gICAgICBpZiAodXNlciAmJiAhaXNQdWJsaWNBY2Nlc3MpXG4gICAgICAgIGF3YWl0IGFwcGVuZE1lc3NhZ2UodXNlci51aWQsIG1vZGVsS2V5LCBhaU1zZyk7XG5cbiAgICAgIHRvYXN0LnN1Y2Nlc3MoXCJSZXBseSByZWNlaXZlZFwiLCB7IGlkOiBcInNlbmRcIiB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnN0IGVycm9yTXNnID0ge1xuICAgICAgICByb2xlOiBcImFzc2lzdGFudFwiLFxuICAgICAgICBjb250ZW50OiBgKipFcnJvcjoqKiAke2Vyci5tZXNzYWdlfWAsXG4gICAgICB9O1xuICAgICAgc2V0TWVzc2FnZXMoWy4uLm1lc3NhZ2VzLCB1c2VyTXNnLCBlcnJvck1zZ10pO1xuICAgICAgdG9hc3QuZXJyb3IoXCJTZW5kIGZhaWxlZFwiLCB7IGlkOiBcInNlbmRcIiB9KTtcbiAgICB9XG5cbiAgICBzZXRTZW5kaW5nKGZhbHNlKTtcbiAgfVxuXG4gIGFzeW5jIGZ1bmN0aW9uIGhhbmRsZU5ld0NoYXQoKSB7XG4gICAgaWYgKHVzZXIgJiYgIWlzUHVibGljQWNjZXNzKSBhd2FpdCBzZXRDb252ZXJzYXRpb24odXNlci51aWQsIG1vZGVsS2V5LCBbXSk7XG4gICAgc2V0TWVzc2FnZXMoW10pO1xuICAgIC8vIOKchSByZXNldCBzaGFyZSBzdGF0ZSB0b28gKGFkZGVkKVxuICAgIHNldFNoYXJlSWQobnVsbCk7XG4gICAgc2V0U2hhcmVPcGVuKGZhbHNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZVNpZ25PdXQoKSB7XG4gICAgc2lnbk91dChhdXRoKS50aGVuKCgpID0+IHJvdXRlci5wdXNoKFwiL2xvZ2luXCIpKTtcbiAgfVxuXG4gIC8vIE5FVzogSGFuZGxlIHNpZ24gaW4gcmVkaXJlY3RcbiAgZnVuY3Rpb24gaGFuZGxlU2lnbkluKCkge1xuICAgIHJvdXRlci5wdXNoKFwiL2xvZ2luXCIpO1xuICB9XG5cbiAgLy8g4pyFIEdlbmVyYXRlIFFSIChhZGRlZClcbiAgYXN5bmMgZnVuY3Rpb24gaGFuZGxlR2VuZXJhdGVRUigpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFtZXNzYWdlcyB8fCBtZXNzYWdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdG9hc3QuZXJyb3IoXCJObyBjb252ZXJzYXRpb24gdG8gc2hhcmUgeWV0LlwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0b2FzdC5sb2FkaW5nKFwiR2VuZXJhdGluZyBRUi4uLlwiLCB7IGlkOiBcInNoYXJlXCIgfSk7XG5cbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFwiL2FwaS9zaGFyZVwiLCB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIG1vZGVsS2V5LFxuICAgICAgICAgIGNyZWF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgICAgICBtZXNzYWdlczogbWVzc2FnZXMubWFwKChtKSA9PiAoeyByb2xlOiBtLnJvbGUsIGNvbnRlbnQ6IG0uY29udGVudCB9KSksXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEhUVFAgJHtyZXMuc3RhdHVzfWApO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICBpZiAoIWRhdGE/LmlkKSB0aHJvdyBuZXcgRXJyb3IoXCJObyBzaGFyZSBpZCByZXR1cm5lZC5cIik7XG5cbiAgICAgIHNldFNoYXJlSWQoZGF0YS5pZCk7XG4gICAgICBzZXRTaGFyZU9wZW4odHJ1ZSk7XG5cbiAgICAgIHRvYXN0LnN1Y2Nlc3MoXCJRUiByZWFkeSFcIiwgeyBpZDogXCJzaGFyZVwiIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRvYXN0LmVycm9yKGBGYWlsZWQ6ICR7ZS5tZXNzYWdlfWAsIHsgaWQ6IFwic2hhcmVcIiB9KTtcbiAgICB9XG4gIH1cblxuICBpZiAobG9hZGluZylcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLXNjcmVlbiBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXhsXCI+XG4gICAgICAgIExvYWRpbmfigKZcbiAgICAgIDwvZGl2PlxuICAgICk7XG5cbiAgY29uc3QgaGVhZGVySGVpZ2h0ID0gNDg7XG4gIGNvbnN0IGZvb3RlckhlaWdodCA9IDMyO1xuICBjb25zdCBzaWRlYmFyV2lkdGggPSAyMjQ7XG4gIGNvbnN0IGtleWJvYXJkSGVpZ2h0ID0gMjgwO1xuICBjb25zdCBpbnB1dEJhckhlaWdodCA9IDYwO1xuICBjb25zdCBrZXlib2FyZFBhZGRpbmcgPSA0OyAvLyBSRURVQ0VEIEZST00gOCBUTyA0XG5cbiAgY29uc3Qgc2hhcmVVcmwgPVxuICAgIHNoYXJlSWQgJiYgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIlxuICAgICAgPyBgJHt3aW5kb3cubG9jYXRpb24ub3JpZ2lufS9zaGFyZS8ke3NoYXJlSWR9YFxuICAgICAgOiBcIlwiO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgY2xhc3NOYW1lPVwicmVsYXRpdmUgaC1zY3JlZW4gdy1zY3JlZW4gb3ZlcmZsb3ctaGlkZGVuIGJnLWNvdmVyIGJnLWNlbnRlclwiXG4gICAgICBzdHlsZT17eyBiYWNrZ3JvdW5kSW1hZ2U6IFwidXJsKCcvYmcucG5nJylcIiB9fVxuICAgID5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQtMCBiZy1bcmdiYSgyNDUsMjQ1LDI0NSwwLjE4KV0gYmFja2Ryb3AtYmx1ci1zbVwiIC8+XG5cbiAgICAgIHsvKiBIRUFERVIgKi99XG4gICAgICA8aGVhZGVyXG4gICAgICAgIGNsYXNzTmFtZT1cImZpeGVkIHRvcC0wIGxlZnQtMCByaWdodC0wIHotNTAgYmctYmxhY2svMzAgdGV4dC13aGl0ZSBweS0xLjUgcHgtNCBmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgc2hhZG93LXNtXCJcbiAgICAgICAgc3R5bGU9e3sgaGVpZ2h0OiBgJHtoZWFkZXJIZWlnaHR9cHhgIH19XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICA8aW1nIHNyYz1cIi90dXBsb2dvLnBuZ1wiIGFsdD1cIlRVUCBMb2dvXCIgY2xhc3NOYW1lPVwiaC03IHctN1wiIC8+XG4gICAgICAgICAgPGgxIGNsYXNzTmFtZT1cInRleHQteHMgbWQ6dGV4dC1zbSBmb250LWJvbGRcIj5cbiAgICAgICAgICAgIFRFQ0hOT0xPR0lDQUwgVU5JVkVSU0lUWSBPRiBUSEUgUEhJTElQUElORVNcbiAgICAgICAgICA8L2gxPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogU2lnbiBJbi9PdXQgc3RheXMgaW4gaGVhZGVyICh1bmNoYW5nZWQpICovfVxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgb25DbGljaz17dXNlciA/IGhhbmRsZVNpZ25PdXQgOiBoYW5kbGVTaWduSW59XG4gICAgICAgICAgY2xhc3NOYW1lPVwiYmctWyNmYWEwMjldIHRleHQtYmxhY2sgZm9udC1zZW1pYm9sZCBweC01IHB5LTIgcm91bmRlZC1mdWxsIHNoYWRvd1wiXG4gICAgICAgID5cbiAgICAgICAgICB7dXNlciA/IFwiU2lnbiBPdXRcIiA6IFwiU2lnbiBJblwifVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvaGVhZGVyPlxuXG4gICAgICB7LyogRk9PVEVSICovfVxuICAgICAgPGZvb3RlclxuICAgICAgICBjbGFzc05hbWU9XCJmaXhlZCBib3R0b20tMCBsZWZ0LTAgcmlnaHQtMCB6LTUwIGJnLWJsYWNrLzMwIHRleHQtY2VudGVyIHB5LTEgdGV4dC13aGl0ZSB0ZXh0LXhzXCJcbiAgICAgICAgc3R5bGU9e3sgaGVpZ2h0OiBgJHtmb290ZXJIZWlnaHR9cHhgIH19XG4gICAgICA+XG4gICAgICAgIERlc2lnbmVkIGJ5OiBFbGVjdHJvbmljcyBFbmdpbmVlcmluZyBEZXBhcnRtZW50XG4gICAgICA8L2Zvb3Rlcj5cblxuICAgICAgey8qIFNFUEFSQVRFIEtFWUJPQVJEIENPTlRBSU5FUiAtIEFESlVTVEVEIFBPU0lUSU9OICovfVxuICAgICAge3Nob3dLZXlib2FyZCAmJiAoXG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzc05hbWU9XCJmaXhlZCBsZWZ0LTAgcmlnaHQtMCBiZy13aGl0ZSBzaGFkb3ctMnhsIGJvcmRlci10IGJvcmRlci1ncmF5LTMwMFwiXG4gICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgIGJvdHRvbTogYCR7Zm9vdGVySGVpZ2h0ICsgNH1weGAsXG4gICAgICAgICAgICBsZWZ0OiBzaWRlYmFyT3BlbiA/IGAke3NpZGViYXJXaWR0aH1weGAgOiBcIjBweFwiLFxuICAgICAgICAgICAgaGVpZ2h0OiBgJHtrZXlib2FyZEhlaWdodH1weGAsXG4gICAgICAgICAgICB6SW5kZXg6IDU1LFxuICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1lbmQgcC0xIGJnLWdyYXktMTAwXCI+XG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRTaG93S2V5Ym9hcmQoZmFsc2UpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICAgICAgICAnaW5wdXRbcGxhY2Vob2xkZXIqPVwiQXNrXCJdJ1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0RWxlbWVudCkgaW5wdXRFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtZ3JheS02MDAgaG92ZXI6dGV4dC1ncmF5LTgwMCBweC0yIHB5LTEgcm91bmRlZCB0ZXh0LXhzXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgQ2xvc2UgS2V5Ym9hcmRcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgb25LZXlQcmVzcz17KGJ1dHRvbikgPT4ge1xuICBsZXQgY3VycmVudFRleHQgPSBpbnB1dDtcbiAgbGV0IGNhcmV0UG9zID0gY2FyZXRQb3NpdGlvblJlZi5jdXJyZW50O1xuXG4gIGNvbnN0IHVwZGF0ZVRleHQgPSAobmV3VGV4dCwgbmV3Q2FyZXRQb3MpID0+IHtcbiAgICBzZXRJbnB1dChuZXdUZXh0KTtcbiAgICBrZXlib2FyZElucHV0UmVmLmN1cnJlbnQgPSBuZXdUZXh0O1xuICAgIGNhcmV0UG9zaXRpb25SZWYuY3VycmVudCA9IG5ld0NhcmV0UG9zO1xuXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIGlmIChpbnB1dFJlZi5jdXJyZW50KSB7XG4gICAgICAgIGlucHV0UmVmLmN1cnJlbnQuZm9jdXMoKTtcbiAgICAgICAgaW5wdXRSZWYuY3VycmVudC5zZXRTZWxlY3Rpb25SYW5nZShuZXdDYXJldFBvcywgbmV3Q2FyZXRQb3MpO1xuICAgICAgfVxuICAgICAga2V5Ym9hcmRSZWYuY3VycmVudD8uc2V0SW5wdXQobmV3VGV4dCk7XG4gICAgICBrZXlib2FyZFJlZi5jdXJyZW50Py5zZXRDYXJldFBvc2l0aW9uKG5ld0NhcmV0UG9zKTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyA9PT09PSBDT05UUk9MIEtFWVMgPT09PT1cblxuICBpZiAoYnV0dG9uID09PSBcIntzaGlmdH1cIiB8fCBidXR0b24gPT09IFwie2xvY2t9XCIpIHtcbiAgICBjb25zdCBuZXdTaGlmdFN0YXRlID0gIXNoaWZ0QWN0aXZlO1xuICAgIHNldFNoaWZ0QWN0aXZlKG5ld1NoaWZ0U3RhdGUpO1xuICAgIGtleWJvYXJkUmVmLmN1cnJlbnQ/LnNldE9wdGlvbnMoe1xuICAgICAgbGF5b3V0TmFtZTogbmV3U2hpZnRTdGF0ZSA/IFwic2hpZnRcIiA6IFwiZGVmYXVsdFwiLFxuICAgIH0pO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChidXR0b24gPT09IFwie2VudGVyfVwiKSB7XG4gICAgaGFuZGxlU2VuZCh7IHByZXZlbnREZWZhdWx0OiAoKSA9PiB7fSB9KTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoYnV0dG9uID09PSBcIntiYWNrc3BhY2V9XCIpIHtcbiAgICBpZiAoY2FyZXRQb3MgPiAwKSB7XG4gICAgICBjb25zdCBuZXdUZXh0ID1cbiAgICAgICAgY3VycmVudFRleHQuc2xpY2UoMCwgY2FyZXRQb3MgLSAxKSArXG4gICAgICAgIGN1cnJlbnRUZXh0LnNsaWNlKGNhcmV0UG9zKTtcblxuICAgICAgdXBkYXRlVGV4dChuZXdUZXh0LCBjYXJldFBvcyAtIDEpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoYnV0dG9uID09PSBcIntzcGFjZX1cIikge1xuICAgIGNvbnN0IG5ld1RleHQgPVxuICAgICAgY3VycmVudFRleHQuc2xpY2UoMCwgY2FyZXRQb3MpICtcbiAgICAgIFwiIFwiICtcbiAgICAgIGN1cnJlbnRUZXh0LnNsaWNlKGNhcmV0UG9zKTtcblxuICAgIHVwZGF0ZVRleHQobmV3VGV4dCwgY2FyZXRQb3MgKyAxKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyA9PT09PSBJR05PUkUgVU5LTk9XTiBDT05UUk9MIEJVVFRPTlMgPT09PT1cbiAgaWYgKGJ1dHRvbi5zdGFydHNXaXRoKFwie1wiKSAmJiBidXR0b24uZW5kc1dpdGgoXCJ9XCIpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gPT09PT0gSU5TRVJUIEFOWSBDSEFSQUNURVIgKGxldHRlcnMsIG51bWJlcnMsIHN5bWJvbHMpID09PT09XG4gIGNvbnN0IG5ld1RleHQgPVxuICAgIGN1cnJlbnRUZXh0LnNsaWNlKDAsIGNhcmV0UG9zKSArXG4gICAgYnV0dG9uICtcbiAgICBjdXJyZW50VGV4dC5zbGljZShjYXJldFBvcyk7XG5cbiAgdXBkYXRlVGV4dChuZXdUZXh0LCBjYXJldFBvcyArIGJ1dHRvbi5sZW5ndGgpO1xufX1cblxuICAgICAgICAgIHsvKiB5b3VyIGV4aXN0aW5nIGtleWJvYXJkIHN0eWxlcyByZW1haW4gdW5jaGFuZ2VkICovfVxuICAgICAgICAgIDxzdHlsZSBqc3ggZ2xvYmFsPntgXG4gICAgICAgICAgICAuc2ltcGxlLWtleWJvYXJkIHtcbiAgICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGUgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgcGFkZGluZzogMTBweCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDMwcHgpICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3ggIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5oZy10aGVtZS1jdXN0b20ge1xuICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCUgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaGctYnV0dG9uIHtcbiAgICAgICAgICAgICAgaGVpZ2h0OiA0NXB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBmb250LXdlaWdodDogNTAwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCAzcHggcmdiYSgwLCAwLCAwLCAwLjE1KSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBtYXJnaW46IDNweCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXIgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXIgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMXMgZWFzZSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBtaW4td2lkdGg6IDAgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgZmxleDogMSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmhnLXJvdzpudGgtY2hpbGQoMSkgLmhnLWJ1dHRvbiB7XG4gICAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmOGY5ZmEgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgY29sb3I6ICMzMzMgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmhnLXJvdzpudGgtY2hpbGQoMilcbiAgICAgICAgICAgICAgLmhnLWJ1dHRvbjpub3QoLmhnLWJ1dHRvbi1iYWNrc3BhY2UpOm5vdCguaGctYnV0dG9uLWVudGVyKSxcbiAgICAgICAgICAgIC5oZy1yb3c6bnRoLWNoaWxkKDMpIC5oZy1idXR0b246bm90KC5oZy1idXR0b24tZW50ZXIpLFxuICAgICAgICAgICAgLmhnLXJvdzpudGgtY2hpbGQoNCkgLmhnLWJ1dHRvbjpub3QoLmhnLWJ1dHRvbi1zaGlmdCkge1xuICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjYWEzNjM2ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjOGEyYzJjICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaGctcm93Om50aC1jaGlsZCg1KSAuaGctYnV0dG9uIHtcbiAgICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZhYTAyOSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBjb2xvcjogYmxhY2sgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2Q4OGMyMCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBmb250LXdlaWdodDogYm9sZCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmhnLWJ1dHRvbi1zaGlmdCxcbiAgICAgICAgICAgIC5oZy1idXR0b24tYmFja3NwYWNlLFxuICAgICAgICAgICAgLmhnLWJ1dHRvbi1lbnRlciB7XG4gICAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmYWEwMjkgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgY29sb3I6IGJsYWNrICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkODhjMjAgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQgIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5oZy1idXR0b24tc3BhY2Uge1xuICAgICAgICAgICAgICBmbGV4LWdyb3c6IDMgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgbWF4LXdpZHRoOiBub25lICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaGctYnV0dG9uLWJhY2tzcGFjZSxcbiAgICAgICAgICAgIC5oZy1idXR0b24tZW50ZXIsXG4gICAgICAgICAgICAuaGctYnV0dG9uLXNoaWZ0IHtcbiAgICAgICAgICAgICAgbWluLXdpZHRoOiA3MHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGZsZXgtZ3JvdzogMC41ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaGctYnV0dG9uLVxcXFx7QFxcXFx9LFxuICAgICAgICAgICAgLmhnLWJ1dHRvbi1cXFxceyVcXFxcfSxcbiAgICAgICAgICAgIC5oZy1idXR0b24tXFxcXHtcXFxcP1xcXFx9LFxuICAgICAgICAgICAgLmhnLWJ1dHRvbi1cXFxce1xcXFwsXFxcXH0sXG4gICAgICAgICAgICAuaGctYnV0dG9uLVxcXFx7XFxcXC5cXFxcfSB7XG4gICAgICAgICAgICAgIG1pbi13aWR0aDogMzVweCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBmbGV4LWdyb3c6IDAuMyAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmhnLWJ1dHRvbjphY3RpdmUsXG4gICAgICAgICAgICAuaGctYnV0dG9uLmhnLWFjdGl2ZUJ0biB7XG4gICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgycHgpICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMXB4IDJweCByZ2JhKDAsIDAsIDAsIDAuMSkgIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5oZy1yb3c6bnRoLWNoaWxkKDIpXG4gICAgICAgICAgICAgIC5oZy1idXR0b246YWN0aXZlOm5vdCguaGctYnV0dG9uLWJhY2tzcGFjZSk6bm90KC5oZy1idXR0b24tZW50ZXIpLFxuICAgICAgICAgICAgLmhnLXJvdzpudGgtY2hpbGQoMykgLmhnLWJ1dHRvbjphY3RpdmU6bm90KC5oZy1idXR0b24tZW50ZXIpLFxuICAgICAgICAgICAgLmhnLXJvdzpudGgtY2hpbGQoNCkgLmhnLWJ1dHRvbjphY3RpdmU6bm90KC5oZy1idXR0b24tc2hpZnQpIHtcbiAgICAgICAgICAgICAgYmFja2dyb3VuZDogIzhhMmMyYyAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmhnLWJ1dHRvbi1zaGlmdDphY3RpdmUsXG4gICAgICAgICAgICAuaGctYnV0dG9uLWJhY2tzcGFjZTphY3RpdmUsXG4gICAgICAgICAgICAuaGctYnV0dG9uLWVudGVyOmFjdGl2ZSxcbiAgICAgICAgICAgIC5oZy1yb3c6bnRoLWNoaWxkKDUpIC5oZy1idXR0b246YWN0aXZlLFxuICAgICAgICAgICAgLmhnLWJ1dHRvbi1zaGlmdC5oZy1hY3RpdmVCdG4ge1xuICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZDg4YzIwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaGctcm93cyB7XG4gICAgICAgICAgICAgIGhlaWdodDogMTAwJSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW4gIWltcG9ydGFudDtcbiAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIHBhZGRpbmc6IDAgOHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaGctcm93IHtcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlciAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBmbGV4OiAxICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDQ4cHggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaGctYnV0dG9uLXN0YW5kYXJkIHtcbiAgICAgICAgICAgICAgbWluLXdpZHRoOiAzNXB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGZsZXg6IDEgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgbWF4LXdpZHRoOiA1MHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaGctcm93Omxhc3QtY2hpbGQge1xuICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaGctYnV0dG9uLWJhY2tzcGFjZSB7XG4gICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmhnLWJ1dHRvbi1lbnRlciB7XG4gICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLnNpbXBsZS1rZXlib2FyZC5oZy1sYXlvdXQtZGVmYXVsdCAuaGctcm93IHtcbiAgICAgICAgICAgICAgZmxleC13cmFwOiBub3dyYXAgIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5oZy1idXR0b24gc3BhbiB7XG4gICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIGB9PC9zdHlsZT5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuXG4gICAgICB7LyogTUFJTiAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLWZ1bGwgcmVsYXRpdmUgei0xMFwiPlxuICAgICAgICB7LyogU0lERUJBUiAqL31cbiAgICAgICAgPGRpdlxuICAgICAgICAgIGNsYXNzTmFtZT1cImZpeGVkIGJnLVsjYWEzNjM2XSB0ZXh0LXdoaXRlIHNoYWRvdy14bCBmbGV4IGZsZXgtY29sIHB4LTQgcHktMyB0cmFuc2l0aW9uLXRyYW5zZm9ybSBkdXJhdGlvbi0zMDBcIlxuICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICB0b3A6IGhlYWRlckhlaWdodCxcbiAgICAgICAgICAgIGJvdHRvbTogZm9vdGVySGVpZ2h0LFxuICAgICAgICAgICAgd2lkdGg6IHNpZGViYXJXaWR0aCxcbiAgICAgICAgICAgIHRyYW5zZm9ybTogc2lkZWJhck9wZW4gPyBcInRyYW5zbGF0ZVgoMClcIiA6IGB0cmFuc2xhdGVYKC0xMDAlKWAsXG4gICAgICAgICAgICB6SW5kZXg6IDYwLFxuICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICB7LyogQkFDSyBCVVRUT04gKi99XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gcm91dGVyLnB1c2godXNlciA/IFwiL21vZGVsc1wiIDogXCIvXCIpfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEgdGV4dC1bI2ZhYTAyOV0gdHJhbnNpdGlvbiBtYi0zXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhsXCI+4oaQPC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LXNlbWlib2xkXCI+XG4gICAgICAgICAgICAgIHt1c2VyID8gXCJCYWNrIHRvIE1lbnVcIiA6IFwiQmFjayB0byBIb21lXCJ9XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPC9idXR0b24+XG5cbiAgICAgICAgICB7LyogXCIrIE5FVyBDSEFUXCIgKi99XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgb25DbGljaz17aGFuZGxlTmV3Q2hhdH1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBiZy13aGl0ZSB0ZXh0LVsjYWEzNjM2XSBmb250LWJvbGQgcHktMSByb3VuZGVkLWZ1bGwgc2hhZG93IG1iLTYgdGV4dC1zbVwiXG4gICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5Ub3A6IFwiLTRweFwiIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgKyBOZXcgQ2hhdFxuICAgICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSBvcGFjaXR5LTgwIG1iLTNcIj5SZWNlbnRzPC9wPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1bMXB4XSBiZy13aGl0ZS80MCBtYi00XCI+PC9kaXY+XG5cbiAgICAgICAgICB7LyogVVNFUiBJTkZPICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtYXV0byBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyBib3JkZXItdCBib3JkZXItd2hpdGUvMzAgcHQtNFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLTEwIHctMTAgYmctd2hpdGUvMjAgcm91bmRlZC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgICAgIDxpbWcgc3JjPVwiL3R1cGktbG9nby5wbmdcIiBjbGFzc05hbWU9XCJoLTggdy04IHJvdW5kZWQtZnVsbFwiIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1ib2xkXCI+e3JlYWxOYW1lfTwvcD5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyBvcGFjaXR5LTgwXCI+XG4gICAgICAgICAgICAgICAge3VzZXIgPyBcIkxvZ2dlZCBJblwiIDogXCJHdWVzdCBNb2RlXCJ9XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogU0lERUJBUiBUT0dHTEUgKi99XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaWRlYmFyT3Blbighc2lkZWJhck9wZW4pfVxuICAgICAgICAgIGNsYXNzTmFtZT1cImZpeGVkIGJnLVsjYWEzNjM2XSB0ZXh0LXdoaXRlIHB4LTIgcHktMyByb3VuZGVkLXItZnVsbCBzaGFkb3cgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMzAwXCJcbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgdG9wOiBgY2FsYygke2hlYWRlckhlaWdodH1weCArIDMwJSlgLFxuICAgICAgICAgICAgbGVmdDogc2lkZWJhck9wZW4gPyBgJHtzaWRlYmFyV2lkdGh9cHhgIDogXCIwcHhcIixcbiAgICAgICAgICAgIHRyYW5zZm9ybTogXCJ0cmFuc2xhdGVZKC01MCUpXCIsXG4gICAgICAgICAgICB6SW5kZXg6IDcwLFxuICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICB7c2lkZWJhck9wZW4gPyBcIuKXgFwiIDogXCLilrZcIn1cbiAgICAgICAgPC9idXR0b24+XG5cbiAgICAgICAgey8qIENIQVQgQVJFQSAqL31cbiAgICAgICAgPGRpdlxuICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXgtMSByZWxhdGl2ZSB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0zMDAgJHtcbiAgICAgICAgICAgIHNpZGViYXJPcGVuID8gYG1sLVsyMjRweF1gIDogXCJtbC0wXCJcbiAgICAgICAgICB9YH1cbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgbWFyZ2luVG9wOiBgJHtoZWFkZXJIZWlnaHR9cHhgLFxuICAgICAgICAgICAgbWFyZ2luQm90dG9tOiBzaG93S2V5Ym9hcmRcbiAgICAgICAgICAgICAgPyBgJHtmb290ZXJIZWlnaHQgKyBrZXlib2FyZEhlaWdodCArIGtleWJvYXJkUGFkZGluZyArIGlucHV0QmFySGVpZ2h0ICsgNH1weGBcbiAgICAgICAgICAgICAgOiBgJHtmb290ZXJIZWlnaHR9cHhgLFxuICAgICAgICAgICAgdHJhbnNpdGlvbjogXCJtYXJnaW4tYm90dG9tIDAuM3MgZWFzZS1pbi1vdXRcIixcbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAgey8qIOKchSBHZW5lcmF0ZSBRUiBidXR0b24gaW5zaWRlIGNoYXQgYXJlYSAoYWRkZWQpICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTMgcmlnaHQtNiB6LTQwXCI+XG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUdlbmVyYXRlUVJ9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXttZXNzYWdlcy5sZW5ndGggPT09IDB9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YHB4LTQgcHktMiByb3VuZGVkLWZ1bGwgc2hhZG93IGZvbnQtc2VtaWJvbGQgdGV4dC14cyAke1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VzLmxlbmd0aCA9PT0gMFxuICAgICAgICAgICAgICAgICAgPyBcImJnLXdoaXRlLzUwIHRleHQtZ3JheS03MDBcIlxuICAgICAgICAgICAgICAgICAgOiBcImJnLXdoaXRlLzkwIHRleHQtYmxhY2tcIlxuICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgdGl0bGU9e1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VzLmxlbmd0aCA9PT0gMFxuICAgICAgICAgICAgICAgICAgPyBcIlN0YXJ0IGEgY29udmVyc2F0aW9uIGZpcnN0XCJcbiAgICAgICAgICAgICAgICAgIDogXCJHZW5lcmF0ZSBRUiBmb3IgdGhpcyBjb252ZXJzYXRpb25cIlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIEdlbmVyYXRlIFFSXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIHsvKiBNRVNTQUdFUyAqL31cbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC0wIHB4LTYgb3ZlcmZsb3cteS1hdXRvIGZsZXggZmxleC1jb2xcIlxuICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgcGFkZGluZ1RvcDogXCIxNXB4XCIsXG4gICAgICAgICAgICAgIHBhZGRpbmdCb3R0b206IHNob3dLZXlib2FyZFxuICAgICAgICAgICAgICAgID8gYCR7aW5wdXRCYXJIZWlnaHQgKyBrZXlib2FyZFBhZGRpbmcgKyBrZXlib2FyZEhlaWdodH1weGBcbiAgICAgICAgICAgICAgICA6IGAke2lucHV0QmFySGVpZ2h0fXB4YCxcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAge21lc3NhZ2VzLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgZmxleCBqdXN0aWZ5LWNlbnRlciBpdGVtcy1jZW50ZXIgdGV4dC1jZW50ZXIgdGV4dC1zbSBmb250LWJvbGQgdGV4dC1bI2FhMzYzNl1cIj5cbiAgICAgICAgICAgICAgICBIZWxsbywge25pY2tuYW1lfSFcbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICBtZXNzYWdlcy5tYXAoKG1zZywgaSkgPT4gKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGtleT17aX1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YG1iLTQgdy1mdWxsICR7XG4gICAgICAgICAgICAgICAgICAgIG1zZy5yb2xlID09PSBcInVzZXJcIiA/IFwidGV4dC1yaWdodFwiIDogXCJ0ZXh0LWxlZnRcIlxuICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BpbmxpbmUtYmxvY2sgcHgtNCBweS0zIHJvdW5kZWQtMnhsIHNoYWRvdy1sZyB0ZXh0LXNtIG1heC13LVs4NSVdICR7XG4gICAgICAgICAgICAgICAgICAgICAgbXNnLnJvbGUgPT09IFwidXNlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICA/IFwiYmctWyNhYTM2MzZdIHRleHQtd2hpdGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgOiBcImJnLXdoaXRlIHRleHQtYmxhY2sgYm9yZGVyIGJvcmRlci1ncmF5LTIwMFwiXG4gICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgIHdoaXRlU3BhY2U6IFwicHJlLXdyYXBcIixcbiAgICAgICAgICAgICAgICAgICAgICB3b3JkQnJlYWs6IFwiYnJlYWstd29yZFwiLFxuICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93V3JhcDogXCJicmVhay13b3JkXCIsXG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHttc2cucm9sZSA9PT0gXCJ1c2VyXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3aGl0ZXNwYWNlLXByZS13cmFwIGJyZWFrLXdvcmRzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7bXNnLmNvbnRlbnR9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgPFNpbXBsZU1hcmtkb3duUmVuZGVyZXIgdGV4dD17bXNnLmNvbnRlbnR9IC8+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgIDxkaXYgcmVmPXtlbmRSZWZ9IC8+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7Lyog4pyFIFFSIE1PREFMIChhZGRlZCkgKi99XG4gICAgICAgICAge3NoYXJlT3BlbiAmJiBzaGFyZUlkICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgaW5zZXQtMCB6LVs5MF0gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIGluc2V0LTAgYmctYmxhY2svNTBcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNoYXJlT3BlbihmYWxzZSl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmUgYmctd2hpdGUgcm91bmRlZC0yeGwgc2hhZG93LTJ4bCBib3JkZXIgcC01IHctWzMyMHB4XSBtYXgtdy1bOTB2d11cIj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LWNlbnRlciBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICBTY2FuIHRvIHZpZXcgb24gcGhvbmVcbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNjAwIHRleHQtY2VudGVyIG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgIFRoaXMgb3BlbnMgYSBkb2N1bWVudC1zdHlsZSBwYWdlIHRoYXQgY2FuIGJlIHNhdmVkIGFzIFBERi5cbiAgICAgICAgICAgICAgICA8L3A+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgIDxRUkNvZGVDYW52YXMgdmFsdWU9e3NoYXJlVXJsfSBzaXplPXsyMjB9IGluY2x1ZGVNYXJnaW49e3RydWV9IC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTQgZmxleCBnYXAtMlwiPlxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4LTEgYmctWyNhYTM2MzZdIHRleHQtd2hpdGUgdGV4dC14cyBmb250LXNlbWlib2xkIHB5LTIgcm91bmRlZC14bFwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNoYXJlVXJsKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZD8ud3JpdGVUZXh0KHNoYXJlVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICB0b2FzdC5zdWNjZXNzKFwiTGluayBjb3BpZWQhXCIpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICBDb3B5IExpbmtcbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXgtMSBiZy1ncmF5LTIwMCB0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgcHktMiByb3VuZGVkLXhsXCJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2hhcmVPcGVuKGZhbHNlKX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgQ2xvc2VcbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG5cbiAgICAgICAgICB7LyogSU5QVVQgQkFSICovfVxuICAgICAgICAgIDxmb3JtXG4gICAgICAgICAgICByZWY9e2lucHV0QmFyUmVmfVxuICAgICAgICAgICAgb25TdWJtaXQ9e2hhbmRsZVNlbmR9XG4gICAgICAgICAgICBjbGFzc05hbWU9e2BmaXhlZCBsZWZ0LTAgei01MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBnYXAtMyB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0zMDAgJHtcbiAgICAgICAgICAgICAgc2lkZWJhck9wZW5cbiAgICAgICAgICAgICAgICA/IFwibWwtWzIyNHB4XSB3LVtjYWxjKDEwMCUtMTRyZW0pXSBweC02XCJcbiAgICAgICAgICAgICAgICA6IFwibWwtMCB3LWZ1bGwgcHgtNlwiXG4gICAgICAgICAgICB9YH1cbiAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgIGJvdHRvbTogc2hvd0tleWJvYXJkXG4gICAgICAgICAgICAgICAgPyBgJHtmb290ZXJIZWlnaHQgKyBrZXlib2FyZEhlaWdodCArIGtleWJvYXJkUGFkZGluZyArIDR9cHhgXG4gICAgICAgICAgICAgICAgOiBgJHtmb290ZXJIZWlnaHQgKyA4fXB4YCxcbiAgICAgICAgICAgICAgdHJhbnNpdGlvbjogXCJib3R0b20gMC4zcyBlYXNlLWluLW91dFwiLFxuICAgICAgICAgICAgfX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgcmVmPXtpbnB1dFJlZn1cbiAgICAgICAgICAgICAgdmFsdWU9e2lucHV0fVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICBjb25zdCBjYXJldCA9IGUudGFyZ2V0LnNlbGVjdGlvblN0YXJ0O1xuICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgc2V0SW5wdXQodmFsdWUpO1xuICAgICAgICAgICAgICAgICBrZXlib2FyZElucHV0UmVmLmN1cnJlbnQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgY2FyZXRQb3NpdGlvblJlZi5jdXJyZW50ID0gY2FyZXQ7XG4gICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICBpZiAoa2V5Ym9hcmRSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICAgICAga2V5Ym9hcmRSZWYuY3VycmVudC5zZXRJbnB1dCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICBrZXlib2FyZFJlZi5jdXJyZW50LnNldENhcmV0UG9zaXRpb24oY2FyZXQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgb25DbGljaz17KGUpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgY2FyZXQgPSBlLnRhcmdldC5zZWxlY3Rpb25TdGFydDtcbiAgICAgICAgICAgICAgY2FyZXRQb3NpdGlvblJlZi5jdXJyZW50ID0gY2FyZXQ7XG4gICAgICAgICAgICAgIGtleWJvYXJkUmVmLmN1cnJlbnQ/LnNldENhcmV0UG9zaXRpb24oY2FyZXQpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIG9uS2V5VXA9eyhlKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGNhcmV0ID0gZS50YXJnZXQuc2VsZWN0aW9uU3RhcnQ7XG4gICAgICAgICAgICAgIGNhcmV0UG9zaXRpb25SZWYuY3VycmVudCA9IGNhcmV0O1xuICAgICAgICAgICAgICBrZXlib2FyZFJlZi5jdXJyZW50Py5zZXRDYXJldFBvc2l0aW9uKGNhcmV0KTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIG9uRm9jdXM9eygpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRTaG93S2V5Ym9hcmQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGNoYXRDb250YWluZXJSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICAgICAgbGFzdFNjcm9sbFRvcFJlZi5jdXJyZW50ID0gY2hhdENvbnRhaW5lclJlZi5jdXJyZW50LnNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIG9uQmx1cj17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpc0tleWJvYXJkQ2xpY2sgPSBlLnJlbGF0ZWRUYXJnZXQ/LmNsb3Nlc3QoXCIuc2ltcGxlLWtleWJvYXJkXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzSW5wdXRDbGljayA9IGUucmVsYXRlZFRhcmdldD8uY2xvc2VzdChcbiAgICAgICAgICAgICAgICAgICdpbnB1dFtwbGFjZWhvbGRlcio9XCJBc2tcIl0nXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpc1NpZGViYXJDbGljayA9IGUucmVsYXRlZFRhcmdldD8uY2xvc2VzdChcbiAgICAgICAgICAgICAgICAgIFwiLmZpeGVkLmJnLVxcXFxbXFxcXCNhYTM2MzZcXFxcXVwiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpc1NpZGViYXJUb2dnbGVDbGljayA9IGUucmVsYXRlZFRhcmdldD8uY2xvc2VzdChcbiAgICAgICAgICAgICAgICAgIFwiYnV0dG9uLmZpeGVkLmJnLVxcXFxbXFxcXCNhYTM2MzZcXFxcXVwiXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICFpc0tleWJvYXJkQ2xpY2sgJiZcbiAgICAgICAgICAgICAgICAgICFpc0lucHV0Q2xpY2sgJiZcbiAgICAgICAgICAgICAgICAgICFpc1NpZGViYXJDbGljayAmJlxuICAgICAgICAgICAgICAgICAgIWlzU2lkZWJhclRvZ2dsZUNsaWNrXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0U2hvd0tleWJvYXJkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17YEFzayAke21vZGVsS2V5LnRvVXBwZXJDYXNlKCl9Li4uYH1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHB5LTMgcHgtNSByb3VuZGVkLWZ1bGwgYmctd2hpdGUvOTUgb3V0bGluZS1ub25lIGJvcmRlciBib3JkZXItZ3JheS0zMDAgc2hhZG93LXNtIHRleHQtc20gZm9jdXM6Ym9yZGVyLVsjYWEzNjM2XSBmb2N1czpyaW5nLTEgZm9jdXM6cmluZy1bI2FhMzYzNl0gdHJhbnNpdGlvblwiXG4gICAgICAgICAgICAgIGRpc2FibGVkPXtzZW5kaW5nfVxuICAgICAgICAgICAgLz5cblxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICB0eXBlPVwic3VibWl0XCJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e3NlbmRpbmcgfHwgIWlucHV0LnRyaW0oKX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctWyNhYTM2MzZdIHRleHQtd2hpdGUgcHgtNSBweS0zIHJvdW5kZWQtZnVsbCB0ZXh0LXNtIHNoYWRvd1wiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIFNlbmRcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJSZWFjdCIsInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZVN0YXRlIiwidXNlQ2FsbGJhY2siLCJRUkNvZGVDYW52YXMiLCJ1c2VSb3V0ZXIiLCJhdXRoIiwib25BdXRoU3RhdGVDaGFuZ2VkIiwic2lnbk91dCIsInRvYXN0IiwiZ2V0Q29udmVyc2F0aW9uIiwiYXBwZW5kTWVzc2FnZSIsInNldENvbnZlcnNhdGlvbiIsImdldFVzZXJQcm9maWxlIiwiS2V5Ym9hcmQiLCJsYXlvdXQiLCJxd2VydHkiLCJkZWZhdWx0Iiwic2hpZnQiLCJTaW1wbGVNYXJrZG93blJlbmRlcmVyIiwidGV4dCIsImxpbmVzIiwic3BsaXQiLCJtYXAiLCJsaW5lIiwiaW5kZXgiLCJ0cmltIiwiYnIiLCJjb250ZW50IiwiYm9sZFJlZ2V4IiwicGFydHMiLCJsYXN0SW5kZXgiLCJtYXRjaCIsImV4ZWMiLCJwdXNoIiwic3BhbiIsInN1YnN0cmluZyIsInN0cm9uZyIsImxlbmd0aCIsImRpdiIsImNsYXNzTmFtZSIsImZvcm1hdEFJUmVzcG9uc2UiLCJjbGVhbmVkIiwic3RhcnRzV2l0aCIsImVuZHNXaXRoIiwianNvbiIsIkpTT04iLCJwYXJzZSIsImdlbmVyYXRlZF90ZXh0IiwicmVzcG9uc2UiLCJhbnN3ZXIiLCJvdXRwdXQiLCJtZXNzYWdlIiwic3RyaW5naWZ5IiwicmVwbGFjZSIsIkNoYXRQYWdlIiwicm91dGVyIiwibW9kZWwiLCJwdWJsaWMiLCJpc1B1YmxpYyIsInF1ZXJ5IiwibW9kZWxDb25maWdzIiwiZWNlIiwidXJsIiwidG9rZW4iLCJuYXYiLCJpbmZvIiwibW9kZWxLZXkiLCJzZWxlY3RlZE1vZGVsIiwiaXNQdWJsaWNBY2Nlc3MiLCJsb2FkaW5nIiwic2V0TG9hZGluZyIsInVzZXIiLCJzZXRVc2VyIiwibmlja25hbWUiLCJzZXROaWNrbmFtZSIsInJlYWxOYW1lIiwic2V0UmVhbE5hbWUiLCJtZXNzYWdlcyIsInNldE1lc3NhZ2VzIiwiaW5wdXQiLCJzZXRJbnB1dCIsInNlbmRpbmciLCJzZXRTZW5kaW5nIiwic2hpZnRBY3RpdmUiLCJzZXRTaGlmdEFjdGl2ZSIsImVuZFJlZiIsInNpZGViYXJPcGVuIiwic2V0U2lkZWJhck9wZW4iLCJzaG93S2V5Ym9hcmQiLCJzZXRTaG93S2V5Ym9hcmQiLCJrZXlib2FyZFJlZiIsImxhc3RTY3JvbGxUb3BSZWYiLCJrZXlib2FyZFNjcm9sbFRocmVzaG9sZCIsImNoYXRDb250YWluZXJSZWYiLCJpbnB1dEJhclJlZiIsImtleWJvYXJkSW5wdXRSZWYiLCJpbnB1dFJlZiIsImNhcmV0UG9zaXRpb25SZWYiLCJzaGFyZUlkIiwic2V0U2hhcmVJZCIsInNoYXJlT3BlbiIsInNldFNoYXJlT3BlbiIsInVuc3ViIiwidSIsInByb2ZpbGUiLCJ1aWQiLCJuYW1lIiwiZGlzcGxheU5hbWUiLCJlbWFpbCIsIm5pY2siLCJjb252IiwiY3VycmVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImhhbmRsZVNjcm9sbCIsImNoYXRDb250YWluZXIiLCJjdXJyZW50U2Nyb2xsVG9wIiwic2Nyb2xsVG9wIiwic2Nyb2xsRGlmZiIsIk1hdGgiLCJhYnMiLCJpbnB1dEVsZW1lbnQiLCJibHVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzY3JvbGxJbnRvVmlldyIsImJlaGF2aW9yIiwiaGFuZGxlU2VuZCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInRyaW1tZWQiLCJ1c2VyTXNnIiwicm9sZSIsInVwZGF0ZWRNZXNzYWdlcyIsImlkIiwiZXJyb3JNc2ciLCJkaXNtaXNzIiwicmVxdWVzdE9wdGlvbnMiLCJtZXRob2QiLCJoZWFkZXJzIiwicmVxdWVzdEZvcm1hdHMiLCJpbnB1dHMiLCJwYXJhbWV0ZXJzIiwibWF4X25ld190b2tlbnMiLCJ0ZW1wZXJhdHVyZSIsIm1heF9sZW5ndGgiLCJyZXBseSIsImxhc3RFcnJvciIsImkiLCJib2R5IiwicmVzIiwiZmV0Y2giLCJvayIsIkVycm9yIiwic3RhdHVzIiwicmF3IiwiZXJyIiwiYWlNc2ciLCJzdWNjZXNzIiwiZXJyb3IiLCJoYW5kbGVOZXdDaGF0IiwiaGFuZGxlU2lnbk91dCIsInRoZW4iLCJoYW5kbGVTaWduSW4iLCJoYW5kbGVHZW5lcmF0ZVFSIiwiY3JlYXRlZEF0IiwiRGF0ZSIsIm5vdyIsIm0iLCJkYXRhIiwiaGVhZGVySGVpZ2h0IiwiZm9vdGVySGVpZ2h0Iiwic2lkZWJhcldpZHRoIiwia2V5Ym9hcmRIZWlnaHQiLCJpbnB1dEJhckhlaWdodCIsImtleWJvYXJkUGFkZGluZyIsInNoYXJlVXJsIiwid2luZG93IiwibG9jYXRpb24iLCJvcmlnaW4iLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsImhlYWRlciIsImhlaWdodCIsImltZyIsInNyYyIsImFsdCIsImgxIiwiYnV0dG9uIiwib25DbGljayIsImZvb3RlciIsImJvdHRvbSIsImxlZnQiLCJ6SW5kZXgiLCJmb2N1cyIsImN1cnJlbnRUZXh0IiwiY2FyZXRQb3MiLCJ1cGRhdGVUZXh0IiwibmV3VGV4dCIsIm5ld0NhcmV0UG9zIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwic2V0U2VsZWN0aW9uUmFuZ2UiLCJzZXRDYXJldFBvc2l0aW9uIiwibmV3U2hpZnRTdGF0ZSIsInNldE9wdGlvbnMiLCJsYXlvdXROYW1lIiwic2xpY2UiLCJ0b3AiLCJ3aWR0aCIsInRyYW5zZm9ybSIsIm1hcmdpblRvcCIsInAiLCJtYXJnaW5Cb3R0b20iLCJ0cmFuc2l0aW9uIiwiZGlzYWJsZWQiLCJ0aXRsZSIsInBhZGRpbmdUb3AiLCJwYWRkaW5nQm90dG9tIiwibXNnIiwid2hpdGVTcGFjZSIsIndvcmRCcmVhayIsIm92ZXJmbG93V3JhcCIsInJlZiIsInZhbHVlIiwic2l6ZSIsImluY2x1ZGVNYXJnaW4iLCJuYXZpZ2F0b3IiLCJjbGlwYm9hcmQiLCJ3cml0ZVRleHQiLCJmb3JtIiwib25TdWJtaXQiLCJvbkNoYW5nZSIsInRhcmdldCIsImNhcmV0Iiwic2VsZWN0aW9uU3RhcnQiLCJvbktleVVwIiwib25Gb2N1cyIsIm9uQmx1ciIsImlzS2V5Ym9hcmRDbGljayIsInJlbGF0ZWRUYXJnZXQiLCJjbG9zZXN0IiwiaXNJbnB1dENsaWNrIiwiaXNTaWRlYmFyQ2xpY2siLCJpc1NpZGViYXJUb2dnbGVDbGljayIsInNldFRpbWVvdXQiLCJwbGFjZWhvbGRlciIsInRvVXBwZXJDYXNlIiwidHlwZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-browser)/./pages/chat.js\n"));

/***/ })

});