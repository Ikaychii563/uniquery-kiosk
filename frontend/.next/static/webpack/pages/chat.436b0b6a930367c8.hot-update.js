"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/chat",{

/***/ "(pages-dir-browser)/./pages/chat.js":
/*!***********************!*\
  !*** ./pages/chat.js ***!
  \***********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ChatPage)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(pages-dir-browser)/./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! styled-jsx/style */ \"(pages-dir-browser)/./node_modules/styled-jsx/style.js\");\n/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(styled_jsx_style__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(pages-dir-browser)/./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var qrcode_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! qrcode.react */ \"(pages-dir-browser)/./node_modules/qrcode.react/lib/esm/index.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/router */ \"(pages-dir-browser)/./node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _firebase_clientApp__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../firebase/clientApp */ \"(pages-dir-browser)/./firebase/clientApp.js\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! firebase/auth */ \"(pages-dir-browser)/./node_modules/firebase/auth/dist/esm/index.esm.js\");\n/* harmony import */ var react_hot_toast__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-hot-toast */ \"(pages-dir-browser)/./node_modules/react-hot-toast/dist/index.mjs\");\n/* harmony import */ var _lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../lib/firestoreHelpers */ \"(pages-dir-browser)/./lib/firestoreHelpers.js\");\n/* harmony import */ var react_simple_keyboard__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-simple-keyboard */ \"(pages-dir-browser)/./node_modules/react-simple-keyboard/build/index.js\");\n/* harmony import */ var react_simple_keyboard__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_simple_keyboard__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var react_simple_keyboard_build_css_index_css__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-simple-keyboard/build/css/index.css */ \"(pages-dir-browser)/./node_modules/react-simple-keyboard/build/css/index.css\");\n/* harmony import */ var react_simple_keyboard_build_css_index_css__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_simple_keyboard_build_css_index_css__WEBPACK_IMPORTED_MODULE_10__);\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\n// IMPORT VIRTUAL KEYBOARD\n\n\n// ✅ FIX: Define QWERTY keyboard layout\nconst layout = {\n    qwerty: {\n        default: [\n            \"0 1 2 3 4 5 6 7 8 9\",\n            \"q w e r t y u i o p {backspace}\",\n            \"a s d f g h j k l {enter}\",\n            \"{shift} z x c v b n m\",\n            \"{@} {%} {?} {space} {,} {.}\"\n        ],\n        shift: [\n            \"0 1 2 3 4 5 6 7 8 9\",\n            \"Q W E R T Y U I O P {backspace}\",\n            \"A S D F G H J K L {enter}\",\n            \"{shift} Z X C V B N M\",\n            \"{@} {%} {?} {space} {,} {.}\"\n        ]\n    }\n};\n// Simple markdown renderer without external dependencies\nfunction SimpleMarkdownRenderer(param) {\n    let { text } = param;\n    if (!text) return null;\n    const lines = text.split(\"\\n\");\n    return lines.map((line, index)=>{\n        if (line.trim() === \"\") return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"br\", {}, index, false, {\n            fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n            lineNumber: 48,\n            columnNumber: 36\n        }, this);\n        let content = line;\n        const boldRegex = /\\*\\*(.*?)\\*\\*/g;\n        const parts = [];\n        let lastIndex = 0;\n        let match;\n        while((match = boldRegex.exec(content)) !== null){\n            if (match.index > lastIndex) {\n                parts.push(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    children: content.substring(lastIndex, match.index)\n                }, \"\".concat(index, \"-\").concat(lastIndex), false, {\n                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                    lineNumber: 59,\n                    columnNumber: 11\n                }, this));\n            }\n            parts.push(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                children: match[1]\n            }, \"\".concat(index, \"-bold-\").concat(match.index), false, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 65,\n                columnNumber: 9\n            }, this));\n            lastIndex = match.index + match[0].length;\n        }\n        if (lastIndex < content.length) {\n            parts.push(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                children: content.substring(lastIndex)\n            }, \"\".concat(index, \"-remaining\"), false, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 72,\n                columnNumber: 9\n            }, this));\n        }\n        if (parts.length === 0) {\n            parts.push(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                children: content\n            }, \"\".concat(index, \"-plain\"), false, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 77,\n                columnNumber: 18\n            }, this));\n        }\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"mb-1 last:mb-0\",\n            children: [\n                parts,\n                index < lines.length - 1 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"br\", {}, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                    lineNumber: 83,\n                    columnNumber: 38\n                }, this)\n            ]\n        }, index, true, {\n            fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n            lineNumber: 81,\n            columnNumber: 7\n        }, this);\n    });\n}\n_c = SimpleMarkdownRenderer;\nfunction formatAIResponse(text) {\n    if (!text) return \"\";\n    let cleaned = text.trim();\n    if (cleaned.startsWith(\"{\") && cleaned.endsWith(\"}\")) {\n        try {\n            const json = JSON.parse(cleaned);\n            cleaned = json.generated_text || json.response || json.answer || json.output || json.text || json.message || JSON.stringify(json);\n        } catch (e) {}\n    }\n    cleaned = cleaned.replace(/^\"|\"$/g, \"\");\n    cleaned = cleaned.replace(/\\\\n/g, \"\\n\");\n    cleaned = cleaned.replace(/\\\\\"/g, '\"');\n    cleaned = cleaned.replace(/\\\\t/g, \"  \");\n    return cleaned;\n}\nfunction ChatPage() {\n    _s();\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_4__.useRouter)();\n    const { model, public: isPublic } = router.query;\n    const modelConfigs = {\n        ece: {\n            url: \"https://tiyupi-ece-ece-api.hf.space/generate\",\n            token: \"\"\n        },\n        nav: {\n            url: \"https://tiyupi-ece-somi-cali.hf.space/chat\",\n            token: \"\"\n        },\n        info: {\n            url: \"https://tiyupi-ece-hitupi.hf.space/chat\",\n            token: \"\"\n        }\n    };\n    const modelKey = model || \"ece\";\n    const selectedModel = modelConfigs[modelKey] || {};\n    const isPublicAccess = isPublic === \"true\";\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(true);\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const [nickname, setNickname] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    const [realName, setRealName] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([]);\n    const [input, setInput] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    const [sending, setSending] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [shiftActive, setShiftActive] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const endRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)();\n    const [sidebarOpen, setSidebarOpen] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(true);\n    const [recentThreads, setRecentThreads] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([]);\n    const [threadId, setThreadId] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const [thinking, setThinking] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [guestThreads, setGuestThreads] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([]);\n    const [guestThreadId, setGuestThreadId] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    // VIRTUAL KEYBOARD STATE\n    const [showKeyboard, setShowKeyboard] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const keyboardRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const lastScrollTopRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(0);\n    const keyboardScrollThreshold = 20;\n    const chatContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const inputBarRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const keyboardInputRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(\"\");\n    const inputRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const caretPositionRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(0);\n    // ✅ SHARE / QR STATE (added)\n    const [shareId, setShareId] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const [shareOpen, setShareOpen] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const GUEST_KEY = \"guest_threads_\".concat(modelKey);\n    function loadGuestThreads() {\n        try {\n            const raw = localStorage.getItem(GUEST_KEY);\n            return raw ? JSON.parse(raw) : [];\n        } catch (e) {\n            return [];\n        }\n    }\n    function saveGuestThreads(threads) {\n        try {\n            localStorage.setItem(GUEST_KEY, JSON.stringify(threads.slice(0, 3)));\n        } catch (e) {}\n    }\n    /* AUTH */ (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"ChatPage.useEffect\": ()=>{\n            const unsub = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_6__.onAuthStateChanged)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_5__.auth, {\n                \"ChatPage.useEffect.unsub\": async (u)=>{\n                    if (isPublicAccess && !u) {\n                        setUser(null);\n                        setNickname(\"Guest\");\n                        setRealName(\"Guest\");\n                        const threads = loadGuestThreads();\n                        setGuestThreads(threads);\n                        setGuestThreadId(null);\n                        setMessages([]);\n                        setLoading(false);\n                        return;\n                    }\n                    if (!isPublicAccess && !u) {\n                        router.replace(\"/login\");\n                        return;\n                    }\n                    setUser(u);\n                    try {\n                        if (u) {\n                            var _u_email, _u_email1;\n                            const profile = await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.getUserProfile)(u.uid);\n                            const name = (profile === null || profile === void 0 ? void 0 : profile.name) || u.displayName || (profile === null || profile === void 0 ? void 0 : profile.nickname) || ((_u_email = u.email) === null || _u_email === void 0 ? void 0 : _u_email.split(\"@\")[0]) || \"User\";\n                            setRealName(name);\n                            const nick = (profile === null || profile === void 0 ? void 0 : profile.nickname) || (profile === null || profile === void 0 ? void 0 : profile.name) || u.displayName || ((_u_email1 = u.email) === null || _u_email1 === void 0 ? void 0 : _u_email1.split(\"@\")[0]) || \"User\";\n                            setNickname(nick);\n                            const recents = await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.getRecentThreads)(u.uid, modelKey, 3);\n                            setRecentThreads(recents);\n                            if (recents.length > 0) {\n                                // show recents in sidebar, but start blank (unsaved)\n                                setThreadId(null);\n                                setMessages([]);\n                            } else {\n                                // No saved recents yet; start with a blank unsaved chat\n                                setThreadId(null);\n                                setMessages([]);\n                                setRecentThreads([]);\n                            }\n                        }\n                    } catch (e) {}\n                    setLoading(false);\n                }\n            }[\"ChatPage.useEffect.unsub\"]);\n            return ({\n                \"ChatPage.useEffect\": ()=>unsub()\n            })[\"ChatPage.useEffect\"];\n        }\n    }[\"ChatPage.useEffect\"], [\n        router,\n        modelKey,\n        isPublicAccess\n    ]);\n    // Get references on mount\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"ChatPage.useEffect\": ()=>{\n            chatContainerRef.current = document.querySelector(\".absolute.inset-0.px-6.overflow-y-auto.flex.flex-col\");\n            inputBarRef.current = document.querySelector(\"form.fixed.left-0.z-50\");\n        }\n    }[\"ChatPage.useEffect\"], []);\n    // Handle scroll to auto-hide keyboard\n    const handleScroll = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)({\n        \"ChatPage.useCallback[handleScroll]\": ()=>{\n            if (!showKeyboard) return;\n            const chatContainer = chatContainerRef.current;\n            if (!chatContainer) return;\n            const currentScrollTop = chatContainer.scrollTop;\n            const scrollDiff = Math.abs(currentScrollTop - lastScrollTopRef.current);\n            if (scrollDiff > keyboardScrollThreshold) {\n                setShowKeyboard(false);\n                const inputElement = document.querySelector('input[placeholder*=\"Ask\"]');\n                if (inputElement) inputElement.blur();\n            }\n            lastScrollTopRef.current = currentScrollTop;\n        }\n    }[\"ChatPage.useCallback[handleScroll]\"], [\n        showKeyboard\n    ]);\n    // Attach scroll event listener\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"ChatPage.useEffect\": ()=>{\n            const chatContainer = chatContainerRef.current;\n            if (!chatContainer) return;\n            chatContainer.addEventListener(\"scroll\", handleScroll);\n            return ({\n                \"ChatPage.useEffect\": ()=>{\n                    chatContainer.removeEventListener(\"scroll\", handleScroll);\n                }\n            })[\"ChatPage.useEffect\"];\n        }\n    }[\"ChatPage.useEffect\"], [\n        handleScroll\n    ]);\n    // Reset scroll tracking when keyboard shows\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"ChatPage.useEffect\": ()=>{\n            if (showKeyboard && chatContainerRef.current) {\n                lastScrollTopRef.current = chatContainerRef.current.scrollTop;\n            }\n        }\n    }[\"ChatPage.useEffect\"], [\n        showKeyboard\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"ChatPage.useEffect\": ()=>{\n            var _endRef_current;\n            (_endRef_current = endRef.current) === null || _endRef_current === void 0 ? void 0 : _endRef_current.scrollIntoView({\n                behavior: \"smooth\"\n            });\n        }\n    }[\"ChatPage.useEffect\"], [\n        messages\n    ]);\n    /* SEND MESSAGE */ async function handleSend(e) {\n        e.preventDefault();\n        const trimmed = input.trim();\n        if (!trimmed) return;\n        const userMsg = {\n            role: \"user\",\n            content: trimmed\n        };\n        const updatedMessages = [\n            ...messages,\n            userMsg\n        ];\n        setMessages(updatedMessages);\n        setInput(\"\");\n        setSending(true);\n        setThinking(true);\n        setShowKeyboard(false);\n        keyboardInputRef.current = \"\";\n        react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].loading(\"Sending...\", {\n            id: \"send\"\n        });\n        let activeThreadId = threadId;\n        if (user && !isPublicAccess && !activeThreadId) {\n            activeThreadId = await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.createThread)(user.uid, modelKey);\n            setThreadId(activeThreadId);\n        }\n        try {\n            // Save user message (logged-in thread)\n            if (user && !isPublicAccess && activeThreadId) {\n                await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.appendThreadMessage)(user.uid, modelKey, activeThreadId, userMsg);\n            }\n            // Model unavailable\n            if (!selectedModel.url) {\n                const errorMsg = {\n                    role: \"assistant\",\n                    content: \"Model unavailable.\"\n                };\n                setMessages([\n                    ...updatedMessages,\n                    errorMsg\n                ]);\n                if (user && !isPublicAccess && activeThreadId) {\n                    await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.appendThreadMessage)(user.uid, modelKey, activeThreadId, errorMsg);\n                }\n                react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].dismiss(\"send\");\n                setThinking(false);\n                setSending(false);\n                return;\n            }\n            const requestOptions = {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            };\n            const requestFormats = [\n                {\n                    inputs: trimmed,\n                    parameters: {\n                        max_new_tokens: 500,\n                        temperature: 0.7\n                    }\n                },\n                {\n                    query: trimmed,\n                    max_new_tokens: 500,\n                    temperature: 0.7\n                },\n                {\n                    input: trimmed,\n                    max_length: 500,\n                    temperature: 0.7\n                }\n            ];\n            let reply = \"\";\n            let lastError = null;\n            // ✅ GLOBAL 60-second timeout across ALL attempts\n            const controller = new AbortController();\n            const timeoutId = setTimeout(()=>controller.abort(), 60000);\n            for(let i = 0; i < requestFormats.length; i++){\n                try {\n                    requestOptions.body = JSON.stringify(requestFormats[i]);\n                    const res = await fetch(selectedModel.url, {\n                        ...requestOptions,\n                        signal: controller.signal\n                    });\n                    if (!res.ok) throw new Error(\"HTTP \".concat(res.status));\n                    const raw = await res.text();\n                    reply = formatAIResponse(raw);\n                    if (reply && reply !== \"{}\") break;\n                } catch (err) {\n                    lastError = err;\n                    if (err.name === \"AbortError\") break; // stop immediately on timeout\n                }\n            }\n            clearTimeout(timeoutId);\n            if (!reply && lastError) throw lastError;\n            if (!reply) throw new Error(\"No response\");\n            reply = reply.trim();\n            const aiMsg = {\n                role: \"assistant\",\n                content: reply\n            };\n            const finalMessages = [\n                ...updatedMessages,\n                aiMsg\n            ];\n            setMessages(finalMessages);\n            // Logged-in: save assistant reply (DO NOT refresh recents here)\n            if (user && !isPublicAccess && activeThreadId) {\n                await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.appendThreadMessage)(user.uid, modelKey, activeThreadId, aiMsg);\n            }\n            react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].success(\"Reply received\", {\n                id: \"send\"\n            });\n        } catch (err) {\n            const errorMsg = {\n                role: \"assistant\",\n                content: err.name === \"AbortError\" ? \"⚠️ No response after 1 minute. Please try again.\" : \"**Error:** \".concat(err.message)\n            };\n            setMessages([\n                ...messages,\n                userMsg,\n                errorMsg\n            ]);\n            react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].error(\"Send failed\", {\n                id: \"send\"\n            });\n        }\n        setThinking(false);\n        setSending(false);\n    }\n    async function handleNewChat() {\n        const hasRealConversation = messages.some((m)=>{\n            var _m_content;\n            return m.role === \"user\" && ((_m_content = m.content) === null || _m_content === void 0 ? void 0 : _m_content.trim());\n        });\n        if (user && !isPublicAccess) {\n            // ================================\n            // LOGGED-IN MODE\n            // ================================\n            // ✅ Only finalize/store if there's a real convo\n            if (hasRealConversation) {\n                let currentId = threadId;\n                // If conversation has no thread yet, create one now\n                if (!currentId) {\n                    currentId = await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.createThread)(user.uid, modelKey);\n                    // Save all current messages to Firestore\n                    for (const msg of messages){\n                        await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.appendThreadMessage)(user.uid, modelKey, currentId, msg);\n                    }\n                }\n                // ✅ IMPORTANT: mark as recent ONLY when real convo exists\n                await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.touchThread)(user.uid, modelKey, currentId);\n                // keep only 3 finalized recents\n                await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.keepOnlyLastNThreads)(user.uid, modelKey, 3);\n                // refresh sidebar recents\n                const recents = await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.getRecentThreads)(user.uid, modelKey, 3);\n                setRecentThreads(recents);\n            }\n            // Start a NEW blank unsaved chat\n            setThreadId(null);\n            setMessages([]);\n        } else {\n            // ================================\n            // GUEST MODE\n            // ================================\n            // ✅ Only save if real convo exists\n            if (hasRealConversation) {\n                const firstUserMsg = messages.find((m)=>{\n                    var _m_content;\n                    return m.role === \"user\" && ((_m_content = m.content) === null || _m_content === void 0 ? void 0 : _m_content.trim());\n                });\n                const newThread = {\n                    id: Date.now().toString(),\n                    title: ((firstUserMsg === null || firstUserMsg === void 0 ? void 0 : firstUserMsg.content) || \"New Chat\").slice(0, 30),\n                    messages: messages,\n                    updatedAt: Date.now()\n                };\n                const updated = [\n                    newThread,\n                    ...guestThreads\n                ].sort((a, b)=>b.updatedAt - a.updatedAt).slice(0, 3);\n                setGuestThreads(updated);\n                saveGuestThreads(updated);\n            }\n            // Start fresh blank guest chat\n            setGuestThreadId(null);\n            setMessages([]);\n        }\n        setShareId(null);\n        setShareOpen(false);\n    }\n    function handleSignOut() {\n        (0,firebase_auth__WEBPACK_IMPORTED_MODULE_6__.signOut)(_firebase_clientApp__WEBPACK_IMPORTED_MODULE_5__.auth).then(()=>router.push(\"/login\"));\n    }\n    // NEW: Handle sign in redirect\n    function handleSignIn() {\n        router.push(\"/login\");\n    }\n    // ✅ Generate QR (added)\n    async function handleGenerateQR() {\n        try {\n            if (!messages || messages.length === 0) {\n                react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].error(\"No conversation to share yet.\");\n                return;\n            }\n            react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].loading(\"Generating QR...\", {\n                id: \"share\"\n            });\n            const res = await fetch(\"/api/share\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    modelKey,\n                    createdAt: Date.now(),\n                    messages: messages.map((m)=>({\n                            role: m.role,\n                            content: m.content\n                        }))\n                })\n            });\n            if (!res.ok) throw new Error(\"HTTP \".concat(res.status));\n            const data = await res.json();\n            if (!(data === null || data === void 0 ? void 0 : data.id)) throw new Error(\"No share id returned.\");\n            setShareId(data.id);\n            setShareOpen(true);\n            react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].success(\"QR ready!\", {\n                id: \"share\"\n            });\n        } catch (e) {\n            react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].error(\"Failed: \".concat(e.message), {\n                id: \"share\"\n            });\n        }\n    }\n    if (loading) return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"h-screen flex items-center justify-center text-xl\",\n        children: \"Loading…\"\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n        lineNumber: 533,\n        columnNumber: 7\n    }, this);\n    const headerHeight = 48;\n    const footerHeight = 32;\n    const sidebarWidth = 224;\n    const keyboardHeight = 280;\n    const inputBarHeight = 60;\n    const keyboardPadding = 4; // REDUCED FROM 8 TO 4\n    const shareUrl = shareId && \"object\" !== \"undefined\" ? \"\".concat(window.location.origin, \"/share/\").concat(shareId) : \"\";\n    const recentsToShow = user && !isPublicAccess ? recentThreads : guestThreads;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"relative h-screen w-screen overflow-hidden bg-cover bg-center\",\n        style: {\n            backgroundImage: \"url('/bg.png')\"\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute inset-0 bg-[rgba(245,245,245,0.18)] backdrop-blur-sm\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 557,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"header\", {\n                className: \"fixed top-0 left-0 right-0 z-50 bg-black/30 text-white py-1.5 px-4 flex justify-between items-center shadow-sm\",\n                style: {\n                    height: \"\".concat(headerHeight, \"px\")\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                src: \"/tuplogo.png\",\n                                alt: \"TUP Logo\",\n                                className: \"h-7 w-7\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 565,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                className: \"text-xs md:text-sm font-bold\",\n                                children: \"TECHNOLOGICAL UNIVERSITY OF THE PHILIPPINES\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 566,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                        lineNumber: 564,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: user ? handleSignOut : handleSignIn,\n                        className: \"bg-[#faa029] text-black font-semibold px-5 py-2 rounded-full shadow\",\n                        children: user ? \"Sign Out\" : \"Sign In\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                        lineNumber: 572,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 560,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"footer\", {\n                className: \"fixed bottom-0 left-0 right-0 z-50 bg-black/30 text-center py-1 text-white text-xs\",\n                style: {\n                    height: \"\".concat(footerHeight, \"px\")\n                },\n                children: \"Designed by: Electronics Engineering Department\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 581,\n                columnNumber: 7\n            }, this),\n            showKeyboard && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    bottom: \"\".concat(footerHeight + 4, \"px\"),\n                    left: sidebarOpen ? \"\".concat(sidebarWidth, \"px\") : \"0px\",\n                    height: \"\".concat(keyboardHeight, \"px\"),\n                    zIndex: 55\n                },\n                className: \"jsx-5e380479dfea8d67\" + \" \" + \"fixed left-0 right-0 bg-white shadow-2xl border-t border-gray-300\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"jsx-5e380479dfea8d67\" + \" \" + \"flex justify-end p-1 bg-gray-100\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            type: \"button\",\n                            onMouseDown: (e)=>{\n                                // PREVENT input blur from firing\n                                e.preventDefault();\n                            },\n                            onClick: (e)=>{\n                                e.stopPropagation();\n                                // 1️⃣ Clear React state\n                                setInput(\"\");\n                                // 2️⃣ Clear refs\n                                keyboardInputRef.current = \"\";\n                                caretPositionRef.current = 0;\n                                // 3️⃣ Clear keyboard internal value\n                                if (keyboardRef.current) {\n                                    keyboardRef.current.setInput(\"\");\n                                    keyboardRef.current.setCaretPosition(0);\n                                }\n                                // 4️⃣ Restore focus safely\n                                requestAnimationFrame(()=>{\n                                    if (inputRef.current) {\n                                        inputRef.current.focus();\n                                        inputRef.current.setSelectionRange(0, 0);\n                                    }\n                                });\n                            },\n                            className: \"jsx-5e380479dfea8d67\" + \" \" + \"text-red-600 hover:text-red-800 font-semibold px-3 py-1 rounded text-xs\",\n                            children: \"Clear All\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                            lineNumber: 601,\n                            columnNumber: 3\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                        lineNumber: 600,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((react_simple_keyboard__WEBPACK_IMPORTED_MODULE_9___default()), {\n                        keyboardRef: (r)=>{\n                            keyboardRef.current = r;\n                        },\n                        layoutName: shiftActive ? \"shift\" : \"default\",\n                        layout: layout.qwerty,\n                        onKeyPress: (button)=>{\n                            let currentText = input;\n                            let caretPos = caretPositionRef.current;\n                            const updateText = (newText, newCaretPos)=>{\n                                setInput(newText);\n                                keyboardInputRef.current = newText;\n                                caretPositionRef.current = newCaretPos;\n                                requestAnimationFrame(()=>{\n                                    if (inputRef.current) {\n                                        inputRef.current.focus();\n                                        inputRef.current.setSelectionRange(newCaretPos, newCaretPos);\n                                    }\n                                });\n                            };\n                            // ===== SHIFT =====\n                            // \n                            if (button === \"{shift}\" || button === \"{lock}\") {\n                                var _keyboardRef_current;\n                                const newShiftState = !shiftActive;\n                                setShiftActive(newShiftState);\n                                (_keyboardRef_current = keyboardRef.current) === null || _keyboardRef_current === void 0 ? void 0 : _keyboardRef_current.setOptions({\n                                    layoutName: newShiftState ? \"shift\" : \"default\"\n                                });\n                                return;\n                            }\n                            // ===== ENTER =====\n                            // \n                            if (button === \"{enter}\") {\n                                handleSend({\n                                    preventDefault: ()=>{}\n                                });\n                                return;\n                            }\n                            // ===== BACKSPACE =====\n                            // \n                            if (button === \"{backspace}\") {\n                                if (caretPos > 0) {\n                                    const newText = currentText.slice(0, caretPos - 1) + currentText.slice(caretPos);\n                                    updateText(newText, caretPos - 1);\n                                }\n                                return;\n                            }\n                            // ===== SPACE =====\n                            // \n                            if (button === \"{space}\") {\n                                const newText = currentText.slice(0, caretPos) + \" \" + currentText.slice(caretPos);\n                                updateText(newText, caretPos + 1);\n                                return;\n                            }\n                            // ===== SPECIAL TOKENS FROM YOUR LAYOUT =====\n                            // \n                            const specialTokens = {\n                                \"{@}\": \"@\",\n                                \"{%}\": \"%\",\n                                \"{?}\": \"?\",\n                                \"{,}\": \",\",\n                                \"{.}\": \".\"\n                            };\n                            if (specialTokens[button]) {\n                                const char = specialTokens[button];\n                                const newText = currentText.slice(0, caretPos) + char + currentText.slice(caretPos);\n                                updateText(newText, caretPos + 1);\n                                return;\n                            }\n                            // ===== Ignore unknown control buttons =====\n                            if (button.startsWith(\"{\") && button.endsWith(\"}\")) {\n                                return;\n                            }\n                            // ===== Normal characters (letters & numbers) =====\n                            const newText = currentText.slice(0, caretPos) + button + currentText.slice(caretPos);\n                            updateText(newText, caretPos + button.length);\n                        },\n                        theme: \"hg-theme-default hg-theme-custom\",\n                        display: {\n                            \"{backspace}\": \"⌫\",\n                            \"{enter}\": \"↵\",\n                            \"{shift}\": \"⇧\",\n                            \"{space}\": \"Space\",\n                            \"{@}\": \"@\",\n                            \"{%}\": \"%\",\n                            \"{?}\": \"?\",\n                            \"{,}\": \",\",\n                            \"{.}\": \".\",\n                            \"{#}\": \"#\"\n                        },\n                        preventMouseDownDefault: true,\n                        preventMouseUpDefault: true,\n                        newLineOnEnter: false,\n                        autoUseTouchEvents: true\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                        lineNumber: 637,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default()), {\n                        id: \"5e380479dfea8d67\",\n                        children: \".simple-keyboard{background:white!important;padding:10px!important;height:calc(100% - 30px)!important;width:100%!important;box-sizing:border-box!important}.hg-theme-custom{background-color:white!important;height:100%!important;display:flex!important;flex-direction:column!important}.hg-button{height:45px!important;border-radius:6px!important;font-weight:500!important;font-size:14px!important;box-shadow:0 2px 3px rgba(0,0,0,.15)!important;margin:3px!important;display:flex!important;align-items:center!important;justify-content:center!important;transition:all.1s ease!important;min-width:0!important;flex:1!important}.hg-row:nth-child(1) .hg-button{background:#f8f9fa!important;color:#333!important;border:1px solid#ddd!important}.hg-row:nth-child(2) .hg-button:not(.hg-button-backspace):not(.hg-button-enter),.hg-row:nth-child(3) .hg-button:not(.hg-button-enter),.hg-row:nth-child(4) .hg-button:not(.hg-button-shift){background:#aa3636!important;color:white!important;border:1px solid#8a2c2c!important}.hg-row:nth-child(5) .hg-button{background:#faa029!important;color:black!important;border:1px solid#d88c20!important;font-weight:bold!important}.hg-button-shift,.hg-button-backspace,.hg-button-enter{background:#faa029!important;color:black!important;border:1px solid#d88c20!important;font-weight:bold!important}.hg-button-space{flex-grow:3!important;max-width:none!important}.hg-button-backspace,.hg-button-enter,.hg-button-shift{min-width:70px!important;flex-grow:.5!important}.hg-button-\\\\\\\\{@\\\\\\\\;},\\n            .hg-button-\\\\\\\\{%\\\\\\\\},\\n            .hg-button-\\\\\\\\{\\\\\\\\?\\\\\\\\},\\n            .hg-button-\\\\\\\\{\\\\\\\\,\\\\\\\\},\\n            .hg-button-\\\\\\\\{\\\\\\\\.\\\\\\\\}{min-width:35px!important;flex-grow:.3!important}.hg-button:active,.hg-button.hg-activeBtn{transform:translatey(2px)!important;box-shadow:0 1px 2px rgba(0,0,0,.1)!important}.hg-row:nth-child(2) .hg-button:active:not(.hg-button-backspace):not(.hg-button-enter),.hg-row:nth-child(3) .hg-button:active:not(.hg-button-enter),.hg-row:nth-child(4) .hg-button:active:not(.hg-button-shift){background:#8a2c2c!important}.hg-button-shift:active,.hg-button-backspace:active,.hg-button-enter:active,.hg-row:nth-child(5) .hg-button:active,.hg-button-shift.hg-activeBtn{background:#d88c20!important}.hg-rows{height:100%!important;display:flex!important;flex-direction:column!important;justify-content:space-between!important;padding:0 8px!important}.hg-row{display:flex!important;justify-content:center!important;flex:1!important;min-height:48px!important;margin-bottom:5px!important}.hg-button-standard{min-width:35px!important;flex:1!important;max-width:50px!important}.hg-row:last-child{margin-bottom:0!important}.hg-button-backspace{font-size:16px!important}.hg-button-enter{font-size:16px!important}.simple-keyboard.hg-layout-default .hg-row{flex-wrap:nowrap!important}.hg-button span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dot{display:inline-block;width:6px;text-align:center;animation:dotBounce 1.1s infinite ease-in-out;opacity:.35}.dot:nth-child(2){animation-delay:.12s}.dot:nth-child(3){animation-delay:.24s}@keyframes dotBounce{0%,80%,100%{transform:translatey(0);opacity:.35}40%{transform:translatey(-4px);opacity:1}}\"\n                    }, void 0, false, void 0, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 590,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex h-full relative z-10\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"fixed bg-[#aa3636] text-white shadow-xl flex flex-col px-4 py-3 transition-transform duration-300\",\n                        style: {\n                            top: headerHeight,\n                            bottom: footerHeight,\n                            width: sidebarWidth,\n                            transform: sidebarOpen ? \"translateX(0)\" : \"translateX(-100%)\",\n                            zIndex: 60\n                        },\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>router.push(user ? \"/models\" : \"/\"),\n                                className: \"flex items-center gap-1 text-[#faa029] transition mb-3\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-xl\",\n                                        children: \"←\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 929,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-sm font-semibold\",\n                                        children: user ? \"Back to Menu\" : \"Back to Home\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 930,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 925,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleNewChat,\n                                className: \"w-full bg-white text-[#aa3636] font-bold py-1 rounded-full shadow mb-6 text-sm\",\n                                style: {\n                                    marginTop: \"-4px\"\n                                },\n                                children: \"+ New Chat\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 936,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-sm opacity-80 mb-3\",\n                                children: \"Recents\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 944,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"h-[1px] bg-white/40 mb-4\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 945,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex flex-col gap-2 overflow-y-auto\",\n                                children: recentsToShow.map((t)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: \"text-left text-xs bg-white/10 hover:bg-white/20 px-3 py-2 rounded\",\n                                        onClick: async ()=>{\n                                            if (user && !isPublicAccess) {\n                                                // Logged-in: load from Firestore\n                                                setThreadId(t.id);\n                                                const msgs = await (0,_lib_firestoreHelpers__WEBPACK_IMPORTED_MODULE_8__.getThreadMessages)(user.uid, modelKey, t.id);\n                                                setMessages(msgs.map((m)=>({\n                                                        role: m.role,\n                                                        content: m.content\n                                                    })));\n                                            } else {\n                                                // Guest: load from localStorage memory\n                                                // \n                                                setGuestThreadId(t.id);\n                                                setMessages(t.messages || []);\n                                            }\n                                        },\n                                        children: t.title || \"Chat\"\n                                    }, t.id, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 949,\n                                        columnNumber: 15\n                                    }, this))\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 947,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mt-auto flex items-center gap-3 border-t border-white/30 pt-4\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"h-10 w-10 bg-white/20 rounded-full flex items-center justify-center\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                            src: \"/tupi-logo.png\",\n                                            className: \"h-8 w-8 rounded-full\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                            lineNumber: 976,\n                                            columnNumber: 15\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 975,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"text-sm font-bold\",\n                                                children: realName\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                lineNumber: 979,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"text-xs opacity-80\",\n                                                children: user ? \"Logged In\" : \"Guest Mode\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                lineNumber: 980,\n                                                columnNumber: 15\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 978,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 974,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                        lineNumber: 914,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>setSidebarOpen(!sidebarOpen),\n                        className: \"fixed bg-[#aa3636] text-white px-2 py-3 rounded-r-full shadow transition-all duration-300\",\n                        style: {\n                            top: \"calc(\".concat(headerHeight, \"px + 30%)\"),\n                            left: sidebarOpen ? \"\".concat(sidebarWidth, \"px\") : \"0px\",\n                            transform: \"translateY(-50%)\",\n                            zIndex: 70\n                        },\n                        children: sidebarOpen ? \"◀\" : \"▶\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                        lineNumber: 988,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex-1 relative transition-all duration-300 \".concat(sidebarOpen ? \"ml-[224px]\" : \"ml-0\"),\n                        style: {\n                            marginTop: \"\".concat(headerHeight, \"px\"),\n                            marginBottom: showKeyboard ? \"\".concat(footerHeight + keyboardHeight + keyboardPadding + inputBarHeight + 4, \"px\") : \"\".concat(footerHeight, \"px\"),\n                            transition: \"margin-bottom 0.3s ease-in-out\"\n                        },\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"px-6 pt-3 flex justify-end\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: handleGenerateQR,\n                                    disabled: messages.length === 0,\n                                    className: \"px-4 py-2 rounded-full shadow font-semibold text-xs \".concat(messages.length === 0 ? \"bg-white/50 text-gray-700\" : \"bg-white/90 text-black\"),\n                                    title: messages.length === 0 ? \"Start a conversation first\" : \"Generate QR for this conversation\",\n                                    children: \"Generate QR\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                    lineNumber: 1017,\n                                    columnNumber: 11\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 1016,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"absolute inset-0 px-6 overflow-y-auto flex flex-col\",\n                                style: {\n                                    top: \"52px\",\n                                    paddingTop: \"6px\",\n                                    paddingBottom: showKeyboard ? \"\".concat(inputBarHeight + keyboardPadding + keyboardHeight, \"px\") : \"\".concat(inputBarHeight, \"px\")\n                                },\n                                children: [\n                                    messages.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex-1 flex justify-center items-center text-center text-sm font-bold text-[#aa3636]\",\n                                        children: [\n                                            \"Hello, \",\n                                            nickname,\n                                            \"!\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 1047,\n                                        columnNumber: 15\n                                    }, this) : messages.map((msg, i)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"mb-4 w-full \".concat(msg.role === \"user\" ? \"text-right\" : \"text-left\"),\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"inline-block px-4 py-3 rounded-2xl shadow-lg text-sm max-w-[85%] \".concat(msg.role === \"user\" ? \"bg-[#aa3636] text-white\" : \"bg-white text-black border border-gray-200\"),\n                                                style: {\n                                                    whiteSpace: \"pre-wrap\",\n                                                    wordBreak: \"break-word\",\n                                                    overflowWrap: \"break-word\"\n                                                },\n                                                children: msg.role === \"user\" ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"whitespace-pre-wrap break-words\",\n                                                    children: msg.content\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                    lineNumber: 1071,\n                                                    columnNumber: 23\n                                                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(SimpleMarkdownRenderer, {\n                                                    text: msg.content\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                    lineNumber: 1075,\n                                                    columnNumber: 23\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                lineNumber: 1058,\n                                                columnNumber: 19\n                                            }, this)\n                                        }, i, false, {\n                                            fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                            lineNumber: 1052,\n                                            columnNumber: 17\n                                        }, this)),\n                                    thinking && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"mb-4 w-full text-left\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"inline-block px-4 py-3 rounded-2xl shadow-lg text-sm max-w-[85%] bg-white text-black border border-gray-200\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"dot\",\n                                                    children: \".\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                    lineNumber: 1085,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"dot\",\n                                                    children: \".\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                    lineNumber: 1086,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"dot\",\n                                                    children: \".\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                    lineNumber: 1087,\n                                                    columnNumber: 19\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                            lineNumber: 1084,\n                                            columnNumber: 17\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 1083,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        ref: endRef\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 1091,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 1036,\n                                columnNumber: 11\n                            }, this),\n                            shareOpen && shareId && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"fixed inset-0 z-[90] flex items-center justify-center\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"absolute inset-0 bg-black/50\",\n                                        onClick: ()=>setShareOpen(false)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 1097,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"relative bg-white rounded-2xl shadow-2xl border p-5 w-[320px] max-w-[90vw]\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"text-sm font-bold text-center mb-1\",\n                                                children: \"Scan to view on phone\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                lineNumber: 1102,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"text-xs text-gray-600 text-center mb-3\",\n                                                children: \"This opens a document-style page that can be saved as PDF.\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                lineNumber: 1105,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex justify-center\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(qrcode_react__WEBPACK_IMPORTED_MODULE_3__.QRCodeCanvas, {\n                                                    value: shareUrl,\n                                                    size: 220,\n                                                    includeMargin: true\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                    lineNumber: 1110,\n                                                    columnNumber: 19\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                lineNumber: 1109,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"mt-4 flex gap-2\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        className: \"flex-1 bg-[#aa3636] text-white text-xs font-semibold py-2 rounded-xl\",\n                                                        onClick: ()=>{\n                                                            var _navigator_clipboard;\n                                                            if (!shareUrl) return;\n                                                            (_navigator_clipboard = navigator.clipboard) === null || _navigator_clipboard === void 0 ? void 0 : _navigator_clipboard.writeText(shareUrl);\n                                                            react_hot_toast__WEBPACK_IMPORTED_MODULE_7__[\"default\"].success(\"Link copied!\");\n                                                        },\n                                                        children: \"Copy Link\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                        lineNumber: 1114,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        className: \"flex-1 bg-gray-200 text-xs font-semibold py-2 rounded-xl\",\n                                                        onClick: ()=>setShareOpen(false),\n                                                        children: \"Close\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                        lineNumber: 1125,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                                lineNumber: 1113,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 1101,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 1096,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                                ref: inputBarRef,\n                                onSubmit: handleSend,\n                                className: \"fixed left-0 z-50 flex items-center justify-center gap-3 transition-all duration-300 \".concat(sidebarOpen ? \"ml-[224px] w-[calc(100%-14rem)] px-6\" : \"ml-0 w-full px-6\"),\n                                style: {\n                                    bottom: showKeyboard ? \"\".concat(footerHeight + keyboardHeight + keyboardPadding + 4, \"px\") : \"\".concat(footerHeight + 8, \"px\"),\n                                    transition: \"bottom 0.3s ease-in-out\"\n                                },\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                        ref: inputRef,\n                                        value: input,\n                                        onChange: (e)=>{\n                                            const value = e.target.value;\n                                            const caret = e.target.selectionStart;\n                                            setInput(value);\n                                            keyboardInputRef.current = value;\n                                            caretPositionRef.current = caret;\n                                            if (keyboardRef.current) {\n                                                keyboardRef.current.setInput(value);\n                                                keyboardRef.current.setCaretPosition(caret);\n                                            }\n                                        },\n                                        onClick: (e)=>{\n                                            var _keyboardRef_current;\n                                            const caret = e.target.selectionStart;\n                                            caretPositionRef.current = caret;\n                                            (_keyboardRef_current = keyboardRef.current) === null || _keyboardRef_current === void 0 ? void 0 : _keyboardRef_current.setCaretPosition(caret);\n                                        },\n                                        onKeyUp: (e)=>{\n                                            var _keyboardRef_current;\n                                            const caret = e.target.selectionStart;\n                                            caretPositionRef.current = caret;\n                                            (_keyboardRef_current = keyboardRef.current) === null || _keyboardRef_current === void 0 ? void 0 : _keyboardRef_current.setCaretPosition(caret);\n                                        },\n                                        onFocus: ()=>{\n                                            setShowKeyboard(true);\n                                            if (chatContainerRef.current) {\n                                                lastScrollTopRef.current = chatContainerRef.current.scrollTop;\n                                            }\n                                        },\n                                        onBlur: (e)=>{\n                                            var _e_relatedTarget, _e_relatedTarget1, _e_relatedTarget2, _e_relatedTarget3;\n                                            const isKeyboardClick = (_e_relatedTarget = e.relatedTarget) === null || _e_relatedTarget === void 0 ? void 0 : _e_relatedTarget.closest(\".simple-keyboard\");\n                                            const isInputClick = (_e_relatedTarget1 = e.relatedTarget) === null || _e_relatedTarget1 === void 0 ? void 0 : _e_relatedTarget1.closest('input[placeholder*=\"Ask\"]');\n                                            const isSidebarClick = (_e_relatedTarget2 = e.relatedTarget) === null || _e_relatedTarget2 === void 0 ? void 0 : _e_relatedTarget2.closest(\".fixed.bg-\\\\[\\\\#aa3636\\\\]\");\n                                            const isSidebarToggleClick = (_e_relatedTarget3 = e.relatedTarget) === null || _e_relatedTarget3 === void 0 ? void 0 : _e_relatedTarget3.closest(\"button.fixed.bg-\\\\[\\\\#aa3636\\\\]\");\n                                            if (!isKeyboardClick && !isInputClick && !isSidebarClick && !isSidebarToggleClick) {\n                                                setTimeout(()=>{\n                                                    setShowKeyboard(false);\n                                                }, 100);\n                                            }\n                                        },\n                                        placeholder: \"Ask \".concat(modelKey.toUpperCase(), \"...\"),\n                                        className: \"w-full py-3 px-5 rounded-full bg-white/95 outline-none border border-gray-300 shadow-sm text-sm focus:border-[#aa3636] focus:ring-1 focus:ring-[#aa3636] transition\",\n                                        disabled: sending\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 1152,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        type: \"submit\",\n                                        disabled: sending || !input.trim(),\n                                        className: \"bg-[#aa3636] text-white px-5 py-3 rounded-full text-sm shadow\",\n                                        children: \"Send\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                        lineNumber: 1212,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                                lineNumber: 1137,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                        lineNumber: 1002,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n                lineNumber: 912,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\Kai\\\\Documents\\\\Uniquery\\\\frontend\\\\pages\\\\chat.js\",\n        lineNumber: 553,\n        columnNumber: 5\n    }, this);\n}\n_s(ChatPage, \"hf/gpihSUMZIRuZzVd/56ikMf4U=\", false, function() {\n    return [\n        next_router__WEBPACK_IMPORTED_MODULE_4__.useRouter\n    ];\n});\n_c1 = ChatPage;\nvar _c, _c1;\n$RefreshReg$(_c, \"SimpleMarkdownRenderer\");\n$RefreshReg$(_c1, \"ChatPage\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1icm93c2VyKS8uL3BhZ2VzL2NoYXQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ3dFO0FBQzVCO0FBQ0o7QUFDSztBQUNlO0FBQ3hCO0FBU0g7QUFFakMsMEJBQTBCO0FBQ21CO0FBQ007QUFFbkQsdUNBQXVDO0FBQ3ZDLE1BQU1tQixTQUFTO0lBQ2JDLFFBQVE7UUFDTkMsU0FBUztZQUNQO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7U0FDRDtRQUNEQyxPQUFPO1lBQ0w7WUFDQTtZQUNBO1lBQ0E7WUFDQTtTQUNEO0lBQ0g7QUFDRjtBQUVBLHlEQUF5RDtBQUN6RCxTQUFTQyx1QkFBdUIsS0FBUTtRQUFSLEVBQUVDLElBQUksRUFBRSxHQUFSO0lBQzlCLElBQUksQ0FBQ0EsTUFBTSxPQUFPO0lBRWxCLE1BQU1DLFFBQVFELEtBQUtFLEtBQUssQ0FBQztJQUN6QixPQUFPRCxNQUFNRSxHQUFHLENBQUMsQ0FBQ0MsTUFBTUM7UUFDdEIsSUFBSUQsS0FBS0UsSUFBSSxPQUFPLElBQUkscUJBQU8sOERBQUNDLFVBQVFGOzs7OztRQUV4QyxJQUFJRyxVQUFVSjtRQUNkLE1BQU1LLFlBQVk7UUFDbEIsTUFBTUMsUUFBUSxFQUFFO1FBQ2hCLElBQUlDLFlBQVk7UUFDaEIsSUFBSUM7UUFFSixNQUFPLENBQUNBLFFBQVFILFVBQVVJLElBQUksQ0FBQ0wsUUFBTyxNQUFPLEtBQU07WUFDakQsSUFBSUksTUFBTVAsS0FBSyxHQUFHTSxXQUFXO2dCQUMzQkQsTUFBTUksSUFBSSxlQUNSLDhEQUFDQzs4QkFDRVAsUUFBUVEsU0FBUyxDQUFDTCxXQUFXQyxNQUFNUCxLQUFLO21CQURoQyxHQUFZTSxPQUFUTixPQUFNLEtBQWEsT0FBVk07Ozs7O1lBSTNCO1lBQ0FELE1BQU1JLElBQUksZUFDUiw4REFBQ0c7MEJBQTZDTCxLQUFLLENBQUMsRUFBRTtlQUF6QyxHQUFpQkEsT0FBZFAsT0FBTSxVQUFvQixPQUFaTyxNQUFNUCxLQUFLOzs7OztZQUUzQ00sWUFBWUMsTUFBTVAsS0FBSyxHQUFHTyxLQUFLLENBQUMsRUFBRSxDQUFDTSxNQUFNO1FBQzNDO1FBRUEsSUFBSVAsWUFBWUgsUUFBUVUsTUFBTSxFQUFFO1lBQzlCUixNQUFNSSxJQUFJLGVBQ1IsOERBQUNDOzBCQUFpQ1AsUUFBUVEsU0FBUyxDQUFDTDtlQUF6QyxHQUFTLE9BQU5OLE9BQU07Ozs7O1FBRXhCO1FBRUEsSUFBSUssTUFBTVEsTUFBTSxLQUFLLEdBQUc7WUFDdEJSLE1BQU1JLElBQUksZUFBQyw4REFBQ0M7MEJBQTZCUDtlQUFuQixHQUFTLE9BQU5ILE9BQU07Ozs7O1FBQ2pDO1FBRUEscUJBQ0UsOERBQUNjO1lBQWdCQyxXQUFVOztnQkFDeEJWO2dCQUNBTCxRQUFRSixNQUFNaUIsTUFBTSxHQUFHLG1CQUFLLDhEQUFDWDs7Ozs7O1dBRnRCRjs7Ozs7SUFLZDtBQUNGO0tBNUNTTjtBQThDVCxTQUFTc0IsaUJBQWlCckIsSUFBSTtJQUM1QixJQUFJLENBQUNBLE1BQU0sT0FBTztJQUNsQixJQUFJc0IsVUFBVXRCLEtBQUtNLElBQUk7SUFFdkIsSUFBSWdCLFFBQVFDLFVBQVUsQ0FBQyxRQUFRRCxRQUFRRSxRQUFRLENBQUMsTUFBTTtRQUNwRCxJQUFJO1lBQ0YsTUFBTUMsT0FBT0MsS0FBS0MsS0FBSyxDQUFDTDtZQUN4QkEsVUFDRUcsS0FBS0csY0FBYyxJQUNuQkgsS0FBS0ksUUFBUSxJQUNiSixLQUFLSyxNQUFNLElBQ1hMLEtBQUtNLE1BQU0sSUFDWE4sS0FBS3pCLElBQUksSUFDVHlCLEtBQUtPLE9BQU8sSUFDWk4sS0FBS08sU0FBUyxDQUFDUjtRQUNuQixFQUFFLFVBQU0sQ0FBQztJQUNYO0lBRUFILFVBQVVBLFFBQVFZLE9BQU8sQ0FBQyxVQUFVO0lBQ3BDWixVQUFVQSxRQUFRWSxPQUFPLENBQUMsUUFBUTtJQUNsQ1osVUFBVUEsUUFBUVksT0FBTyxDQUFDLFFBQVE7SUFDbENaLFVBQVVBLFFBQVFZLE9BQU8sQ0FBQyxRQUFRO0lBRWxDLE9BQU9aO0FBQ1Q7QUFFZSxTQUFTYTs7SUFDdEIsTUFBTUMsU0FBU3RELHNEQUFTQTtJQUN4QixNQUFNLEVBQUV1RCxLQUFLLEVBQUVDLFFBQVFDLFFBQVEsRUFBRSxHQUFHSCxPQUFPSSxLQUFLO0lBRWhELE1BQU1DLGVBQWU7UUFDbkJDLEtBQUs7WUFBRUMsS0FBSztZQUFnREMsT0FBTztRQUFHO1FBQ3RFQyxLQUFLO1lBQUVGLEtBQUs7WUFBOENDLE9BQU87UUFBRztRQUNwRUUsTUFBTTtZQUFFSCxLQUFLO1lBQTJDQyxPQUFPO1FBQUc7SUFDcEU7SUFFQSxNQUFNRyxXQUFXVixTQUFTO0lBQzFCLE1BQU1XLGdCQUFnQlAsWUFBWSxDQUFDTSxTQUFTLElBQUksQ0FBQztJQUNqRCxNQUFNRSxpQkFBaUJWLGFBQWE7SUFFcEMsTUFBTSxDQUFDVyxTQUFTQyxXQUFXLEdBQUd4RSwrQ0FBUUEsQ0FBQztJQUN2QyxNQUFNLENBQUN5RSxNQUFNQyxRQUFRLEdBQUcxRSwrQ0FBUUEsQ0FBQztJQUNqQyxNQUFNLENBQUMyRSxVQUFVQyxZQUFZLEdBQUc1RSwrQ0FBUUEsQ0FBQztJQUN6QyxNQUFNLENBQUM2RSxVQUFVQyxZQUFZLEdBQUc5RSwrQ0FBUUEsQ0FBQztJQUN6QyxNQUFNLENBQUMrRSxVQUFVQyxZQUFZLEdBQUdoRiwrQ0FBUUEsQ0FBQyxFQUFFO0lBQzNDLE1BQU0sQ0FBQ2lGLE9BQU9DLFNBQVMsR0FBR2xGLCtDQUFRQSxDQUFDO0lBQ25DLE1BQU0sQ0FBQ21GLFNBQVNDLFdBQVcsR0FBR3BGLCtDQUFRQSxDQUFDO0lBQ3ZDLE1BQU0sQ0FBQ3FGLGFBQWFDLGVBQWUsR0FBR3RGLCtDQUFRQSxDQUFDO0lBQy9DLE1BQU11RixTQUFTeEYsNkNBQU1BO0lBRXJCLE1BQU0sQ0FBQ3lGLGFBQWFDLGVBQWUsR0FBR3pGLCtDQUFRQSxDQUFDO0lBRWpELE1BQU0sQ0FBQzBGLGVBQWVDLGlCQUFpQixHQUFHM0YsK0NBQVFBLENBQUMsRUFBRTtJQUNyRCxNQUFNLENBQUM0RixVQUFVQyxZQUFZLEdBQUc3RiwrQ0FBUUEsQ0FBQztJQUN6QyxNQUFNLENBQUM4RixVQUFVQyxZQUFZLEdBQUcvRiwrQ0FBUUEsQ0FBQztJQUV6QyxNQUFNLENBQUNnRyxjQUFjQyxnQkFBZ0IsR0FBR2pHLCtDQUFRQSxDQUFDLEVBQUU7SUFDbkQsTUFBTSxDQUFDa0csZUFBZUMsaUJBQWlCLEdBQUduRywrQ0FBUUEsQ0FBQztJQUVqRCx5QkFBeUI7SUFDekIsTUFBTSxDQUFDb0csY0FBY0MsZ0JBQWdCLEdBQUdyRywrQ0FBUUEsQ0FBQztJQUNqRCxNQUFNc0csY0FBY3ZHLDZDQUFNQSxDQUFDO0lBQzNCLE1BQU13RyxtQkFBbUJ4Ryw2Q0FBTUEsQ0FBQztJQUNoQyxNQUFNeUcsMEJBQTBCO0lBQ2hDLE1BQU1DLG1CQUFtQjFHLDZDQUFNQSxDQUFDO0lBQ2hDLE1BQU0yRyxjQUFjM0csNkNBQU1BLENBQUM7SUFDM0IsTUFBTTRHLG1CQUFtQjVHLDZDQUFNQSxDQUFDO0lBQ2hDLE1BQU02RyxXQUFXN0csNkNBQU1BLENBQUM7SUFDeEIsTUFBTThHLG1CQUFtQjlHLDZDQUFNQSxDQUFDO0lBRWhDLDZCQUE2QjtJQUM3QixNQUFNLENBQUMrRyxTQUFTQyxXQUFXLEdBQUcvRywrQ0FBUUEsQ0FBQztJQUN2QyxNQUFNLENBQUNnSCxXQUFXQyxhQUFhLEdBQUdqSCwrQ0FBUUEsQ0FBQztJQUczQyxNQUFNa0gsWUFBWSxpQkFBMEIsT0FBVDlDO0lBQ25DLFNBQVMrQztRQUNULElBQUk7WUFDRixNQUFNQyxNQUFNQyxhQUFhQyxPQUFPLENBQUNKO1lBQ2pDLE9BQU9FLE1BQU1yRSxLQUFLQyxLQUFLLENBQUNvRSxPQUFPLEVBQUU7UUFDbkMsRUFBRSxVQUFNO1lBQ04sT0FBTyxFQUFFO1FBQ1g7SUFDRDtJQUNBLFNBQVNHLGlCQUFpQkMsT0FBTztRQUNoQyxJQUFJO1lBQ0ZILGFBQWFJLE9BQU8sQ0FBQ1AsV0FBV25FLEtBQUtPLFNBQVMsQ0FBQ2tFLFFBQVFFLEtBQUssQ0FBQyxHQUFHO1FBQ2xFLEVBQUUsVUFBTSxDQUFDO0lBQ1Y7SUFHQyxRQUFRLEdBQ1I1SCxnREFBU0E7OEJBQUM7WUFDUixNQUFNNkgsUUFBUXRILGlFQUFrQkEsQ0FBQ0QscURBQUlBOzRDQUFFLE9BQU93SDtvQkFDNUMsSUFBSXRELGtCQUFrQixDQUFDc0QsR0FBRzt3QkFDeEJsRCxRQUFRO3dCQUNSRSxZQUFZO3dCQUNaRSxZQUFZO3dCQUVaLE1BQU0wQyxVQUFVTDt3QkFDaEJsQixnQkFBZ0J1Qjt3QkFFaEJyQixpQkFBaUI7d0JBQ2pCbkIsWUFBWSxFQUFFO3dCQUVkUixXQUFXO3dCQUNYO29CQUNGO29CQUVBLElBQUksQ0FBQ0Ysa0JBQWtCLENBQUNzRCxHQUFHO3dCQUN6Qm5FLE9BQU9GLE9BQU8sQ0FBQzt3QkFDZjtvQkFDRjtvQkFFQW1CLFFBQVFrRDtvQkFFUixJQUFJO3dCQUNGLElBQUlBLEdBQUc7Z0NBTUhBLFVBUUFBOzRCQWJGLE1BQU1DLFVBQVUsTUFBTXJILHFFQUFjQSxDQUFDb0gsRUFBRUUsR0FBRzs0QkFDMUMsTUFBTUMsT0FDSkYsQ0FBQUEsb0JBQUFBLDhCQUFBQSxRQUFTRSxJQUFJLEtBQ2JILEVBQUVJLFdBQVcsS0FDYkgsb0JBQUFBLDhCQUFBQSxRQUFTbEQsUUFBUSxPQUNqQmlELFdBQUFBLEVBQUVLLEtBQUssY0FBUEwsK0JBQUFBLFNBQVNyRyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsS0FDdEI7NEJBQ0Z1RCxZQUFZaUQ7NEJBRVosTUFBTUcsT0FDSkwsQ0FBQUEsb0JBQUFBLDhCQUFBQSxRQUFTbEQsUUFBUSxNQUNqQmtELG9CQUFBQSw4QkFBQUEsUUFBU0UsSUFBSSxLQUNiSCxFQUFFSSxXQUFXLE1BQ2JKLFlBQUFBLEVBQUVLLEtBQUssY0FBUEwsZ0NBQUFBLFVBQVNyRyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsS0FDdEI7NEJBQ0ZxRCxZQUFZc0Q7NEJBRVosTUFBTUMsVUFBVSxNQUFNekgsdUVBQWdCQSxDQUFDa0gsRUFBRUUsR0FBRyxFQUFFMUQsVUFBVTs0QkFDeER1QixpQkFBaUJ3Qzs0QkFFakIsSUFBSUEsUUFBUTVGLE1BQU0sR0FBRyxHQUFHO2dDQUN0QixxREFBcUQ7Z0NBQ3JEc0QsWUFBWTtnQ0FDWmIsWUFBWSxFQUFFOzRCQUNoQixPQUFPO2dDQUNMLHdEQUF3RDtnQ0FDeERhLFlBQVk7Z0NBQ1piLFlBQVksRUFBRTtnQ0FDZFcsaUJBQWlCLEVBQUU7NEJBQ3JCO3dCQUNGO29CQUNGLEVBQUUsVUFBTSxDQUFDO29CQUVUbkIsV0FBVztnQkFDYjs7WUFFQTtzQ0FBTyxJQUFNbUQ7O1FBQ2Y7NkJBQUc7UUFBQ2xFO1FBQVFXO1FBQVVFO0tBQWU7SUFFckMsMEJBQTBCO0lBQzFCeEUsZ0RBQVNBOzhCQUFDO1lBQ1IyRyxpQkFBaUIyQixPQUFPLEdBQUdDLFNBQVNDLGFBQWEsQ0FDL0M7WUFFRjVCLFlBQVkwQixPQUFPLEdBQUdDLFNBQVNDLGFBQWEsQ0FBQztRQUMvQzs2QkFBRyxFQUFFO0lBRUwsc0NBQXNDO0lBQ3RDLE1BQU1DLGVBQWV0SSxrREFBV0E7OENBQUM7WUFDL0IsSUFBSSxDQUFDbUcsY0FBYztZQUVuQixNQUFNb0MsZ0JBQWdCL0IsaUJBQWlCMkIsT0FBTztZQUM5QyxJQUFJLENBQUNJLGVBQWU7WUFFcEIsTUFBTUMsbUJBQW1CRCxjQUFjRSxTQUFTO1lBQ2hELE1BQU1DLGFBQWFDLEtBQUtDLEdBQUcsQ0FBQ0osbUJBQW1CbEMsaUJBQWlCNkIsT0FBTztZQUV2RSxJQUFJTyxhQUFhbkMseUJBQXlCO2dCQUN4Q0gsZ0JBQWdCO2dCQUNoQixNQUFNeUMsZUFBZVQsU0FBU0MsYUFBYSxDQUFDO2dCQUM1QyxJQUFJUSxjQUFjQSxhQUFhQyxJQUFJO1lBQ3JDO1lBRUF4QyxpQkFBaUI2QixPQUFPLEdBQUdLO1FBQzdCOzZDQUFHO1FBQUNyQztLQUFhO0lBRWpCLCtCQUErQjtJQUMvQnRHLGdEQUFTQTs4QkFBQztZQUNSLE1BQU0wSSxnQkFBZ0IvQixpQkFBaUIyQixPQUFPO1lBQzlDLElBQUksQ0FBQ0ksZUFBZTtZQUVwQkEsY0FBY1EsZ0JBQWdCLENBQUMsVUFBVVQ7WUFDekM7c0NBQU87b0JBQ0xDLGNBQWNTLG1CQUFtQixDQUFDLFVBQVVWO2dCQUM5Qzs7UUFDRjs2QkFBRztRQUFDQTtLQUFhO0lBRWpCLDRDQUE0QztJQUM1Q3pJLGdEQUFTQTs4QkFBQztZQUNSLElBQUlzRyxnQkFBZ0JLLGlCQUFpQjJCLE9BQU8sRUFBRTtnQkFDNUM3QixpQkFBaUI2QixPQUFPLEdBQUczQixpQkFBaUIyQixPQUFPLENBQUNNLFNBQVM7WUFDL0Q7UUFDRjs2QkFBRztRQUFDdEM7S0FBYTtJQUVqQnRHLGdEQUFTQTs4QkFBQztnQkFDUnlGO2FBQUFBLGtCQUFBQSxPQUFPNkMsT0FBTyxjQUFkN0Msc0NBQUFBLGdCQUFnQjJELGNBQWMsQ0FBQztnQkFBRUMsVUFBVTtZQUFTO1FBQ3REOzZCQUFHO1FBQUNwRTtLQUFTO0lBRWIsZ0JBQWdCLEdBQ2hCLGVBQWVxRSxXQUFXQyxDQUFDO1FBQzNCQSxFQUFFQyxjQUFjO1FBQ2hCLE1BQU1DLFVBQVV0RSxNQUFNdEQsSUFBSTtRQUMxQixJQUFJLENBQUM0SCxTQUFTO1FBRWQsTUFBTUMsVUFBVTtZQUFFQyxNQUFNO1lBQVE1SCxTQUFTMEg7UUFBUTtRQUNqRCxNQUFNRyxrQkFBa0I7ZUFBSTNFO1lBQVV5RTtTQUFRO1FBQzlDeEUsWUFBWTBFO1FBQ1p4RSxTQUFTO1FBQ1RFLFdBQVc7UUFDWFcsWUFBWTtRQUNaTSxnQkFBZ0I7UUFDaEJNLGlCQUFpQnlCLE9BQU8sR0FBRztRQUUzQjdILCtEQUFhLENBQUMsY0FBYztZQUFFb0osSUFBSTtRQUFPO1FBRXpDLElBQUlDLGlCQUFpQmhFO1FBRXZCLElBQUluQixRQUFRLENBQUNILGtCQUFrQixDQUFDc0YsZ0JBQWdCO1lBQzlDQSxpQkFBaUIsTUFBTW5KLG1FQUFZQSxDQUFDZ0UsS0FBS3FELEdBQUcsRUFBRTFEO1lBQzlDeUIsWUFBWStEO1FBQ2Q7UUFFRSxJQUFJO1lBQ0YsdUNBQXVDO1lBQ3ZDLElBQUluRixRQUFRLENBQUNILGtCQUFrQnNGLGdCQUFnQjtnQkFDN0MsTUFBTWhKLDBFQUFtQkEsQ0FBQzZELEtBQUtxRCxHQUFHLEVBQUUxRCxVQUFVd0YsZ0JBQWdCSjtZQUNoRTtZQUVBLG9CQUFvQjtZQUNwQixJQUFJLENBQUNuRixjQUFjTCxHQUFHLEVBQUU7Z0JBQ3RCLE1BQU02RixXQUFXO29CQUFFSixNQUFNO29CQUFhNUgsU0FBUztnQkFBcUI7Z0JBQ3BFbUQsWUFBWTt1QkFBSTBFO29CQUFpQkc7aUJBQVM7Z0JBRTFDLElBQUlwRixRQUFRLENBQUNILGtCQUFrQnNGLGdCQUFnQjtvQkFDN0MsTUFBTWhKLDBFQUFtQkEsQ0FBQzZELEtBQUtxRCxHQUFHLEVBQUUxRCxVQUFVd0YsZ0JBQWdCQztnQkFDaEU7Z0JBRUF0SiwrREFBYSxDQUFDO2dCQUNkd0YsWUFBWTtnQkFDWlgsV0FBVztnQkFDWDtZQUNGO1lBRUEsTUFBTTJFLGlCQUFpQjtnQkFDckJDLFFBQVE7Z0JBQ1JDLFNBQVM7b0JBQUUsZ0JBQWdCO2dCQUFtQjtZQUNoRDtZQUVBLE1BQU1DLGlCQUFpQjtnQkFDckI7b0JBQ0VDLFFBQVFaO29CQUNSYSxZQUFZO3dCQUFFQyxnQkFBZ0I7d0JBQUtDLGFBQWE7b0JBQUk7Z0JBQ3REO2dCQUNBO29CQUFFekcsT0FBTzBGO29CQUFTYyxnQkFBZ0I7b0JBQUtDLGFBQWE7Z0JBQUk7Z0JBQ3hEO29CQUFFckYsT0FBT3NFO29CQUFTZ0IsWUFBWTtvQkFBS0QsYUFBYTtnQkFBSTthQUNyRDtZQUVELElBQUlFLFFBQVE7WUFDWixJQUFJQyxZQUFZO1lBRWhCLGlEQUFpRDtZQUNqRCxNQUFNQyxhQUFhLElBQUlDO1lBQ3ZCLE1BQU1DLFlBQVlDLFdBQVcsSUFBTUgsV0FBV0ksS0FBSyxJQUFJO1lBRXZELElBQUssSUFBSUMsSUFBSSxHQUFHQSxJQUFJYixlQUFlM0gsTUFBTSxFQUFFd0ksSUFBSztnQkFDOUMsSUFBSTtvQkFDRmhCLGVBQWVpQixJQUFJLEdBQUdqSSxLQUFLTyxTQUFTLENBQUM0RyxjQUFjLENBQUNhLEVBQUU7b0JBRXRELE1BQU1FLE1BQU0sTUFBTUMsTUFBTTdHLGNBQWNMLEdBQUcsRUFBRTt3QkFDekMsR0FBRytGLGNBQWM7d0JBQ2pCb0IsUUFBUVQsV0FBV1MsTUFBTTtvQkFDM0I7b0JBRUEsSUFBSSxDQUFDRixJQUFJRyxFQUFFLEVBQUUsTUFBTSxJQUFJQyxNQUFNLFFBQW1CLE9BQVhKLElBQUlLLE1BQU07b0JBRS9DLE1BQU1sRSxNQUFNLE1BQU02RCxJQUFJNUosSUFBSTtvQkFDMUJtSixRQUFROUgsaUJBQWlCMEU7b0JBRXpCLElBQUlvRCxTQUFTQSxVQUFVLE1BQU07Z0JBQy9CLEVBQUUsT0FBT2UsS0FBSztvQkFDWmQsWUFBWWM7b0JBQ1osSUFBSUEsSUFBSXhELElBQUksS0FBSyxjQUFjLE9BQU8sOEJBQThCO2dCQUN0RTtZQUNGO1lBRUF5RCxhQUFhWjtZQUViLElBQUksQ0FBQ0osU0FBU0MsV0FBVyxNQUFNQTtZQUMvQixJQUFJLENBQUNELE9BQU8sTUFBTSxJQUFJYSxNQUFNO1lBRTVCYixRQUFRQSxNQUFNN0ksSUFBSTtZQUNsQixNQUFNOEosUUFBUTtnQkFBRWhDLE1BQU07Z0JBQWE1SCxTQUFTMkk7WUFBTTtZQUVsRCxNQUFNa0IsZ0JBQWdCO21CQUFJaEM7Z0JBQWlCK0I7YUFBTTtZQUNqRHpHLFlBQVkwRztZQUlaLGdFQUFnRTtZQUNwRSxJQUFJakgsUUFBUSxDQUFDSCxrQkFBa0JzRixnQkFBZ0I7Z0JBQzdDLE1BQU1oSiwwRUFBbUJBLENBQUM2RCxLQUFLcUQsR0FBRyxFQUFFMUQsVUFBVXdGLGdCQUFnQjZCO1lBQ2hFO1lBR0lsTCwrREFBYSxDQUFDLGtCQUFrQjtnQkFBRW9KLElBQUk7WUFBTztRQUMvQyxFQUFFLE9BQU80QixLQUFLO1lBQ1osTUFBTTFCLFdBQVc7Z0JBQ2ZKLE1BQU07Z0JBQ041SCxTQUNFMEosSUFBSXhELElBQUksS0FBSyxlQUNULHFEQUNBLGNBQTBCLE9BQVp3RCxJQUFJbEksT0FBTztZQUNqQztZQUVBMkIsWUFBWTttQkFBSUQ7Z0JBQVV5RTtnQkFBU0s7YUFBUztZQUM1Q3RKLDZEQUFXLENBQUMsZUFBZTtnQkFBRW9KLElBQUk7WUFBTztRQUMxQztRQUVBNUQsWUFBWTtRQUNaWCxXQUFXO0lBQ2I7SUFFRSxlQUFleUc7UUFDZixNQUFNQyxzQkFBc0IvRyxTQUFTZ0gsSUFBSSxDQUFDLENBQUNDO2dCQUEyQkE7bUJBQXJCQSxFQUFFdkMsSUFBSSxLQUFLLFlBQVV1QyxhQUFBQSxFQUFFbkssT0FBTyxjQUFUbUssaUNBQUFBLFdBQVdySyxJQUFJOztRQUVyRixJQUFJOEMsUUFBUSxDQUFDSCxnQkFBZ0I7WUFDM0IsbUNBQW1DO1lBQ25DLGlCQUFpQjtZQUNqQixtQ0FBbUM7WUFFbkMsZ0RBQWdEO1lBQ2hELElBQUl3SCxxQkFBcUI7Z0JBQ3ZCLElBQUlHLFlBQVlyRztnQkFFaEIsb0RBQW9EO2dCQUNwRCxJQUFJLENBQUNxRyxXQUFXO29CQUNkQSxZQUFZLE1BQU14TCxtRUFBWUEsQ0FBQ2dFLEtBQUtxRCxHQUFHLEVBQUUxRDtvQkFFekMseUNBQXlDO29CQUN6QyxLQUFLLE1BQU04SCxPQUFPbkgsU0FBVTt3QkFDMUIsTUFBTW5FLDBFQUFtQkEsQ0FBQzZELEtBQUtxRCxHQUFHLEVBQUUxRCxVQUFVNkgsV0FBV0M7b0JBQzNEO2dCQUNGO2dCQUVBLDBEQUEwRDtnQkFDMUQsTUFBTXBMLGtFQUFXQSxDQUFDMkQsS0FBS3FELEdBQUcsRUFBRTFELFVBQVU2SDtnQkFFdEMsZ0NBQWdDO2dCQUNoQyxNQUFNcEwsMkVBQW9CQSxDQUFDNEQsS0FBS3FELEdBQUcsRUFBRTFELFVBQVU7Z0JBRS9DLDBCQUEwQjtnQkFDMUIsTUFBTStELFVBQVUsTUFBTXpILHVFQUFnQkEsQ0FBQytELEtBQUtxRCxHQUFHLEVBQUUxRCxVQUFVO2dCQUMzRHVCLGlCQUFpQndDO1lBQ25CO1lBRUEsaUNBQWlDO1lBQ2pDdEMsWUFBWTtZQUNaYixZQUFZLEVBQUU7UUFFaEIsT0FBTztZQUNMLG1DQUFtQztZQUNuQyxhQUFhO1lBQ2IsbUNBQW1DO1lBRW5DLG1DQUFtQztZQUNuQyxJQUFJOEcscUJBQXFCO2dCQUN2QixNQUFNSyxlQUFlcEgsU0FBU3FILElBQUksQ0FBQyxDQUFDSjt3QkFBMkJBOzJCQUFyQkEsRUFBRXZDLElBQUksS0FBSyxZQUFVdUMsYUFBQUEsRUFBRW5LLE9BQU8sY0FBVG1LLGlDQUFBQSxXQUFXckssSUFBSTs7Z0JBRTlFLE1BQU0wSyxZQUFZO29CQUNoQjFDLElBQUkyQyxLQUFLQyxHQUFHLEdBQUdDLFFBQVE7b0JBQ3ZCQyxPQUFPLENBQUNOLENBQUFBLHlCQUFBQSxtQ0FBQUEsYUFBY3RLLE9BQU8sS0FBSSxVQUFTLEVBQUc2RixLQUFLLENBQUMsR0FBRztvQkFDdEQzQyxVQUFVQTtvQkFDVjJILFdBQVdKLEtBQUtDLEdBQUc7Z0JBQ3JCO2dCQUVBLE1BQU1JLFVBQVU7b0JBQUNOO3VCQUFjckc7aUJBQWEsQ0FDekM0RyxJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTUEsRUFBRUosU0FBUyxHQUFHRyxFQUFFSCxTQUFTLEVBQ3hDaEYsS0FBSyxDQUFDLEdBQUc7Z0JBRVp6QixnQkFBZ0IwRztnQkFDaEJwRixpQkFBaUJvRjtZQUNuQjtZQUVBLCtCQUErQjtZQUMvQnhHLGlCQUFpQjtZQUNqQm5CLFlBQVksRUFBRTtRQUNoQjtRQUVBK0IsV0FBVztRQUNYRSxhQUFhO0lBQ2Y7SUFFRSxTQUFTOEY7UUFDUHpNLHNEQUFPQSxDQUFDRixxREFBSUEsRUFBRTRNLElBQUksQ0FBQyxJQUFNdkosT0FBT3RCLElBQUksQ0FBQztJQUN2QztJQUVBLCtCQUErQjtJQUMvQixTQUFTOEs7UUFDUHhKLE9BQU90QixJQUFJLENBQUM7SUFDZDtJQUVBLHdCQUF3QjtJQUN4QixlQUFlK0s7UUFDYixJQUFJO1lBQ0YsSUFBSSxDQUFDbkksWUFBWUEsU0FBU3hDLE1BQU0sS0FBSyxHQUFHO2dCQUN0Q2hDLDZEQUFXLENBQUM7Z0JBQ1o7WUFDRjtZQUVBQSwrREFBYSxDQUFDLG9CQUFvQjtnQkFBRW9KLElBQUk7WUFBUTtZQUVoRCxNQUFNc0IsTUFBTSxNQUFNQyxNQUFNLGNBQWM7Z0JBQ3BDbEIsUUFBUTtnQkFDUkMsU0FBUztvQkFBRSxnQkFBZ0I7Z0JBQW1CO2dCQUM5Q2UsTUFBTWpJLEtBQUtPLFNBQVMsQ0FBQztvQkFDbkJjO29CQUNBK0ksV0FBV2IsS0FBS0MsR0FBRztvQkFDbkJ4SCxVQUFVQSxTQUFTdkQsR0FBRyxDQUFDLENBQUN3SyxJQUFPOzRCQUFFdkMsTUFBTXVDLEVBQUV2QyxJQUFJOzRCQUFFNUgsU0FBU21LLEVBQUVuSyxPQUFPO3dCQUFDO2dCQUNwRTtZQUNGO1lBRUEsSUFBSSxDQUFDb0osSUFBSUcsRUFBRSxFQUFFLE1BQU0sSUFBSUMsTUFBTSxRQUFtQixPQUFYSixJQUFJSyxNQUFNO1lBQy9DLE1BQU04QixPQUFPLE1BQU1uQyxJQUFJbkksSUFBSTtZQUMzQixJQUFJLEVBQUNzSyxpQkFBQUEsMkJBQUFBLEtBQU16RCxFQUFFLEdBQUUsTUFBTSxJQUFJMEIsTUFBTTtZQUUvQnRFLFdBQVdxRyxLQUFLekQsRUFBRTtZQUNsQjFDLGFBQWE7WUFFYjFHLCtEQUFhLENBQUMsYUFBYTtnQkFBRW9KLElBQUk7WUFBUTtRQUMzQyxFQUFFLE9BQU9OLEdBQUc7WUFDVjlJLDZEQUFXLENBQUMsV0FBcUIsT0FBVjhJLEVBQUVoRyxPQUFPLEdBQUk7Z0JBQUVzRyxJQUFJO1lBQVE7UUFDcEQ7SUFDRjtJQUVBLElBQUlwRixTQUNGLHFCQUNFLDhEQUFDL0I7UUFBSUMsV0FBVTtrQkFBb0Q7Ozs7OztJQUt2RSxNQUFNNEssZUFBZTtJQUNyQixNQUFNQyxlQUFlO0lBQ3JCLE1BQU1DLGVBQWU7SUFDckIsTUFBTUMsaUJBQWlCO0lBQ3ZCLE1BQU1DLGlCQUFpQjtJQUN2QixNQUFNQyxrQkFBa0IsR0FBRyxzQkFBc0I7SUFFakQsTUFBTUMsV0FDSjdHLFdBQVcsYUFBa0IsY0FDekIsR0FBbUNBLE9BQWhDOEcsT0FBT0MsUUFBUSxDQUFDQyxNQUFNLEVBQUMsV0FBaUIsT0FBUmhILFdBQ25DO0lBRU4sTUFBTWlILGdCQUFldEosUUFBUSxDQUFDSCxpQkFBaUJvQixnQkFBZ0JNO0lBRS9ELHFCQUNFLDhEQUFDeEQ7UUFDQ0MsV0FBVTtRQUNWdUwsT0FBTztZQUFFQyxpQkFBaUI7UUFBaUI7OzBCQUUzQyw4REFBQ3pMO2dCQUFJQyxXQUFVOzs7Ozs7MEJBR2YsOERBQUN5TDtnQkFDQ3pMLFdBQVU7Z0JBQ1Z1TCxPQUFPO29CQUFFRyxRQUFRLEdBQWdCLE9BQWJkLGNBQWE7Z0JBQUk7O2tDQUVyQyw4REFBQzdLO3dCQUFJQyxXQUFVOzswQ0FDYiw4REFBQzJMO2dDQUFJQyxLQUFJO2dDQUFlQyxLQUFJO2dDQUFXN0wsV0FBVTs7Ozs7OzBDQUNqRCw4REFBQzhMO2dDQUFHOUwsV0FBVTswQ0FBK0I7Ozs7Ozs7Ozs7OztrQ0FNL0MsOERBQUMrTDt3QkFDQ0MsU0FBU2hLLE9BQU9zSSxnQkFBZ0JFO3dCQUNoQ3hLLFdBQVU7a0NBRVRnQyxPQUFPLGFBQWE7Ozs7Ozs7Ozs7OzswQkFLekIsOERBQUNpSztnQkFDQ2pNLFdBQVU7Z0JBQ1Z1TCxPQUFPO29CQUFFRyxRQUFRLEdBQWdCLE9BQWJiLGNBQWE7Z0JBQUk7MEJBQ3RDOzs7Ozs7WUFLQWxILDhCQUNDLDhEQUFDNUQ7Z0JBRUN3TCxPQUFPO29CQUNMVyxRQUFRLEdBQW9CLE9BQWpCckIsZUFBZSxHQUFFO29CQUM1QnNCLE1BQU1wSixjQUFjLEdBQWdCLE9BQWIrSCxjQUFhLFFBQU07b0JBQzFDWSxRQUFRLEdBQWtCLE9BQWZYLGdCQUFlO29CQUMxQnFCLFFBQVE7Z0JBQ1Y7MERBTlU7O2tDQVNWLDhEQUFDck07a0VBQWM7a0NBQ3ZCLDRFQUFDZ007NEJBQ0NNLE1BQUs7NEJBQ0xDLGFBQWEsQ0FBQzFGO2dDQUNaLGlDQUFpQztnQ0FDakNBLEVBQUVDLGNBQWM7NEJBQ2xCOzRCQUNBbUYsU0FBUyxDQUFDcEY7Z0NBQ1JBLEVBQUUyRixlQUFlO2dDQUVqQix3QkFBd0I7Z0NBQ3hCOUosU0FBUztnQ0FFVCxpQkFBaUI7Z0NBQ2pCeUIsaUJBQWlCeUIsT0FBTyxHQUFHO2dDQUMzQnZCLGlCQUFpQnVCLE9BQU8sR0FBRztnQ0FFM0Isb0NBQW9DO2dDQUNwQyxJQUFJOUIsWUFBWThCLE9BQU8sRUFBRTtvQ0FDdkI5QixZQUFZOEIsT0FBTyxDQUFDbEQsUUFBUSxDQUFDO29DQUM3Qm9CLFlBQVk4QixPQUFPLENBQUM2RyxnQkFBZ0IsQ0FBQztnQ0FDdkM7Z0NBRUEsMkJBQTJCO2dDQUMzQkMsc0JBQXNCO29DQUNwQixJQUFJdEksU0FBU3dCLE9BQU8sRUFBRTt3Q0FDcEJ4QixTQUFTd0IsT0FBTyxDQUFDK0csS0FBSzt3Q0FDdEJ2SSxTQUFTd0IsT0FBTyxDQUFDZ0gsaUJBQWlCLENBQUMsR0FBRztvQ0FDeEM7Z0NBQ0Y7NEJBQ0Y7c0VBQ1U7c0NBQ1g7Ozs7Ozs7Ozs7O2tDQUtPLDhEQUFDck8sOERBQVFBO3dCQUNUdUYsYUFBYSxDQUFDK0k7NEJBQ1ovSSxZQUFZOEIsT0FBTyxHQUFHaUg7d0JBQ3hCO3dCQUNBQyxZQUFZakssY0FBYyxVQUFVO3dCQUNwQ3JFLFFBQVFBLE9BQU9DLE1BQU07d0JBQ3JCc08sWUFBWSxDQUFDZjs0QkFDWCxJQUFJZ0IsY0FBY3ZLOzRCQUNsQixJQUFJd0ssV0FBVzVJLGlCQUFpQnVCLE9BQU87NEJBRXZDLE1BQU1zSCxhQUFhLENBQUNDLFNBQVNDO2dDQUM3QjFLLFNBQVN5SztnQ0FDVGhKLGlCQUFpQnlCLE9BQU8sR0FBR3VIO2dDQUMzQjlJLGlCQUFpQnVCLE9BQU8sR0FBR3dIO2dDQUUzQlYsc0JBQXNCO29DQUNwQixJQUFJdEksU0FBU3dCLE9BQU8sRUFBRTt3Q0FDcEJ4QixTQUFTd0IsT0FBTyxDQUFDK0csS0FBSzt3Q0FDdEJ2SSxTQUFTd0IsT0FBTyxDQUFDZ0gsaUJBQWlCLENBQUNRLGFBQWFBO29DQUNsRDtnQ0FDRjs0QkFDRjs0QkFFQSxvQkFBb0I7NEJBQ3BCLEdBQUc7NEJBQ0gsSUFBSXBCLFdBQVcsYUFBYUEsV0FBVyxVQUFVO29DQUkvQ2xJO2dDQUhBLE1BQU11SixnQkFBZ0IsQ0FBQ3hLO2dDQUN2QkMsZUFBZXVLO2lDQUVmdkosdUJBQUFBLFlBQVk4QixPQUFPLGNBQW5COUIsMkNBQUFBLHFCQUFxQndKLFVBQVUsQ0FBQztvQ0FDOUJSLFlBQVlPLGdCQUFnQixVQUFVO2dDQUN4QztnQ0FDQTs0QkFDRjs0QkFDQSxvQkFBb0I7NEJBQ3BCLEdBQUc7NEJBQ0gsSUFBSXJCLFdBQVcsV0FBVztnQ0FDeEJwRixXQUFXO29DQUFFRSxnQkFBZ0IsS0FBTztnQ0FBRTtnQ0FDdEM7NEJBQ0Y7NEJBRUEsd0JBQXdCOzRCQUN4QixHQUFHOzRCQUNILElBQUlrRixXQUFXLGVBQWU7Z0NBQzVCLElBQUlpQixXQUFXLEdBQUc7b0NBQ2hCLE1BQU1FLFVBQ05ILFlBQVk5SCxLQUFLLENBQUMsR0FBRytILFdBQVcsS0FDaENELFlBQVk5SCxLQUFLLENBQUMrSDtvQ0FFbEJDLFdBQVdDLFNBQVNGLFdBQVc7Z0NBQ2pDO2dDQUNBOzRCQUNGOzRCQUVBLG9CQUFvQjs0QkFDcEIsR0FBRzs0QkFDSCxJQUFJakIsV0FBVyxXQUFXO2dDQUN4QixNQUFNbUIsVUFDTkgsWUFBWTlILEtBQUssQ0FBQyxHQUFHK0gsWUFDckIsTUFDQUQsWUFBWTlILEtBQUssQ0FBQytIO2dDQUVsQkMsV0FBV0MsU0FBU0YsV0FBVztnQ0FDL0I7NEJBQ0Y7NEJBRUEsOENBQThDOzRCQUM5QyxHQUFHOzRCQUNILE1BQU1NLGdCQUFnQjtnQ0FDcEIsT0FBTztnQ0FDUCxPQUFPO2dDQUNQLE9BQU87Z0NBQ1AsT0FBTztnQ0FDUCxPQUFPOzRCQUNUOzRCQUNBLElBQUlBLGFBQWEsQ0FBQ3ZCLE9BQU8sRUFBRTtnQ0FDekIsTUFBTXdCLE9BQU9ELGFBQWEsQ0FBQ3ZCLE9BQU87Z0NBRWxDLE1BQU1tQixVQUNOSCxZQUFZOUgsS0FBSyxDQUFDLEdBQUcrSCxZQUNyQk8sT0FDQVIsWUFBWTlILEtBQUssQ0FBQytIO2dDQUVsQkMsV0FBV0MsU0FBU0YsV0FBVztnQ0FDL0I7NEJBQ0Y7NEJBRU4sNkNBQTZDOzRCQUM3QyxJQUFJakIsT0FBTzVMLFVBQVUsQ0FBQyxRQUFRNEwsT0FBTzNMLFFBQVEsQ0FBQyxNQUFNO2dDQUNsRDs0QkFDRjs0QkFFQSxvREFBb0Q7NEJBQ3BELE1BQU04TSxVQUNKSCxZQUFZOUgsS0FBSyxDQUFDLEdBQUcrSCxZQUNyQmpCLFNBQ0FnQixZQUFZOUgsS0FBSyxDQUFDK0g7NEJBRXBCQyxXQUFXQyxTQUFTRixXQUFXakIsT0FBT2pNLE1BQU07d0JBQzlDO3dCQUNBME4sT0FBTTt3QkFDTkMsU0FBUzs0QkFDUCxlQUFlOzRCQUNmLFdBQVc7NEJBQ1gsV0FBVzs0QkFDWCxXQUFXOzRCQUNYLE9BQU87NEJBQ1AsT0FBTzs0QkFDUCxPQUFPOzRCQUNQLE9BQU87NEJBQ1AsT0FBTzs0QkFDUCxPQUFPO3dCQUNUO3dCQUNBQyx5QkFBeUI7d0JBQ3pCQyx1QkFBdUI7d0JBQ3ZCQyxnQkFBZ0I7d0JBQ2hCQyxvQkFBb0I7Ozs7Ozs7Ozs7Ozs7Ozs7MEJBK0poQiw4REFBQzlOO2dCQUFJQyxXQUFVOztrQ0FFYiw4REFBQ0Q7d0JBQ0NDLFdBQVU7d0JBQ1Z1TCxPQUFPOzRCQUNMdUMsS0FBS2xEOzRCQUNMc0IsUUFBUXJCOzRCQUNSa0QsT0FBT2pEOzRCQUNQa0QsV0FBV2pMLGNBQWMsa0JBQW1COzRCQUM1Q3FKLFFBQVE7d0JBQ1Y7OzBDQUdBLDhEQUFDTDtnQ0FDQ0MsU0FBUyxJQUFNaEwsT0FBT3RCLElBQUksQ0FBQ3NDLE9BQU8sWUFBWTtnQ0FDOUNoQyxXQUFVOztrREFFViw4REFBQ0w7d0NBQUtLLFdBQVU7a0RBQVU7Ozs7OztrREFDMUIsOERBQUNMO3dDQUFLSyxXQUFVO2tEQUNiZ0MsT0FBTyxpQkFBaUI7Ozs7Ozs7Ozs7OzswQ0FLN0IsOERBQUMrSjtnQ0FDQ0MsU0FBUzVDO2dDQUNUcEosV0FBVTtnQ0FDVnVMLE9BQU87b0NBQUUwQyxXQUFXO2dDQUFPOzBDQUM1Qjs7Ozs7OzBDQUlELDhEQUFDQztnQ0FBRWxPLFdBQVU7MENBQTBCOzs7Ozs7MENBQ3ZDLDhEQUFDRDtnQ0FBSUMsV0FBVTs7Ozs7OzBDQUVmLDhEQUFDRDtnQ0FBSUMsV0FBVTswQ0FDWnNMLGNBQWN2TSxHQUFHLENBQUMsQ0FBQ29QLGtCQUNsQiw4REFBQ3BDO3dDQUVEL0wsV0FBVTt3Q0FDVmdNLFNBQVM7NENBQ1AsSUFBSWhLLFFBQVEsQ0FBQ0gsZ0JBQWdCO2dEQUNuQyxpQ0FBaUM7Z0RBQ2pDdUIsWUFBWStLLEVBQUVqSCxFQUFFO2dEQUNoQixNQUFNa0gsT0FBTyxNQUFNbFEsd0VBQWlCQSxDQUFDOEQsS0FBS3FELEdBQUcsRUFBRTFELFVBQVV3TSxFQUFFakgsRUFBRTtnREFDN0QzRSxZQUFZNkwsS0FBS3JQLEdBQUcsQ0FBQyxDQUFDd0ssSUFBTzt3REFBRXZDLE1BQU11QyxFQUFFdkMsSUFBSTt3REFBRTVILFNBQVNtSyxFQUFFbkssT0FBTztvREFBQzs0Q0FDbEUsT0FBTztnREFDTCx1Q0FBdUM7Z0RBQ3ZDLEdBQUc7Z0RBQ0hzRSxpQkFBaUJ5SyxFQUFFakgsRUFBRTtnREFDckIzRSxZQUFZNEwsRUFBRTdMLFFBQVEsSUFBSSxFQUFFOzRDQUM5Qjt3Q0FDRjtrREFFRzZMLEVBQUVuRSxLQUFLLElBQUk7dUNBaEJEbUUsRUFBRWpILEVBQUU7Ozs7Ozs7Ozs7MENBd0JiLDhEQUFDbkg7Z0NBQUlDLFdBQVU7O2tEQUNiLDhEQUFDRDt3Q0FBSUMsV0FBVTtrREFDYiw0RUFBQzJMOzRDQUFJQyxLQUFJOzRDQUFpQjVMLFdBQVU7Ozs7Ozs7Ozs7O2tEQUV0Qyw4REFBQ0Q7OzBEQUNDLDhEQUFDbU87Z0RBQUVsTyxXQUFVOzBEQUFxQm9DOzs7Ozs7MERBQ2xDLDhEQUFDOEw7Z0RBQUVsTyxXQUFVOzBEQUNWZ0MsT0FBTyxjQUFjOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7a0NBTzlCLDhEQUFDK0o7d0JBQ0NDLFNBQVMsSUFBTWhKLGVBQWUsQ0FBQ0Q7d0JBQy9CL0MsV0FBVTt3QkFDVnVMLE9BQU87NEJBQ0x1QyxLQUFLLFFBQXFCLE9BQWJsRCxjQUFhOzRCQUMxQnVCLE1BQU1wSixjQUFjLEdBQWdCLE9BQWIrSCxjQUFhLFFBQU07NEJBQzFDa0QsV0FBVzs0QkFDWDVCLFFBQVE7d0JBQ1Y7a0NBRUNySixjQUFjLE1BQU07Ozs7OztrQ0FJdkIsOERBQUNoRDt3QkFDQ0MsV0FBVywrQ0FFVixPQURDK0MsY0FBZSxlQUFjO3dCQUUvQndJLE9BQU87NEJBQ0wwQyxXQUFXLEdBQWdCLE9BQWJyRCxjQUFhOzRCQUMzQnlELGNBQWMxSyxlQUNWLEdBQXdFLE9BQXJFa0gsZUFBZUUsaUJBQWlCRSxrQkFBa0JELGlCQUFpQixHQUFFLFFBQ3hFLEdBQWdCLE9BQWJILGNBQWE7NEJBQ3BCeUQsWUFBWTt3QkFDZDs7MENBSUEsOERBQUN2TztnQ0FBSUMsV0FBVTswQ0FDZiw0RUFBQytMO29DQUNEQyxTQUFTdkI7b0NBQ1Q4RCxVQUFVak0sU0FBU3hDLE1BQU0sS0FBSztvQ0FDOUJFLFdBQVcsdURBSVYsT0FIQ3NDLFNBQVN4QyxNQUFNLEtBQUssSUFDbEIsOEJBQ0E7b0NBRUprSyxPQUNFMUgsU0FBU3hDLE1BQU0sS0FBSyxJQUNsQiwrQkFDQTs4Q0FFSDs7Ozs7Ozs7Ozs7MENBTUQsOERBQUNDO2dDQUNDQyxXQUFVO2dDQUNWdUwsT0FBTztvQ0FDTHVDLEtBQUs7b0NBQ0xVLFlBQVk7b0NBQ1pDLGVBQWU5SyxlQUNYLEdBQXFELE9BQWxEcUgsaUJBQWlCQyxrQkFBa0JGLGdCQUFlLFFBQ3JELEdBQWtCLE9BQWZDLGdCQUFlO2dDQUN4Qjs7b0NBRUMxSSxTQUFTeEMsTUFBTSxLQUFLLGtCQUNuQiw4REFBQ0M7d0NBQUlDLFdBQVU7OzRDQUF1Rjs0Q0FDNUZrQzs0Q0FBUzs7Ozs7OytDQUduQkksU0FBU3ZELEdBQUcsQ0FBQyxDQUFDMEssS0FBS25CLGtCQUNqQiw4REFBQ3ZJOzRDQUVDQyxXQUFXLGVBRVYsT0FEQ3lKLElBQUl6QyxJQUFJLEtBQUssU0FBUyxlQUFlO3NEQUd2Qyw0RUFBQ2pIO2dEQUNDQyxXQUFXLG9FQUlWLE9BSEN5SixJQUFJekMsSUFBSSxLQUFLLFNBQ1QsNEJBQ0E7Z0RBRU51RSxPQUFPO29EQUNMbUQsWUFBWTtvREFDWkMsV0FBVztvREFDWEMsY0FBYztnREFDaEI7MERBRUNuRixJQUFJekMsSUFBSSxLQUFLLHVCQUNaLDhEQUFDakg7b0RBQUlDLFdBQVU7OERBQ1p5SixJQUFJckssT0FBTzs7Ozs7eUVBR2QsOERBQUNUO29EQUF1QkMsTUFBTTZLLElBQUlySyxPQUFPOzs7Ozs7Ozs7OzsyQ0F0QnhDa0o7Ozs7O29DQTZCVmpGLDBCQUNDLDhEQUFDdEQ7d0NBQUlDLFdBQVU7a0RBQ2IsNEVBQUNEOzRDQUFJQyxXQUFVOzs4REFDYiw4REFBQ0w7b0RBQUtLLFdBQVU7OERBQU07Ozs7Ozs4REFDdEIsOERBQUNMO29EQUFLSyxXQUFVOzhEQUFNOzs7Ozs7OERBQ3RCLDhEQUFDTDtvREFBS0ssV0FBVTs4REFBTTs7Ozs7Ozs7Ozs7Ozs7Ozs7a0RBSTVCLDhEQUFDRDt3Q0FBSThPLEtBQUsvTDs7Ozs7Ozs7Ozs7OzRCQUlYeUIsYUFBYUYseUJBQ1osOERBQUN0RTtnQ0FBSUMsV0FBVTs7a0RBQ2IsOERBQUNEO3dDQUNDQyxXQUFVO3dDQUNWZ00sU0FBUyxJQUFNeEgsYUFBYTs7Ozs7O2tEQUU5Qiw4REFBQ3pFO3dDQUFJQyxXQUFVOzswREFDYiw4REFBQ2tPO2dEQUFFbE8sV0FBVTswREFBcUM7Ozs7OzswREFHbEQsOERBQUNrTztnREFBRWxPLFdBQVU7MERBQXlDOzs7Ozs7MERBSXRELDhEQUFDRDtnREFBSUMsV0FBVTswREFDYiw0RUFBQ3ZDLHNEQUFZQTtvREFBQ3FSLE9BQU81RDtvREFBVTZELE1BQU07b0RBQUtDLGVBQWU7Ozs7Ozs7Ozs7OzBEQUczRCw4REFBQ2pQO2dEQUFJQyxXQUFVOztrRUFDYiw4REFBQytMO3dEQUNDL0wsV0FBVTt3REFDVmdNLFNBQVM7Z0VBRVBpRDs0REFEQSxJQUFJLENBQUMvRCxVQUFVOzZEQUNmK0QsdUJBQUFBLFVBQVVDLFNBQVMsY0FBbkJELDJDQUFBQSxxQkFBcUJFLFNBQVMsQ0FBQ2pFOzREQUMvQnBOLCtEQUFhLENBQUM7d0RBQ2hCO2tFQUNEOzs7Ozs7a0VBSUQsOERBQUNpTzt3REFDQy9MLFdBQVU7d0RBQ1ZnTSxTQUFTLElBQU14SCxhQUFhO2tFQUM3Qjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzBDQVNULDhEQUFDNEs7Z0NBQ0NQLEtBQUs1SztnQ0FDTG9MLFVBQVUxSTtnQ0FDVjNHLFdBQVcsd0ZBSVYsT0FIQytDLGNBQ0kseUNBQ0E7Z0NBRU53SSxPQUFPO29DQUNMVyxRQUFRdkksZUFDSixHQUF1RCxPQUFwRGtILGVBQWVFLGlCQUFpQkUsa0JBQWtCLEdBQUUsUUFDdkQsR0FBb0IsT0FBakJKLGVBQWUsR0FBRTtvQ0FDeEJ5RCxZQUFZO2dDQUNkOztrREFFQSw4REFBQzlMO3dDQUNDcU0sS0FBSzFLO3dDQUNMMkssT0FBT3RNO3dDQUNQOE0sVUFBVSxDQUFDMUk7NENBQ1QsTUFBTWtJLFFBQVFsSSxFQUFFMkksTUFBTSxDQUFDVCxLQUFLOzRDQUMzQixNQUFNVSxRQUFRNUksRUFBRTJJLE1BQU0sQ0FBQ0UsY0FBYzs0Q0FFckNoTixTQUFTcU07NENBQ1Q1SyxpQkFBaUJ5QixPQUFPLEdBQUdtSjs0Q0FDM0IxSyxpQkFBaUJ1QixPQUFPLEdBQUc2Sjs0Q0FFM0IsSUFBSTNMLFlBQVk4QixPQUFPLEVBQUU7Z0RBQ3hCOUIsWUFBWThCLE9BQU8sQ0FBQ2xELFFBQVEsQ0FBQ3FNO2dEQUM3QmpMLFlBQVk4QixPQUFPLENBQUM2RyxnQkFBZ0IsQ0FBQ2dEOzRDQUN6Qzt3Q0FDRjt3Q0FDQXhELFNBQVMsQ0FBQ3BGO2dEQUdSL0M7NENBRkEsTUFBTTJMLFFBQVE1SSxFQUFFMkksTUFBTSxDQUFDRSxjQUFjOzRDQUNyQ3JMLGlCQUFpQnVCLE9BQU8sR0FBRzZKOzZDQUMzQjNMLHVCQUFBQSxZQUFZOEIsT0FBTyxjQUFuQjlCLDJDQUFBQSxxQkFBcUIySSxnQkFBZ0IsQ0FBQ2dEO3dDQUN4Qzt3Q0FDQUUsU0FBUyxDQUFDOUk7Z0RBR1IvQzs0Q0FGQSxNQUFNMkwsUUFBUTVJLEVBQUUySSxNQUFNLENBQUNFLGNBQWM7NENBQ3JDckwsaUJBQWlCdUIsT0FBTyxHQUFHNko7NkNBQzNCM0wsdUJBQUFBLFlBQVk4QixPQUFPLGNBQW5COUIsMkNBQUFBLHFCQUFxQjJJLGdCQUFnQixDQUFDZ0Q7d0NBQ3hDO3dDQUNFRyxTQUFTOzRDQUNQL0wsZ0JBQWdCOzRDQUNoQixJQUFJSSxpQkFBaUIyQixPQUFPLEVBQUU7Z0RBQzVCN0IsaUJBQWlCNkIsT0FBTyxHQUFHM0IsaUJBQWlCMkIsT0FBTyxDQUFDTSxTQUFTOzRDQUMvRDt3Q0FDRjt3Q0FDQTJKLFFBQVEsQ0FBQ2hKO2dEQUNpQkEsa0JBQ0hBLG1CQUdFQSxtQkFHTUE7NENBUDdCLE1BQU1pSixtQkFBa0JqSixtQkFBQUEsRUFBRWtKLGFBQWEsY0FBZmxKLHVDQUFBQSxpQkFBaUJtSixPQUFPLENBQUM7NENBQ2pELE1BQU1DLGdCQUFlcEosb0JBQUFBLEVBQUVrSixhQUFhLGNBQWZsSix3Q0FBQUEsa0JBQWlCbUosT0FBTyxDQUMzQzs0Q0FFRixNQUFNRSxrQkFBaUJySixvQkFBQUEsRUFBRWtKLGFBQWEsY0FBZmxKLHdDQUFBQSxrQkFBaUJtSixPQUFPLENBQzdDOzRDQUVGLE1BQU1HLHdCQUF1QnRKLG9CQUFBQSxFQUFFa0osYUFBYSxjQUFmbEosd0NBQUFBLGtCQUFpQm1KLE9BQU8sQ0FDbkQ7NENBR0YsSUFDRSxDQUFDRixtQkFDRCxDQUFDRyxnQkFDRCxDQUFDQyxrQkFDRCxDQUFDQyxzQkFDRDtnREFDQTlILFdBQVc7b0RBQ1R4RSxnQkFBZ0I7Z0RBQ2xCLEdBQUc7NENBQ0w7d0NBQ0Y7d0NBQ0F1TSxhQUFhLE9BQThCLE9BQXZCeE8sU0FBU3lPLFdBQVcsSUFBRzt3Q0FDM0NwUSxXQUFVO3dDQUNWdU8sVUFBVTdMOzs7Ozs7a0RBR1osOERBQUNxSjt3Q0FDQ00sTUFBSzt3Q0FDTGtDLFVBQVU3TCxXQUFXLENBQUNGLE1BQU10RCxJQUFJO3dDQUNoQ2MsV0FBVTtrREFDWDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBUWI7R0FybEN3QmU7O1FBQ1ByRCxrREFBU0E7OztNQURGcUQiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcS2FpXFxEb2N1bWVudHNcXFVuaXF1ZXJ5XFxmcm9udGVuZFxccGFnZXNcXGNoYXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlLCB1c2VDYWxsYmFjayB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgUVJDb2RlQ2FudmFzIH0gZnJvbSBcInFyY29kZS5yZWFjdFwiO1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSBcIm5leHQvcm91dGVyXCI7XG5pbXBvcnQgeyBhdXRoIH0gZnJvbSBcIi4uL2ZpcmViYXNlL2NsaWVudEFwcFwiO1xuaW1wb3J0IHsgb25BdXRoU3RhdGVDaGFuZ2VkLCBzaWduT3V0IH0gZnJvbSBcImZpcmViYXNlL2F1dGhcIjtcbmltcG9ydCB0b2FzdCBmcm9tIFwicmVhY3QtaG90LXRvYXN0XCI7XG5pbXBvcnQge1xuICBnZXRVc2VyUHJvZmlsZSxcbiAgY3JlYXRlVGhyZWFkLFxuICBnZXRSZWNlbnRUaHJlYWRzLFxuICBnZXRUaHJlYWRNZXNzYWdlcyxcbiAgYXBwZW5kVGhyZWFkTWVzc2FnZSxcbiAga2VlcE9ubHlMYXN0TlRocmVhZHMsXG4gIHRvdWNoVGhyZWFkLFxufSBmcm9tIFwiLi4vbGliL2ZpcmVzdG9yZUhlbHBlcnNcIjtcblxuLy8gSU1QT1JUIFZJUlRVQUwgS0VZQk9BUkRcbmltcG9ydCBLZXlib2FyZCBmcm9tIFwicmVhY3Qtc2ltcGxlLWtleWJvYXJkXCI7XG5pbXBvcnQgXCJyZWFjdC1zaW1wbGUta2V5Ym9hcmQvYnVpbGQvY3NzL2luZGV4LmNzc1wiO1xuXG4vLyDinIUgRklYOiBEZWZpbmUgUVdFUlRZIGtleWJvYXJkIGxheW91dFxuY29uc3QgbGF5b3V0ID0ge1xuICBxd2VydHk6IHtcbiAgICBkZWZhdWx0OiBbXG4gICAgICBcIjAgMSAyIDMgNCA1IDYgNyA4IDlcIixcbiAgICAgIFwicSB3IGUgciB0IHkgdSBpIG8gcCB7YmFja3NwYWNlfVwiLFxuICAgICAgXCJhIHMgZCBmIGcgaCBqIGsgbCB7ZW50ZXJ9XCIsXG4gICAgICBcIntzaGlmdH0geiB4IGMgdiBiIG4gbVwiLFxuICAgICAgXCJ7QH0geyV9IHs/fSB7c3BhY2V9IHssfSB7Ln1cIixcbiAgICBdLFxuICAgIHNoaWZ0OiBbXG4gICAgICBcIjAgMSAyIDMgNCA1IDYgNyA4IDlcIixcbiAgICAgIFwiUSBXIEUgUiBUIFkgVSBJIE8gUCB7YmFja3NwYWNlfVwiLFxuICAgICAgXCJBIFMgRCBGIEcgSCBKIEsgTCB7ZW50ZXJ9XCIsXG4gICAgICBcIntzaGlmdH0gWiBYIEMgViBCIE4gTVwiLFxuICAgICAgXCJ7QH0geyV9IHs/fSB7c3BhY2V9IHssfSB7Ln1cIixcbiAgICBdLFxuICB9LFxufTtcblxuLy8gU2ltcGxlIG1hcmtkb3duIHJlbmRlcmVyIHdpdGhvdXQgZXh0ZXJuYWwgZGVwZW5kZW5jaWVzXG5mdW5jdGlvbiBTaW1wbGVNYXJrZG93blJlbmRlcmVyKHsgdGV4dCB9KSB7XG4gIGlmICghdGV4dCkgcmV0dXJuIG51bGw7XG5cbiAgY29uc3QgbGluZXMgPSB0ZXh0LnNwbGl0KFwiXFxuXCIpO1xuICByZXR1cm4gbGluZXMubWFwKChsaW5lLCBpbmRleCkgPT4ge1xuICAgIGlmIChsaW5lLnRyaW0oKSA9PT0gXCJcIikgcmV0dXJuIDxiciBrZXk9e2luZGV4fSAvPjtcblxuICAgIGxldCBjb250ZW50ID0gbGluZTtcbiAgICBjb25zdCBib2xkUmVnZXggPSAvXFwqXFwqKC4qPylcXCpcXCovZztcbiAgICBjb25zdCBwYXJ0cyA9IFtdO1xuICAgIGxldCBsYXN0SW5kZXggPSAwO1xuICAgIGxldCBtYXRjaDtcblxuICAgIHdoaWxlICgobWF0Y2ggPSBib2xkUmVnZXguZXhlYyhjb250ZW50KSkgIT09IG51bGwpIHtcbiAgICAgIGlmIChtYXRjaC5pbmRleCA+IGxhc3RJbmRleCkge1xuICAgICAgICBwYXJ0cy5wdXNoKFxuICAgICAgICAgIDxzcGFuIGtleT17YCR7aW5kZXh9LSR7bGFzdEluZGV4fWB9PlxuICAgICAgICAgICAge2NvbnRlbnQuc3Vic3RyaW5nKGxhc3RJbmRleCwgbWF0Y2guaW5kZXgpfVxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHBhcnRzLnB1c2goXG4gICAgICAgIDxzdHJvbmcga2V5PXtgJHtpbmRleH0tYm9sZC0ke21hdGNoLmluZGV4fWB9PnttYXRjaFsxXX08L3N0cm9uZz5cbiAgICAgICk7XG4gICAgICBsYXN0SW5kZXggPSBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aDtcbiAgICB9XG5cbiAgICBpZiAobGFzdEluZGV4IDwgY29udGVudC5sZW5ndGgpIHtcbiAgICAgIHBhcnRzLnB1c2goXG4gICAgICAgIDxzcGFuIGtleT17YCR7aW5kZXh9LXJlbWFpbmluZ2B9Pntjb250ZW50LnN1YnN0cmluZyhsYXN0SW5kZXgpfTwvc3Bhbj5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcGFydHMucHVzaCg8c3BhbiBrZXk9e2Ake2luZGV4fS1wbGFpbmB9Pntjb250ZW50fTwvc3Bhbj4pO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGtleT17aW5kZXh9IGNsYXNzTmFtZT1cIm1iLTEgbGFzdDptYi0wXCI+XG4gICAgICAgIHtwYXJ0c31cbiAgICAgICAge2luZGV4IDwgbGluZXMubGVuZ3RoIC0gMSAmJiA8YnIgLz59XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0QUlSZXNwb25zZSh0ZXh0KSB7XG4gIGlmICghdGV4dCkgcmV0dXJuIFwiXCI7XG4gIGxldCBjbGVhbmVkID0gdGV4dC50cmltKCk7XG5cbiAgaWYgKGNsZWFuZWQuc3RhcnRzV2l0aChcIntcIikgJiYgY2xlYW5lZC5lbmRzV2l0aChcIn1cIikpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QganNvbiA9IEpTT04ucGFyc2UoY2xlYW5lZCk7XG4gICAgICBjbGVhbmVkID1cbiAgICAgICAganNvbi5nZW5lcmF0ZWRfdGV4dCB8fFxuICAgICAgICBqc29uLnJlc3BvbnNlIHx8XG4gICAgICAgIGpzb24uYW5zd2VyIHx8XG4gICAgICAgIGpzb24ub3V0cHV0IHx8XG4gICAgICAgIGpzb24udGV4dCB8fFxuICAgICAgICBqc29uLm1lc3NhZ2UgfHxcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoanNvbik7XG4gICAgfSBjYXRjaCB7fVxuICB9XG5cbiAgY2xlYW5lZCA9IGNsZWFuZWQucmVwbGFjZSgvXlwifFwiJC9nLCBcIlwiKTtcbiAgY2xlYW5lZCA9IGNsZWFuZWQucmVwbGFjZSgvXFxcXG4vZywgXCJcXG5cIik7XG4gIGNsZWFuZWQgPSBjbGVhbmVkLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKTtcbiAgY2xlYW5lZCA9IGNsZWFuZWQucmVwbGFjZSgvXFxcXHQvZywgXCIgIFwiKTtcblxuICByZXR1cm4gY2xlYW5lZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ2hhdFBhZ2UoKSB7XG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuICBjb25zdCB7IG1vZGVsLCBwdWJsaWM6IGlzUHVibGljIH0gPSByb3V0ZXIucXVlcnk7XG5cbiAgY29uc3QgbW9kZWxDb25maWdzID0ge1xuICAgIGVjZTogeyB1cmw6IFwiaHR0cHM6Ly90aXl1cGktZWNlLWVjZS1hcGkuaGYuc3BhY2UvZ2VuZXJhdGVcIiwgdG9rZW46IFwiXCIgfSxcbiAgICBuYXY6IHsgdXJsOiBcImh0dHBzOi8vdGl5dXBpLWVjZS1zb21pLWNhbGkuaGYuc3BhY2UvY2hhdFwiLCB0b2tlbjogXCJcIiB9LFxuICAgIGluZm86IHsgdXJsOiBcImh0dHBzOi8vdGl5dXBpLWVjZS1oaXR1cGkuaGYuc3BhY2UvY2hhdFwiLCB0b2tlbjogXCJcIiB9LFxuICB9O1xuXG4gIGNvbnN0IG1vZGVsS2V5ID0gbW9kZWwgfHwgXCJlY2VcIjtcbiAgY29uc3Qgc2VsZWN0ZWRNb2RlbCA9IG1vZGVsQ29uZmlnc1ttb2RlbEtleV0gfHwge307XG4gIGNvbnN0IGlzUHVibGljQWNjZXNzID0gaXNQdWJsaWMgPT09IFwidHJ1ZVwiO1xuXG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbdXNlciwgc2V0VXNlcl0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW25pY2tuYW1lLCBzZXROaWNrbmFtZV0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3JlYWxOYW1lLCBzZXRSZWFsTmFtZV0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW21lc3NhZ2VzLCBzZXRNZXNzYWdlc10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtpbnB1dCwgc2V0SW5wdXRdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtzZW5kaW5nLCBzZXRTZW5kaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3NoaWZ0QWN0aXZlLCBzZXRTaGlmdEFjdGl2ZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IGVuZFJlZiA9IHVzZVJlZigpO1xuXG4gIGNvbnN0IFtzaWRlYmFyT3Blbiwgc2V0U2lkZWJhck9wZW5dID0gdXNlU3RhdGUodHJ1ZSk7XG5cbmNvbnN0IFtyZWNlbnRUaHJlYWRzLCBzZXRSZWNlbnRUaHJlYWRzXSA9IHVzZVN0YXRlKFtdKTtcbmNvbnN0IFt0aHJlYWRJZCwgc2V0VGhyZWFkSWRdID0gdXNlU3RhdGUobnVsbCk7XG5jb25zdCBbdGhpbmtpbmcsIHNldFRoaW5raW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuY29uc3QgW2d1ZXN0VGhyZWFkcywgc2V0R3Vlc3RUaHJlYWRzXSA9IHVzZVN0YXRlKFtdKTtcbmNvbnN0IFtndWVzdFRocmVhZElkLCBzZXRHdWVzdFRocmVhZElkXSA9IHVzZVN0YXRlKG51bGwpO1xuXG4gIC8vIFZJUlRVQUwgS0VZQk9BUkQgU1RBVEVcbiAgY29uc3QgW3Nob3dLZXlib2FyZCwgc2V0U2hvd0tleWJvYXJkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3Qga2V5Ym9hcmRSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGxhc3RTY3JvbGxUb3BSZWYgPSB1c2VSZWYoMCk7XG4gIGNvbnN0IGtleWJvYXJkU2Nyb2xsVGhyZXNob2xkID0gMjA7XG4gIGNvbnN0IGNoYXRDb250YWluZXJSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGlucHV0QmFyUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBrZXlib2FyZElucHV0UmVmID0gdXNlUmVmKFwiXCIpO1xuICBjb25zdCBpbnB1dFJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgY2FyZXRQb3NpdGlvblJlZiA9IHVzZVJlZigwKTtcblxuICAvLyDinIUgU0hBUkUgLyBRUiBTVEFURSAoYWRkZWQpXG4gIGNvbnN0IFtzaGFyZUlkLCBzZXRTaGFyZUlkXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbc2hhcmVPcGVuLCBzZXRTaGFyZU9wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuXG5cbiAgY29uc3QgR1VFU1RfS0VZID0gYGd1ZXN0X3RocmVhZHNfJHttb2RlbEtleX1gO1xuICBmdW5jdGlvbiBsb2FkR3Vlc3RUaHJlYWRzKCkge1xuICB0cnkge1xuICAgIGNvbnN0IHJhdyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKEdVRVNUX0tFWSk7XG4gICAgcmV0dXJuIHJhdyA/IEpTT04ucGFyc2UocmF3KSA6IFtdO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiB9XG4gZnVuY3Rpb24gc2F2ZUd1ZXN0VGhyZWFkcyh0aHJlYWRzKSB7XG4gIHRyeSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oR1VFU1RfS0VZLCBKU09OLnN0cmluZ2lmeSh0aHJlYWRzLnNsaWNlKDAsIDMpKSk7XG4gIH0gY2F0Y2gge31cbiB9XG5cblxuICAvKiBBVVRIICovXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgdW5zdWIgPSBvbkF1dGhTdGF0ZUNoYW5nZWQoYXV0aCwgYXN5bmMgKHUpID0+IHtcbiAgICAgIGlmIChpc1B1YmxpY0FjY2VzcyAmJiAhdSkge1xuICAgICAgICBzZXRVc2VyKG51bGwpO1xuICAgICAgICBzZXROaWNrbmFtZShcIkd1ZXN0XCIpO1xuICAgICAgICBzZXRSZWFsTmFtZShcIkd1ZXN0XCIpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgdGhyZWFkcyA9IGxvYWRHdWVzdFRocmVhZHMoKTtcbiAgICAgICAgc2V0R3Vlc3RUaHJlYWRzKHRocmVhZHMpO1xuICAgICAgICBcbiAgICAgICAgc2V0R3Vlc3RUaHJlYWRJZChudWxsKTtcbiAgICAgICAgc2V0TWVzc2FnZXMoW10pO1xuICAgICAgICBcbiAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc1B1YmxpY0FjY2VzcyAmJiAhdSkge1xuICAgICAgICByb3V0ZXIucmVwbGFjZShcIi9sb2dpblwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzZXRVc2VyKHUpO1xuXG4gICAgICB0cnkge1xuICAgICAgICBpZiAodSkge1xuICAgICAgICAgIGNvbnN0IHByb2ZpbGUgPSBhd2FpdCBnZXRVc2VyUHJvZmlsZSh1LnVpZCk7XG4gICAgICAgICAgY29uc3QgbmFtZSA9XG4gICAgICAgICAgICBwcm9maWxlPy5uYW1lIHx8XG4gICAgICAgICAgICB1LmRpc3BsYXlOYW1lIHx8XG4gICAgICAgICAgICBwcm9maWxlPy5uaWNrbmFtZSB8fFxuICAgICAgICAgICAgdS5lbWFpbD8uc3BsaXQoXCJAXCIpWzBdIHx8XG4gICAgICAgICAgICBcIlVzZXJcIjtcbiAgICAgICAgICBzZXRSZWFsTmFtZShuYW1lKTtcblxuICAgICAgICAgIGNvbnN0IG5pY2sgPVxuICAgICAgICAgICAgcHJvZmlsZT8ubmlja25hbWUgfHxcbiAgICAgICAgICAgIHByb2ZpbGU/Lm5hbWUgfHxcbiAgICAgICAgICAgIHUuZGlzcGxheU5hbWUgfHxcbiAgICAgICAgICAgIHUuZW1haWw/LnNwbGl0KFwiQFwiKVswXSB8fFxuICAgICAgICAgICAgXCJVc2VyXCI7XG4gICAgICAgICAgc2V0Tmlja25hbWUobmljayk7XG5cbiAgICAgICAgICBjb25zdCByZWNlbnRzID0gYXdhaXQgZ2V0UmVjZW50VGhyZWFkcyh1LnVpZCwgbW9kZWxLZXksIDMpO1xuICAgICAgICAgIHNldFJlY2VudFRocmVhZHMocmVjZW50cyk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKHJlY2VudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gc2hvdyByZWNlbnRzIGluIHNpZGViYXIsIGJ1dCBzdGFydCBibGFuayAodW5zYXZlZClcbiAgICAgICAgICAgIHNldFRocmVhZElkKG51bGwpO1xuICAgICAgICAgICAgc2V0TWVzc2FnZXMoW10pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBObyBzYXZlZCByZWNlbnRzIHlldDsgc3RhcnQgd2l0aCBhIGJsYW5rIHVuc2F2ZWQgY2hhdFxuICAgICAgICAgICAgc2V0VGhyZWFkSWQobnVsbCk7XG4gICAgICAgICAgICBzZXRNZXNzYWdlcyhbXSk7XG4gICAgICAgICAgICBzZXRSZWNlbnRUaHJlYWRzKFtdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2gge31cblxuICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gKCkgPT4gdW5zdWIoKTtcbiAgfSwgW3JvdXRlciwgbW9kZWxLZXksIGlzUHVibGljQWNjZXNzXSk7XG5cbiAgLy8gR2V0IHJlZmVyZW5jZXMgb24gbW91bnRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjaGF0Q29udGFpbmVyUmVmLmN1cnJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIuYWJzb2x1dGUuaW5zZXQtMC5weC02Lm92ZXJmbG93LXktYXV0by5mbGV4LmZsZXgtY29sXCJcbiAgICApO1xuICAgIGlucHV0QmFyUmVmLmN1cnJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZm9ybS5maXhlZC5sZWZ0LTAuei01MFwiKTtcbiAgfSwgW10pO1xuXG4gIC8vIEhhbmRsZSBzY3JvbGwgdG8gYXV0by1oaWRlIGtleWJvYXJkXG4gIGNvbnN0IGhhbmRsZVNjcm9sbCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoIXNob3dLZXlib2FyZCkgcmV0dXJuO1xuXG4gICAgY29uc3QgY2hhdENvbnRhaW5lciA9IGNoYXRDb250YWluZXJSZWYuY3VycmVudDtcbiAgICBpZiAoIWNoYXRDb250YWluZXIpIHJldHVybjtcblxuICAgIGNvbnN0IGN1cnJlbnRTY3JvbGxUb3AgPSBjaGF0Q29udGFpbmVyLnNjcm9sbFRvcDtcbiAgICBjb25zdCBzY3JvbGxEaWZmID0gTWF0aC5hYnMoY3VycmVudFNjcm9sbFRvcCAtIGxhc3RTY3JvbGxUb3BSZWYuY3VycmVudCk7XG5cbiAgICBpZiAoc2Nyb2xsRGlmZiA+IGtleWJvYXJkU2Nyb2xsVGhyZXNob2xkKSB7XG4gICAgICBzZXRTaG93S2V5Ym9hcmQoZmFsc2UpO1xuICAgICAgY29uc3QgaW5wdXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbcGxhY2Vob2xkZXIqPVwiQXNrXCJdJyk7XG4gICAgICBpZiAoaW5wdXRFbGVtZW50KSBpbnB1dEVsZW1lbnQuYmx1cigpO1xuICAgIH1cblxuICAgIGxhc3RTY3JvbGxUb3BSZWYuY3VycmVudCA9IGN1cnJlbnRTY3JvbGxUb3A7XG4gIH0sIFtzaG93S2V5Ym9hcmRdKTtcblxuICAvLyBBdHRhY2ggc2Nyb2xsIGV2ZW50IGxpc3RlbmVyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgY2hhdENvbnRhaW5lciA9IGNoYXRDb250YWluZXJSZWYuY3VycmVudDtcbiAgICBpZiAoIWNoYXRDb250YWluZXIpIHJldHVybjtcblxuICAgIGNoYXRDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBoYW5kbGVTY3JvbGwpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjaGF0Q29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgaGFuZGxlU2Nyb2xsKTtcbiAgICB9O1xuICB9LCBbaGFuZGxlU2Nyb2xsXSk7XG5cbiAgLy8gUmVzZXQgc2Nyb2xsIHRyYWNraW5nIHdoZW4ga2V5Ym9hcmQgc2hvd3NcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoc2hvd0tleWJvYXJkICYmIGNoYXRDb250YWluZXJSZWYuY3VycmVudCkge1xuICAgICAgbGFzdFNjcm9sbFRvcFJlZi5jdXJyZW50ID0gY2hhdENvbnRhaW5lclJlZi5jdXJyZW50LnNjcm9sbFRvcDtcbiAgICB9XG4gIH0sIFtzaG93S2V5Ym9hcmRdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGVuZFJlZi5jdXJyZW50Py5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiBcInNtb290aFwiIH0pO1xuICB9LCBbbWVzc2FnZXNdKTtcblxuICAvKiBTRU5EIE1FU1NBR0UgKi9cbiAgYXN5bmMgZnVuY3Rpb24gaGFuZGxlU2VuZChlKSB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgdHJpbW1lZCA9IGlucHV0LnRyaW0oKTtcbiAgaWYgKCF0cmltbWVkKSByZXR1cm47XG5cbiAgY29uc3QgdXNlck1zZyA9IHsgcm9sZTogXCJ1c2VyXCIsIGNvbnRlbnQ6IHRyaW1tZWQgfTtcbiAgY29uc3QgdXBkYXRlZE1lc3NhZ2VzID0gWy4uLm1lc3NhZ2VzLCB1c2VyTXNnXTtcbiAgc2V0TWVzc2FnZXModXBkYXRlZE1lc3NhZ2VzKTtcbiAgc2V0SW5wdXQoXCJcIik7XG4gIHNldFNlbmRpbmcodHJ1ZSk7XG4gIHNldFRoaW5raW5nKHRydWUpO1xuICBzZXRTaG93S2V5Ym9hcmQoZmFsc2UpO1xuICBrZXlib2FyZElucHV0UmVmLmN1cnJlbnQgPSBcIlwiO1xuXG4gIHRvYXN0LmxvYWRpbmcoXCJTZW5kaW5nLi4uXCIsIHsgaWQ6IFwic2VuZFwiIH0pO1xuXG4gIGxldCBhY3RpdmVUaHJlYWRJZCA9IHRocmVhZElkO1xuXG5pZiAodXNlciAmJiAhaXNQdWJsaWNBY2Nlc3MgJiYgIWFjdGl2ZVRocmVhZElkKSB7XG4gIGFjdGl2ZVRocmVhZElkID0gYXdhaXQgY3JlYXRlVGhyZWFkKHVzZXIudWlkLCBtb2RlbEtleSk7XG4gIHNldFRocmVhZElkKGFjdGl2ZVRocmVhZElkKTtcbn1cblxuICB0cnkge1xuICAgIC8vIFNhdmUgdXNlciBtZXNzYWdlIChsb2dnZWQtaW4gdGhyZWFkKVxuICAgIGlmICh1c2VyICYmICFpc1B1YmxpY0FjY2VzcyAmJiBhY3RpdmVUaHJlYWRJZCkge1xuICAgICAgYXdhaXQgYXBwZW5kVGhyZWFkTWVzc2FnZSh1c2VyLnVpZCwgbW9kZWxLZXksIGFjdGl2ZVRocmVhZElkLCB1c2VyTXNnKTtcbiAgICB9XG5cbiAgICAvLyBNb2RlbCB1bmF2YWlsYWJsZVxuICAgIGlmICghc2VsZWN0ZWRNb2RlbC51cmwpIHtcbiAgICAgIGNvbnN0IGVycm9yTXNnID0geyByb2xlOiBcImFzc2lzdGFudFwiLCBjb250ZW50OiBcIk1vZGVsIHVuYXZhaWxhYmxlLlwiIH07XG4gICAgICBzZXRNZXNzYWdlcyhbLi4udXBkYXRlZE1lc3NhZ2VzLCBlcnJvck1zZ10pO1xuXG4gICAgICBpZiAodXNlciAmJiAhaXNQdWJsaWNBY2Nlc3MgJiYgYWN0aXZlVGhyZWFkSWQpIHtcbiAgICAgICAgYXdhaXQgYXBwZW5kVGhyZWFkTWVzc2FnZSh1c2VyLnVpZCwgbW9kZWxLZXksIGFjdGl2ZVRocmVhZElkLCBlcnJvck1zZyk7XG4gICAgICB9XG5cbiAgICAgIHRvYXN0LmRpc21pc3MoXCJzZW5kXCIpO1xuICAgICAgc2V0VGhpbmtpbmcoZmFsc2UpO1xuICAgICAgc2V0U2VuZGluZyhmYWxzZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgIH07XG5cbiAgICBjb25zdCByZXF1ZXN0Rm9ybWF0cyA9IFtcbiAgICAgIHtcbiAgICAgICAgaW5wdXRzOiB0cmltbWVkLFxuICAgICAgICBwYXJhbWV0ZXJzOiB7IG1heF9uZXdfdG9rZW5zOiA1MDAsIHRlbXBlcmF0dXJlOiAwLjcgfSxcbiAgICAgIH0sXG4gICAgICB7IHF1ZXJ5OiB0cmltbWVkLCBtYXhfbmV3X3Rva2VuczogNTAwLCB0ZW1wZXJhdHVyZTogMC43IH0sXG4gICAgICB7IGlucHV0OiB0cmltbWVkLCBtYXhfbGVuZ3RoOiA1MDAsIHRlbXBlcmF0dXJlOiAwLjcgfSxcbiAgICBdO1xuXG4gICAgbGV0IHJlcGx5ID0gXCJcIjtcbiAgICBsZXQgbGFzdEVycm9yID0gbnVsbDtcblxuICAgIC8vIOKchSBHTE9CQUwgNjAtc2Vjb25kIHRpbWVvdXQgYWNyb3NzIEFMTCBhdHRlbXB0c1xuICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiBjb250cm9sbGVyLmFib3J0KCksIDYwMDAwKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVxdWVzdEZvcm1hdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJlcXVlc3RPcHRpb25zLmJvZHkgPSBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Rm9ybWF0c1tpXSk7XG5cbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goc2VsZWN0ZWRNb2RlbC51cmwsIHtcbiAgICAgICAgICAuLi5yZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsLFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKGBIVFRQICR7cmVzLnN0YXR1c31gKTtcblxuICAgICAgICBjb25zdCByYXcgPSBhd2FpdCByZXMudGV4dCgpO1xuICAgICAgICByZXBseSA9IGZvcm1hdEFJUmVzcG9uc2UocmF3KTtcblxuICAgICAgICBpZiAocmVwbHkgJiYgcmVwbHkgIT09IFwie31cIikgYnJlYWs7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgbGFzdEVycm9yID0gZXJyO1xuICAgICAgICBpZiAoZXJyLm5hbWUgPT09IFwiQWJvcnRFcnJvclwiKSBicmVhazsgLy8gc3RvcCBpbW1lZGlhdGVseSBvbiB0aW1lb3V0XG4gICAgICB9XG4gICAgfVxuXG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG5cbiAgICBpZiAoIXJlcGx5ICYmIGxhc3RFcnJvcikgdGhyb3cgbGFzdEVycm9yO1xuICAgIGlmICghcmVwbHkpIHRocm93IG5ldyBFcnJvcihcIk5vIHJlc3BvbnNlXCIpO1xuXG4gICAgcmVwbHkgPSByZXBseS50cmltKCk7XG4gICAgY29uc3QgYWlNc2cgPSB7IHJvbGU6IFwiYXNzaXN0YW50XCIsIGNvbnRlbnQ6IHJlcGx5IH07XG5cbiAgICBjb25zdCBmaW5hbE1lc3NhZ2VzID0gWy4uLnVwZGF0ZWRNZXNzYWdlcywgYWlNc2ddO1xuICAgIHNldE1lc3NhZ2VzKGZpbmFsTWVzc2FnZXMpO1xuXG4gICAgXG5cbiAgICAvLyBMb2dnZWQtaW46IHNhdmUgYXNzaXN0YW50IHJlcGx5IChETyBOT1QgcmVmcmVzaCByZWNlbnRzIGhlcmUpXG5pZiAodXNlciAmJiAhaXNQdWJsaWNBY2Nlc3MgJiYgYWN0aXZlVGhyZWFkSWQpIHtcbiAgYXdhaXQgYXBwZW5kVGhyZWFkTWVzc2FnZSh1c2VyLnVpZCwgbW9kZWxLZXksIGFjdGl2ZVRocmVhZElkLCBhaU1zZyk7XG59XG5cblxuICAgIHRvYXN0LnN1Y2Nlc3MoXCJSZXBseSByZWNlaXZlZFwiLCB7IGlkOiBcInNlbmRcIiB9KTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc3QgZXJyb3JNc2cgPSB7XG4gICAgICByb2xlOiBcImFzc2lzdGFudFwiLFxuICAgICAgY29udGVudDpcbiAgICAgICAgZXJyLm5hbWUgPT09IFwiQWJvcnRFcnJvclwiXG4gICAgICAgICAgPyBcIuKaoO+4jyBObyByZXNwb25zZSBhZnRlciAxIG1pbnV0ZS4gUGxlYXNlIHRyeSBhZ2Fpbi5cIlxuICAgICAgICAgIDogYCoqRXJyb3I6KiogJHtlcnIubWVzc2FnZX1gLFxuICAgIH07XG5cbiAgICBzZXRNZXNzYWdlcyhbLi4ubWVzc2FnZXMsIHVzZXJNc2csIGVycm9yTXNnXSk7XG4gICAgdG9hc3QuZXJyb3IoXCJTZW5kIGZhaWxlZFwiLCB7IGlkOiBcInNlbmRcIiB9KTtcbiAgfVxuXG4gIHNldFRoaW5raW5nKGZhbHNlKTtcbiAgc2V0U2VuZGluZyhmYWxzZSk7XG59XG5cbiAgYXN5bmMgZnVuY3Rpb24gaGFuZGxlTmV3Q2hhdCgpIHtcbiAgY29uc3QgaGFzUmVhbENvbnZlcnNhdGlvbiA9IG1lc3NhZ2VzLnNvbWUoKG0pID0+IG0ucm9sZSA9PT0gXCJ1c2VyXCIgJiYgbS5jb250ZW50Py50cmltKCkpO1xuXG4gIGlmICh1c2VyICYmICFpc1B1YmxpY0FjY2Vzcykge1xuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gTE9HR0VELUlOIE1PREVcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gICAgLy8g4pyFIE9ubHkgZmluYWxpemUvc3RvcmUgaWYgdGhlcmUncyBhIHJlYWwgY29udm9cbiAgICBpZiAoaGFzUmVhbENvbnZlcnNhdGlvbikge1xuICAgICAgbGV0IGN1cnJlbnRJZCA9IHRocmVhZElkO1xuXG4gICAgICAvLyBJZiBjb252ZXJzYXRpb24gaGFzIG5vIHRocmVhZCB5ZXQsIGNyZWF0ZSBvbmUgbm93XG4gICAgICBpZiAoIWN1cnJlbnRJZCkge1xuICAgICAgICBjdXJyZW50SWQgPSBhd2FpdCBjcmVhdGVUaHJlYWQodXNlci51aWQsIG1vZGVsS2V5KTtcblxuICAgICAgICAvLyBTYXZlIGFsbCBjdXJyZW50IG1lc3NhZ2VzIHRvIEZpcmVzdG9yZVxuICAgICAgICBmb3IgKGNvbnN0IG1zZyBvZiBtZXNzYWdlcykge1xuICAgICAgICAgIGF3YWl0IGFwcGVuZFRocmVhZE1lc3NhZ2UodXNlci51aWQsIG1vZGVsS2V5LCBjdXJyZW50SWQsIG1zZyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8g4pyFIElNUE9SVEFOVDogbWFyayBhcyByZWNlbnQgT05MWSB3aGVuIHJlYWwgY29udm8gZXhpc3RzXG4gICAgICBhd2FpdCB0b3VjaFRocmVhZCh1c2VyLnVpZCwgbW9kZWxLZXksIGN1cnJlbnRJZCk7XG5cbiAgICAgIC8vIGtlZXAgb25seSAzIGZpbmFsaXplZCByZWNlbnRzXG4gICAgICBhd2FpdCBrZWVwT25seUxhc3ROVGhyZWFkcyh1c2VyLnVpZCwgbW9kZWxLZXksIDMpO1xuXG4gICAgICAvLyByZWZyZXNoIHNpZGViYXIgcmVjZW50c1xuICAgICAgY29uc3QgcmVjZW50cyA9IGF3YWl0IGdldFJlY2VudFRocmVhZHModXNlci51aWQsIG1vZGVsS2V5LCAzKTtcbiAgICAgIHNldFJlY2VudFRocmVhZHMocmVjZW50cyk7XG4gICAgfVxuXG4gICAgLy8gU3RhcnQgYSBORVcgYmxhbmsgdW5zYXZlZCBjaGF0XG4gICAgc2V0VGhyZWFkSWQobnVsbCk7XG4gICAgc2V0TWVzc2FnZXMoW10pO1xuXG4gIH0gZWxzZSB7XG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyBHVUVTVCBNT0RFXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgIC8vIOKchSBPbmx5IHNhdmUgaWYgcmVhbCBjb252byBleGlzdHNcbiAgICBpZiAoaGFzUmVhbENvbnZlcnNhdGlvbikge1xuICAgICAgY29uc3QgZmlyc3RVc2VyTXNnID0gbWVzc2FnZXMuZmluZCgobSkgPT4gbS5yb2xlID09PSBcInVzZXJcIiAmJiBtLmNvbnRlbnQ/LnRyaW0oKSk7XG5cbiAgICAgIGNvbnN0IG5ld1RocmVhZCA9IHtcbiAgICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgICAgdGl0bGU6IChmaXJzdFVzZXJNc2c/LmNvbnRlbnQgfHwgXCJOZXcgQ2hhdFwiKS5zbGljZSgwLCAzMCksXG4gICAgICAgIG1lc3NhZ2VzOiBtZXNzYWdlcyxcbiAgICAgICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgdXBkYXRlZCA9IFtuZXdUaHJlYWQsIC4uLmd1ZXN0VGhyZWFkc11cbiAgICAgICAgLnNvcnQoKGEsIGIpID0+IGIudXBkYXRlZEF0IC0gYS51cGRhdGVkQXQpXG4gICAgICAgIC5zbGljZSgwLCAzKTtcblxuICAgICAgc2V0R3Vlc3RUaHJlYWRzKHVwZGF0ZWQpO1xuICAgICAgc2F2ZUd1ZXN0VGhyZWFkcyh1cGRhdGVkKTtcbiAgICB9XG5cbiAgICAvLyBTdGFydCBmcmVzaCBibGFuayBndWVzdCBjaGF0XG4gICAgc2V0R3Vlc3RUaHJlYWRJZChudWxsKTtcbiAgICBzZXRNZXNzYWdlcyhbXSk7XG4gIH1cblxuICBzZXRTaGFyZUlkKG51bGwpO1xuICBzZXRTaGFyZU9wZW4oZmFsc2UpO1xufVxuXG4gIGZ1bmN0aW9uIGhhbmRsZVNpZ25PdXQoKSB7XG4gICAgc2lnbk91dChhdXRoKS50aGVuKCgpID0+IHJvdXRlci5wdXNoKFwiL2xvZ2luXCIpKTtcbiAgfVxuXG4gIC8vIE5FVzogSGFuZGxlIHNpZ24gaW4gcmVkaXJlY3RcbiAgZnVuY3Rpb24gaGFuZGxlU2lnbkluKCkge1xuICAgIHJvdXRlci5wdXNoKFwiL2xvZ2luXCIpO1xuICB9XG5cbiAgLy8g4pyFIEdlbmVyYXRlIFFSIChhZGRlZClcbiAgYXN5bmMgZnVuY3Rpb24gaGFuZGxlR2VuZXJhdGVRUigpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFtZXNzYWdlcyB8fCBtZXNzYWdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdG9hc3QuZXJyb3IoXCJObyBjb252ZXJzYXRpb24gdG8gc2hhcmUgeWV0LlwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0b2FzdC5sb2FkaW5nKFwiR2VuZXJhdGluZyBRUi4uLlwiLCB7IGlkOiBcInNoYXJlXCIgfSk7XG5cbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFwiL2FwaS9zaGFyZVwiLCB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIG1vZGVsS2V5LFxuICAgICAgICAgIGNyZWF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgICAgICBtZXNzYWdlczogbWVzc2FnZXMubWFwKChtKSA9PiAoeyByb2xlOiBtLnJvbGUsIGNvbnRlbnQ6IG0uY29udGVudCB9KSksXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEhUVFAgJHtyZXMuc3RhdHVzfWApO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICBpZiAoIWRhdGE/LmlkKSB0aHJvdyBuZXcgRXJyb3IoXCJObyBzaGFyZSBpZCByZXR1cm5lZC5cIik7XG5cbiAgICAgIHNldFNoYXJlSWQoZGF0YS5pZCk7XG4gICAgICBzZXRTaGFyZU9wZW4odHJ1ZSk7XG5cbiAgICAgIHRvYXN0LnN1Y2Nlc3MoXCJRUiByZWFkeSFcIiwgeyBpZDogXCJzaGFyZVwiIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRvYXN0LmVycm9yKGBGYWlsZWQ6ICR7ZS5tZXNzYWdlfWAsIHsgaWQ6IFwic2hhcmVcIiB9KTtcbiAgICB9XG4gIH1cblxuICBpZiAobG9hZGluZylcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLXNjcmVlbiBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXhsXCI+XG4gICAgICAgIExvYWRpbmfigKZcbiAgICAgIDwvZGl2PlxuICAgICk7XG5cbiAgY29uc3QgaGVhZGVySGVpZ2h0ID0gNDg7XG4gIGNvbnN0IGZvb3RlckhlaWdodCA9IDMyO1xuICBjb25zdCBzaWRlYmFyV2lkdGggPSAyMjQ7XG4gIGNvbnN0IGtleWJvYXJkSGVpZ2h0ID0gMjgwO1xuICBjb25zdCBpbnB1dEJhckhlaWdodCA9IDYwO1xuICBjb25zdCBrZXlib2FyZFBhZGRpbmcgPSA0OyAvLyBSRURVQ0VEIEZST00gOCBUTyA0XG5cbiAgY29uc3Qgc2hhcmVVcmwgPVxuICAgIHNoYXJlSWQgJiYgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIlxuICAgICAgPyBgJHt3aW5kb3cubG9jYXRpb24ub3JpZ2lufS9zaGFyZS8ke3NoYXJlSWR9YFxuICAgICAgOiBcIlwiO1xuICBcbiAgY29uc3QgcmVjZW50c1RvU2hvdyA9dXNlciAmJiAhaXNQdWJsaWNBY2Nlc3MgPyByZWNlbnRUaHJlYWRzIDogZ3Vlc3RUaHJlYWRzO1xuICAgXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgY2xhc3NOYW1lPVwicmVsYXRpdmUgaC1zY3JlZW4gdy1zY3JlZW4gb3ZlcmZsb3ctaGlkZGVuIGJnLWNvdmVyIGJnLWNlbnRlclwiXG4gICAgICBzdHlsZT17eyBiYWNrZ3JvdW5kSW1hZ2U6IFwidXJsKCcvYmcucG5nJylcIiB9fVxuICAgID5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQtMCBiZy1bcmdiYSgyNDUsMjQ1LDI0NSwwLjE4KV0gYmFja2Ryb3AtYmx1ci1zbVwiIC8+XG5cbiAgICAgIHsvKiBIRUFERVIgKi99XG4gICAgICA8aGVhZGVyXG4gICAgICAgIGNsYXNzTmFtZT1cImZpeGVkIHRvcC0wIGxlZnQtMCByaWdodC0wIHotNTAgYmctYmxhY2svMzAgdGV4dC13aGl0ZSBweS0xLjUgcHgtNCBmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgc2hhZG93LXNtXCJcbiAgICAgICAgc3R5bGU9e3sgaGVpZ2h0OiBgJHtoZWFkZXJIZWlnaHR9cHhgIH19XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICA8aW1nIHNyYz1cIi90dXBsb2dvLnBuZ1wiIGFsdD1cIlRVUCBMb2dvXCIgY2xhc3NOYW1lPVwiaC03IHctN1wiIC8+XG4gICAgICAgICAgPGgxIGNsYXNzTmFtZT1cInRleHQteHMgbWQ6dGV4dC1zbSBmb250LWJvbGRcIj5cbiAgICAgICAgICAgIFRFQ0hOT0xPR0lDQUwgVU5JVkVSU0lUWSBPRiBUSEUgUEhJTElQUElORVNcbiAgICAgICAgICA8L2gxPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogU2lnbiBJbi9PdXQgc3RheXMgaW4gaGVhZGVyICh1bmNoYW5nZWQpICovfVxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgb25DbGljaz17dXNlciA/IGhhbmRsZVNpZ25PdXQgOiBoYW5kbGVTaWduSW59XG4gICAgICAgICAgY2xhc3NOYW1lPVwiYmctWyNmYWEwMjldIHRleHQtYmxhY2sgZm9udC1zZW1pYm9sZCBweC01IHB5LTIgcm91bmRlZC1mdWxsIHNoYWRvd1wiXG4gICAgICAgID5cbiAgICAgICAgICB7dXNlciA/IFwiU2lnbiBPdXRcIiA6IFwiU2lnbiBJblwifVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvaGVhZGVyPlxuXG4gICAgICB7LyogRk9PVEVSICovfVxuICAgICAgPGZvb3RlclxuICAgICAgICBjbGFzc05hbWU9XCJmaXhlZCBib3R0b20tMCBsZWZ0LTAgcmlnaHQtMCB6LTUwIGJnLWJsYWNrLzMwIHRleHQtY2VudGVyIHB5LTEgdGV4dC13aGl0ZSB0ZXh0LXhzXCJcbiAgICAgICAgc3R5bGU9e3sgaGVpZ2h0OiBgJHtmb290ZXJIZWlnaHR9cHhgIH19XG4gICAgICA+XG4gICAgICAgIERlc2lnbmVkIGJ5OiBFbGVjdHJvbmljcyBFbmdpbmVlcmluZyBEZXBhcnRtZW50XG4gICAgICA8L2Zvb3Rlcj5cblxuICAgICAgey8qIFNFUEFSQVRFIEtFWUJPQVJEIENPTlRBSU5FUiAtIEFESlVTVEVEIFBPU0lUSU9OICovfVxuICAgICAge3Nob3dLZXlib2FyZCAmJiAoXG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzc05hbWU9XCJmaXhlZCBsZWZ0LTAgcmlnaHQtMCBiZy13aGl0ZSBzaGFkb3ctMnhsIGJvcmRlci10IGJvcmRlci1ncmF5LTMwMFwiXG4gICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgIGJvdHRvbTogYCR7Zm9vdGVySGVpZ2h0ICsgNH1weGAsXG4gICAgICAgICAgICBsZWZ0OiBzaWRlYmFyT3BlbiA/IGAke3NpZGViYXJXaWR0aH1weGAgOiBcIjBweFwiLFxuICAgICAgICAgICAgaGVpZ2h0OiBgJHtrZXlib2FyZEhlaWdodH1weGAsXG4gICAgICAgICAgICB6SW5kZXg6IDU1LFxuICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICBcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1lbmQgcC0xIGJnLWdyYXktMTAwXCI+XG4gIDxidXR0b25cbiAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICBvbk1vdXNlRG93bj17KGUpID0+IHtcbiAgICAgIC8vIFBSRVZFTlQgaW5wdXQgYmx1ciBmcm9tIGZpcmluZ1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH19XG4gICAgb25DbGljaz17KGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgIC8vIDHvuI/ig6MgQ2xlYXIgUmVhY3Qgc3RhdGVcbiAgICAgIHNldElucHV0KFwiXCIpO1xuXG4gICAgICAvLyAy77iP4oOjIENsZWFyIHJlZnNcbiAgICAgIGtleWJvYXJkSW5wdXRSZWYuY3VycmVudCA9IFwiXCI7XG4gICAgICBjYXJldFBvc2l0aW9uUmVmLmN1cnJlbnQgPSAwO1xuXG4gICAgICAvLyAz77iP4oOjIENsZWFyIGtleWJvYXJkIGludGVybmFsIHZhbHVlXG4gICAgICBpZiAoa2V5Ym9hcmRSZWYuY3VycmVudCkge1xuICAgICAgICBrZXlib2FyZFJlZi5jdXJyZW50LnNldElucHV0KFwiXCIpO1xuICAgICAgICBrZXlib2FyZFJlZi5jdXJyZW50LnNldENhcmV0UG9zaXRpb24oMCk7XG4gICAgICB9XG5cbiAgICAgIC8vIDTvuI/ig6MgUmVzdG9yZSBmb2N1cyBzYWZlbHlcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIGlmIChpbnB1dFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgaW5wdXRSZWYuY3VycmVudC5mb2N1cygpO1xuICAgICAgICAgIGlucHV0UmVmLmN1cnJlbnQuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgMCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH19XG4gICAgY2xhc3NOYW1lPVwidGV4dC1yZWQtNjAwIGhvdmVyOnRleHQtcmVkLTgwMCBmb250LXNlbWlib2xkIHB4LTMgcHktMSByb3VuZGVkIHRleHQteHNcIlxuICA+XG4gICAgQ2xlYXIgQWxsXG4gIDwvYnV0dG9uPlxuPC9kaXY+XG5cbiAgICAgICAgICA8S2V5Ym9hcmRcbiAgICAgICAgICBrZXlib2FyZFJlZj17KHIpID0+IHtcbiAgICAgICAgICAgIGtleWJvYXJkUmVmLmN1cnJlbnQgPSByO1xuICAgICAgICAgIH19XG4gICAgICAgICAgbGF5b3V0TmFtZT17c2hpZnRBY3RpdmUgPyBcInNoaWZ0XCIgOiBcImRlZmF1bHRcIn1cbiAgICAgICAgICBsYXlvdXQ9e2xheW91dC5xd2VydHl9XG4gICAgICAgICAgb25LZXlQcmVzcz17KGJ1dHRvbikgPT4ge1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRUZXh0ID0gaW5wdXQ7XG4gICAgICAgICAgICBsZXQgY2FyZXRQb3MgPSBjYXJldFBvc2l0aW9uUmVmLmN1cnJlbnQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZVRleHQgPSAobmV3VGV4dCwgbmV3Q2FyZXRQb3MpID0+IHtcbiAgICAgICAgICAgIHNldElucHV0KG5ld1RleHQpO1xuICAgICAgICAgICAga2V5Ym9hcmRJbnB1dFJlZi5jdXJyZW50ID0gbmV3VGV4dDtcbiAgICAgICAgICAgIGNhcmV0UG9zaXRpb25SZWYuY3VycmVudCA9IG5ld0NhcmV0UG9zO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoaW5wdXRSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICAgIGlucHV0UmVmLmN1cnJlbnQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICBpbnB1dFJlZi5jdXJyZW50LnNldFNlbGVjdGlvblJhbmdlKG5ld0NhcmV0UG9zLCBuZXdDYXJldFBvcylcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyA9PT09PSBTSElGVCA9PT09PVxuICAgICAgICAgIC8vIFxuICAgICAgICAgIGlmIChidXR0b24gPT09IFwie3NoaWZ0fVwiIHx8IGJ1dHRvbiA9PT0gXCJ7bG9ja31cIikge1xuICAgICAgICAgICAgY29uc3QgbmV3U2hpZnRTdGF0ZSA9ICFzaGlmdEFjdGl2ZTtcbiAgICAgICAgICAgIHNldFNoaWZ0QWN0aXZlKG5ld1NoaWZ0U3RhdGUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBrZXlib2FyZFJlZi5jdXJyZW50Py5zZXRPcHRpb25zKHtcbiAgICAgICAgICAgICAgbGF5b3V0TmFtZTogbmV3U2hpZnRTdGF0ZSA/IFwic2hpZnRcIiA6IFwiZGVmYXVsdFwiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vID09PT09IEVOVEVSID09PT09XG4gICAgICAgICAgLy8gXG4gICAgICAgICAgaWYgKGJ1dHRvbiA9PT0gXCJ7ZW50ZXJ9XCIpIHtcbiAgICAgICAgICAgIGhhbmRsZVNlbmQoeyBwcmV2ZW50RGVmYXVsdDogKCkgPT4ge30gfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vID09PT09IEJBQ0tTUEFDRSA9PT09PVxuICAgICAgICAgIC8vIFxuICAgICAgICAgIGlmIChidXR0b24gPT09IFwie2JhY2tzcGFjZX1cIikge1xuICAgICAgICAgICAgaWYgKGNhcmV0UG9zID4gMCkge1xuICAgICAgICAgICAgICBjb25zdCBuZXdUZXh0ID1cbiAgICAgICAgICAgICAgY3VycmVudFRleHQuc2xpY2UoMCwgY2FyZXRQb3MgLSAxKSArXG4gICAgICAgICAgICAgIGN1cnJlbnRUZXh0LnNsaWNlKGNhcmV0UG9zKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHVwZGF0ZVRleHQobmV3VGV4dCwgY2FyZXRQb3MgLSAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gPT09PT0gU1BBQ0UgPT09PT1cbiAgICAgICAgICAvLyBcbiAgICAgICAgICBpZiAoYnV0dG9uID09PSBcIntzcGFjZX1cIikge1xuICAgICAgICAgICAgY29uc3QgbmV3VGV4dCA9XG4gICAgICAgICAgICBjdXJyZW50VGV4dC5zbGljZSgwLCBjYXJldFBvcykgK1xuICAgICAgICAgICAgXCIgXCIgK1xuICAgICAgICAgICAgY3VycmVudFRleHQuc2xpY2UoY2FyZXRQb3MpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB1cGRhdGVUZXh0KG5ld1RleHQsIGNhcmV0UG9zICsgMSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vID09PT09IFNQRUNJQUwgVE9LRU5TIEZST00gWU9VUiBMQVlPVVQgPT09PT1cbiAgICAgICAgICAvLyBcbiAgICAgICAgICBjb25zdCBzcGVjaWFsVG9rZW5zID0ge1xuICAgICAgICAgICAgXCJ7QH1cIjogXCJAXCIsXG4gICAgICAgICAgICBcInslfVwiOiBcIiVcIixcbiAgICAgICAgICAgIFwiez99XCI6IFwiP1wiLFxuICAgICAgICAgICAgXCJ7LH1cIjogXCIsXCIsXG4gICAgICAgICAgICBcInsufVwiOiBcIi5cIixcbiAgICAgICAgICB9O1xuICAgICAgICAgIGlmIChzcGVjaWFsVG9rZW5zW2J1dHRvbl0pIHtcbiAgICAgICAgICAgIGNvbnN0IGNoYXIgPSBzcGVjaWFsVG9rZW5zW2J1dHRvbl07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IG5ld1RleHQgPVxuICAgICAgICAgICAgY3VycmVudFRleHQuc2xpY2UoMCwgY2FyZXRQb3MpICtcbiAgICAgICAgICAgIGNoYXIgK1xuICAgICAgICAgICAgY3VycmVudFRleHQuc2xpY2UoY2FyZXRQb3MpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB1cGRhdGVUZXh0KG5ld1RleHQsIGNhcmV0UG9zICsgMSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgLy8gPT09PT0gSWdub3JlIHVua25vd24gY29udHJvbCBidXR0b25zID09PT09XG4gICAgaWYgKGJ1dHRvbi5zdGFydHNXaXRoKFwie1wiKSAmJiBidXR0b24uZW5kc1dpdGgoXCJ9XCIpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gPT09PT0gTm9ybWFsIGNoYXJhY3RlcnMgKGxldHRlcnMgJiBudW1iZXJzKSA9PT09PVxuICAgIGNvbnN0IG5ld1RleHQgPVxuICAgICAgY3VycmVudFRleHQuc2xpY2UoMCwgY2FyZXRQb3MpICtcbiAgICAgIGJ1dHRvbiArXG4gICAgICBjdXJyZW50VGV4dC5zbGljZShjYXJldFBvcyk7XG5cbiAgICB1cGRhdGVUZXh0KG5ld1RleHQsIGNhcmV0UG9zICsgYnV0dG9uLmxlbmd0aCk7XG4gIH19XG4gIHRoZW1lPVwiaGctdGhlbWUtZGVmYXVsdCBoZy10aGVtZS1jdXN0b21cIlxuICBkaXNwbGF5PXt7XG4gICAgXCJ7YmFja3NwYWNlfVwiOiBcIuKMq1wiLFxuICAgIFwie2VudGVyfVwiOiBcIuKGtVwiLFxuICAgIFwie3NoaWZ0fVwiOiBcIuKHp1wiLFxuICAgIFwie3NwYWNlfVwiOiBcIlNwYWNlXCIsXG4gICAgXCJ7QH1cIjogXCJAXCIsXG4gICAgXCJ7JX1cIjogXCIlXCIsXG4gICAgXCJ7P31cIjogXCI/XCIsXG4gICAgXCJ7LH1cIjogXCIsXCIsXG4gICAgXCJ7Ln1cIjogXCIuXCIsXG4gICAgXCJ7I31cIjogXCIjXCJcbiAgfX1cbiAgcHJldmVudE1vdXNlRG93bkRlZmF1bHQ9e3RydWV9XG4gIHByZXZlbnRNb3VzZVVwRGVmYXVsdD17dHJ1ZX1cbiAgbmV3TGluZU9uRW50ZXI9e2ZhbHNlfVxuICBhdXRvVXNlVG91Y2hFdmVudHM9e3RydWV9XG4vPlxuXG4gICAgICAgICAgey8qIHlvdXIgZXhpc3Rpbmcga2V5Ym9hcmQgc3R5bGVzIHJlbWFpbiB1bmNoYW5nZWQgKi99XG4gICAgICAgICAgPHN0eWxlIGpzeCBnbG9iYWw+e2BcbiAgICAgICAgICAgIC5zaW1wbGUta2V5Ym9hcmQge1xuICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBwYWRkaW5nOiAxMHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGhlaWdodDogY2FsYygxMDAlIC0gMzBweCkgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmhnLXRoZW1lLWN1c3RvbSB7XG4gICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGhlaWdodDogMTAwJSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW4gIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5oZy1idXR0b24ge1xuICAgICAgICAgICAgICBoZWlnaHQ6IDQ1cHggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDAgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDNweCByZ2JhKDAsIDAsIDAsIDAuMTUpICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIG1hcmdpbjogM3B4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlciAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlciAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4xcyBlYXNlICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIG1pbi13aWR0aDogMCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBmbGV4OiAxICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaGctcm93Om50aC1jaGlsZCgxKSAuaGctYnV0dG9uIHtcbiAgICAgICAgICAgICAgYmFja2dyb3VuZDogI2Y4ZjlmYSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBjb2xvcjogIzMzMyAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaGctcm93Om50aC1jaGlsZCgyKVxuICAgICAgICAgICAgICAuaGctYnV0dG9uOm5vdCguaGctYnV0dG9uLWJhY2tzcGFjZSk6bm90KC5oZy1idXR0b24tZW50ZXIpLFxuICAgICAgICAgICAgLmhnLXJvdzpudGgtY2hpbGQoMykgLmhnLWJ1dHRvbjpub3QoLmhnLWJ1dHRvbi1lbnRlciksXG4gICAgICAgICAgICAuaGctcm93Om50aC1jaGlsZCg0KSAuaGctYnV0dG9uOm5vdCguaGctYnV0dG9uLXNoaWZ0KSB7XG4gICAgICAgICAgICAgIGJhY2tncm91bmQ6ICNhYTM2MzYgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM4YTJjMmMgIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5oZy1yb3c6bnRoLWNoaWxkKDUpIC5oZy1idXR0b24ge1xuICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmFhMDI5ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGNvbG9yOiBibGFjayAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZDg4YzIwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaGctYnV0dG9uLXNoaWZ0LFxuICAgICAgICAgICAgLmhnLWJ1dHRvbi1iYWNrc3BhY2UsXG4gICAgICAgICAgICAuaGctYnV0dG9uLWVudGVyIHtcbiAgICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZhYTAyOSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBjb2xvcjogYmxhY2sgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2Q4OGMyMCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBmb250LXdlaWdodDogYm9sZCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmhnLWJ1dHRvbi1zcGFjZSB7XG4gICAgICAgICAgICAgIGZsZXgtZ3JvdzogMyAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBtYXgtd2lkdGg6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5oZy1idXR0b24tYmFja3NwYWNlLFxuICAgICAgICAgICAgLmhnLWJ1dHRvbi1lbnRlcixcbiAgICAgICAgICAgIC5oZy1idXR0b24tc2hpZnQge1xuICAgICAgICAgICAgICBtaW4td2lkdGg6IDcwcHggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgZmxleC1ncm93OiAwLjUgIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5oZy1idXR0b24tXFxcXHtAXFxcXH0sXG4gICAgICAgICAgICAuaGctYnV0dG9uLVxcXFx7JVxcXFx9LFxuICAgICAgICAgICAgLmhnLWJ1dHRvbi1cXFxce1xcXFw/XFxcXH0sXG4gICAgICAgICAgICAuaGctYnV0dG9uLVxcXFx7XFxcXCxcXFxcfSxcbiAgICAgICAgICAgIC5oZy1idXR0b24tXFxcXHtcXFxcLlxcXFx9IHtcbiAgICAgICAgICAgICAgbWluLXdpZHRoOiAzNXB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGZsZXgtZ3JvdzogMC4zICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaGctYnV0dG9uOmFjdGl2ZSxcbiAgICAgICAgICAgIC5oZy1idXR0b24uaGctYWN0aXZlQnRuIHtcbiAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDJweCkgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgYm94LXNoYWRvdzogMCAxcHggMnB4IHJnYmEoMCwgMCwgMCwgMC4xKSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmhnLXJvdzpudGgtY2hpbGQoMilcbiAgICAgICAgICAgICAgLmhnLWJ1dHRvbjphY3RpdmU6bm90KC5oZy1idXR0b24tYmFja3NwYWNlKTpub3QoLmhnLWJ1dHRvbi1lbnRlciksXG4gICAgICAgICAgICAuaGctcm93Om50aC1jaGlsZCgzKSAuaGctYnV0dG9uOmFjdGl2ZTpub3QoLmhnLWJ1dHRvbi1lbnRlciksXG4gICAgICAgICAgICAuaGctcm93Om50aC1jaGlsZCg0KSAuaGctYnV0dG9uOmFjdGl2ZTpub3QoLmhnLWJ1dHRvbi1zaGlmdCkge1xuICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjOGEyYzJjICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaGctYnV0dG9uLXNoaWZ0OmFjdGl2ZSxcbiAgICAgICAgICAgIC5oZy1idXR0b24tYmFja3NwYWNlOmFjdGl2ZSxcbiAgICAgICAgICAgIC5oZy1idXR0b24tZW50ZXI6YWN0aXZlLFxuICAgICAgICAgICAgLmhnLXJvdzpudGgtY2hpbGQoNSkgLmhnLWJ1dHRvbjphY3RpdmUsXG4gICAgICAgICAgICAuaGctYnV0dG9uLXNoaWZ0LmhnLWFjdGl2ZUJ0biB7XG4gICAgICAgICAgICAgIGJhY2tncm91bmQ6ICNkODhjMjAgIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5oZy1yb3dzIHtcbiAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbiAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW4gIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgcGFkZGluZzogMCA4cHggIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5oZy1yb3cge1xuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGZsZXg6IDEgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgbWluLWhlaWdodDogNDhweCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHggIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5oZy1idXR0b24tc3RhbmRhcmQge1xuICAgICAgICAgICAgICBtaW4td2lkdGg6IDM1cHggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgZmxleDogMSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICBtYXgtd2lkdGg6IDUwcHggIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5oZy1yb3c6bGFzdC1jaGlsZCB7XG4gICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDAgIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5oZy1idXR0b24tYmFja3NwYWNlIHtcbiAgICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaGctYnV0dG9uLWVudGVyIHtcbiAgICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuc2ltcGxlLWtleWJvYXJkLmhnLWxheW91dC1kZWZhdWx0IC5oZy1yb3cge1xuICAgICAgICAgICAgICBmbGV4LXdyYXA6IG5vd3JhcCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmhnLWJ1dHRvbiBzcGFuIHtcbiAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuZG90IHtcbiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgICAgIHdpZHRoOiA2cHg7XG4gICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICBhbmltYXRpb246IGRvdEJvdW5jZSAxLjFzIGluZmluaXRlIGVhc2UtaW4tb3V0O1xuICAgICAgICAgICAgb3BhY2l0eTogMC4zNTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5kb3Q6bnRoLWNoaWxkKDIpIHtcbiAgICAgICAgICAgIGFuaW1hdGlvbi1kZWxheTogMC4xMnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuZG90Om50aC1jaGlsZCgzKSB7XG4gICAgICAgICAgICBhbmltYXRpb24tZGVsYXk6IDAuMjRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQGtleWZyYW1lcyBkb3RCb3VuY2Uge1xuICAgICAgICAgICAgMCUsIDgwJSwgMTAwJSB7XG4gICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7XG4gICAgICAgICAgICBvcGFjaXR5OiAwLjM1O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgNDAlIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNHB4KTtcbiAgICAgICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgYH08L3N0eWxlPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBNQUlOICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtZnVsbCByZWxhdGl2ZSB6LTEwXCI+XG4gICAgICAgIHsvKiBTSURFQkFSICovfVxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3NOYW1lPVwiZml4ZWQgYmctWyNhYTM2MzZdIHRleHQtd2hpdGUgc2hhZG93LXhsIGZsZXggZmxleC1jb2wgcHgtNCBweS0zIHRyYW5zaXRpb24tdHJhbnNmb3JtIGR1cmF0aW9uLTMwMFwiXG4gICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgIHRvcDogaGVhZGVySGVpZ2h0LFxuICAgICAgICAgICAgYm90dG9tOiBmb290ZXJIZWlnaHQsXG4gICAgICAgICAgICB3aWR0aDogc2lkZWJhcldpZHRoLFxuICAgICAgICAgICAgdHJhbnNmb3JtOiBzaWRlYmFyT3BlbiA/IFwidHJhbnNsYXRlWCgwKVwiIDogYHRyYW5zbGF0ZVgoLTEwMCUpYCxcbiAgICAgICAgICAgIHpJbmRleDogNjAsXG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIHsvKiBCQUNLIEJVVFRPTiAqL31cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiByb3V0ZXIucHVzaCh1c2VyID8gXCIvbW9kZWxzXCIgOiBcIi9cIil9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSB0ZXh0LVsjZmFhMDI5XSB0cmFuc2l0aW9uIG1iLTNcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteGxcIj7ihpA8L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtc2VtaWJvbGRcIj5cbiAgICAgICAgICAgICAge3VzZXIgPyBcIkJhY2sgdG8gTWVudVwiIDogXCJCYWNrIHRvIEhvbWVcIn1cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8L2J1dHRvbj5cblxuICAgICAgICAgIHsvKiBcIisgTkVXIENIQVRcIiAqL31cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVOZXdDaGF0fVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLXdoaXRlIHRleHQtWyNhYTM2MzZdIGZvbnQtYm9sZCBweS0xIHJvdW5kZWQtZnVsbCBzaGFkb3cgbWItNiB0ZXh0LXNtXCJcbiAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblRvcDogXCItNHB4XCIgfX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICArIE5ldyBDaGF0XG4gICAgICAgICAgPC9idXR0b24+XG5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIG9wYWNpdHktODAgbWItM1wiPlJlY2VudHM8L3A+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLVsxcHhdIGJnLXdoaXRlLzQwIG1iLTRcIj48L2Rpdj5cbiAgICAgICAgICBcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgZ2FwLTIgb3ZlcmZsb3cteS1hdXRvXCI+XG4gICAgICAgICAgICB7cmVjZW50c1RvU2hvdy5tYXAoKHQpID0+IChcbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICBrZXk9e3QuaWR9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtbGVmdCB0ZXh0LXhzIGJnLXdoaXRlLzEwIGhvdmVyOmJnLXdoaXRlLzIwIHB4LTMgcHktMiByb3VuZGVkXCJcbiAgICAgICAgICAgICAgb25DbGljaz17YXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh1c2VyICYmICFpc1B1YmxpY0FjY2Vzcykge1xuICAgICAgICAgIC8vIExvZ2dlZC1pbjogbG9hZCBmcm9tIEZpcmVzdG9yZVxuICAgICAgICAgIHNldFRocmVhZElkKHQuaWQpO1xuICAgICAgICAgIGNvbnN0IG1zZ3MgPSBhd2FpdCBnZXRUaHJlYWRNZXNzYWdlcyh1c2VyLnVpZCwgbW9kZWxLZXksIHQuaWQpO1xuICAgICAgICAgIHNldE1lc3NhZ2VzKG1zZ3MubWFwKChtKSA9PiAoeyByb2xlOiBtLnJvbGUsIGNvbnRlbnQ6IG0uY29udGVudCB9KSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEd1ZXN0OiBsb2FkIGZyb20gbG9jYWxTdG9yYWdlIG1lbW9yeVxuICAgICAgICAgIC8vIFxuICAgICAgICAgIHNldEd1ZXN0VGhyZWFkSWQodC5pZCk7XG4gICAgICAgICAgc2V0TWVzc2FnZXModC5tZXNzYWdlcyB8fCBbXSk7XG4gICAgICAgIH1cbiAgICAgIH19XG4gICAgICA+XG4gICAgICAgIHt0LnRpdGxlIHx8IFwiQ2hhdFwifVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICkpfVxuICAgICAgPC9kaXY+XG5cblxuXG4gICAgICAgICAgey8qIFVTRVIgSU5GTyAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LWF1dG8gZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMgYm9yZGVyLXQgYm9yZGVyLXdoaXRlLzMwIHB0LTRcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC0xMCB3LTEwIGJnLXdoaXRlLzIwIHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgICAgICA8aW1nIHNyYz1cIi90dXBpLWxvZ28ucG5nXCIgY2xhc3NOYW1lPVwiaC04IHctOCByb3VuZGVkLWZ1bGxcIiAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtYm9sZFwiPntyZWFsTmFtZX08L3A+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgb3BhY2l0eS04MFwiPlxuICAgICAgICAgICAgICAgIHt1c2VyID8gXCJMb2dnZWQgSW5cIiA6IFwiR3Vlc3QgTW9kZVwifVxuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIFNJREVCQVIgVE9HR0xFICovfVxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2lkZWJhck9wZW4oIXNpZGViYXJPcGVuKX1cbiAgICAgICAgICBjbGFzc05hbWU9XCJmaXhlZCBiZy1bI2FhMzYzNl0gdGV4dC13aGl0ZSBweC0yIHB5LTMgcm91bmRlZC1yLWZ1bGwgc2hhZG93IHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTMwMFwiXG4gICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgIHRvcDogYGNhbGMoJHtoZWFkZXJIZWlnaHR9cHggKyAzMCUpYCxcbiAgICAgICAgICAgIGxlZnQ6IHNpZGViYXJPcGVuID8gYCR7c2lkZWJhcldpZHRofXB4YCA6IFwiMHB4XCIsXG4gICAgICAgICAgICB0cmFuc2Zvcm06IFwidHJhbnNsYXRlWSgtNTAlKVwiLFxuICAgICAgICAgICAgekluZGV4OiA3MCxcbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAge3NpZGViYXJPcGVuID8gXCLil4BcIiA6IFwi4pa2XCJ9XG4gICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgIHsvKiBDSEFUIEFSRUEgKi99XG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzc05hbWU9e2BmbGV4LTEgcmVsYXRpdmUgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMzAwICR7XG4gICAgICAgICAgICBzaWRlYmFyT3BlbiA/IGBtbC1bMjI0cHhdYCA6IFwibWwtMFwiXG4gICAgICAgICAgfWB9XG4gICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgIG1hcmdpblRvcDogYCR7aGVhZGVySGVpZ2h0fXB4YCxcbiAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogc2hvd0tleWJvYXJkXG4gICAgICAgICAgICAgID8gYCR7Zm9vdGVySGVpZ2h0ICsga2V5Ym9hcmRIZWlnaHQgKyBrZXlib2FyZFBhZGRpbmcgKyBpbnB1dEJhckhlaWdodCArIDR9cHhgXG4gICAgICAgICAgICAgIDogYCR7Zm9vdGVySGVpZ2h0fXB4YCxcbiAgICAgICAgICAgIHRyYW5zaXRpb246IFwibWFyZ2luLWJvdHRvbSAwLjNzIGVhc2UtaW4tb3V0XCIsXG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIHsvKiDinIUgR2VuZXJhdGUgUVIgYnV0dG9uIGluc2lkZSBjaGF0IGFyZWEgKGFkZGVkKSAqL31cbiAgICAgICAgICB7Lyog4pyFIENoYXQgVG9wIEJhciAoUVIgYnV0dG9uKSDigJQgcHJldmVudHMgb3ZlcmxhcCAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB4LTYgcHQtMyBmbGV4IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUdlbmVyYXRlUVJ9XG4gICAgICAgICAgZGlzYWJsZWQ9e21lc3NhZ2VzLmxlbmd0aCA9PT0gMH1cbiAgICAgICAgICBjbGFzc05hbWU9e2BweC00IHB5LTIgcm91bmRlZC1mdWxsIHNoYWRvdyBmb250LXNlbWlib2xkIHRleHQteHMgJHtcbiAgICAgICAgICAgIG1lc3NhZ2VzLmxlbmd0aCA9PT0gMFxuICAgICAgICAgICAgPyBcImJnLXdoaXRlLzUwIHRleHQtZ3JheS03MDBcIlxuICAgICAgICAgICAgOiBcImJnLXdoaXRlLzkwIHRleHQtYmxhY2tcIlxuICAgICAgICAgIH1gfVxuICAgICAgICAgIHRpdGxlPXtcbiAgICAgICAgICAgIG1lc3NhZ2VzLmxlbmd0aCA9PT0gMFxuICAgICAgICAgICAgPyBcIlN0YXJ0IGEgY29udmVyc2F0aW9uIGZpcnN0XCJcbiAgICAgICAgICAgIDogXCJHZW5lcmF0ZSBRUiBmb3IgdGhpcyBjb252ZXJzYXRpb25cIlxuICAgICAgICAgIH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICBHZW5lcmF0ZSBRUlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7LyogTUVTU0FHRVMgKi99XG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQtMCBweC02IG92ZXJmbG93LXktYXV0byBmbGV4IGZsZXgtY29sXCJcbiAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgIHRvcDogXCI1MnB4XCIsXG4gICAgICAgICAgICAgIHBhZGRpbmdUb3A6IFwiNnB4XCIsXG4gICAgICAgICAgICAgIHBhZGRpbmdCb3R0b206IHNob3dLZXlib2FyZFxuICAgICAgICAgICAgICAgID8gYCR7aW5wdXRCYXJIZWlnaHQgKyBrZXlib2FyZFBhZGRpbmcgKyBrZXlib2FyZEhlaWdodH1weGBcbiAgICAgICAgICAgICAgICA6IGAke2lucHV0QmFySGVpZ2h0fXB4YCxcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAge21lc3NhZ2VzLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgZmxleCBqdXN0aWZ5LWNlbnRlciBpdGVtcy1jZW50ZXIgdGV4dC1jZW50ZXIgdGV4dC1zbSBmb250LWJvbGQgdGV4dC1bI2FhMzYzNl1cIj5cbiAgICAgICAgICAgICAgICBIZWxsbywge25pY2tuYW1lfSFcbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICBtZXNzYWdlcy5tYXAoKG1zZywgaSkgPT4gKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGtleT17aX1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YG1iLTQgdy1mdWxsICR7XG4gICAgICAgICAgICAgICAgICAgIG1zZy5yb2xlID09PSBcInVzZXJcIiA/IFwidGV4dC1yaWdodFwiIDogXCJ0ZXh0LWxlZnRcIlxuICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BpbmxpbmUtYmxvY2sgcHgtNCBweS0zIHJvdW5kZWQtMnhsIHNoYWRvdy1sZyB0ZXh0LXNtIG1heC13LVs4NSVdICR7XG4gICAgICAgICAgICAgICAgICAgICAgbXNnLnJvbGUgPT09IFwidXNlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICA/IFwiYmctWyNhYTM2MzZdIHRleHQtd2hpdGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgOiBcImJnLXdoaXRlIHRleHQtYmxhY2sgYm9yZGVyIGJvcmRlci1ncmF5LTIwMFwiXG4gICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgIHdoaXRlU3BhY2U6IFwicHJlLXdyYXBcIixcbiAgICAgICAgICAgICAgICAgICAgICB3b3JkQnJlYWs6IFwiYnJlYWstd29yZFwiLFxuICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93V3JhcDogXCJicmVhay13b3JkXCIsXG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHttc2cucm9sZSA9PT0gXCJ1c2VyXCIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3aGl0ZXNwYWNlLXByZS13cmFwIGJyZWFrLXdvcmRzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7bXNnLmNvbnRlbnR9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgPFNpbXBsZU1hcmtkb3duUmVuZGVyZXIgdGV4dD17bXNnLmNvbnRlbnR9IC8+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgIHt0aGlua2luZyAmJiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNCB3LWZ1bGwgdGV4dC1sZWZ0XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbmxpbmUtYmxvY2sgcHgtNCBweS0zIHJvdW5kZWQtMnhsIHNoYWRvdy1sZyB0ZXh0LXNtIG1heC13LVs4NSVdIGJnLXdoaXRlIHRleHQtYmxhY2sgYm9yZGVyIGJvcmRlci1ncmF5LTIwMFwiPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZG90XCI+Ljwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImRvdFwiPi48L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJkb3RcIj4uPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8ZGl2IHJlZj17ZW5kUmVmfSAvPlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgey8qIOKchSBRUiBNT0RBTCAoYWRkZWQpICovfVxuICAgICAgICAgIHtzaGFyZU9wZW4gJiYgc2hhcmVJZCAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpeGVkIGluc2V0LTAgei1bOTBdIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC0wIGJnLWJsYWNrLzUwXCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaGFyZU9wZW4oZmFsc2UpfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlIGJnLXdoaXRlIHJvdW5kZWQtMnhsIHNoYWRvdy0yeGwgYm9yZGVyIHAtNSB3LVszMjBweF0gbWF4LXctWzkwdnddXCI+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LWJvbGQgdGV4dC1jZW50ZXIgbWItMVwiPlxuICAgICAgICAgICAgICAgICAgU2NhbiB0byB2aWV3IG9uIHBob25lXG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTYwMCB0ZXh0LWNlbnRlciBtYi0zXCI+XG4gICAgICAgICAgICAgICAgICBUaGlzIG9wZW5zIGEgZG9jdW1lbnQtc3R5bGUgcGFnZSB0aGF0IGNhbiBiZSBzYXZlZCBhcyBQREYuXG4gICAgICAgICAgICAgICAgPC9wPlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICA8UVJDb2RlQ2FudmFzIHZhbHVlPXtzaGFyZVVybH0gc2l6ZT17MjIwfSBpbmNsdWRlTWFyZ2luPXt0cnVlfSAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC00IGZsZXggZ2FwLTJcIj5cbiAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleC0xIGJnLVsjYWEzNjM2XSB0ZXh0LXdoaXRlIHRleHQteHMgZm9udC1zZW1pYm9sZCBweS0yIHJvdW5kZWQteGxcIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKCFzaGFyZVVybCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5jbGlwYm9hcmQ/LndyaXRlVGV4dChzaGFyZVVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgdG9hc3Quc3VjY2VzcyhcIkxpbmsgY29waWVkIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgQ29weSBMaW5rXG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cblxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4LTEgYmctZ3JheS0yMDAgdGV4dC14cyBmb250LXNlbWlib2xkIHB5LTIgcm91bmRlZC14bFwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNoYXJlT3BlbihmYWxzZSl9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIENsb3NlXG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuXG4gICAgICAgICAgey8qIElOUFVUIEJBUiAqL31cbiAgICAgICAgICA8Zm9ybVxuICAgICAgICAgICAgcmVmPXtpbnB1dEJhclJlZn1cbiAgICAgICAgICAgIG9uU3VibWl0PXtoYW5kbGVTZW5kfVxuICAgICAgICAgICAgY2xhc3NOYW1lPXtgZml4ZWQgbGVmdC0wIHotNTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZ2FwLTMgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMzAwICR7XG4gICAgICAgICAgICAgIHNpZGViYXJPcGVuXG4gICAgICAgICAgICAgICAgPyBcIm1sLVsyMjRweF0gdy1bY2FsYygxMDAlLTE0cmVtKV0gcHgtNlwiXG4gICAgICAgICAgICAgICAgOiBcIm1sLTAgdy1mdWxsIHB4LTZcIlxuICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICBib3R0b206IHNob3dLZXlib2FyZFxuICAgICAgICAgICAgICAgID8gYCR7Zm9vdGVySGVpZ2h0ICsga2V5Ym9hcmRIZWlnaHQgKyBrZXlib2FyZFBhZGRpbmcgKyA0fXB4YFxuICAgICAgICAgICAgICAgIDogYCR7Zm9vdGVySGVpZ2h0ICsgOH1weGAsXG4gICAgICAgICAgICAgIHRyYW5zaXRpb246IFwiYm90dG9tIDAuM3MgZWFzZS1pbi1vdXRcIixcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgIHJlZj17aW5wdXRSZWZ9XG4gICAgICAgICAgICAgIHZhbHVlPXtpbnB1dH1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgY29uc3QgY2FyZXQgPSBlLnRhcmdldC5zZWxlY3Rpb25TdGFydDtcbiAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgIHNldElucHV0KHZhbHVlKTtcbiAgICAgICAgICAgICAgICAga2V5Ym9hcmRJbnB1dFJlZi5jdXJyZW50ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgIGNhcmV0UG9zaXRpb25SZWYuY3VycmVudCA9IGNhcmV0O1xuICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgaWYgKGtleWJvYXJkUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICAgIGtleWJvYXJkUmVmLmN1cnJlbnQuc2V0SW5wdXQodmFsdWUpO1xuICAgICAgICAgICAgICAgICAga2V5Ym9hcmRSZWYuY3VycmVudC5zZXRDYXJldFBvc2l0aW9uKGNhcmV0KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGNhcmV0ID0gZS50YXJnZXQuc2VsZWN0aW9uU3RhcnQ7XG4gICAgICAgICAgICAgIGNhcmV0UG9zaXRpb25SZWYuY3VycmVudCA9IGNhcmV0O1xuICAgICAgICAgICAgICBrZXlib2FyZFJlZi5jdXJyZW50Py5zZXRDYXJldFBvc2l0aW9uKGNhcmV0KTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBvbktleVVwPXsoZSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBjYXJldCA9IGUudGFyZ2V0LnNlbGVjdGlvblN0YXJ0O1xuICAgICAgICAgICAgICBjYXJldFBvc2l0aW9uUmVmLmN1cnJlbnQgPSBjYXJldDtcbiAgICAgICAgICAgICAga2V5Ym9hcmRSZWYuY3VycmVudD8uc2V0Q2FyZXRQb3NpdGlvbihjYXJldCk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgICBvbkZvY3VzPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0U2hvd0tleWJvYXJkKHRydWUpO1xuICAgICAgICAgICAgICAgIGlmIChjaGF0Q29udGFpbmVyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICAgIGxhc3RTY3JvbGxUb3BSZWYuY3VycmVudCA9IGNoYXRDb250YWluZXJSZWYuY3VycmVudC5zY3JvbGxUb3A7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICBvbkJsdXI9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNLZXlib2FyZENsaWNrID0gZS5yZWxhdGVkVGFyZ2V0Py5jbG9zZXN0KFwiLnNpbXBsZS1rZXlib2FyZFwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpc0lucHV0Q2xpY2sgPSBlLnJlbGF0ZWRUYXJnZXQ/LmNsb3Nlc3QoXG4gICAgICAgICAgICAgICAgICAnaW5wdXRbcGxhY2Vob2xkZXIqPVwiQXNrXCJdJ1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNTaWRlYmFyQ2xpY2sgPSBlLnJlbGF0ZWRUYXJnZXQ/LmNsb3Nlc3QoXG4gICAgICAgICAgICAgICAgICBcIi5maXhlZC5iZy1cXFxcW1xcXFwjYWEzNjM2XFxcXF1cIlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNTaWRlYmFyVG9nZ2xlQ2xpY2sgPSBlLnJlbGF0ZWRUYXJnZXQ/LmNsb3Nlc3QoXG4gICAgICAgICAgICAgICAgICBcImJ1dHRvbi5maXhlZC5iZy1cXFxcW1xcXFwjYWEzNjM2XFxcXF1cIlxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAhaXNLZXlib2FyZENsaWNrICYmXG4gICAgICAgICAgICAgICAgICAhaXNJbnB1dENsaWNrICYmXG4gICAgICAgICAgICAgICAgICAhaXNTaWRlYmFyQ2xpY2sgJiZcbiAgICAgICAgICAgICAgICAgICFpc1NpZGViYXJUb2dnbGVDbGlja1xuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldFNob3dLZXlib2FyZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2BBc2sgJHttb2RlbEtleS50b1VwcGVyQ2FzZSgpfS4uLmB9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBweS0zIHB4LTUgcm91bmRlZC1mdWxsIGJnLXdoaXRlLzk1IG91dGxpbmUtbm9uZSBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHNoYWRvdy1zbSB0ZXh0LXNtIGZvY3VzOmJvcmRlci1bI2FhMzYzNl0gZm9jdXM6cmluZy0xIGZvY3VzOnJpbmctWyNhYTM2MzZdIHRyYW5zaXRpb25cIlxuICAgICAgICAgICAgICBkaXNhYmxlZD17c2VuZGluZ31cbiAgICAgICAgICAgIC8+XG5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXG4gICAgICAgICAgICAgIGRpc2FibGVkPXtzZW5kaW5nIHx8ICFpbnB1dC50cmltKCl9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLVsjYWEzNjM2XSB0ZXh0LXdoaXRlIHB4LTUgcHktMyByb3VuZGVkLWZ1bGwgdGV4dC1zbSBzaGFkb3dcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBTZW5kXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsInVzZUNhbGxiYWNrIiwiUVJDb2RlQ2FudmFzIiwidXNlUm91dGVyIiwiYXV0aCIsIm9uQXV0aFN0YXRlQ2hhbmdlZCIsInNpZ25PdXQiLCJ0b2FzdCIsImdldFVzZXJQcm9maWxlIiwiY3JlYXRlVGhyZWFkIiwiZ2V0UmVjZW50VGhyZWFkcyIsImdldFRocmVhZE1lc3NhZ2VzIiwiYXBwZW5kVGhyZWFkTWVzc2FnZSIsImtlZXBPbmx5TGFzdE5UaHJlYWRzIiwidG91Y2hUaHJlYWQiLCJLZXlib2FyZCIsImxheW91dCIsInF3ZXJ0eSIsImRlZmF1bHQiLCJzaGlmdCIsIlNpbXBsZU1hcmtkb3duUmVuZGVyZXIiLCJ0ZXh0IiwibGluZXMiLCJzcGxpdCIsIm1hcCIsImxpbmUiLCJpbmRleCIsInRyaW0iLCJiciIsImNvbnRlbnQiLCJib2xkUmVnZXgiLCJwYXJ0cyIsImxhc3RJbmRleCIsIm1hdGNoIiwiZXhlYyIsInB1c2giLCJzcGFuIiwic3Vic3RyaW5nIiwic3Ryb25nIiwibGVuZ3RoIiwiZGl2IiwiY2xhc3NOYW1lIiwiZm9ybWF0QUlSZXNwb25zZSIsImNsZWFuZWQiLCJzdGFydHNXaXRoIiwiZW5kc1dpdGgiLCJqc29uIiwiSlNPTiIsInBhcnNlIiwiZ2VuZXJhdGVkX3RleHQiLCJyZXNwb25zZSIsImFuc3dlciIsIm91dHB1dCIsIm1lc3NhZ2UiLCJzdHJpbmdpZnkiLCJyZXBsYWNlIiwiQ2hhdFBhZ2UiLCJyb3V0ZXIiLCJtb2RlbCIsInB1YmxpYyIsImlzUHVibGljIiwicXVlcnkiLCJtb2RlbENvbmZpZ3MiLCJlY2UiLCJ1cmwiLCJ0b2tlbiIsIm5hdiIsImluZm8iLCJtb2RlbEtleSIsInNlbGVjdGVkTW9kZWwiLCJpc1B1YmxpY0FjY2VzcyIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwidXNlciIsInNldFVzZXIiLCJuaWNrbmFtZSIsInNldE5pY2tuYW1lIiwicmVhbE5hbWUiLCJzZXRSZWFsTmFtZSIsIm1lc3NhZ2VzIiwic2V0TWVzc2FnZXMiLCJpbnB1dCIsInNldElucHV0Iiwic2VuZGluZyIsInNldFNlbmRpbmciLCJzaGlmdEFjdGl2ZSIsInNldFNoaWZ0QWN0aXZlIiwiZW5kUmVmIiwic2lkZWJhck9wZW4iLCJzZXRTaWRlYmFyT3BlbiIsInJlY2VudFRocmVhZHMiLCJzZXRSZWNlbnRUaHJlYWRzIiwidGhyZWFkSWQiLCJzZXRUaHJlYWRJZCIsInRoaW5raW5nIiwic2V0VGhpbmtpbmciLCJndWVzdFRocmVhZHMiLCJzZXRHdWVzdFRocmVhZHMiLCJndWVzdFRocmVhZElkIiwic2V0R3Vlc3RUaHJlYWRJZCIsInNob3dLZXlib2FyZCIsInNldFNob3dLZXlib2FyZCIsImtleWJvYXJkUmVmIiwibGFzdFNjcm9sbFRvcFJlZiIsImtleWJvYXJkU2Nyb2xsVGhyZXNob2xkIiwiY2hhdENvbnRhaW5lclJlZiIsImlucHV0QmFyUmVmIiwia2V5Ym9hcmRJbnB1dFJlZiIsImlucHV0UmVmIiwiY2FyZXRQb3NpdGlvblJlZiIsInNoYXJlSWQiLCJzZXRTaGFyZUlkIiwic2hhcmVPcGVuIiwic2V0U2hhcmVPcGVuIiwiR1VFU1RfS0VZIiwibG9hZEd1ZXN0VGhyZWFkcyIsInJhdyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzYXZlR3Vlc3RUaHJlYWRzIiwidGhyZWFkcyIsInNldEl0ZW0iLCJzbGljZSIsInVuc3ViIiwidSIsInByb2ZpbGUiLCJ1aWQiLCJuYW1lIiwiZGlzcGxheU5hbWUiLCJlbWFpbCIsIm5pY2siLCJyZWNlbnRzIiwiY3VycmVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImhhbmRsZVNjcm9sbCIsImNoYXRDb250YWluZXIiLCJjdXJyZW50U2Nyb2xsVG9wIiwic2Nyb2xsVG9wIiwic2Nyb2xsRGlmZiIsIk1hdGgiLCJhYnMiLCJpbnB1dEVsZW1lbnQiLCJibHVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzY3JvbGxJbnRvVmlldyIsImJlaGF2aW9yIiwiaGFuZGxlU2VuZCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInRyaW1tZWQiLCJ1c2VyTXNnIiwicm9sZSIsInVwZGF0ZWRNZXNzYWdlcyIsImlkIiwiYWN0aXZlVGhyZWFkSWQiLCJlcnJvck1zZyIsImRpc21pc3MiLCJyZXF1ZXN0T3B0aW9ucyIsIm1ldGhvZCIsImhlYWRlcnMiLCJyZXF1ZXN0Rm9ybWF0cyIsImlucHV0cyIsInBhcmFtZXRlcnMiLCJtYXhfbmV3X3Rva2VucyIsInRlbXBlcmF0dXJlIiwibWF4X2xlbmd0aCIsInJlcGx5IiwibGFzdEVycm9yIiwiY29udHJvbGxlciIsIkFib3J0Q29udHJvbGxlciIsInRpbWVvdXRJZCIsInNldFRpbWVvdXQiLCJhYm9ydCIsImkiLCJib2R5IiwicmVzIiwiZmV0Y2giLCJzaWduYWwiLCJvayIsIkVycm9yIiwic3RhdHVzIiwiZXJyIiwiY2xlYXJUaW1lb3V0IiwiYWlNc2ciLCJmaW5hbE1lc3NhZ2VzIiwic3VjY2VzcyIsImVycm9yIiwiaGFuZGxlTmV3Q2hhdCIsImhhc1JlYWxDb252ZXJzYXRpb24iLCJzb21lIiwibSIsImN1cnJlbnRJZCIsIm1zZyIsImZpcnN0VXNlck1zZyIsImZpbmQiLCJuZXdUaHJlYWQiLCJEYXRlIiwibm93IiwidG9TdHJpbmciLCJ0aXRsZSIsInVwZGF0ZWRBdCIsInVwZGF0ZWQiLCJzb3J0IiwiYSIsImIiLCJoYW5kbGVTaWduT3V0IiwidGhlbiIsImhhbmRsZVNpZ25JbiIsImhhbmRsZUdlbmVyYXRlUVIiLCJjcmVhdGVkQXQiLCJkYXRhIiwiaGVhZGVySGVpZ2h0IiwiZm9vdGVySGVpZ2h0Iiwic2lkZWJhcldpZHRoIiwia2V5Ym9hcmRIZWlnaHQiLCJpbnB1dEJhckhlaWdodCIsImtleWJvYXJkUGFkZGluZyIsInNoYXJlVXJsIiwid2luZG93IiwibG9jYXRpb24iLCJvcmlnaW4iLCJyZWNlbnRzVG9TaG93Iiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJoZWFkZXIiLCJoZWlnaHQiLCJpbWciLCJzcmMiLCJhbHQiLCJoMSIsImJ1dHRvbiIsIm9uQ2xpY2siLCJmb290ZXIiLCJib3R0b20iLCJsZWZ0IiwiekluZGV4IiwidHlwZSIsIm9uTW91c2VEb3duIiwic3RvcFByb3BhZ2F0aW9uIiwic2V0Q2FyZXRQb3NpdGlvbiIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImZvY3VzIiwic2V0U2VsZWN0aW9uUmFuZ2UiLCJyIiwibGF5b3V0TmFtZSIsIm9uS2V5UHJlc3MiLCJjdXJyZW50VGV4dCIsImNhcmV0UG9zIiwidXBkYXRlVGV4dCIsIm5ld1RleHQiLCJuZXdDYXJldFBvcyIsIm5ld1NoaWZ0U3RhdGUiLCJzZXRPcHRpb25zIiwic3BlY2lhbFRva2VucyIsImNoYXIiLCJ0aGVtZSIsImRpc3BsYXkiLCJwcmV2ZW50TW91c2VEb3duRGVmYXVsdCIsInByZXZlbnRNb3VzZVVwRGVmYXVsdCIsIm5ld0xpbmVPbkVudGVyIiwiYXV0b1VzZVRvdWNoRXZlbnRzIiwidG9wIiwid2lkdGgiLCJ0cmFuc2Zvcm0iLCJtYXJnaW5Ub3AiLCJwIiwidCIsIm1zZ3MiLCJtYXJnaW5Cb3R0b20iLCJ0cmFuc2l0aW9uIiwiZGlzYWJsZWQiLCJwYWRkaW5nVG9wIiwicGFkZGluZ0JvdHRvbSIsIndoaXRlU3BhY2UiLCJ3b3JkQnJlYWsiLCJvdmVyZmxvd1dyYXAiLCJyZWYiLCJ2YWx1ZSIsInNpemUiLCJpbmNsdWRlTWFyZ2luIiwibmF2aWdhdG9yIiwiY2xpcGJvYXJkIiwid3JpdGVUZXh0IiwiZm9ybSIsIm9uU3VibWl0Iiwib25DaGFuZ2UiLCJ0YXJnZXQiLCJjYXJldCIsInNlbGVjdGlvblN0YXJ0Iiwib25LZXlVcCIsIm9uRm9jdXMiLCJvbkJsdXIiLCJpc0tleWJvYXJkQ2xpY2siLCJyZWxhdGVkVGFyZ2V0IiwiY2xvc2VzdCIsImlzSW5wdXRDbGljayIsImlzU2lkZWJhckNsaWNrIiwiaXNTaWRlYmFyVG9nZ2xlQ2xpY2siLCJwbGFjZWhvbGRlciIsInRvVXBwZXJDYXNlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-browser)/./pages/chat.js\n"));

/***/ })

});